{"file_contents":{"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","path":null,"size_bytes":894,"size_tokens":null},"client/src/components/proposal-preview.tsx":{"content":"import { forwardRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Clock, Shield, AlertCircle, MapPin, Layers } from \"lucide-react\";\n\ninterface CompanyInfo {\n  companyName?: string | null;\n  companyAddress?: string | null;\n  companyPhone?: string | null;\n  companyLogo?: string | null;\n  licenseNumber?: string | null;\n}\n\ninterface LineItem {\n  serviceId: string;\n  tradeName: string;\n  jobTypeName: string;\n  scope: string[];\n  priceRange: { low: number; high: number };\n  estimatedDays: { low: number; high: number };\n  warranty?: string;\n  exclusions?: string[];\n}\n\ninterface ProposalPreviewProps {\n  data: {\n    clientName?: string;\n    address?: string;\n    jobTypeName?: string;\n    scope?: string[];\n    priceRange?: { low: number; high: number };\n    estimatedDays?: { low: number; high: number };\n    warranty?: string;\n    exclusions?: string[];\n    regionalInfo?: {\n      state: string;\n      abbrev: string;\n      region: string;\n      multiplier: number;\n    } | null;\n    lineItems?: LineItem[];\n  };\n  blurred?: boolean;\n  onUnlock?: () => void;\n  companyInfo?: CompanyInfo;\n}\n\nconst ProposalPreview = forwardRef<HTMLDivElement, ProposalPreviewProps>(\n  ({ data, blurred = true, onUnlock, companyInfo }, ref) => {\n    const today = new Date().toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    });\n\n    const hasMultipleServices = data.lineItems && data.lineItems.length > 1;\n    const lineItems = data.lineItems || [];\n\n    return (\n      <div ref={ref} className=\"bg-white shadow-xl min-h-[800px] w-full max-w-[800px] mx-auto p-8 md:p-12 relative text-slate-800 text-sm leading-relaxed font-serif\">\n        {/* Preview Mode Banner */}\n        {blurred && (\n          <div className=\"absolute top-0 left-0 right-0 bg-amber-500 text-white text-center py-2 px-4 text-xs font-bold uppercase tracking-wide z-10 flex items-center justify-center gap-2\">\n            <AlertCircle className=\"w-4 h-4\" />\n            Preview Mode â€“ Some content is hidden. Unlock to see full proposal.\n          </div>\n        )}\n\n        {/* DRAFT Watermark */}\n        {blurred && (\n          <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none z-0 overflow-hidden\">\n            <span className=\"text-[180px] font-bold text-slate-200/40 tracking-wider -rotate-45 select-none whitespace-nowrap\">\n              DRAFT\n            </span>\n          </div>\n        )}\n\n        {/* Header */}\n        <div className={cn(\"flex justify-between items-start border-b-2 border-slate-900 pb-6 mb-8\", blurred && \"mt-8\")}>\n          <div>\n            <h1 className=\"text-3xl font-heading font-bold text-slate-900 uppercase tracking-wide\">Proposal</h1>\n            <p className=\"text-slate-500 mt-1\">#{Math.floor(Math.random() * 10000)}</p>\n          </div>\n          <div className=\"text-right flex items-start gap-4 justify-end\">\n            {companyInfo?.companyLogo && (\n              <img \n                src={companyInfo.companyLogo} \n                alt=\"Company logo\" \n                className=\"w-16 h-16 object-contain\"\n                data-testid=\"img-proposal-logo\"\n              />\n            )}\n            <div>\n              <div className=\"text-xl font-bold text-slate-900\">\n                {companyInfo?.companyName || \"Your Company Name\"}\n              </div>\n              <div className=\"text-slate-500 text-xs mt-1 whitespace-pre-line\">\n                {companyInfo?.companyAddress || \"123 Contractor Way\\nCityville, ST 12345\"}\n                {companyInfo?.companyPhone && (\n                  <>\n                    <br />\n                    {companyInfo.companyPhone}\n                  </>\n                )}\n                {companyInfo?.licenseNumber && (\n                  <>\n                    <br />\n                    <span className=\"text-slate-600\">Lic# {companyInfo.licenseNumber}</span>\n                  </>\n                )}\n                {!companyInfo?.companyAddress && !companyInfo?.companyPhone && (\n                  <>\n                    <br />\n                    (555) 123-4567\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Client Info */}\n        <div className=\"grid grid-cols-2 gap-8 mb-8\">\n          <div>\n            <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1\">Prepared For</h3>\n            <div className=\"font-bold text-lg\">{data.clientName || \"Client Name\"}</div>\n            <div className=\"text-slate-600\">{data.address || \"123 Client Street\"}</div>\n          </div>\n          <div className=\"text-right\">\n            <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1\">Date</h3>\n            <div>{today}</div>\n            <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 mt-4\">\n              {hasMultipleServices ? \"Proposal Type\" : \"Job Type\"}\n            </h3>\n            <div className=\"font-medium\">\n              {hasMultipleServices ? (\n                <span className=\"flex items-center justify-end gap-1\">\n                  <Layers className=\"w-4 h-4\" />\n                  Multi-Service Proposal\n                </span>\n              ) : (\n                data.jobTypeName || \"General Contracting\"\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Timeline Estimate */}\n        {data.estimatedDays && (\n          <div className=\"mb-6 flex items-center gap-3 bg-blue-50 border border-blue-200 rounded-lg px-4 py-3\">\n            <Clock className=\"w-5 h-5 text-blue-600 shrink-0\" />\n            <div>\n              <span className=\"font-bold text-blue-900\">Estimated Timeline: </span>\n              <span className=\"text-blue-800\">\n                {data.estimatedDays.low === data.estimatedDays.high \n                  ? `${data.estimatedDays.low} working day${data.estimatedDays.low > 1 ? 's' : ''}`\n                  : `${data.estimatedDays.low}-${data.estimatedDays.high} working days`\n                }\n              </span>\n            </div>\n          </div>\n        )}\n\n        {/* Multi-Service Line Items Summary */}\n        {hasMultipleServices && (\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-heading font-bold text-white bg-slate-900 px-3 py-1 inline-block mb-4\">\n              <Layers className=\"w-4 h-4 inline mr-2 -mt-0.5\" />\n              Services Included\n            </h2>\n            <div className=\"border border-slate-200 rounded-lg overflow-hidden\">\n              <table className=\"w-full text-sm\">\n                <thead className=\"bg-slate-100\">\n                  <tr>\n                    <th className=\"text-left py-3 px-4 font-bold text-slate-700\">Service</th>\n                    <th className=\"text-center py-3 px-4 font-bold text-slate-700\">Est. Days</th>\n                    <th className=\"text-right py-3 px-4 font-bold text-slate-700\">Price</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {lineItems.map((item, index) => (\n                    <tr key={item.serviceId} className={index % 2 === 1 ? \"bg-slate-50\" : \"\"}>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"font-medium text-slate-900\">{item.jobTypeName}</div>\n                        <div className=\"text-xs text-slate-500\">{item.tradeName}</div>\n                      </td>\n                      <td className=\"py-3 px-4 text-center text-slate-600\">\n                        {item.estimatedDays.low === item.estimatedDays.high\n                          ? item.estimatedDays.low\n                          : `${item.estimatedDays.low}-${item.estimatedDays.high}`\n                        }\n                      </td>\n                      <td className=\"py-3 px-4 text-right font-medium\">\n                        ${Math.round((item.priceRange.low + item.priceRange.high) / 2).toLocaleString()}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n                <tfoot className=\"bg-primary/10 border-t-2 border-primary\">\n                  <tr>\n                    <td className=\"py-3 px-4 font-bold text-slate-900\">Total</td>\n                    <td className=\"py-3 px-4 text-center font-bold text-slate-900\">\n                      {data.estimatedDays?.low === data.estimatedDays?.high\n                        ? data.estimatedDays?.low\n                        : `${data.estimatedDays?.low}-${data.estimatedDays?.high}`\n                      }\n                    </td>\n                    <td className=\"py-3 px-4 text-right font-bold text-lg text-primary\">\n                      ${Math.round(((data.priceRange?.low ?? 0) + (data.priceRange?.high ?? 0)) / 2).toLocaleString()}\n                    </td>\n                  </tr>\n                </tfoot>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Scope of Work - Show by service for multi-service */}\n        {hasMultipleServices ? (\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-heading font-bold text-white bg-slate-900 px-3 py-1 inline-block mb-4\">Detailed Scope of Work</h2>\n            \n            <div className=\"space-y-6\">\n              <p className=\"italic text-slate-600\">\n                We propose to furnish all materials and perform all labor necessary to complete the following:\n              </p>\n\n              {lineItems.map((item, serviceIndex) => (\n                <div key={item.serviceId} className=\"border-l-4 border-l-secondary pl-4\">\n                  <h3 className=\"font-bold text-slate-800 mb-3 flex items-center gap-2\">\n                    <span className=\"bg-secondary text-slate-900 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold\">\n                      {serviceIndex + 1}\n                    </span>\n                    {item.jobTypeName}\n                    <span className=\"text-slate-500 font-normal text-sm\">({item.tradeName})</span>\n                  </h3>\n\n                  {/* First 4 items shown */}\n                  <ul className=\"list-disc pl-5 space-y-2 marker:text-secondary mb-2\">\n                    {item.scope.slice(0, 4).map((scopeItem, i) => (\n                      <li key={i}>{scopeItem}</li>\n                    ))}\n                  </ul>\n\n                  {/* BLURRED SECTION for remaining items */}\n                  {item.scope.length > 4 && (\n                    <div className=\"relative mt-2\">\n                      {blurred && serviceIndex === 0 && (\n                        <div className=\"absolute inset-0 bg-white/60 backdrop-blur-[2px] z-10 flex flex-col items-center justify-center text-center border-2 border-dashed border-slate-200 rounded\">\n                          <p className=\"text-slate-900 font-bold mb-2\">Detailed scope & pricing hidden</p>\n                          <button \n                            onClick={onUnlock}\n                            className=\"bg-secondary text-slate-900 px-4 py-2 rounded font-bold text-sm shadow-lg hover:scale-105 transition-transform\"\n                          >\n                            Unlock Full Proposal\n                          </button>\n                        </div>\n                      )}\n                      \n                      <div className={cn(\"space-y-2\", blurred && \"opacity-30 select-none filter blur-[1px]\")}>\n                        <ul className=\"list-disc pl-5 space-y-2 marker:text-secondary\">\n                          {item.scope.slice(4).map((scopeItem, i) => (\n                            <li key={i}>{scopeItem}</li>\n                          ))}\n                        </ul>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        ) : (\n          /* Single Service Scope of Work */\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-heading font-bold text-white bg-slate-900 px-3 py-1 inline-block mb-4\">Scope of Work</h2>\n            \n            <div className=\"space-y-4\">\n              <p className=\"italic text-slate-600\">\n                We propose to furnish all materials and perform all labor necessary to complete the following:\n              </p>\n\n              <ul className=\"list-disc pl-5 space-y-2 marker:text-secondary\">\n                {data.scope && data.scope.length > 0 ? (\n                  data.scope.slice(0, 4).map((item: string, i: number) => (\n                    <li key={i}>{item}</li>\n                  ))\n                ) : (\n                  <>\n                    <li>Consultation and site preparation.</li>\n                    <li>Demolition of existing structures as required.</li>\n                    <li>Installation of new materials per manufacturer specifications.</li>\n                  </>\n                )}\n              </ul>\n\n              {/* BLURRED SECTION */}\n              <div className=\"relative mt-2\">\n                {blurred && (\n                  <div className=\"absolute inset-0 bg-white/60 backdrop-blur-[2px] z-10 flex flex-col items-center justify-center text-center border-2 border-dashed border-slate-200 rounded\">\n                    <p className=\"text-slate-900 font-bold mb-2\">Detailed scope & pricing hidden</p>\n                    <button \n                      onClick={onUnlock}\n                      className=\"bg-secondary text-slate-900 px-4 py-2 rounded font-bold text-sm shadow-lg hover:scale-105 transition-transform\"\n                    >\n                      Unlock Full Proposal\n                    </button>\n                  </div>\n                )}\n                \n                <div className={cn(\"space-y-4\", blurred && \"opacity-30 select-none filter blur-[1px]\")}>\n                  <ul className=\"list-disc pl-5 space-y-2 marker:text-secondary\">\n                    {data.scope && data.scope.length > 4 ? (\n                      data.scope.slice(4).map((item: string, i: number) => (\n                        <li key={i}>{item}</li>\n                      ))\n                    ) : (\n                      <>\n                        <li>Detailed plumbing rough-in and trim-out specifications.</li>\n                        <li>Electrical fixture installation and safety checks.</li>\n                        <li>Final site cleanup and debris removal.</li>\n                        <li>Walkthrough and final inspection with homeowner.</li>\n                        <li>Warranty documentation handover.</li>\n                      </>\n                    )}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Exclusions Section */}\n        {data.exclusions && data.exclusions.length > 0 && (\n          <div className={cn(\"mb-8\", blurred && \"opacity-30 blur-[1px]\")}>\n            <h2 className=\"text-lg font-heading font-bold text-white bg-amber-600 px-3 py-1 inline-block mb-4\">\n              <AlertCircle className=\"w-4 h-4 inline mr-2 -mt-0.5\" />\n              Not Included\n            </h2>\n            <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n              <p className=\"text-sm text-amber-900 mb-3\">The following items are not included in this proposal and may require separate pricing:</p>\n              <ul className=\"list-disc pl-5 space-y-1.5 text-amber-800\">\n                {data.exclusions.map((item: string, i: number) => (\n                  <li key={i}>{item}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        )}\n\n        {/* Regional Pricing Info */}\n        {data.regionalInfo && (\n          <div className=\"mb-6 flex items-center gap-3 bg-purple-50 border border-purple-200 rounded-lg px-4 py-3\">\n            <MapPin className=\"w-5 h-5 text-purple-600 shrink-0\" />\n            <div>\n              <span className=\"font-bold text-purple-900\">Regional Pricing: </span>\n              <span className=\"text-purple-800\">\n                {data.regionalInfo.state} ({data.regionalInfo.region})\n                {data.regionalInfo.multiplier !== 1 && (\n                  <span className={cn(\n                    \"ml-2 font-medium\",\n                    data.regionalInfo.multiplier > 1 ? \"text-orange-600\" : \"text-green-600\"\n                  )}>\n                    {data.regionalInfo.multiplier > 1 ? \"+\" : \"\"}{Math.round((data.regionalInfo.multiplier - 1) * 100)}% adjustment\n                  </span>\n                )}\n              </span>\n            </div>\n          </div>\n        )}\n\n        {/* Pricing - Only show for single service (multi-service shows in table) */}\n        {!hasMultipleServices && (\n          <div className=\"mb-8 break-inside-avoid\">\n            <h2 className=\"text-lg font-heading font-bold text-white bg-slate-900 px-3 py-1 inline-block mb-4\">Investment</h2>\n            \n            <div className={cn(\"border border-slate-200 rounded-lg p-6 bg-slate-50\", blurred && \"opacity-30 blur-[2px]\")}>\n              <div className=\"flex justify-between items-end mb-2\">\n                <span className=\"font-bold text-slate-700\">Total Project Estimate</span>\n                <span className=\"text-2xl font-bold text-slate-900\">\n                  ${Math.round(((data.priceRange?.low ?? 0) + (data.priceRange?.high ?? 0)) / 2).toLocaleString()}\n                </span>\n              </div>\n              <p className=\"text-xs text-slate-500\">\n                *Price includes all labor, materials, and taxes as specified above. Valid for 30 days.\n                {data.regionalInfo && data.regionalInfo.multiplier !== 1 && (\n                  <> Pricing adjusted for {data.regionalInfo.state} market rates.</>\n                )}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Warranty Section */}\n        {data.warranty && (\n          <div className={cn(\"mb-8\", blurred && \"opacity-30 blur-[1px]\")}>\n            <h2 className=\"text-lg font-heading font-bold text-white bg-green-700 px-3 py-1 inline-block mb-4\">\n              <Shield className=\"w-4 h-4 inline mr-2 -mt-0.5\" />\n              Warranty\n            </h2>\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n              <p className=\"text-green-800\">{data.warranty}</p>\n            </div>\n          </div>\n        )}\n\n        {/* Terms & Conditions */}\n        <div className={cn(\"mb-8 text-xs text-slate-500\", blurred && \"opacity-30 blur-[1px]\")}>\n          <h3 className=\"font-bold text-slate-700 mb-2 uppercase tracking-wider\">Terms & Conditions</h3>\n          <ol className=\"list-decimal pl-4 space-y-1\">\n            <li>Payment terms: 50% deposit due upon acceptance, balance due upon completion.</li>\n            <li>Any changes to the scope of work may result in additional charges.</li>\n            <li>Work schedule subject to weather conditions and material availability.</li>\n            <li>Customer to provide access to work area and utilities as needed.</li>\n            <li>All permits to be obtained by contractor unless otherwise specified.</li>\n          </ol>\n        </div>\n\n        {/* Footer/Signature */}\n        <div className=\"mt-12 pt-8 border-t border-slate-200 grid grid-cols-2 gap-12\">\n          <div>\n            <div className=\"h-12 border-b border-slate-900 mb-2\"></div>\n            <div className=\"text-xs font-bold uppercase text-slate-500\">Contractor Signature</div>\n          </div>\n          <div>\n            <div className=\"h-12 border-b border-slate-900 mb-2\"></div>\n            <div className=\"text-xs font-bold uppercase text-slate-500\">Client Signature</div>\n          </div>\n        </div>\n\n        {/* Acceptance Date */}\n        <div className=\"mt-6 text-center text-xs text-slate-400\">\n          This proposal is valid for 30 days from the date above.\n        </div>\n\n        {/* Powered by ScopeGen Footer */}\n        <div \n          data-testid=\"footer-powered-by\"\n          className=\"mt-8 pt-6 border-t border-slate-100 text-center\"\n        >\n          <a \n            href=\"/\"\n            className=\"text-xs text-slate-400 hover:text-slate-600 transition-colors\"\n          >\n            Powered by <span className=\"font-semibold\">ScopeGen</span>\n          </a>\n          <p className=\"text-[10px] text-slate-300 mt-1\">\n            Professional proposals in seconds\n          </p>\n        </div>\n      </div>\n    );\n  }\n);\n\nProposalPreview.displayName = \"ProposalPreview\";\nexport default ProposalPreview;\n","path":null,"size_bytes":20467,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4175,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8608,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":768,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { insertProposalSchema, insertCancellationFeedbackSchema } from \"@shared/schema\";\nimport { fromZodError } from \"zod-validation-error\";\nimport { stripeService } from \"./stripeService\";\nimport { getStripePublishableKey } from \"./stripeClient\";\nimport { emailService } from \"./emailService\";\nimport { aiService } from \"./aiService\";\nimport { benchmarkTrades, regionalMultipliers } from \"./benchmark-data\";\nimport { oneBuildService } from \"./services/onebuild\";\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n  // 301 Redirect from scopeproposer.com to scopegenerator.com (avoid duplicate content)\n  app.use((req, res, next) => {\n    const host = req.get('host') || '';\n    if (host.includes('scopeproposer.com')) {\n      const redirectUrl = `https://scopegenerator.com${req.originalUrl}`;\n      return res.redirect(301, redirectUrl);\n    }\n    next();\n  });\n\n  // Auth middleware\n  await setupAuth(app);\n\n  // Sitemap endpoint for SEO\n  app.get('/sitemap.xml', (req, res) => {\n    const baseUrl = `${req.protocol}://${req.get('host')}`;\n    const today = new Date().toISOString().split('T')[0];\n    const sitemap = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n  <url>\n    <loc>${baseUrl}/</loc>\n    <lastmod>${today}</lastmod>\n    <changefreq>weekly</changefreq>\n    <priority>1.0</priority>\n  </url>\n  <url>\n    <loc>${baseUrl}/app</loc>\n    <lastmod>${today}</lastmod>\n    <changefreq>weekly</changefreq>\n    <priority>0.9</priority>\n  </url>\n  <url>\n    <loc>${baseUrl}/dashboard</loc>\n    <lastmod>${today}</lastmod>\n    <changefreq>daily</changefreq>\n    <priority>0.8</priority>\n  </url>\n  <url>\n    <loc>${baseUrl}/settings</loc>\n    <lastmod>${today}</lastmod>\n    <changefreq>monthly</changefreq>\n    <priority>0.5</priority>\n  </url>\n</urlset>`;\n    res.header('Content-Type', 'application/xml');\n    res.send(sitemap);\n  });\n\n  // 1build widget API key (embedded key with referrer restrictions - for widget only)\n  app.get('/api/onebuild-key', (req, res) => {\n    const key = process.env.ONEBUILD_API_KEY || '';\n    res.json({ key });\n  });\n\n  // Constants for market pricing freemium\n  const FREE_PRICING_LOOKUPS = 3;\n  \n  // 1build External API - Cost Data Routes (server-side only, key never exposed)\n  app.get('/api/costs/status', (req, res) => {\n    res.json({ \n      available: oneBuildService.isConfigured(),\n      message: oneBuildService.isConfigured() \n        ? \"1build cost data API is available\" \n        : \"1build external API key not configured\"\n    });\n  });\n  \n  // Get remaining market pricing lookups for current user\n  app.get('/api/costs/usage', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      const lookupCount = user.marketPricingLookups || 0;\n      const remaining = Math.max(0, FREE_PRICING_LOOKUPS - lookupCount);\n      \n      res.json({\n        used: lookupCount,\n        remaining: user.isPro ? -1 : remaining, // -1 means unlimited for Pro users\n        limit: FREE_PRICING_LOOKUPS,\n        isPro: user.isPro || false,\n        hasAccess: user.isPro || remaining > 0\n      });\n    } catch (error) {\n      console.error(\"Error fetching usage:\", error);\n      res.status(500).json({ message: \"Failed to fetch usage\" });\n    }\n  });\n\n  app.get('/api/costs/search', async (req, res) => {\n    try {\n      if (!oneBuildService.isConfigured()) {\n        return res.status(503).json({ message: \"Cost data service not configured\" });\n      }\n\n      const { term, zipcode, type } = req.query;\n      \n      if (!term || !zipcode) {\n        return res.status(400).json({ message: \"term and zipcode are required\" });\n      }\n\n      const sourceType = type as \"MATERIAL\" | \"LABOR\" | \"EQUIPMENT\" | \"ASSEMBLY\" | undefined;\n      \n      const result = await oneBuildService.searchSources(\n        term as string,\n        zipcode as string,\n        sourceType\n      );\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error searching costs:\", error);\n      res.status(500).json({ message: \"Failed to search costs\" });\n    }\n  });\n\n  app.get('/api/costs/material', async (req, res) => {\n    try {\n      if (!oneBuildService.isConfigured()) {\n        return res.status(503).json({ message: \"Cost data service not configured\" });\n      }\n\n      const { name, zipcode } = req.query;\n      \n      if (!name || !zipcode) {\n        return res.status(400).json({ message: \"name and zipcode are required\" });\n      }\n\n      const result = await oneBuildService.getMaterialCost(\n        name as string,\n        zipcode as string\n      );\n\n      if (result) {\n        res.json(result);\n      } else {\n        res.status(404).json({ message: \"Material not found\" });\n      }\n    } catch (error) {\n      console.error(\"Error fetching material cost:\", error);\n      res.status(500).json({ message: \"Failed to fetch material cost\" });\n    }\n  });\n\n  app.get('/api/costs/labor', async (req, res) => {\n    try {\n      if (!oneBuildService.isConfigured()) {\n        return res.status(503).json({ message: \"Cost data service not configured\" });\n      }\n\n      const { type, zipcode } = req.query;\n      \n      if (!type || !zipcode) {\n        return res.status(400).json({ message: \"type and zipcode are required\" });\n      }\n\n      const result = await oneBuildService.getLaborRate(\n        type as string,\n        zipcode as string\n      );\n\n      if (result) {\n        res.json(result);\n      } else {\n        res.status(404).json({ message: \"Labor rate not found\" });\n      }\n    } catch (error) {\n      console.error(\"Error fetching labor rate:\", error);\n      res.status(500).json({ message: \"Failed to fetch labor rate\" });\n    }\n  });\n\n  app.get('/api/costs/trade', isAuthenticated, async (req: any, res) => {\n    try {\n      if (!oneBuildService.isConfigured()) {\n        return res.status(503).json({ message: \"Cost data service not configured\" });\n      }\n\n      const { trade, zipcode } = req.query;\n      \n      if (!trade || !zipcode) {\n        return res.status(400).json({ message: \"trade and zipcode are required\" });\n      }\n      \n      // Check usage limits for non-Pro users\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      const lookupCount = user.marketPricingLookups || 0;\n      \n      // Free users limited to 3 lookups (Pro users have unlimited)\n      if (!user.isPro && lookupCount >= FREE_PRICING_LOOKUPS) {\n        return res.status(403).json({ \n          message: \"Free lookup limit reached\",\n          limitReached: true,\n          used: lookupCount,\n          limit: FREE_PRICING_LOOKUPS\n        });\n      }\n\n      const result = await oneBuildService.getTradePricing(\n        trade as string,\n        zipcode as string\n      );\n      \n      // Only increment usage for free users after successful lookup\n      // Pro users have unlimited access, so we don't track their usage\n      if (!user.isPro) {\n        await storage.incrementMarketPricingLookups(userId);\n      }\n\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error fetching trade pricing:\", error);\n      res.status(500).json({ message: \"Failed to fetch trade pricing\" });\n    }\n  });\n\n  // Robots.txt for SEO\n  app.get('/robots.txt', (req, res) => {\n    const baseUrl = `${req.protocol}://${req.get('host')}`;\n    const robots = `User-agent: *\nAllow: /\nDisallow: /api/\nDisallow: /dashboard\nDisallow: /settings\n\nSitemap: ${baseUrl}/sitemap.xml`;\n    res.header('Content-Type', 'text/plain');\n    res.send(robots);\n  });\n\n  // AI Scope Enhancement endpoint\n  app.post('/api/ai/enhance-scope', isAuthenticated, async (req: any, res) => {\n    try {\n      const { jobTypeName, baseScope, clientName, address, jobNotes } = req.body;\n\n      if (!jobTypeName || !baseScope || !Array.isArray(baseScope)) {\n        return res.status(400).json({ message: \"jobTypeName and baseScope array are required\" });\n      }\n\n      const enhancedScope = await aiService.enhanceScope({\n        jobTypeName,\n        baseScope,\n        clientName,\n        address,\n        jobNotes,\n      });\n\n      res.json({ enhancedScope });\n    } catch (error) {\n      console.error(\"Error enhancing scope:\", error);\n      res.status(500).json({ message: \"Failed to enhance scope\" });\n    }\n  });\n\n  // Auth routes\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      if (user) {\n        const { userStripeSecretKey, ...safeUser } = user;\n        const hasStripeKey = !!userStripeSecretKey;\n        res.json({ ...safeUser, hasStripeKey });\n      } else {\n        res.json(null);\n      }\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Company profile routes\n  app.patch('/api/profile/company', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { companyName, companyAddress, companyPhone, companyLogo, licenseNumber, priceMultiplier, tradeMultipliers, selectedTrades } = req.body;\n      \n      // Validate priceMultiplier is within valid range (25-200)\n      let validatedPriceMultiplier = priceMultiplier;\n      if (priceMultiplier !== undefined) {\n        if (typeof priceMultiplier !== 'number' || priceMultiplier < 25 || priceMultiplier > 200) {\n          return res.status(400).json({ message: \"Price multiplier must be a number between 25 and 200\" });\n        }\n        validatedPriceMultiplier = Math.round(priceMultiplier);\n      }\n      \n      // Validate tradeMultipliers if provided\n      let validatedTradeMultipliers = tradeMultipliers;\n      if (tradeMultipliers !== undefined && typeof tradeMultipliers === 'object') {\n        validatedTradeMultipliers = {};\n        for (const [tradeId, multiplier] of Object.entries(tradeMultipliers)) {\n          if (typeof multiplier === 'number' && multiplier >= 50 && multiplier <= 150) {\n            validatedTradeMultipliers[tradeId] = Math.round(multiplier);\n          }\n        }\n      }\n      \n      const user = await storage.updateCompanyProfile(userId, {\n        companyName,\n        companyAddress,\n        companyPhone,\n        companyLogo,\n        licenseNumber,\n        priceMultiplier: validatedPriceMultiplier,\n        tradeMultipliers: validatedTradeMultipliers,\n        selectedTrades,\n      });\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error updating company profile:\", error);\n      res.status(500).json({ message: \"Failed to update company profile\" });\n    }\n  });\n\n  // User Stripe settings route\n  app.patch('/api/profile/stripe', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { userStripeSecretKey, userStripeEnabled } = req.body;\n      \n      const trimmedKey = userStripeSecretKey?.trim() || null;\n      \n      if (trimmedKey) {\n        if (typeof trimmedKey !== 'string' || !trimmedKey.startsWith('sk_live_')) {\n          return res.status(400).json({ \n            message: \"Invalid Stripe secret key format. Please use a live key starting with sk_live_\" \n          });\n        }\n      }\n      \n      // Get existing user to check if they already have a key\n      const existingUser = await storage.getUser(userId);\n      if (!existingUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      // Determine if user has a valid key (new or existing)\n      const hasKey = !!trimmedKey || !!existingUser.userStripeSecretKey;\n      \n      const user = await storage.updateUserStripeSettings(userId, {\n        // Only update key if a new one was provided\n        userStripeSecretKey: trimmedKey !== null ? trimmedKey : undefined,\n        // Enable only if user has a key (new or existing)\n        userStripeEnabled: hasKey ? (userStripeEnabled ?? false) : false,\n      });\n      \n      if (!user) {\n        return res.status(404).json({ message: \"Failed to update settings\" });\n      }\n\n      const { userStripeSecretKey: _, ...safeUser } = user;\n      const hasStripeKey = !!user.userStripeSecretKey;\n      res.json({ ...safeUser, hasStripeKey });\n    } catch (error) {\n      console.error(\"Error updating Stripe settings:\", error);\n      res.status(500).json({ message: \"Failed to update Stripe settings\" });\n    }\n  });\n\n  // Notification preferences route\n  app.patch('/api/profile/notifications', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { emailNotificationsEnabled, smsNotificationsEnabled } = req.body;\n      \n      // Coerce and validate - handle both boolean and string values\n      const preferences: { emailNotificationsEnabled?: boolean; smsNotificationsEnabled?: boolean } = {};\n      \n      if (emailNotificationsEnabled !== undefined) {\n        preferences.emailNotificationsEnabled = emailNotificationsEnabled === true || emailNotificationsEnabled === 'true';\n      }\n      if (smsNotificationsEnabled !== undefined) {\n        preferences.smsNotificationsEnabled = smsNotificationsEnabled === true || smsNotificationsEnabled === 'true';\n      }\n      \n      const user = await storage.updateNotificationPreferences(userId, preferences);\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const { userStripeSecretKey, ...safeUser } = user;\n      res.json(safeUser);\n    } catch (error) {\n      console.error(\"Error updating notification preferences:\", error);\n      res.status(500).json({ message: \"Failed to update notification preferences\" });\n    }\n  });\n\n  // Onboarding route\n  app.post('/api/onboarding', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { phone, companyName, businessSize, referralSource, primaryTrade, yearsInBusiness } = req.body;\n      \n      const user = await storage.completeOnboarding(userId, {\n        phone,\n        companyName,\n        businessSize,\n        referralSource,\n        primaryTrade,\n        yearsInBusiness: yearsInBusiness ? parseInt(yearsInBusiness) : undefined,\n      });\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error completing onboarding:\", error);\n      res.status(500).json({ message: \"Failed to complete onboarding\" });\n    }\n  });\n\n  // Public proposal route (no auth required)\n  app.get('/api/public/proposal/:token', async (req, res) => {\n    try {\n      const { token } = req.params;\n      \n      if (!token) {\n        return res.status(400).json({ message: \"Token is required\" });\n      }\n\n      const proposal = await storage.getProposalByPublicToken(token);\n      if (!proposal) {\n        return res.status(404).json({ message: \"Proposal not found\" });\n      }\n\n      // Record view (non-blocking)\n      const viewerIp = req.ip || req.headers['x-forwarded-for']?.toString().split(',')[0] || undefined;\n      const userAgent = req.headers['user-agent'] || undefined;\n      storage.recordProposalView(proposal.id, viewerIp, userAgent).catch(err => \n        console.error(\"Error recording proposal view:\", err)\n      );\n\n      // Update proposal status to 'viewed' if currently 'sent'\n      if (proposal.status === 'sent') {\n        storage.updateProposal(proposal.id, proposal.userId, { status: 'viewed' }).catch(err =>\n          console.error(\"Error updating proposal status to viewed:\", err)\n        );\n      }\n\n      const user = await storage.getUser(proposal.userId);\n      \n      res.json({\n        proposal: {\n          id: proposal.id,\n          clientName: proposal.clientName,\n          address: proposal.address,\n          jobTypeName: proposal.jobTypeName,\n          scope: proposal.scope,\n          priceLow: proposal.priceLow,\n          priceHigh: proposal.priceHigh,\n          options: proposal.options,\n          status: proposal.status,\n          acceptedAt: proposal.acceptedAt,\n          acceptedByName: proposal.acceptedByName,\n          acceptedByEmail: proposal.acceptedByEmail,\n          signature: proposal.signature,\n          contractorSignature: proposal.contractorSignature,\n          contractorSignedAt: proposal.contractorSignedAt,\n        },\n        companyInfo: user ? {\n          companyName: user.companyName,\n          companyAddress: user.companyAddress,\n          companyPhone: user.companyPhone,\n          companyLogo: user.companyLogo,\n        } : null,\n      });\n    } catch (error) {\n      console.error(\"Error fetching public proposal:\", error);\n      res.status(500).json({ message: \"Failed to fetch proposal\" });\n    }\n  });\n\n  // Accept proposal endpoint (no auth required - public)\n  app.post('/api/public/proposal/:token/accept', async (req, res) => {\n    try {\n      const { token } = req.params;\n      const { name, email, signature } = req.body;\n\n      if (!token) {\n        return res.status(400).json({ message: \"Token is required\" });\n      }\n\n      if (!name || typeof name !== 'string' || name.trim().length === 0) {\n        return res.status(400).json({ message: \"Name is required\" });\n      }\n\n      if (!email || typeof email !== 'string' || !email.includes('@')) {\n        return res.status(400).json({ message: \"Valid email is required\" });\n      }\n\n      if (!signature || typeof signature !== 'string' || !signature.startsWith('data:image/')) {\n        return res.status(400).json({ message: \"Signature is required\" });\n      }\n\n      if (signature.length < 1000) {\n        return res.status(400).json({ message: \"Please provide a valid signature\" });\n      }\n\n      const proposal = await storage.getProposalByPublicToken(token);\n      if (!proposal) {\n        return res.status(404).json({ message: \"Proposal not found\" });\n      }\n\n      if (proposal.status === 'accepted') {\n        return res.status(400).json({ \n          message: \"This proposal has already been accepted\",\n          acceptedAt: proposal.acceptedAt,\n          acceptedByName: proposal.acceptedByName\n        });\n      }\n\n      const acceptedProposal = await storage.acceptProposal(token, name.trim(), email.trim(), signature);\n      if (!acceptedProposal) {\n        return res.status(500).json({ message: \"Failed to accept proposal\" });\n      }\n\n      const user = await storage.getUser(proposal.userId);\n      if (user?.email && user.emailNotificationsEnabled !== false) {\n        try {\n          await emailService.sendProposalAcceptedNotification({\n            contractorEmail: user.email,\n            contractorName: user.firstName || user.companyName || undefined,\n            clientName: acceptedProposal.clientName,\n            clientEmail: email.trim(),\n            acceptedByName: name.trim(),\n            projectTitle: acceptedProposal.jobTypeName || 'Project',\n            projectAddress: acceptedProposal.address || undefined,\n            totalPrice: Math.round((acceptedProposal.priceLow + acceptedProposal.priceHigh) / 2),\n            acceptedAt: acceptedProposal.acceptedAt!,\n          });\n        } catch (emailError) {\n          console.error(\"Error sending acceptance notification email:\", emailError);\n        }\n      }\n\n      res.json({\n        message: \"Proposal accepted successfully\",\n        acceptedAt: acceptedProposal.acceptedAt,\n        acceptedByName: acceptedProposal.acceptedByName,\n      });\n    } catch (error) {\n      console.error(\"Error accepting proposal:\", error);\n      res.status(500).json({ message: \"Failed to accept proposal\" });\n    }\n  });\n\n  // Email connection test route\n  app.get('/api/email/test', isAuthenticated, async (req: any, res) => {\n    try {\n      const result = await emailService.testConnection();\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error testing email connection:\", error);\n      res.status(500).json({ success: false, error: \"Failed to test connection\" });\n    }\n  });\n\n  // Email proposal route\n  app.post('/api/proposals/:id/email', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposalId = parseInt(req.params.id);\n      const { recipientEmail, recipientName, message } = req.body;\n\n      if (!recipientEmail) {\n        return res.status(400).json({ message: \"Recipient email is required\" });\n      }\n\n      let proposal = await storage.getProposal(proposalId);\n      if (!proposal) {\n        return res.status(404).json({ message: \"Proposal not found\" });\n      }\n\n      if (proposal.userId !== userId) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      if (!proposal.publicToken) {\n        proposal = await storage.generatePublicToken(proposalId, userId) || proposal;\n      }\n\n      const baseUrl = `${req.protocol}://${req.get('host')}`;\n      const proposalUrl = proposal.publicToken ? `${baseUrl}/p/${proposal.publicToken}` : undefined;\n\n      const totalPrice = Math.round((proposal.priceLow + proposal.priceHigh) / 2);\n      \n      const emailResult = await emailService.sendProposalEmail({\n        recipientEmail,\n        recipientName,\n        proposalTitle: proposal.jobTypeName || 'Project',\n        clientName: proposal.clientName,\n        totalPrice,\n        senderName: user.firstName || undefined,\n        senderCompany: user.companyName || undefined,\n        customMessage: message,\n        proposalUrl,\n      });\n\n      if (!emailResult.success) {\n        return res.status(500).json({ \n          message: \"Failed to send email\", \n          error: emailResult.error \n        });\n      }\n\n      await storage.updateProposal(proposalId, userId, { status: 'sent' });\n\n      res.json({ \n        message: \"Proposal sent successfully\",\n        sentTo: recipientEmail,\n        messageId: emailResult.messageId\n      });\n    } catch (error) {\n      console.error(\"Error sending proposal email:\", error);\n      res.status(500).json({ message: \"Failed to send proposal\" });\n    }\n  });\n\n  // Contractor countersign route\n  app.post('/api/proposals/:id/countersign', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposalId = parseInt(req.params.id);\n      const { signature } = req.body;\n\n      if (!signature || typeof signature !== 'string' || !signature.startsWith('data:image/')) {\n        return res.status(400).json({ message: \"Valid signature is required\" });\n      }\n\n      if (signature.length < 1000) {\n        return res.status(400).json({ message: \"Please provide a valid signature\" });\n      }\n\n      const proposal = await storage.getProposal(proposalId);\n      if (!proposal) {\n        return res.status(404).json({ message: \"Proposal not found\" });\n      }\n\n      if (proposal.userId !== userId) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      if (proposal.status !== 'accepted') {\n        return res.status(400).json({ message: \"Proposal must be accepted by client before countersigning\" });\n      }\n\n      if (proposal.contractorSignature) {\n        return res.status(400).json({ message: \"Proposal has already been countersigned\" });\n      }\n\n      const countersignedProposal = await storage.countersignProposal(proposalId, userId, signature);\n      if (!countersignedProposal) {\n        return res.status(500).json({ message: \"Failed to countersign proposal\" });\n      }\n\n      // Send completed proposal email to client\n      if (countersignedProposal.acceptedByEmail) {\n        const user = await storage.getUser(userId);\n        const baseUrl = `${req.protocol}://${req.get('host')}`;\n        const proposalUrl = countersignedProposal.publicToken ? `${baseUrl}/p/${countersignedProposal.publicToken}` : undefined;\n\n        try {\n          await emailService.sendCompletedProposalToClient({\n            clientEmail: countersignedProposal.acceptedByEmail,\n            clientName: countersignedProposal.clientName,\n            contractorName: user?.firstName || undefined,\n            contractorCompany: user?.companyName || undefined,\n            projectTitle: countersignedProposal.jobTypeName || 'Project',\n            projectAddress: countersignedProposal.address || undefined,\n            totalPrice: Math.round((countersignedProposal.priceLow + countersignedProposal.priceHigh) / 2),\n            acceptedAt: countersignedProposal.acceptedAt!,\n            contractorSignedAt: countersignedProposal.contractorSignedAt!,\n            proposalUrl,\n          });\n        } catch (emailError) {\n          console.error(\"Error sending completed proposal email:\", emailError);\n        }\n      }\n\n      res.json({\n        message: \"Proposal countersigned successfully\",\n        contractorSignedAt: countersignedProposal.contractorSignedAt,\n      });\n    } catch (error) {\n      console.error(\"Error countersigning proposal:\", error);\n      res.status(500).json({ message: \"Failed to countersign proposal\" });\n    }\n  });\n\n  // Proposal routes\n  app.post('/api/proposals', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const validationResult = insertProposalSchema.safeParse({\n        ...req.body,\n        userId,\n      });\n\n      if (!validationResult.success) {\n        const error = fromZodError(validationResult.error);\n        return res.status(400).json({ message: error.message });\n      }\n\n      const proposal = await storage.createProposal(validationResult.data);\n      res.json(proposal);\n    } catch (error) {\n      console.error(\"Error creating proposal:\", error);\n      res.status(500).json({ message: \"Failed to create proposal\" });\n    }\n  });\n\n  app.get('/api/proposals', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposals = await storage.getProposalsByUser(userId);\n      \n      // Get view stats for all proposals\n      const proposalIds = proposals.map(p => p.id);\n      const viewStats = await storage.getProposalViewStatsBulk(proposalIds);\n      \n      // Merge view stats into proposals\n      const proposalsWithViews = proposals.map(p => ({\n        ...p,\n        viewCount: viewStats[p.id]?.viewCount || 0,\n        lastViewedAt: viewStats[p.id]?.lastViewedAt || null,\n      }));\n      \n      res.json(proposalsWithViews);\n    } catch (error) {\n      console.error(\"Error fetching proposals:\", error);\n      res.status(500).json({ message: \"Failed to fetch proposals\" });\n    }\n  });\n\n  app.get('/api/proposals/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposalId = parseInt(req.params.id);\n      const proposal = await storage.getProposal(proposalId);\n\n      if (!proposal) {\n        return res.status(404).json({ message: \"Proposal not found\" });\n      }\n\n      if (proposal.userId !== userId) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      res.json(proposal);\n    } catch (error) {\n      console.error(\"Error fetching proposal:\", error);\n      res.status(500).json({ message: \"Failed to fetch proposal\" });\n    }\n  });\n\n  app.patch('/api/proposals/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposalId = parseInt(req.params.id);\n      \n      const updated = await storage.updateProposal(proposalId, userId, req.body);\n      \n      if (!updated) {\n        return res.status(404).json({ message: \"Proposal not found or access denied\" });\n      }\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating proposal:\", error);\n      res.status(500).json({ message: \"Failed to update proposal\" });\n    }\n  });\n\n  app.delete('/api/proposals/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposalId = parseInt(req.params.id);\n      \n      const deleted = await storage.deleteProposal(proposalId, userId);\n      \n      if (!deleted) {\n        return res.status(404).json({ message: \"Proposal not found or access denied\" });\n      }\n\n      res.json({ message: \"Proposal deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting proposal:\", error);\n      res.status(500).json({ message: \"Failed to delete proposal\" });\n    }\n  });\n\n  app.post('/api/proposals/:id/unlock', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposalId = parseInt(req.params.id);\n      \n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const proposal = await storage.getProposal(proposalId);\n      if (!proposal || proposal.userId !== userId) {\n        return res.status(404).json({ message: \"Proposal not found or access denied\" });\n      }\n\n      if (proposal.isUnlocked) {\n        return res.json(proposal);\n      }\n\n      const hasValidCredits = user.proposalCredits > 0 && \n        (!user.creditsExpireAt || new Date() < user.creditsExpireAt);\n\n      if (!hasValidCredits) {\n        return res.status(402).json({ \n          message: \"No credits available\",\n          requiresPayment: true \n        });\n      }\n\n      const updatedUser = await storage.deductProposalCredit(userId);\n      if (!updatedUser) {\n        return res.status(402).json({ \n          message: \"Failed to deduct credit\",\n          requiresPayment: true \n        });\n      }\n\n      const unlocked = await storage.unlockProposal(proposalId, userId);\n      \n      if (!unlocked) {\n        return res.status(404).json({ message: \"Failed to unlock proposal\" });\n      }\n\n      res.json({\n        ...unlocked,\n        remainingCredits: updatedUser.proposalCredits\n      });\n    } catch (error) {\n      console.error(\"Error unlocking proposal:\", error);\n      res.status(500).json({ message: \"Failed to unlock proposal\" });\n    }\n  });\n\n  app.get('/api/stripe/config', async (req, res) => {\n    try {\n      const publishableKey = await getStripePublishableKey();\n      res.json({ publishableKey });\n    } catch (error) {\n      console.error(\"Error getting Stripe config:\", error);\n      res.status(500).json({ message: \"Failed to get Stripe configuration\" });\n    }\n  });\n\n  app.get('/api/stripe/products', async (req, res) => {\n    try {\n      const products = await stripeService.listProductsWithPrices();\n      \n      const productsMap = new Map();\n      for (const row of products as any[]) {\n        if (!productsMap.has(row.product_id)) {\n          productsMap.set(row.product_id, {\n            id: row.product_id,\n            name: row.product_name,\n            description: row.product_description,\n            active: row.product_active,\n            metadata: row.product_metadata,\n            prices: []\n          });\n        }\n        if (row.price_id) {\n          productsMap.get(row.product_id).prices.push({\n            id: row.price_id,\n            unit_amount: row.unit_amount,\n            currency: row.currency,\n            recurring: row.recurring,\n            active: row.price_active,\n          });\n        }\n      }\n\n      res.json({ data: Array.from(productsMap.values()) });\n    } catch (error) {\n      console.error(\"Error listing products:\", error);\n      res.status(500).json({ message: \"Failed to list products\" });\n    }\n  });\n\n  app.post('/api/stripe/checkout', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      const { productType } = req.body;\n\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const validOneTimeTypes = ['starter', 'single', 'pack'];\n      const validSubscriptionTypes = ['pro', 'crew'];\n      const allValidTypes = [...validOneTimeTypes, ...validSubscriptionTypes];\n\n      if (!productType || !allValidTypes.includes(productType)) {\n        return res.status(400).json({ \n          message: \"Valid product type is required (starter, pro, crew, single, or pack)\" \n        });\n      }\n\n      let customerId = user.stripeCustomerId;\n      if (!customerId) {\n        const customer = await stripeService.createCustomer(user.email || '', userId);\n        await storage.updateUserStripeInfo(userId, { stripeCustomerId: customer.id });\n        customerId = customer.id;\n      }\n\n      const successUrl = `${req.protocol}://${req.get('host')}/dashboard?success=true&session_id={CHECKOUT_SESSION_ID}`;\n      const cancelUrl = `${req.protocol}://${req.get('host')}/dashboard?canceled=true`;\n\n      let session;\n      if (validSubscriptionTypes.includes(productType)) {\n        session = await stripeService.createSubscriptionCheckoutSession(\n          customerId,\n          productType as 'pro' | 'crew',\n          successUrl,\n          cancelUrl,\n          userId\n        );\n      } else {\n        session = await stripeService.createOneTimeCheckoutSession(\n          customerId,\n          productType as 'starter' | 'single' | 'pack',\n          successUrl,\n          cancelUrl,\n          userId\n        );\n      }\n\n      res.json({ url: session.url });\n    } catch (error) {\n      console.error(\"Error creating checkout session:\", error);\n      res.status(500).json({ message: \"Failed to create checkout session\" });\n    }\n  });\n\n  app.post('/api/stripe/verify-session', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { sessionId } = req.body;\n      \n      if (!sessionId) {\n        return res.status(400).json({ message: \"Session ID is required\" });\n      }\n\n      const session = await stripeService.retrieveCheckoutSession(sessionId);\n      \n      if (!session) {\n        return res.status(404).json({ message: \"Session not found\" });\n      }\n\n      if (session.payment_status !== 'paid') {\n        return res.status(400).json({ message: \"Payment not completed\" });\n      }\n\n      if (session.metadata?.userId !== userId) {\n        return res.status(403).json({ message: \"Session does not belong to this user\" });\n      }\n\n      const credits = parseInt(session.metadata?.credits || '0');\n      const productType = session.metadata?.productType as 'single' | 'pack';\n\n      if (credits < 1) {\n        return res.status(400).json({ message: \"Invalid credits in session\" });\n      }\n\n      const expiresAt = productType === 'pack' \n        ? new Date(Date.now() + 6 * 30 * 24 * 60 * 60 * 1000)\n        : null;\n\n      const result = await storage.addProposalCredits(userId, credits, expiresAt, sessionId);\n      \n      if (!result.user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      res.json({ \n        proposalCredits: result.user.proposalCredits,\n        creditsExpireAt: result.user.creditsExpireAt,\n        creditsAdded: result.alreadyProcessed ? 0 : credits,\n        alreadyProcessed: result.alreadyProcessed\n      });\n    } catch (error: any) {\n      if (error.code === 'resource_missing') {\n        return res.status(404).json({ message: \"Invalid session\" });\n      }\n      console.error(\"Error verifying session:\", error);\n      res.status(500).json({ message: \"Failed to verify session\" });\n    }\n  });\n\n  app.get('/api/stripe/subscription', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user?.stripeSubscriptionId) {\n        return res.json({ subscription: null });\n      }\n\n      const subscription = await storage.getSubscription(user.stripeSubscriptionId);\n      res.json({ subscription });\n    } catch (error) {\n      console.error(\"Error getting subscription:\", error);\n      res.status(500).json({ message: \"Failed to get subscription\" });\n    }\n  });\n\n  app.post('/api/stripe/portal', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user?.stripeCustomerId) {\n        return res.status(400).json({ message: \"No Stripe customer found\" });\n      }\n\n      const session = await stripeService.createCustomerPortalSession(\n        user.stripeCustomerId,\n        `${req.protocol}://${req.get('host')}/dashboard`\n      );\n\n      res.json({ url: session.url });\n    } catch (error) {\n      console.error(\"Error creating portal session:\", error);\n      res.status(500).json({ message: \"Failed to create portal session\" });\n    }\n  });\n\n  // Payment link endpoint for proposals\n  app.post('/api/proposals/:id/payment-link', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const proposalId = parseInt(req.params.id);\n      const { depositPercentage } = req.body;\n\n      if (!depositPercentage || ![25, 50, 100].includes(depositPercentage)) {\n        return res.status(400).json({ message: \"Deposit percentage must be 25, 50, or 100\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      if (!user.userStripeEnabled || !user.userStripeSecretKey) {\n        return res.status(400).json({ \n          message: \"Please configure your Stripe settings in Settings to generate payment links\" \n        });\n      }\n\n      const proposal = await storage.getProposal(proposalId);\n      if (!proposal) {\n        return res.status(404).json({ message: \"Proposal not found\" });\n      }\n\n      if (proposal.userId !== userId) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      if (proposal.paymentLinkId) {\n        try {\n          await stripeService.deactivatePaymentLink(proposal.paymentLinkId);\n        } catch (e) {\n          console.log(\"Could not deactivate previous payment link:\", e);\n        }\n      }\n\n      const avgPrice = Math.round((proposal.priceLow + proposal.priceHigh) / 2);\n      const depositAmount = Math.round(avgPrice * depositPercentage / 100);\n\n      const baseUrl = `${req.protocol}://${req.get('host')}`;\n      const successUrl = proposal.publicToken \n        ? `${baseUrl}/p/${proposal.publicToken}?payment=success`\n        : `${baseUrl}/dashboard?payment=success&proposalId=${proposalId}`;\n\n      const paymentLink = await stripeService.createPaymentLink(\n        depositAmount * 100,\n        proposalId,\n        proposal.clientName,\n        proposal.jobTypeName,\n        successUrl,\n        user.userStripeSecretKey\n      );\n\n      const updated = await storage.updateProposal(proposalId, userId, {\n        paymentLinkId: paymentLink.id,\n        paymentLinkUrl: paymentLink.url,\n        depositPercentage,\n        depositAmount: depositAmount * 100,\n        paymentStatus: 'pending',\n      });\n\n      res.json({\n        paymentLinkUrl: paymentLink.url,\n        depositAmount: depositAmount,\n        depositPercentage,\n        proposal: updated,\n      });\n    } catch (error) {\n      console.error(\"Error creating payment link:\", error);\n      res.status(500).json({ message: \"Failed to create payment link\" });\n    }\n  });\n\n  // Cancellation feedback endpoint\n  app.post('/api/cancellation-feedback', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { reason, details } = req.body;\n\n      const validationResult = insertCancellationFeedbackSchema.safeParse({\n        userId,\n        reason,\n        details,\n      });\n\n      if (!validationResult.success) {\n        const error = fromZodError(validationResult.error);\n        return res.status(400).json({ message: error.message });\n      }\n\n      await storage.saveCancellationFeedback(validationResult.data);\n\n      // Get user to check if they have a Stripe customer ID for portal redirect\n      const user = await storage.getUser(userId);\n      let portalUrl = null;\n      \n      if (user?.stripeCustomerId) {\n        try {\n          const session = await stripeService.createCustomerPortalSession(\n            user.stripeCustomerId,\n            `${req.protocol}://${req.get('host')}/settings?canceled=true`\n          );\n          portalUrl = session.url;\n        } catch (portalError) {\n          console.error(\"Error creating portal session for cancellation:\", portalError);\n        }\n      }\n\n      res.json({ \n        message: \"Feedback saved successfully\",\n        portalUrl \n      });\n    } catch (error) {\n      console.error(\"Error saving cancellation feedback:\", error);\n      res.status(500).json({ message: \"Failed to save feedback\" });\n    }\n  });\n\n  // Company/Workspace routes for Crew plan\n  app.get('/api/company', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      \n      // Check if user is a member of any company\n      const membership = await storage.getUserCompanyMembership(userId);\n      if (!membership) {\n        return res.json(null);\n      }\n\n      const memberCount = await storage.getCompanyMemberCount(membership.companyId);\n      \n      res.json({\n        company: membership.company,\n        role: membership.role,\n        memberCount,\n        totalSeats: membership.company.seatLimit + membership.company.extraSeats,\n      });\n    } catch (error) {\n      console.error(\"Error fetching company:\", error);\n      res.status(500).json({ message: \"Failed to fetch company\" });\n    }\n  });\n\n  app.post('/api/company', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { name, address, phone, licenseNumber } = req.body;\n\n      if (!name || typeof name !== 'string' || name.trim().length === 0) {\n        return res.status(400).json({ message: \"Company name is required\" });\n      }\n\n      // Check if user already has a company\n      const existingMembership = await storage.getUserCompanyMembership(userId);\n      if (existingMembership) {\n        return res.status(400).json({ message: \"You are already part of a company\" });\n      }\n\n      const company = await storage.createCompany({\n        name: name.trim(),\n        ownerId: userId,\n        seatLimit: 3, // Default 3 seats for Crew plan\n        address: address || null,\n        phone: phone || null,\n        licenseNumber: licenseNumber || null,\n      });\n\n      res.json({\n        company,\n        role: 'owner',\n        memberCount: 1,\n        totalSeats: company.seatLimit,\n      });\n    } catch (error) {\n      console.error(\"Error creating company:\", error);\n      res.status(500).json({ message: \"Failed to create company\" });\n    }\n  });\n\n  app.patch('/api/company', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { name, address, phone, logo, licenseNumber } = req.body;\n\n      const membership = await storage.getUserCompanyMembership(userId);\n      if (!membership || membership.role !== 'owner') {\n        return res.status(403).json({ message: \"Only company owners can update company details\" });\n      }\n\n      const updated = await storage.updateCompany(membership.companyId, userId, {\n        name: name || undefined,\n        address: address || undefined,\n        phone: phone || undefined,\n        logo: logo || undefined,\n        licenseNumber: licenseNumber || undefined,\n      });\n\n      if (!updated) {\n        return res.status(404).json({ message: \"Company not found\" });\n      }\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating company:\", error);\n      res.status(500).json({ message: \"Failed to update company\" });\n    }\n  });\n\n  // Company members routes\n  app.get('/api/company/members', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n\n      const membership = await storage.getUserCompanyMembership(userId);\n      if (!membership) {\n        return res.status(404).json({ message: \"You are not part of a company\" });\n      }\n\n      const members = await storage.getCompanyMembers(membership.companyId);\n      \n      res.json(members.map(m => ({\n        id: m.id,\n        role: m.role,\n        createdAt: m.createdAt,\n        user: {\n          id: m.user.id,\n          email: m.user.email,\n          firstName: m.user.firstName,\n          lastName: m.user.lastName,\n          profileImageUrl: m.user.profileImageUrl,\n        }\n      })));\n    } catch (error) {\n      console.error(\"Error fetching members:\", error);\n      res.status(500).json({ message: \"Failed to fetch members\" });\n    }\n  });\n\n  app.patch('/api/company/members/:userId/role', isAuthenticated, async (req: any, res) => {\n    try {\n      const currentUserId = req.user.claims.sub;\n      const targetUserId = req.params.userId;\n      const { role } = req.body;\n\n      if (!['admin', 'member'].includes(role)) {\n        return res.status(400).json({ message: \"Role must be 'admin' or 'member'\" });\n      }\n\n      const membership = await storage.getUserCompanyMembership(currentUserId);\n      if (!membership || membership.role !== 'owner') {\n        return res.status(403).json({ message: \"Only company owners can change member roles\" });\n      }\n\n      if (targetUserId === currentUserId) {\n        return res.status(400).json({ message: \"You cannot change your own role\" });\n      }\n\n      const updated = await storage.updateMemberRole(membership.companyId, targetUserId, role);\n      if (!updated) {\n        return res.status(404).json({ message: \"Member not found\" });\n      }\n\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Error updating member role:\", error);\n      res.status(500).json({ message: \"Failed to update member role\" });\n    }\n  });\n\n  app.delete('/api/company/members/:userId', isAuthenticated, async (req: any, res) => {\n    try {\n      const currentUserId = req.user.claims.sub;\n      const targetUserId = req.params.userId;\n\n      const membership = await storage.getUserCompanyMembership(currentUserId);\n      if (!membership || (membership.role !== 'owner' && membership.role !== 'admin')) {\n        return res.status(403).json({ message: \"Only company owners and admins can remove members\" });\n      }\n\n      // Check if trying to remove owner\n      const targetMembership = await storage.getUserCompanyMembership(targetUserId);\n      if (targetMembership?.role === 'owner') {\n        return res.status(400).json({ message: \"Cannot remove the company owner\" });\n      }\n\n      const removed = await storage.removeMember(membership.companyId, targetUserId);\n      if (!removed) {\n        return res.status(404).json({ message: \"Member not found\" });\n      }\n\n      res.json({ message: \"Member removed successfully\" });\n    } catch (error) {\n      console.error(\"Error removing member:\", error);\n      res.status(500).json({ message: \"Failed to remove member\" });\n    }\n  });\n\n  // Invite routes\n  app.get('/api/company/invites', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n\n      const membership = await storage.getUserCompanyMembership(userId);\n      if (!membership) {\n        return res.status(404).json({ message: \"You are not part of a company\" });\n      }\n\n      const invites = await storage.getCompanyInvites(membership.companyId);\n      res.json(invites);\n    } catch (error) {\n      console.error(\"Error fetching invites:\", error);\n      res.status(500).json({ message: \"Failed to fetch invites\" });\n    }\n  });\n\n  app.post('/api/company/invites', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { email, role = 'member' } = req.body;\n\n      if (!email || typeof email !== 'string' || !email.includes('@')) {\n        return res.status(400).json({ message: \"Valid email is required\" });\n      }\n\n      if (!['admin', 'member'].includes(role)) {\n        return res.status(400).json({ message: \"Role must be 'admin' or 'member'\" });\n      }\n\n      const membership = await storage.getUserCompanyMembership(userId);\n      if (!membership || (membership.role !== 'owner' && membership.role !== 'admin')) {\n        return res.status(403).json({ message: \"Only owners and admins can send invites\" });\n      }\n\n      // Check seat limit\n      const memberCount = await storage.getCompanyMemberCount(membership.companyId);\n      const totalSeats = membership.company.seatLimit + membership.company.extraSeats;\n      \n      if (memberCount >= totalSeats) {\n        return res.status(400).json({ \n          message: `Seat limit reached (${memberCount}/${totalSeats}). Upgrade to add more seats.`,\n          requiresUpgrade: true\n        });\n      }\n\n      // Generate invite token\n      const token = crypto.randomUUID();\n      const expiresAt = new Date();\n      expiresAt.setDate(expiresAt.getDate() + 7); // 7 day expiration\n\n      const invite = await storage.createInvite({\n        companyId: membership.companyId,\n        email: email.toLowerCase().trim(),\n        role,\n        token,\n        invitedBy: userId,\n        expiresAt,\n      });\n\n      // Generate invite link\n      const baseUrl = `${req.protocol}://${req.get('host')}`;\n      const inviteLink = `${baseUrl}/invite/${token}`;\n\n      res.json({\n        invite,\n        inviteLink,\n      });\n    } catch (error) {\n      console.error(\"Error creating invite:\", error);\n      res.status(500).json({ message: \"Failed to create invite\" });\n    }\n  });\n\n  app.delete('/api/company/invites/:id', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const inviteId = parseInt(req.params.id);\n\n      const membership = await storage.getUserCompanyMembership(userId);\n      if (!membership || (membership.role !== 'owner' && membership.role !== 'admin')) {\n        return res.status(403).json({ message: \"Only owners and admins can delete invites\" });\n      }\n\n      const deleted = await storage.deleteInvite(inviteId, membership.companyId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Invite not found\" });\n      }\n\n      res.json({ message: \"Invite deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting invite:\", error);\n      res.status(500).json({ message: \"Failed to delete invite\" });\n    }\n  });\n\n  // Public invite acceptance route\n  app.get('/api/invite/:token', async (req, res) => {\n    try {\n      const { token } = req.params;\n      \n      const invite = await storage.getInviteByToken(token);\n      if (!invite) {\n        return res.status(404).json({ message: \"Invite not found\" });\n      }\n\n      if (invite.acceptedAt) {\n        return res.status(400).json({ message: \"This invite has already been used\" });\n      }\n\n      if (new Date() > invite.expiresAt) {\n        return res.status(400).json({ message: \"This invite has expired\" });\n      }\n\n      res.json({\n        companyName: invite.company.name,\n        role: invite.role,\n        email: invite.email,\n        expiresAt: invite.expiresAt,\n      });\n    } catch (error) {\n      console.error(\"Error fetching invite:\", error);\n      res.status(500).json({ message: \"Failed to fetch invite\" });\n    }\n  });\n\n  app.post('/api/invite/:token/accept', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { token } = req.params;\n\n      // Check if user already in a company\n      const existingMembership = await storage.getUserCompanyMembership(userId);\n      if (existingMembership) {\n        return res.status(400).json({ message: \"You are already part of a company\" });\n      }\n\n      // Get invite to check seat limits before accepting\n      const invite = await storage.getInviteByToken(token);\n      if (!invite) {\n        return res.status(400).json({ message: \"Invalid invite\" });\n      }\n      \n      // Check seat limit\n      const memberCount = await storage.getCompanyMemberCount(invite.companyId);\n      const totalSeats = invite.company.seatLimit + invite.company.extraSeats;\n      \n      if (memberCount >= totalSeats) {\n        return res.status(400).json({ \n          message: \"This team has reached its seat limit. Contact the team owner to add more seats.\",\n        });\n      }\n\n      const member = await storage.acceptInvite(token, userId);\n      if (!member) {\n        return res.status(400).json({ message: \"Invalid, expired, or already used invite\" });\n      }\n\n      res.json({\n        message: \"Successfully joined the company\",\n        role: member.role,\n      });\n    } catch (error) {\n      console.error(\"Error accepting invite:\", error);\n      res.status(500).json({ message: \"Failed to accept invite\" });\n    }\n  });\n\n  // Analytics endpoints\n  app.get('/api/analytics/pricing-summary', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const analytics = await storage.getProposalAnalytics(userId);\n      res.json(analytics);\n    } catch (error) {\n      console.error(\"Error fetching pricing summary:\", error);\n      res.status(500).json({ message: \"Failed to fetch pricing summary\" });\n    }\n  });\n\n  app.get('/api/analytics/benchmarks', async (req, res) => {\n    try {\n      res.json({\n        trades: benchmarkTrades,\n        regions: regionalMultipliers,\n      });\n    } catch (error) {\n      console.error(\"Error fetching benchmarks:\", error);\n      res.status(500).json({ message: \"Failed to fetch benchmarks\" });\n    }\n  });\n\n  // Search Console routes (crew only)\n  const isCrewUser = async (req: any, res: any, next: any) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n      const user = await storage.getUser(userId);\n      if (user?.subscriptionPlan !== 'crew') {\n        return res.status(403).json({ message: \"This feature requires a Crew subscription\" });\n      }\n      next();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to verify subscription\" });\n    }\n  };\n\n  app.get('/api/search-console/test', isAuthenticated, isCrewUser, async (req: any, res) => {\n    try {\n      const { searchConsoleService } = await import('./services/searchConsole');\n      const result = await searchConsoleService.testConnection();\n      res.json(result);\n    } catch (error: any) {\n      console.error(\"Error testing Search Console connection:\", error);\n      res.status(500).json({ success: false, error: error.message || \"Failed to test connection\" });\n    }\n  });\n\n  app.get('/api/search-console/sites', isAuthenticated, isCrewUser, async (req: any, res) => {\n    try {\n      const { searchConsoleService } = await import('./services/searchConsole');\n      const sites = await searchConsoleService.listSites();\n      res.json(sites);\n    } catch (error: any) {\n      console.error(\"Error fetching Search Console sites:\", error);\n      res.status(500).json({ message: error.message || \"Failed to fetch sites\" });\n    }\n  });\n\n  app.get('/api/search-console/analytics', isAuthenticated, isCrewUser, async (req: any, res) => {\n    try {\n      const { siteUrl, startDate, endDate, dimensions, rowLimit } = req.query;\n      \n      if (!siteUrl || !startDate || !endDate) {\n        return res.status(400).json({ message: \"siteUrl, startDate, and endDate are required\" });\n      }\n\n      const { searchConsoleService } = await import('./services/searchConsole');\n      const analytics = await searchConsoleService.getSearchAnalytics(\n        siteUrl as string,\n        startDate as string,\n        endDate as string,\n        dimensions ? (dimensions as string).split(',') : ['query'],\n        rowLimit ? parseInt(rowLimit as string) : 100\n      );\n      res.json(analytics);\n    } catch (error: any) {\n      console.error(\"Error fetching Search Console analytics:\", error);\n      res.status(500).json({ message: error.message || \"Failed to fetch analytics\" });\n    }\n  });\n\n  app.get('/api/search-console/sitemaps', isAuthenticated, isCrewUser, async (req: any, res) => {\n    try {\n      const { siteUrl } = req.query;\n      \n      if (!siteUrl) {\n        return res.status(400).json({ message: \"siteUrl is required\" });\n      }\n\n      const { searchConsoleService } = await import('./services/searchConsole');\n      const sitemaps = await searchConsoleService.listSitemaps(siteUrl as string);\n      res.json(sitemaps);\n    } catch (error: any) {\n      console.error(\"Error fetching sitemaps:\", error);\n      res.status(500).json({ message: error.message || \"Failed to fetch sitemaps\" });\n    }\n  });\n\n  app.post('/api/search-console/sitemaps', isAuthenticated, isCrewUser, async (req: any, res) => {\n    try {\n      const { siteUrl, feedpath } = req.body;\n      \n      if (!siteUrl || !feedpath) {\n        return res.status(400).json({ message: \"siteUrl and feedpath are required\" });\n      }\n\n      const { searchConsoleService } = await import('./services/searchConsole');\n      await searchConsoleService.submitSitemap(siteUrl, feedpath);\n      res.json({ message: \"Sitemap submitted successfully\" });\n    } catch (error: any) {\n      console.error(\"Error submitting sitemap:\", error);\n      res.status(500).json({ message: error.message || \"Failed to submit sitemap\" });\n    }\n  });\n\n  app.delete('/api/search-console/sitemaps', isAuthenticated, isCrewUser, async (req: any, res) => {\n    try {\n      const { siteUrl, feedpath } = req.query;\n      \n      if (!siteUrl || !feedpath) {\n        return res.status(400).json({ message: \"siteUrl and feedpath are required\" });\n      }\n\n      const { searchConsoleService } = await import('./services/searchConsole');\n      await searchConsoleService.deleteSitemap(siteUrl as string, feedpath as string);\n      res.json({ message: \"Sitemap deleted successfully\" });\n    } catch (error: any) {\n      console.error(\"Error deleting sitemap:\", error);\n      res.status(500).json({ message: error.message || \"Failed to delete sitemap\" });\n    }\n  });\n\n  app.post('/api/search-console/inspect-url', isAuthenticated, isCrewUser, async (req: any, res) => {\n    try {\n      const { siteUrl, inspectionUrl } = req.body;\n      \n      if (!siteUrl || !inspectionUrl) {\n        return res.status(400).json({ message: \"siteUrl and inspectionUrl are required\" });\n      }\n\n      const { searchConsoleService } = await import('./services/searchConsole');\n      const result = await searchConsoleService.inspectUrl(siteUrl, inspectionUrl);\n      res.json(result);\n    } catch (error: any) {\n      console.error(\"Error inspecting URL:\", error);\n      res.status(500).json({ message: error.message || \"Failed to inspect URL\" });\n    }\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":59135,"size_tokens":null},"client/src/lib/proposal-data.ts":{"content":"export interface Template {\n  id: string;\n  trade: string;\n  jobTypes: JobType[];\n}\n\nexport interface JobType {\n  id: string;\n  name: string;\n  baseScope: string[];\n  options: JobOption[];\n  basePriceRange: { low: number; high: number };\n  estimatedDays?: { low: number; high: number };\n  warranty?: string;\n  exclusions?: string[];\n}\n\nexport interface JobOption {\n  id: string;\n  label: string;\n  type: \"boolean\" | \"select\";\n  choices?: { value: string; label: string; priceModifier: number; scopeAddition?: string }[];\n  priceModifier?: number;\n  scopeAddition?: string;\n}\n\nexport const templates: Template[] = [\n  {\n    id: \"bathroom\",\n    trade: \"Bathroom Remodel\",\n    jobTypes: [\n      {\n        id: \"tub-to-shower\",\n        name: \"Tub-to-Shower Conversion\",\n        basePriceRange: { low: 8500, high: 12000 },\n        estimatedDays: { low: 5, high: 8 },\n        warranty: \"1-year labor warranty on all workmanship. Manufacturer warranties apply to all fixtures and materials.\",\n        exclusions: [\n          \"Repair of hidden water damage discovered after demolition\",\n          \"Electrical upgrades beyond existing circuits\",\n          \"Permits and inspection fees (if required)\"\n        ],\n        baseScope: [\n          \"Demolish existing bathtub and surround down to studs.\",\n          \"Dispose of all debris off-site in accordance with local regulations.\",\n          \"Inspect framing and plumbing for water damage; report findings to homeowner.\",\n          \"Install new shower pan/base with proper slope (minimum 1/4\\\" per foot).\",\n          \"Install cement board backer on all shower walls per manufacturer specs.\",\n          \"Apply waterproof membrane to all wet areas meeting TCNA standards.\",\n          \"Install new shower valve, mixing valve, and trim kit.\",\n          \"Tile shower walls to ceiling height using thin-set mortar method.\",\n          \"Grout all tile joints with premium sanded grout; seal grout lines.\",\n          \"Install shower head, arm, and escutcheon plate.\",\n          \"Caulk all corners and transitions with mildew-resistant silicone.\",\n          \"Final cleanup and debris removal; protect finished work.\"\n        ],\n        options: [\n          {\n            id: \"niche\",\n            label: \"Add Recessed Niche\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Frame and install recessed tiled niche (12x24) for soap/shampoo storage with matching tile.\"\n          },\n          {\n            id: \"glass-door\",\n            label: \"Glass Door Style\",\n            type: \"select\",\n            choices: [\n              { value: \"framed\", label: \"Framed Sliding Door\", priceModifier: 800, scopeAddition: \"Install framed sliding glass shower door with chrome hardware.\" },\n              { value: \"semi-frameless\", label: \"Semi-Frameless Pivot\", priceModifier: 1200, scopeAddition: \"Install semi-frameless pivot glass door with brushed nickel hardware.\" },\n              { value: \"frameless\", label: \"Frameless Fixed Panel\", priceModifier: 1800, scopeAddition: \"Install frameless fixed glass panel with stainless steel clips and hardware.\" }\n            ]\n          },\n          {\n            id: \"bench\",\n            label: \"Built-in Shower Bench\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Construct waterproof concrete bench seat (approx. 18\\\" x 30\\\") and tile to match walls.\"\n          },\n          {\n            id: \"linear-drain\",\n            label: \"Linear Drain Upgrade\",\n            type: \"boolean\",\n            priceModifier: 550,\n            scopeAddition: \"Install linear stainless steel drain system in lieu of standard center drain.\"\n          },\n          {\n            id: \"body-sprays\",\n            label: \"Body Spray System\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install (3) wall-mounted body spray jets with dedicated valve control.\"\n          }\n        ]\n      },\n      {\n        id: \"full-gut\",\n        name: \"Full Bathroom Gut & Remodel\",\n        basePriceRange: { low: 18000, high: 28000 },\n        estimatedDays: { low: 10, high: 18 },\n        warranty: \"2-year labor warranty on all workmanship. Extended manufacturer warranties on fixtures.\",\n        exclusions: [\n          \"Structural repairs to floor joists or wall framing\",\n          \"Mold remediation beyond surface treatment\",\n          \"Relocation of main drain stack or supply risers\"\n        ],\n        baseScope: [\n          \"Complete demolition of vanity, toilet, tub/shower, flooring, and wall finishes.\",\n          \"Remove existing fixtures and dispose of all debris off-site.\",\n          \"Inspect and document condition of plumbing, electrical, and framing.\",\n          \"Update plumbing rough-in as required by local code.\",\n          \"Install new electrical circuits for GFI outlets, exhaust fan, and lighting.\",\n          \"Install moisture-resistant drywall on walls; cement board in wet areas.\",\n          \"Install new vanity cabinet (36-48\\\" standard) with soft-close hardware.\",\n          \"Install vanity countertop with undermount or vessel sink.\",\n          \"Install new faucet and pop-up drain assembly.\",\n          \"Install new toilet with wax ring seal and supply line.\",\n          \"Install new bathtub or shower system per plan specifications.\",\n          \"Tile floor with selected tile; install transitions at doorways.\",\n          \"Tile wet areas with waterproof membrane system.\",\n          \"Paint walls and ceiling with moisture-resistant paint (2 coats).\",\n          \"Install new light fixtures, exhaust fan, and GFI outlets.\",\n          \"Install new towel bars, paper holder, and accessories.\",\n          \"Final cleanup, touch-up, and walkthrough with homeowner.\"\n        ],\n        options: [\n          {\n            id: \"heated-floor\",\n            label: \"Heated Floor System\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install electric radiant floor heating mat with programmable digital thermostat.\"\n          },\n          {\n            id: \"double-vanity\",\n            label: \"Double Vanity Upgrade\",\n            type: \"boolean\",\n            priceModifier: 2500,\n            scopeAddition: \"Install double-sink vanity (60-72\\\") with dual faucets and extended countertop.\"\n          },\n          {\n            id: \"freestanding-tub\",\n            label: \"Freestanding Soaking Tub\",\n            type: \"boolean\",\n            priceModifier: 3500,\n            scopeAddition: \"Install freestanding acrylic soaking tub with floor-mounted filler and drain.\"\n          },\n          {\n            id: \"tile-grade\",\n            label: \"Tile Grade Selection\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard Ceramic\", priceModifier: 0, scopeAddition: \"Install standard ceramic tile (included in base price).\" },\n              { value: \"porcelain\", label: \"Premium Porcelain\", priceModifier: 1200, scopeAddition: \"Upgrade to premium porcelain tile with enhanced durability.\" },\n              { value: \"natural-stone\", label: \"Natural Stone\", priceModifier: 2800, scopeAddition: \"Install natural stone tile (marble, travertine, or slate) with sealer.\" }\n            ]\n          },\n          {\n            id: \"custom-shower\",\n            label: \"Custom Tile Shower\",\n            type: \"boolean\",\n            priceModifier: 4500,\n            scopeAddition: \"Build custom tile shower with curb, linear drain, and full-height tile walls.\"\n          }\n        ]\n      },\n      {\n        id: \"half-bath\",\n        name: \"Half Bath / Powder Room Remodel\",\n        basePriceRange: { low: 6500, high: 9500 },\n        estimatedDays: { low: 4, high: 6 },\n        warranty: \"1-year labor warranty on all workmanship.\",\n        exclusions: [\"Plumbing relocation\", \"New window installation\"],\n        baseScope: [\n          \"Remove existing vanity, toilet, flooring, and wall finishes.\",\n          \"Dispose of all demolition debris off-site.\",\n          \"Repair/patch drywall as needed; install new drywall if required.\",\n          \"Install new vanity cabinet (24-30\\\" width) with countertop and sink.\",\n          \"Install new single-hole or widespread faucet.\",\n          \"Install new toilet with all hardware and accessories.\",\n          \"Install new luxury vinyl plank or tile flooring.\",\n          \"Paint walls and ceiling (2 coats premium latex).\",\n          \"Install new light fixture above vanity.\",\n          \"Install mirror, towel ring, and toilet paper holder.\",\n          \"Caulk all edges; final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"pedestal-sink\",\n            label: \"Pedestal Sink (in lieu of vanity)\",\n            type: \"boolean\",\n            priceModifier: -200,\n            scopeAddition: \"Install pedestal sink in place of vanity cabinet for classic aesthetic.\"\n          },\n          {\n            id: \"wallpaper-accent\",\n            label: \"Wallpaper Accent Wall\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install designer wallpaper on accent wall with proper prep and adhesive.\"\n          },\n          {\n            id: \"wainscoting\",\n            label: \"Wainscoting\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Install 36\\\" wainscoting panels with chair rail and paint to match.\"\n          }\n        ]\n      },\n      {\n        id: \"ada-accessibility\",\n        name: \"ADA/Accessibility Bathroom Remodel\",\n        basePriceRange: { low: 12000, high: 22000 },\n        estimatedDays: { low: 7, high: 12 },\n        warranty: \"2-year labor warranty on all workmanship.\",\n        exclusions: [\"Structural modifications beyond doorway widening\", \"Bedroom modifications\"],\n        baseScope: [\n          \"Remove existing tub/shower, vanity, and toilet.\",\n          \"Dispose of all demolition debris off-site.\",\n          \"Widen doorway to 36\\\" clear opening if required.\",\n          \"Install curbless/roll-in shower with proper slope to drain.\",\n          \"Install non-slip tile flooring throughout bathroom.\",\n          \"Install fold-down shower bench rated for 500 lbs.\",\n          \"Install ADA-compliant grab bars at shower, toilet, and vanity.\",\n          \"Install comfort-height toilet (17-19\\\" seat height).\",\n          \"Install wall-mount or accessible vanity with knee clearance.\",\n          \"Install lever-handle faucets throughout.\",\n          \"Install handheld showerhead on adjustable slide bar.\",\n          \"Install anti-scald pressure-balancing valve.\",\n          \"Ensure proper lighting levels per ADA guidelines.\",\n          \"Install accessible light switches and outlets at proper heights.\",\n          \"Final inspection and walkthrough.\"\n        ],\n        options: [\n          {\n            id: \"grab-bar-upgrade\",\n            label: \"Designer Grab Bar Package\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Upgrade to designer grab bars with brushed nickel or oil-rubbed bronze finish.\"\n          },\n          {\n            id: \"heated-floor-ada\",\n            label: \"Heated Floor System\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install electric radiant floor heating with programmable thermostat.\"\n          },\n          {\n            id: \"transfer-bench\",\n            label: \"Built-in Transfer Bench\",\n            type: \"boolean\",\n            priceModifier: 850,\n            scopeAddition: \"Build tiled transfer bench extending outside shower for easier entry.\"\n          }\n        ]\n      },\n      {\n        id: \"vanity-refresh\",\n        name: \"Vanity & Faucet Replacement\",\n        basePriceRange: { low: 1800, high: 3500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"1-year labor warranty.\",\n        exclusions: [\"Plumbing relocation\", \"Wall repair beyond minor patching\"],\n        baseScope: [\n          \"Shut off water supply to vanity.\",\n          \"Disconnect and remove existing vanity, countertop, and faucet.\",\n          \"Dispose of old vanity off-site.\",\n          \"Inspect plumbing connections; replace supply lines.\",\n          \"Install new vanity cabinet; secure to wall studs.\",\n          \"Install new countertop with sink cutout.\",\n          \"Install new undermount or drop-in sink.\",\n          \"Install new faucet and drain assembly.\",\n          \"Connect P-trap and test for leaks.\",\n          \"Apply caulk around countertop edges.\",\n          \"Install new mirror above vanity.\",\n          \"Clean up and test all fixtures.\"\n        ],\n        options: [\n          {\n            id: \"vanity-size\",\n            label: \"Vanity Width\",\n            type: \"select\",\n            choices: [\n              { value: \"30\", label: \"30-inch Single\", priceModifier: 0 },\n              { value: \"48\", label: \"48-inch Single\", priceModifier: 400, scopeAddition: \"Install 48-inch vanity with extended countertop.\" },\n              { value: \"60\", label: \"60-inch Double\", priceModifier: 1200, scopeAddition: \"Install 60-inch double vanity with dual sinks and faucets.\" }\n            ]\n          },\n          {\n            id: \"add-lighting\",\n            label: \"New Vanity Light Fixture\",\n            type: \"boolean\",\n            priceModifier: 225,\n            scopeAddition: \"Remove old light and install new vanity light fixture above mirror.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"kitchen\",\n    trade: \"Kitchen Remodel\",\n    jobTypes: [\n      {\n        id: \"full-kitchen-gut\",\n        name: \"Full Kitchen Remodel â€“ Gut & Replace\",\n        basePriceRange: { low: 45000, high: 85000 },\n        estimatedDays: { low: 25, high: 45 },\n        warranty: \"2-year labor warranty on all workmanship. Manufacturer warranties apply to all fixtures and materials.\",\n        exclusions: [\n          \"Appliance costs (allowance may be included)\",\n          \"Structural wall removal requiring engineering\",\n          \"HVAC modifications or relocation\",\n          \"Permit and inspection fees\",\n          \"Mold or asbestos remediation\"\n        ],\n        baseScope: [\n          \"Complete demolition of existing cabinets, countertops, flooring, backsplash, and soffits.\",\n          \"Remove existing appliances and disconnect all utilities.\",\n          \"Dispose of all demolition debris per local regulations.\",\n          \"Inspect and document condition of plumbing, electrical, and framing.\",\n          \"Update electrical circuits per plan; add outlets as required by code.\",\n          \"Update plumbing rough-in for sink, dishwasher, and refrigerator.\",\n          \"Install new drywall/patch walls as needed; texture to match.\",\n          \"Prime and paint walls and ceiling (2 coats).\",\n          \"Install new base and upper cabinets per layout plan.\",\n          \"Install crown molding and decorative trim on cabinets.\",\n          \"Template and fabricate new countertops.\",\n          \"Install countertops with proper support and cutouts.\",\n          \"Install undermount sink and faucet assembly.\",\n          \"Install tile backsplash per design specifications.\",\n          \"Install new flooring (hardwood, tile, or LVP) with transitions.\",\n          \"Install new lighting fixtures: recessed cans and pendant lights.\",\n          \"Connect and install all appliances (per allowance or owner-supplied).\",\n          \"Install garbage disposal, dishwasher, and range hood ductwork.\",\n          \"Final punch list, touch-up, and homeowner walkthrough.\"\n        ],\n        options: [\n          {\n            id: \"cabinet-scope\",\n            label: \"Cabinet Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-stock\", label: \"New Stock Cabinets\", priceModifier: 0, scopeAddition: \"Install new stock cabinet line with standard finishes and hardware.\" },\n              { value: \"new-semi-custom\", label: \"New Semi-Custom Cabinets\", priceModifier: 4000, scopeAddition: \"Install new semi-custom cabinets with choice of door style and finish.\" },\n              { value: \"new-custom\", label: \"New Custom Cabinets\", priceModifier: 15000, scopeAddition: \"Install fully custom cabinets built to specifications with premium finishes.\" },\n              { value: \"reface\", label: \"Reface Existing Cabinets\", priceModifier: -8000, scopeAddition: \"Reface existing cabinet boxes with new doors, drawer fronts, and veneer.\" },\n              { value: \"paint\", label: \"Paint Existing Cabinets\", priceModifier: -10000, scopeAddition: \"Prep, prime, and paint existing cabinet boxes, doors, and drawers.\" },\n              { value: \"doors-only\", label: \"Replace Cabinet Doors Only\", priceModifier: -12000, scopeAddition: \"Replace cabinet doors and drawer fronts only; retain existing boxes.\" },\n              { value: \"hardware-only\", label: \"Replace Cabinet Hardware Only\", priceModifier: -14000, scopeAddition: \"Replace cabinet hardware (pulls/knobs) only; retain existing doors and boxes.\" },\n              { value: \"island-cabinets\", label: \"Add Island Cabinets\", priceModifier: 3500, scopeAddition: \"Add island base cabinets with matching finish to perimeter cabinets.\" },\n              { value: \"pantry-cabinets\", label: \"Add Pantry Cabinets\", priceModifier: 2500, scopeAddition: \"Add tall pantry cabinet unit with pull-out shelving.\" }\n            ]\n          },\n          {\n            id: \"crown-trim\",\n            label: \"Add Crown / Trim / Light Rail\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install crown molding, light rail, and decorative trim on all cabinets.\"\n          },\n          {\n            id: \"countertop-type\",\n            label: \"Countertop Type\",\n            type: \"select\",\n            choices: [\n              { value: \"laminate\", label: \"Laminate\", priceModifier: -2000, scopeAddition: \"Install premium laminate countertops with built-up edges.\" },\n              { value: \"butcher-block\", label: \"Butcher Block\", priceModifier: -1000, scopeAddition: \"Install solid wood butcher block countertops with food-safe finish.\" },\n              { value: \"solid-surface\", label: \"Solid Surface (e.g., Corian)\", priceModifier: -500, scopeAddition: \"Install solid surface countertops with integrated sink option.\" },\n              { value: \"quartz\", label: \"Quartz\", priceModifier: 0, scopeAddition: \"Install engineered quartz countertops (color per selection).\" },\n              { value: \"granite\", label: \"Granite\", priceModifier: 800, scopeAddition: \"Install granite slab countertops with polished edges and sealer.\" },\n              { value: \"marble\", label: \"Marble\", priceModifier: 2500, scopeAddition: \"Install marble slab countertops with honed or polished finish and sealer.\" },\n              { value: \"porcelain-sintered\", label: \"Porcelain / Sintered Stone\", priceModifier: 1500, scopeAddition: \"Install porcelain or sintered stone countertops with polished finish.\" },\n              { value: \"concrete\", label: \"Concrete\", priceModifier: 1800, scopeAddition: \"Install custom concrete countertops with sealed finish.\" },\n              { value: \"tile\", label: \"Tile Countertop\", priceModifier: -1500, scopeAddition: \"Install tile countertops with bullnose edges and grouted joints.\" },\n              { value: \"keep-existing\", label: \"Keep Existing Countertops\", priceModifier: -3000, scopeAddition: \"Retain and protect existing countertops; reconnect sink and faucet.\" }\n            ]\n          },\n          {\n            id: \"plumbing-fixtures\",\n            label: \"Plumbing Fixtures\",\n            type: \"select\",\n            choices: [\n              { value: \"sink-only\", label: \"Replace Sink Only\", priceModifier: 350, scopeAddition: \"Install new undermount or drop-in sink; reconnect existing plumbing.\" },\n              { value: \"faucet-only\", label: \"Replace Faucet Only\", priceModifier: 250, scopeAddition: \"Install new kitchen faucet with supply lines.\" },\n              { value: \"sink-faucet\", label: \"Replace Sink & Faucet\", priceModifier: 550, scopeAddition: \"Install new sink and faucet assembly with all connections.\" },\n              { value: \"add-disposal\", label: \"Add Garbage Disposal\", priceModifier: 400, scopeAddition: \"Install new garbage disposal unit with electrical connection.\" },\n              { value: \"replace-disposal\", label: \"Replace Garbage Disposal\", priceModifier: 275, scopeAddition: \"Remove old disposal and install new unit.\" },\n              { value: \"relocate-sink-minor\", label: \"Relocate Sink (Minor)\", priceModifier: 800, scopeAddition: \"Relocate sink within 3 feet of existing location; extend drain and supply lines.\" },\n              { value: \"relocate-sink-major\", label: \"Relocate Sink (Major)\", priceModifier: 2500, scopeAddition: \"Relocate sink to new location; run new drain and supply lines through structure.\" },\n              { value: \"pot-filler\", label: \"Add Pot Filler\", priceModifier: 850, scopeAddition: \"Install wall-mounted pot filler faucet above range with shutoff valve.\" },\n              { value: \"no-plumbing\", label: \"No Plumbing Work\", priceModifier: 0, scopeAddition: \"No plumbing modifications included.\" }\n            ]\n          },\n          {\n            id: \"electrical-lighting\",\n            label: \"Electrical & Lighting\",\n            type: \"select\",\n            choices: [\n              { value: \"light-fixtures\", label: \"Replace Existing Light Fixtures Only\", priceModifier: 450, scopeAddition: \"Remove and replace existing light fixtures with new units.\" },\n              { value: \"recessed\", label: \"Add Recessed Lighting\", priceModifier: 1200, scopeAddition: \"Install recessed LED lighting throughout kitchen ceiling.\" },\n              { value: \"under-cabinet\", label: \"Add / Replace Under-Cabinet Lighting\", priceModifier: 650, scopeAddition: \"Install hardwired LED strip lighting under upper cabinets with dimmer switch.\" },\n              { value: \"pendant\", label: \"Add / Replace Pendant Lights\", priceModifier: 550, scopeAddition: \"Install pendant light fixtures over island or sink area.\" },\n              { value: \"outlets\", label: \"Add / Relocate Outlets\", priceModifier: 400, scopeAddition: \"Add or relocate electrical outlets per code requirements.\" },\n              { value: \"switches-dimmers\", label: \"Upgrade Switches / Dimmers\", priceModifier: 300, scopeAddition: \"Upgrade light switches to dimmer switches throughout kitchen.\" },\n              { value: \"dedicated-circuits\", label: \"Dedicated Circuits for Appliances\", priceModifier: 750, scopeAddition: \"Install dedicated electrical circuits for major appliances.\" },\n              { value: \"no-electrical\", label: \"No Electrical Work\", priceModifier: 0, scopeAddition: \"No electrical modifications included.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"full-kitchen-cosmetic\",\n        name: \"Full Kitchen Remodel â€“ Cosmetic Only\",\n        basePriceRange: { low: 15000, high: 30000 },\n        estimatedDays: { low: 10, high: 18 },\n        warranty: \"1-year labor warranty on all workmanship. Manufacturer warranties apply to all fixtures and materials.\",\n        exclusions: [\n          \"Structural modifications\",\n          \"Plumbing or electrical relocation\",\n          \"Appliance costs\",\n          \"Permit fees\"\n        ],\n        baseScope: [\n          \"Protect flooring and existing appliances with drop cloths.\",\n          \"Remove existing countertops and backsplash; dispose off-site.\",\n          \"Remove cabinet doors, drawer fronts, and all hardware.\",\n          \"Clean, sand, and prep all cabinet surfaces.\",\n          \"Apply primer and two coats of cabinet-grade paint or stain.\",\n          \"Install new soft-close hinges and drawer slides.\",\n          \"Template and fabricate new countertops per specifications.\",\n          \"Install new countertops with proper support and seaming.\",\n          \"Cut and install new undermount or drop-in sink.\",\n          \"Reconnect plumbing to sink and garbage disposal.\",\n          \"Install new faucet assembly.\",\n          \"Install tile backsplash per design specifications.\",\n          \"Install new cabinet hardware (pulls/knobs).\",\n          \"Reinstall all doors and drawer fronts; adjust alignment.\",\n          \"Caulk countertop edges; seal natural stone if applicable.\",\n          \"Final cleanup and quality inspection.\"\n        ],\n        options: [\n          {\n            id: \"cabinet-scope\",\n            label: \"Cabinet Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-stock\", label: \"New Stock Cabinets\", priceModifier: 0, scopeAddition: \"Install new stock cabinet line with standard finishes and hardware.\" },\n              { value: \"new-semi-custom\", label: \"New Semi-Custom Cabinets\", priceModifier: 4000, scopeAddition: \"Install new semi-custom cabinets with choice of door style and finish.\" },\n              { value: \"new-custom\", label: \"New Custom Cabinets\", priceModifier: 15000, scopeAddition: \"Install fully custom cabinets built to specifications with premium finishes.\" },\n              { value: \"reface\", label: \"Reface Existing Cabinets\", priceModifier: -8000, scopeAddition: \"Reface existing cabinet boxes with new doors, drawer fronts, and veneer.\" },\n              { value: \"paint\", label: \"Paint Existing Cabinets\", priceModifier: -10000, scopeAddition: \"Prep, prime, and paint existing cabinet boxes, doors, and drawers.\" },\n              { value: \"doors-only\", label: \"Replace Cabinet Doors Only\", priceModifier: -12000, scopeAddition: \"Replace cabinet doors and drawer fronts only; retain existing boxes.\" },\n              { value: \"hardware-only\", label: \"Replace Cabinet Hardware Only\", priceModifier: -14000, scopeAddition: \"Replace cabinet hardware (pulls/knobs) only; retain existing doors and boxes.\" },\n              { value: \"island-cabinets\", label: \"Add Island Cabinets\", priceModifier: 3500, scopeAddition: \"Add island base cabinets with matching finish to perimeter cabinets.\" },\n              { value: \"pantry-cabinets\", label: \"Add Pantry Cabinets\", priceModifier: 2500, scopeAddition: \"Add tall pantry cabinet unit with pull-out shelving.\" }\n            ]\n          },\n          {\n            id: \"crown-trim\",\n            label: \"Add Crown / Trim / Light Rail\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install crown molding, light rail, and decorative trim on all cabinets.\"\n          },\n          {\n            id: \"countertop-type\",\n            label: \"Countertop Type\",\n            type: \"select\",\n            choices: [\n              { value: \"laminate\", label: \"Laminate\", priceModifier: -2000, scopeAddition: \"Install premium laminate countertops with built-up edges.\" },\n              { value: \"butcher-block\", label: \"Butcher Block\", priceModifier: -1000, scopeAddition: \"Install solid wood butcher block countertops with food-safe finish.\" },\n              { value: \"solid-surface\", label: \"Solid Surface (e.g., Corian)\", priceModifier: -500, scopeAddition: \"Install solid surface countertops with integrated sink option.\" },\n              { value: \"quartz\", label: \"Quartz\", priceModifier: 0, scopeAddition: \"Install engineered quartz countertops (color per selection).\" },\n              { value: \"granite\", label: \"Granite\", priceModifier: 800, scopeAddition: \"Install granite slab countertops with polished edges and sealer.\" },\n              { value: \"marble\", label: \"Marble\", priceModifier: 2500, scopeAddition: \"Install marble slab countertops with honed or polished finish and sealer.\" },\n              { value: \"porcelain-sintered\", label: \"Porcelain / Sintered Stone\", priceModifier: 1500, scopeAddition: \"Install porcelain or sintered stone countertops with polished finish.\" },\n              { value: \"concrete\", label: \"Concrete\", priceModifier: 1800, scopeAddition: \"Install custom concrete countertops with sealed finish.\" },\n              { value: \"tile\", label: \"Tile Countertop\", priceModifier: -1500, scopeAddition: \"Install tile countertops with bullnose edges and grouted joints.\" },\n              { value: \"keep-existing\", label: \"Keep Existing Countertops\", priceModifier: -3000, scopeAddition: \"Retain and protect existing countertops; reconnect sink and faucet.\" }\n            ]\n          },\n          {\n            id: \"plumbing-fixtures\",\n            label: \"Plumbing Fixtures\",\n            type: \"select\",\n            choices: [\n              { value: \"sink-only\", label: \"Replace Sink Only\", priceModifier: 350, scopeAddition: \"Install new undermount or drop-in sink; reconnect existing plumbing.\" },\n              { value: \"faucet-only\", label: \"Replace Faucet Only\", priceModifier: 250, scopeAddition: \"Install new kitchen faucet with supply lines.\" },\n              { value: \"sink-faucet\", label: \"Replace Sink & Faucet\", priceModifier: 550, scopeAddition: \"Install new sink and faucet assembly with all connections.\" },\n              { value: \"add-disposal\", label: \"Add Garbage Disposal\", priceModifier: 400, scopeAddition: \"Install new garbage disposal unit with electrical connection.\" },\n              { value: \"replace-disposal\", label: \"Replace Garbage Disposal\", priceModifier: 275, scopeAddition: \"Remove old disposal and install new unit.\" },\n              { value: \"pot-filler\", label: \"Add Pot Filler\", priceModifier: 850, scopeAddition: \"Install wall-mounted pot filler faucet above range with shutoff valve.\" },\n              { value: \"no-plumbing\", label: \"No Plumbing Work\", priceModifier: 0, scopeAddition: \"No plumbing modifications included.\" }\n            ]\n          },\n          {\n            id: \"electrical-lighting\",\n            label: \"Electrical & Lighting\",\n            type: \"select\",\n            choices: [\n              { value: \"light-fixtures\", label: \"Replace Existing Light Fixtures Only\", priceModifier: 450, scopeAddition: \"Remove and replace existing light fixtures with new units.\" },\n              { value: \"under-cabinet\", label: \"Add / Replace Under-Cabinet Lighting\", priceModifier: 650, scopeAddition: \"Install hardwired LED strip lighting under upper cabinets with dimmer switch.\" },\n              { value: \"pendant\", label: \"Add / Replace Pendant Lights\", priceModifier: 550, scopeAddition: \"Install pendant light fixtures over island or sink area.\" },\n              { value: \"switches-dimmers\", label: \"Upgrade Switches / Dimmers\", priceModifier: 300, scopeAddition: \"Upgrade light switches to dimmer switches throughout kitchen.\" },\n              { value: \"no-electrical\", label: \"No Electrical Work\", priceModifier: 0, scopeAddition: \"No electrical modifications included.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"partial-kitchen\",\n        name: \"Partial Kitchen Remodel\",\n        basePriceRange: { low: 8000, high: 18000 },\n        estimatedDays: { low: 7, high: 14 },\n        warranty: \"1-year labor warranty on all workmanship.\",\n        exclusions: [\n          \"Structural modifications\",\n          \"Major plumbing relocation\",\n          \"Appliance costs\",\n          \"Permit fees\"\n        ],\n        baseScope: [\n          \"Protect flooring and appliances with drop cloths.\",\n          \"Remove designated cabinets, countertops, or backsplash as specified.\",\n          \"Dispose of demolition debris off-site.\",\n          \"Repair and prep walls as needed.\",\n          \"Install new cabinets in designated areas per plan.\",\n          \"Template and fabricate new countertops for affected areas.\",\n          \"Install new countertops with proper support.\",\n          \"Reconnect plumbing to sink if affected.\",\n          \"Install backsplash in affected areas.\",\n          \"Install new hardware on all cabinets.\",\n          \"Caulk all edges and transitions.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"cabinet-scope\",\n            label: \"Cabinet Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-stock\", label: \"New Stock Cabinets\", priceModifier: 0, scopeAddition: \"Install new stock cabinet line with standard finishes and hardware.\" },\n              { value: \"new-semi-custom\", label: \"New Semi-Custom Cabinets\", priceModifier: 4000, scopeAddition: \"Install new semi-custom cabinets with choice of door style and finish.\" },\n              { value: \"new-custom\", label: \"New Custom Cabinets\", priceModifier: 15000, scopeAddition: \"Install fully custom cabinets built to specifications with premium finishes.\" },\n              { value: \"reface\", label: \"Reface Existing Cabinets\", priceModifier: -8000, scopeAddition: \"Reface existing cabinet boxes with new doors, drawer fronts, and veneer.\" },\n              { value: \"paint\", label: \"Paint Existing Cabinets\", priceModifier: -10000, scopeAddition: \"Prep, prime, and paint existing cabinet boxes, doors, and drawers.\" },\n              { value: \"doors-only\", label: \"Replace Cabinet Doors Only\", priceModifier: -12000, scopeAddition: \"Replace cabinet doors and drawer fronts only; retain existing boxes.\" },\n              { value: \"hardware-only\", label: \"Replace Cabinet Hardware Only\", priceModifier: -14000, scopeAddition: \"Replace cabinet hardware (pulls/knobs) only; retain existing doors and boxes.\" },\n              { value: \"island-cabinets\", label: \"Add Island Cabinets\", priceModifier: 3500, scopeAddition: \"Add island base cabinets with matching finish to perimeter cabinets.\" },\n              { value: \"pantry-cabinets\", label: \"Add Pantry Cabinets\", priceModifier: 2500, scopeAddition: \"Add tall pantry cabinet unit with pull-out shelving.\" }\n            ]\n          },\n          {\n            id: \"crown-trim\",\n            label: \"Add Crown / Trim / Light Rail\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install crown molding, light rail, and decorative trim on all cabinets.\"\n          },\n          {\n            id: \"countertop-type\",\n            label: \"Countertop Type\",\n            type: \"select\",\n            choices: [\n              { value: \"laminate\", label: \"Laminate\", priceModifier: -2000, scopeAddition: \"Install premium laminate countertops with built-up edges.\" },\n              { value: \"butcher-block\", label: \"Butcher Block\", priceModifier: -1000, scopeAddition: \"Install solid wood butcher block countertops with food-safe finish.\" },\n              { value: \"solid-surface\", label: \"Solid Surface (e.g., Corian)\", priceModifier: -500, scopeAddition: \"Install solid surface countertops with integrated sink option.\" },\n              { value: \"quartz\", label: \"Quartz\", priceModifier: 0, scopeAddition: \"Install engineered quartz countertops (color per selection).\" },\n              { value: \"granite\", label: \"Granite\", priceModifier: 800, scopeAddition: \"Install granite slab countertops with polished edges and sealer.\" },\n              { value: \"marble\", label: \"Marble\", priceModifier: 2500, scopeAddition: \"Install marble slab countertops with honed or polished finish and sealer.\" },\n              { value: \"porcelain-sintered\", label: \"Porcelain / Sintered Stone\", priceModifier: 1500, scopeAddition: \"Install porcelain or sintered stone countertops with polished finish.\" },\n              { value: \"concrete\", label: \"Concrete\", priceModifier: 1800, scopeAddition: \"Install custom concrete countertops with sealed finish.\" },\n              { value: \"tile\", label: \"Tile Countertop\", priceModifier: -1500, scopeAddition: \"Install tile countertops with bullnose edges and grouted joints.\" },\n              { value: \"keep-existing\", label: \"Keep Existing Countertops\", priceModifier: -3000, scopeAddition: \"Retain and protect existing countertops; reconnect sink and faucet.\" }\n            ]\n          },\n          {\n            id: \"plumbing-fixtures\",\n            label: \"Plumbing Fixtures\",\n            type: \"select\",\n            choices: [\n              { value: \"sink-only\", label: \"Replace Sink Only\", priceModifier: 350, scopeAddition: \"Install new undermount or drop-in sink; reconnect existing plumbing.\" },\n              { value: \"faucet-only\", label: \"Replace Faucet Only\", priceModifier: 250, scopeAddition: \"Install new kitchen faucet with supply lines.\" },\n              { value: \"sink-faucet\", label: \"Replace Sink & Faucet\", priceModifier: 550, scopeAddition: \"Install new sink and faucet assembly with all connections.\" },\n              { value: \"add-disposal\", label: \"Add Garbage Disposal\", priceModifier: 400, scopeAddition: \"Install new garbage disposal unit with electrical connection.\" },\n              { value: \"replace-disposal\", label: \"Replace Garbage Disposal\", priceModifier: 275, scopeAddition: \"Remove old disposal and install new unit.\" },\n              { value: \"no-plumbing\", label: \"No Plumbing Work\", priceModifier: 0, scopeAddition: \"No plumbing modifications included.\" }\n            ]\n          },\n          {\n            id: \"electrical-lighting\",\n            label: \"Electrical & Lighting\",\n            type: \"select\",\n            choices: [\n              { value: \"light-fixtures\", label: \"Replace Existing Light Fixtures Only\", priceModifier: 450, scopeAddition: \"Remove and replace existing light fixtures with new units.\" },\n              { value: \"under-cabinet\", label: \"Add / Replace Under-Cabinet Lighting\", priceModifier: 650, scopeAddition: \"Install hardwired LED strip lighting under upper cabinets with dimmer switch.\" },\n              { value: \"pendant\", label: \"Add / Replace Pendant Lights\", priceModifier: 550, scopeAddition: \"Install pendant light fixtures over island or sink area.\" },\n              { value: \"outlets\", label: \"Add / Relocate Outlets\", priceModifier: 400, scopeAddition: \"Add or relocate electrical outlets per code requirements.\" },\n              { value: \"switches-dimmers\", label: \"Upgrade Switches / Dimmers\", priceModifier: 300, scopeAddition: \"Upgrade light switches to dimmer switches throughout kitchen.\" },\n              { value: \"no-electrical\", label: \"No Electrical Work\", priceModifier: 0, scopeAddition: \"No electrical modifications included.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"cabinet-reface\",\n        name: \"Cabinet Reface Only\",\n        basePriceRange: { low: 6000, high: 12000 },\n        estimatedDays: { low: 4, high: 7 },\n        warranty: \"1-year labor warranty. Manufacturer warranty on materials.\",\n        exclusions: [\n          \"Countertop replacement\",\n          \"Structural modifications to cabinets\",\n          \"Plumbing or electrical work\",\n          \"Appliance installation\"\n        ],\n        baseScope: [\n          \"Protect countertops, flooring, and appliances with drop cloths.\",\n          \"Remove all cabinet doors, drawer fronts, and hardware.\",\n          \"Clean and prep cabinet box surfaces.\",\n          \"Apply veneer or laminate to visible cabinet box surfaces.\",\n          \"Install new cabinet doors with matching finish.\",\n          \"Install new drawer fronts with matching finish.\",\n          \"Install new soft-close hinges on all doors.\",\n          \"Install new soft-close drawer slides.\",\n          \"Install new cabinet hardware (pulls/knobs).\",\n          \"Adjust all doors and drawers for proper alignment.\",\n          \"Final cleanup and quality inspection.\"\n        ],\n        options: [\n          {\n            id: \"crown-trim\",\n            label: \"Add Crown / Trim / Light Rail\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install crown molding, light rail, and decorative trim on all cabinets.\"\n          },\n          {\n            id: \"door-style\",\n            label: \"Door Style\",\n            type: \"select\",\n            choices: [\n              { value: \"shaker\", label: \"Shaker Style\", priceModifier: 0, scopeAddition: \"Install shaker style cabinet doors.\" },\n              { value: \"raised-panel\", label: \"Raised Panel\", priceModifier: 500, scopeAddition: \"Install raised panel cabinet doors.\" },\n              { value: \"flat-panel\", label: \"Flat Panel / Slab\", priceModifier: 300, scopeAddition: \"Install flat panel slab cabinet doors.\" },\n              { value: \"glass-insert\", label: \"Glass Insert Doors\", priceModifier: 800, scopeAddition: \"Install cabinet doors with glass inserts on select upper cabinets.\" }\n            ]\n          },\n          {\n            id: \"interior-upgrade\",\n            label: \"Cabinet Interior Upgrade\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install shelf liner and upgrade interior finish on all cabinets.\"\n          }\n        ]\n      },\n      {\n        id: \"cabinet-paint\",\n        name: \"Cabinet Paint Only\",\n        basePriceRange: { low: 3500, high: 7000 },\n        estimatedDays: { low: 3, high: 5 },\n        warranty: \"1-year warranty on paint finish.\",\n        exclusions: [\n          \"Countertop replacement\",\n          \"Structural repairs to cabinets\",\n          \"Plumbing or electrical work\",\n          \"Hardware replacement (unless selected)\"\n        ],\n        baseScope: [\n          \"Protect countertops, flooring, and appliances with drop cloths.\",\n          \"Remove all cabinet doors, drawer fronts, and hardware.\",\n          \"Clean all surfaces with degreaser to remove oils and residue.\",\n          \"Sand all cabinet surfaces for proper paint adhesion.\",\n          \"Fill holes, dents, and imperfections with wood filler.\",\n          \"Apply bonding primer to all surfaces.\",\n          \"Apply two coats of cabinet-grade paint to all surfaces.\",\n          \"Allow proper cure time between coats.\",\n          \"Reinstall all doors and drawer fronts.\",\n          \"Adjust all doors and drawers for proper alignment.\",\n          \"Touch-up any imperfections.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"crown-trim\",\n            label: \"Add Crown / Trim / Light Rail\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install crown molding, light rail, and decorative trim on all cabinets.\"\n          },\n          {\n            id: \"new-hardware\",\n            label: \"New Cabinet Hardware\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Supply and install new cabinet hardware (pulls/knobs).\"\n          },\n          {\n            id: \"soft-close\",\n            label: \"Soft-Close Hinge Upgrade\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Replace existing hinges with soft-close hinges on all doors.\"\n          },\n          {\n            id: \"interior-paint\",\n            label: \"Paint Cabinet Interiors\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Paint interior surfaces of all cabinets.\"\n          }\n        ]\n      },\n      {\n        id: \"countertop-replace\",\n        name: \"Countertop Replacement Only\",\n        basePriceRange: { low: 3000, high: 8000 },\n        estimatedDays: { low: 2, high: 3 },\n        warranty: \"1-year labor warranty. Manufacturer warranty on materials.\",\n        exclusions: [\n          \"Cabinet modifications\",\n          \"Backsplash replacement\",\n          \"Plumbing relocation\",\n          \"Electrical work\"\n        ],\n        baseScope: [\n          \"Protect flooring and cabinets with drop cloths.\",\n          \"Disconnect plumbing to sink and disposal.\",\n          \"Remove existing countertops and dispose off-site.\",\n          \"Inspect cabinet tops for level and structural integrity.\",\n          \"Template new countertops for fabrication.\",\n          \"Install new countertops with proper support and leveling.\",\n          \"Cut sink and faucet holes per template.\",\n          \"Install undermount or drop-in sink.\",\n          \"Reconnect plumbing to sink and disposal.\",\n          \"Install new faucet if provided.\",\n          \"Apply silicone caulk at wall and cabinet joints.\",\n          \"Seal natural stone if applicable.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"countertop-type\",\n            label: \"Countertop Type\",\n            type: \"select\",\n            choices: [\n              { value: \"laminate\", label: \"Laminate\", priceModifier: -2000, scopeAddition: \"Install premium laminate countertops with built-up edges.\" },\n              { value: \"butcher-block\", label: \"Butcher Block\", priceModifier: -1000, scopeAddition: \"Install solid wood butcher block countertops with food-safe finish.\" },\n              { value: \"solid-surface\", label: \"Solid Surface (e.g., Corian)\", priceModifier: -500, scopeAddition: \"Install solid surface countertops with integrated sink option.\" },\n              { value: \"quartz\", label: \"Quartz\", priceModifier: 0, scopeAddition: \"Install engineered quartz countertops (color per selection).\" },\n              { value: \"granite\", label: \"Granite\", priceModifier: 800, scopeAddition: \"Install granite slab countertops with polished edges and sealer.\" },\n              { value: \"marble\", label: \"Marble\", priceModifier: 2500, scopeAddition: \"Install marble slab countertops with honed or polished finish and sealer.\" },\n              { value: \"porcelain-sintered\", label: \"Porcelain / Sintered Stone\", priceModifier: 1500, scopeAddition: \"Install porcelain or sintered stone countertops with polished finish.\" },\n              { value: \"concrete\", label: \"Concrete\", priceModifier: 1800, scopeAddition: \"Install custom concrete countertops with sealed finish.\" },\n              { value: \"tile\", label: \"Tile Countertop\", priceModifier: -1500, scopeAddition: \"Install tile countertops with bullnose edges and grouted joints.\" }\n            ]\n          },\n          {\n            id: \"edge-profile\",\n            label: \"Edge Profile\",\n            type: \"select\",\n            choices: [\n              { value: \"eased\", label: \"Eased Edge\", priceModifier: 0, scopeAddition: \"Standard eased edge profile.\" },\n              { value: \"beveled\", label: \"Beveled Edge\", priceModifier: 150, scopeAddition: \"Beveled edge profile on all exposed edges.\" },\n              { value: \"bullnose\", label: \"Bullnose Edge\", priceModifier: 200, scopeAddition: \"Full bullnose edge profile on all exposed edges.\" },\n              { value: \"ogee\", label: \"Ogee Edge\", priceModifier: 300, scopeAddition: \"Decorative ogee edge profile on all exposed edges.\" },\n              { value: \"waterfall\", label: \"Waterfall Edge\", priceModifier: 1500, scopeAddition: \"Waterfall edge extending countertop to floor on island end.\" }\n            ]\n          },\n          {\n            id: \"plumbing-fixtures\",\n            label: \"Plumbing Fixtures\",\n            type: \"select\",\n            choices: [\n              { value: \"sink-only\", label: \"Replace Sink Only\", priceModifier: 350, scopeAddition: \"Install new undermount or drop-in sink; reconnect existing plumbing.\" },\n              { value: \"faucet-only\", label: \"Replace Faucet Only\", priceModifier: 250, scopeAddition: \"Install new kitchen faucet with supply lines.\" },\n              { value: \"sink-faucet\", label: \"Replace Sink & Faucet\", priceModifier: 550, scopeAddition: \"Install new sink and faucet assembly with all connections.\" },\n              { value: \"add-disposal\", label: \"Add Garbage Disposal\", priceModifier: 400, scopeAddition: \"Install new garbage disposal unit with electrical connection.\" },\n              { value: \"replace-disposal\", label: \"Replace Garbage Disposal\", priceModifier: 275, scopeAddition: \"Remove old disposal and install new unit.\" },\n              { value: \"no-plumbing\", label: \"No Plumbing Work\", priceModifier: 0, scopeAddition: \"Reconnect existing sink and faucet only.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"backsplash-install\",\n        name: \"Backsplash Install Only\",\n        basePriceRange: { low: 1200, high: 3000 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"1-year labor warranty.\",\n        exclusions: [\n          \"Countertop replacement\",\n          \"Electrical outlet relocation\",\n          \"Cabinet modifications\"\n        ],\n        baseScope: [\n          \"Protect countertops and appliances with drop cloths.\",\n          \"Remove existing backsplash material or prepare bare wall.\",\n          \"Repair and smooth drywall as needed.\",\n          \"Layout tile pattern; mark electrical outlet locations.\",\n          \"Apply thin-set mortar and install tile per design.\",\n          \"Cut tiles around outlets, switches, and edges using wet saw.\",\n          \"Allow tile to set for 24 hours.\",\n          \"Apply grout to all joints; clean excess from tile.\",\n          \"Apply grout sealer after 48-hour cure.\",\n          \"Reinstall outlet and switch covers.\",\n          \"Apply silicone caulk at countertop and cabinet joints.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"tile-type\",\n            label: \"Tile Type\",\n            type: \"select\",\n            choices: [\n              { value: \"ceramic-subway\", label: \"Ceramic Subway Tile\", priceModifier: 0, scopeAddition: \"Install classic ceramic subway tile in selected color.\" },\n              { value: \"glass-subway\", label: \"Glass Subway Tile\", priceModifier: 400, scopeAddition: \"Install glass subway tile with enhanced light reflection.\" },\n              { value: \"mosaic\", label: \"Mosaic / Pattern Tile\", priceModifier: 500, scopeAddition: \"Install mosaic or patterned tile design.\" },\n              { value: \"natural-stone\", label: \"Natural Stone\", priceModifier: 800, scopeAddition: \"Install natural stone tile with appropriate sealer.\" },\n              { value: \"porcelain\", label: \"Porcelain Tile\", priceModifier: 300, scopeAddition: \"Install porcelain tile with enhanced durability.\" },\n              { value: \"peel-stick\", label: \"Peel & Stick Tile\", priceModifier: -400, scopeAddition: \"Install peel and stick tile for quick installation.\" }\n            ]\n          },\n          {\n            id: \"height\",\n            label: \"Backsplash Height\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (4 inches)\", priceModifier: 0, scopeAddition: \"Install 4-inch backsplash height.\" },\n              { value: \"countertop-to-cabinet\", label: \"Countertop to Upper Cabinets\", priceModifier: 350, scopeAddition: \"Extend backsplash from countertop to bottom of upper cabinets.\" },\n              { value: \"full-wall\", label: \"Full Wall Height\", priceModifier: 600, scopeAddition: \"Install backsplash tile to ceiling height.\" }\n            ]\n          },\n          {\n            id: \"accent-strip\",\n            label: \"Decorative Accent Strip\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Install decorative accent strip or border within backsplash design.\"\n          }\n        ]\n      },\n      {\n        id: \"flooring-replace\",\n        name: \"Flooring Replacement Only\",\n        basePriceRange: { low: 2500, high: 6000 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"1-year labor warranty. Manufacturer warranty on materials.\",\n        exclusions: [\n          \"Subfloor repair beyond minor patching\",\n          \"Appliance disconnection/reconnection\",\n          \"Cabinet removal\",\n          \"Asbestos abatement\"\n        ],\n        baseScope: [\n          \"Move appliances and furniture as needed for access.\",\n          \"Remove existing flooring material and dispose off-site.\",\n          \"Inspect subfloor for damage or unevenness.\",\n          \"Repair minor subfloor issues as needed.\",\n          \"Clean and prep subfloor surface.\",\n          \"Install new flooring per manufacturer specifications.\",\n          \"Install transitions at doorways and floor height changes.\",\n          \"Install quarter-round or shoe molding at perimeter.\",\n          \"Return appliances and furniture to position.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"flooring-type\",\n            label: \"Flooring Type\",\n            type: \"select\",\n            choices: [\n              { value: \"lvp\", label: \"Luxury Vinyl Plank (LVP)\", priceModifier: 0, scopeAddition: \"Install luxury vinyl plank flooring with click-lock system.\" },\n              { value: \"lvt\", label: \"Luxury Vinyl Tile (LVT)\", priceModifier: 100, scopeAddition: \"Install luxury vinyl tile flooring with adhesive or click-lock system.\" },\n              { value: \"ceramic-tile\", label: \"Ceramic Tile\", priceModifier: 500, scopeAddition: \"Install ceramic tile flooring with thin-set mortar and grout.\" },\n              { value: \"porcelain-tile\", label: \"Porcelain Tile\", priceModifier: 800, scopeAddition: \"Install porcelain tile flooring with thin-set mortar and grout.\" },\n              { value: \"hardwood\", label: \"Hardwood\", priceModifier: 1500, scopeAddition: \"Install solid or engineered hardwood flooring.\" },\n              { value: \"laminate\", label: \"Laminate\", priceModifier: -300, scopeAddition: \"Install laminate flooring with underlayment.\" }\n            ]\n          },\n          {\n            id: \"subfloor-prep\",\n            label: \"Subfloor Leveling\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Apply self-leveling compound to correct uneven subfloor areas.\"\n          },\n          {\n            id: \"heated-floor\",\n            label: \"Electric Radiant Heat\",\n            type: \"boolean\",\n            priceModifier: 1400,\n            scopeAddition: \"Install electric radiant heating mat under flooring with programmable thermostat.\"\n          }\n        ]\n      },\n      {\n        id: \"appliance-install\",\n        name: \"Appliance Install Only\",\n        basePriceRange: { low: 250, high: 750 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"30-day warranty on installation (appliance warranty separate).\",\n        exclusions: [\n          \"Appliance purchase\",\n          \"Electrical panel upgrades\",\n          \"Gas line installation or modification\",\n          \"Countertop or cabinet modifications\"\n        ],\n        baseScope: [\n          \"Unpack and inspect new appliance for damage.\",\n          \"Remove existing appliance and set aside or dispose.\",\n          \"Clean installation area.\",\n          \"Position new appliance and level.\",\n          \"Connect water, gas, or electrical as applicable.\",\n          \"Test all functions and cycles.\",\n          \"Remove all packaging materials.\",\n          \"Provide basic operation overview to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"appliance-type\",\n            label: \"Appliance Type\",\n            type: \"select\",\n            choices: [\n              { value: \"dishwasher\", label: \"Dishwasher\", priceModifier: 0, scopeAddition: \"Install dishwasher with water and electrical connections.\" },\n              { value: \"range-electric\", label: \"Range (Electric)\", priceModifier: 0, scopeAddition: \"Install electric range with proper electrical connection.\" },\n              { value: \"range-gas\", label: \"Range (Gas)\", priceModifier: 100, scopeAddition: \"Install gas range with proper gas connection and leak test.\" },\n              { value: \"refrigerator\", label: \"Refrigerator\", priceModifier: 50, scopeAddition: \"Install refrigerator with water line connection if applicable.\" },\n              { value: \"microwave-otr\", label: \"Over-the-Range Microwave\", priceModifier: 150, scopeAddition: \"Install over-the-range microwave with mounting bracket and electrical.\" },\n              { value: \"range-hood\", label: \"Range Hood\", priceModifier: 100, scopeAddition: \"Install range hood with electrical connection.\" },\n              { value: \"garbage-disposal\", label: \"Garbage Disposal\", priceModifier: -100, scopeAddition: \"Install garbage disposal with electrical connection.\" }\n            ]\n          },\n          {\n            id: \"haul-away\",\n            label: \"Haul Away Old Appliance\",\n            type: \"boolean\",\n            priceModifier: 75,\n            scopeAddition: \"Remove and dispose of old appliance at recycling facility.\"\n          },\n          {\n            id: \"water-line\",\n            label: \"Install New Water Line\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Install braided stainless steel water supply line for refrigerator or dishwasher.\"\n          },\n          {\n            id: \"anti-tip\",\n            label: \"Anti-Tip Bracket Installation\",\n            type: \"boolean\",\n            priceModifier: 50,\n            scopeAddition: \"Install anti-tip bracket for range per manufacturer and code requirements.\"\n          }\n        ]\n      },\n      {\n        id: \"island-addition\",\n        name: \"Island Addition / Modification\",\n        basePriceRange: { low: 5000, high: 15000 },\n        estimatedDays: { low: 3, high: 7 },\n        warranty: \"1-year labor warranty on all workmanship.\",\n        exclusions: [\n          \"Structural floor modifications\",\n          \"Major electrical panel upgrades\",\n          \"Major plumbing relocation\",\n          \"Flooring under island\"\n        ],\n        baseScope: [\n          \"Verify floor structure can support island weight.\",\n          \"Mark island footprint per approved layout.\",\n          \"Install island base cabinets and secure to floor.\",\n          \"Level and shim cabinets as needed.\",\n          \"Install cabinet backs and end panels.\",\n          \"Template and fabricate island countertop.\",\n          \"Install island countertop with proper support.\",\n          \"Install toe kick and decorative trim.\",\n          \"Install cabinet hardware.\",\n          \"Caulk all joints and transitions.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"island-size\",\n            label: \"Island Size\",\n            type: \"select\",\n            choices: [\n              { value: \"small\", label: \"Small (3-4 ft)\", priceModifier: 0, scopeAddition: \"Build 3-4 foot kitchen island with base cabinets and countertop.\" },\n              { value: \"medium\", label: \"Medium (5-6 ft)\", priceModifier: 2000, scopeAddition: \"Build 5-6 foot kitchen island with base cabinets, countertop, and seating overhang.\" },\n              { value: \"large\", label: \"Large (7-8 ft)\", priceModifier: 4000, scopeAddition: \"Build 7-8 foot kitchen island with base cabinets, countertop, seating, and storage.\" },\n              { value: \"custom\", label: \"Custom Size\", priceModifier: 5000, scopeAddition: \"Build custom-sized kitchen island per specifications.\" }\n            ]\n          },\n          {\n            id: \"countertop-type\",\n            label: \"Countertop Type\",\n            type: \"select\",\n            choices: [\n              { value: \"laminate\", label: \"Laminate\", priceModifier: -2000, scopeAddition: \"Install premium laminate countertop on island.\" },\n              { value: \"butcher-block\", label: \"Butcher Block\", priceModifier: -1000, scopeAddition: \"Install solid wood butcher block countertop on island.\" },\n              { value: \"quartz\", label: \"Quartz\", priceModifier: 0, scopeAddition: \"Install engineered quartz countertop on island.\" },\n              { value: \"granite\", label: \"Granite\", priceModifier: 800, scopeAddition: \"Install granite slab countertop on island with polished edges.\" },\n              { value: \"marble\", label: \"Marble\", priceModifier: 2500, scopeAddition: \"Install marble slab countertop on island.\" },\n              { value: \"waterfall\", label: \"Waterfall Edge\", priceModifier: 3500, scopeAddition: \"Install countertop with waterfall edge extending to floor.\" }\n            ]\n          },\n          {\n            id: \"prep-sink\",\n            label: \"Add Prep Sink\",\n            type: \"boolean\",\n            priceModifier: 850,\n            scopeAddition: \"Install small prep sink in island with faucet and drain connection.\"\n          },\n          {\n            id: \"electrical\",\n            label: \"Island Electrical\",\n            type: \"select\",\n            choices: [\n              { value: \"none\", label: \"No Electrical\", priceModifier: 0 },\n              { value: \"outlets\", label: \"Add Outlets\", priceModifier: 400, scopeAddition: \"Install electrical outlets in island for small appliances.\" },\n              { value: \"outlets-pendants\", label: \"Outlets + Pendant Lights\", priceModifier: 950, scopeAddition: \"Install electrical outlets and pendant lights above island.\" }\n            ]\n          },\n          {\n            id: \"seating\",\n            label: \"Seating Overhang\",\n            type: \"boolean\",\n            priceModifier: 600,\n            scopeAddition: \"Extend countertop with seating overhang and install support brackets.\"\n          }\n        ]\n      },\n      {\n        id: \"pantry-buildout\",\n        name: \"Pantry Build-Out / Modification\",\n        basePriceRange: { low: 3000, high: 8000 },\n        estimatedDays: { low: 2, high: 5 },\n        warranty: \"1-year labor warranty on all workmanship.\",\n        exclusions: [\n          \"Structural wall modifications\",\n          \"Major electrical work\",\n          \"HVAC modifications\",\n          \"Flooring changes\"\n        ],\n        baseScope: [\n          \"Protect surrounding areas with drop cloths.\",\n          \"Remove existing shelving or pantry components if present.\",\n          \"Inspect wall structure and prep for installation.\",\n          \"Install blocking and support as needed.\",\n          \"Install pantry cabinet unit or shelving system.\",\n          \"Level and secure all components.\",\n          \"Install doors or drawers as specified.\",\n          \"Install hardware (pulls/knobs).\",\n          \"Caulk all joints and trim.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"pantry-type\",\n            label: \"Pantry Type\",\n            type: \"select\",\n            choices: [\n              { value: \"reach-in\", label: \"Reach-In Pantry Shelving\", priceModifier: 0, scopeAddition: \"Install adjustable wire or wood shelving in existing reach-in space.\" },\n              { value: \"tall-cabinet\", label: \"Tall Pantry Cabinet\", priceModifier: 1500, scopeAddition: \"Install tall pantry cabinet unit with adjustable shelves.\" },\n              { value: \"pull-out\", label: \"Pull-Out Pantry System\", priceModifier: 2000, scopeAddition: \"Install pull-out pantry system with full-extension drawers and soft-close.\" },\n              { value: \"walk-in\", label: \"Walk-In Pantry Build-Out\", priceModifier: 3500, scopeAddition: \"Build out walk-in pantry with custom shelving on multiple walls.\" }\n            ]\n          },\n          {\n            id: \"door-type\",\n            label: \"Door Type\",\n            type: \"select\",\n            choices: [\n              { value: \"none\", label: \"Open (No Door)\", priceModifier: 0 },\n              { value: \"swing\", label: \"Swing Door\", priceModifier: 350, scopeAddition: \"Install swing door with matching trim and hardware.\" },\n              { value: \"barn-door\", label: \"Barn Door\", priceModifier: 650, scopeAddition: \"Install sliding barn door with track hardware.\" },\n              { value: \"pocket-door\", label: \"Pocket Door\", priceModifier: 850, scopeAddition: \"Install pocket door with pocket frame and hardware.\" },\n              { value: \"bi-fold\", label: \"Bi-Fold Doors\", priceModifier: 400, scopeAddition: \"Install bi-fold doors with track and hardware.\" }\n            ]\n          },\n          {\n            id: \"lighting\",\n            label: \"Pantry Lighting\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install LED lighting inside pantry with door-activated switch.\"\n          },\n          {\n            id: \"countertop\",\n            label: \"Add Countertop Work Surface\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install countertop work surface inside pantry.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"painting\",\n    trade: \"Painting\",\n    jobTypes: [\n      {\n        id: \"interior-room\",\n        name: \"Single Room Painting\",\n        basePriceRange: { low: 450, high: 850 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"1-year warranty against peeling, flaking, or blistering.\",\n        exclusions: [\"Repair of water damage\", \"Wallpaper removal\", \"Lead paint abatement\"],\n        baseScope: [\n          \"Move furniture to center of room and cover with drop cloths.\",\n          \"Mask floors, trim, outlets, and windows with tape and plastic.\",\n          \"Patch minor holes, nail pops, and hairline cracks with spackling compound.\",\n          \"Sand patches smooth and spot prime all repairs.\",\n          \"Caulk gaps between trim and walls with paintable caulk.\",\n          \"Apply two coats of premium interior latex paint (walls only).\",\n          \"Cut-in all edges, corners, and around fixtures.\",\n          \"Remove all masking materials; clean up paint drips.\",\n          \"Return furniture to original positions.\",\n          \"Final touch-up and walkthrough.\"\n        ],\n        options: [\n          {\n            id: \"room-area\",\n            label: \"Area of Home\",\n            type: \"select\",\n            choices: [\n              { value: \"basement\", label: \"Basement\", priceModifier: 0, scopeAddition: \"Paint designated basement room.\" },\n              { value: \"mud-room\", label: \"Mud Room\", priceModifier: 0, scopeAddition: \"Paint mud room / entryway area.\" },\n              { value: \"master-bathroom\", label: \"Master Bathroom\", priceModifier: 50, scopeAddition: \"Paint master bathroom including moisture-resistant preparation for high-humidity area.\" },\n              { value: \"dining-room\", label: \"Dining Room\", priceModifier: 0, scopeAddition: \"Paint dining room.\" }\n            ]\n          },\n          {\n            id: \"trim-doors\",\n            label: \"Include Trim & Doors\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Sand, prime, and apply semi-gloss paint to all baseboards, door casings, and door slabs.\"\n          },\n          {\n            id: \"ceilings\",\n            label: \"Include Ceiling\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Apply two coats of flat ceiling paint to entire ceiling surface.\"\n          },\n          {\n            id: \"closets\",\n            label: \"Include Closet(s)\",\n            type: \"boolean\",\n            priceModifier: 200,\n            scopeAddition: \"Paint interior walls and ceiling of closet(s) in room.\"\n          },\n          {\n            id: \"accent-wall\",\n            label: \"Accent Wall (different color)\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Apply contrasting color paint to designated accent wall.\"\n          }\n        ]\n      },\n      {\n        id: \"whole-house-interior\",\n        name: \"Whole House Interior Painting\",\n        basePriceRange: { low: 3500, high: 7500 },\n        estimatedDays: { low: 4, high: 8 },\n        warranty: \"2-year warranty against peeling, flaking, or blistering.\",\n        exclusions: [\"Extensive drywall repair\", \"Popcorn ceiling removal\", \"Lead paint abatement\"],\n        baseScope: [\n          \"Protect all floors with drop cloths and plastic sheeting.\",\n          \"Move furniture as needed; cover with protective materials.\",\n          \"Mask all windows, doors, cabinets, and fixtures.\",\n          \"Patch all holes, cracks, and nail pops throughout home.\",\n          \"Sand patches and apply primer to repairs.\",\n          \"Caulk all gaps between trim and walls.\",\n          \"Apply two coats premium interior latex to all wall surfaces.\",\n          \"Cut-in all edges and around all fixtures.\",\n          \"Apply semi-gloss paint to all door frames and casings.\",\n          \"Paint all interior doors (both sides if requested).\",\n          \"Paint all baseboards throughout home.\",\n          \"Touch-up all areas as needed.\",\n          \"Remove all masking and protective materials.\",\n          \"Final cleanup and walkthrough.\"\n        ],\n        options: [\n          {\n            id: \"ceilings-all\",\n            label: \"All Ceilings\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Apply two coats flat ceiling paint to all ceilings throughout home.\"\n          },\n          {\n            id: \"staircase\",\n            label: \"Staircase & Railing\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Sand and paint stair rails, balusters, and newel posts.\"\n          },\n          {\n            id: \"cabinet-paint\",\n            label: \"Kitchen Cabinet Painting\",\n            type: \"boolean\",\n            priceModifier: 2500,\n            scopeAddition: \"Prep, prime, and paint kitchen cabinet boxes, doors, and drawers (add 3-4 days).\"\n          }\n        ]\n      },\n      {\n        id: \"exterior-paint\",\n        name: \"Exterior House Painting\",\n        basePriceRange: { low: 4500, high: 9500 },\n        estimatedDays: { low: 4, high: 10 },\n        warranty: \"5-year warranty against peeling, flaking, or blistering.\",\n        exclusions: [\"Carpentry repairs beyond minor patching\", \"Lead paint abatement\", \"Deck/fence staining\"],\n        baseScope: [\n          \"Power wash all exterior surfaces to remove dirt and mildew.\",\n          \"Allow surfaces to dry completely before painting.\",\n          \"Scrape and sand all loose or peeling paint.\",\n          \"Caulk all gaps around windows, doors, and trim.\",\n          \"Prime bare wood and repairs with exterior primer.\",\n          \"Mask windows, doors, and fixtures with tape and plastic.\",\n          \"Apply two coats premium exterior paint to siding/body.\",\n          \"Apply contrasting color to trim, fascia, and soffits.\",\n          \"Paint front door with accent color (if selected).\",\n          \"Paint shutters and decorative elements.\",\n          \"Remove all masking materials.\",\n          \"Touch-up any missed areas or drips.\",\n          \"Final cleanup and debris removal.\"\n        ],\n        options: [\n          {\n            id: \"pressure-wash-only\",\n            label: \"Pressure Wash Deck/Patio\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Pressure wash deck and/or patio surface as part of painting project.\"\n          },\n          {\n            id: \"gutter-paint\",\n            label: \"Paint Gutters & Downspouts\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Prep and paint all gutters and downspouts to match trim color.\"\n          },\n          {\n            id: \"front-door-accent\",\n            label: \"Accent Front Door\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Sand, prime, and paint front door with premium accent color.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"plumbing\",\n    trade: \"Plumbing\",\n    jobTypes: [\n      {\n        id: \"valve-repair\",\n        name: \"Valve Repair & Replacement\",\n        basePriceRange: { low: 350, high: 650 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year warranty on parts and labor.\",\n        exclusions: [\"Wall/ceiling repair after access\", \"Whole-house repiping\"],\n        baseScope: [\n          \"Shut off water supply to affected area.\",\n          \"Drain lines to prevent water spillage.\",\n          \"Remove defective valve mechanism.\",\n          \"Install new quarter-turn ball valve or fixture stop.\",\n          \"Replace supply lines with braided stainless steel hoses.\",\n          \"Apply thread sealant to all threaded connections.\",\n          \"Restore water supply and test for leaks.\",\n          \"Verify proper valve operation.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"access-panel\",\n            label: \"Install Access Panel\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Cut and frame opening for future access; install snap-in plastic access panel.\"\n          },\n          {\n            id: \"whole-house-check\",\n            label: \"Whole House Plumbing Inspection\",\n            type: \"boolean\",\n            priceModifier: 225,\n            scopeAddition: \"Perform visual inspection of all visible plumbing fixtures, water heater, and water lines.\"\n          }\n        ]\n      },\n      {\n        id: \"water-heater\",\n        name: \"Water Heater Replacement (Tank)\",\n        basePriceRange: { low: 1400, high: 2200 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Tank warranty per manufacturer (6-12 years). 1-year labor warranty.\",\n        exclusions: [\"Gas line modifications\", \"Electrical panel upgrades\", \"Permit fees\"],\n        baseScope: [\n          \"Disconnect and drain existing water heater.\",\n          \"Disconnect gas/electric and water connections.\",\n          \"Remove old unit and transport off-site for disposal.\",\n          \"Install new 40/50 gallon tank water heater.\",\n          \"Connect cold water inlet and hot water outlet.\",\n          \"Install new flexible water heater connectors.\",\n          \"Connect gas line or electrical per code (existing supply).\",\n          \"Install new T&P relief valve and discharge pipe.\",\n          \"Install expansion tank if required by local code.\",\n          \"Fill tank and bleed air from lines.\",\n          \"Light pilot/power on unit; verify operation.\",\n          \"Check for leaks at all connections.\",\n          \"Set temperature to recommended 120Â°F.\"\n        ],\n        options: [\n          {\n            id: \"pan-drain\",\n            label: \"New Drain Pan & Line\",\n            type: \"boolean\",\n            priceModifier: 275,\n            scopeAddition: \"Install new aluminum safety pan and run drain line to floor drain or exterior.\"\n          },\n          {\n            id: \"upgrade-50gal\",\n            label: \"Upgrade to 50 Gallon\",\n            type: \"boolean\",\n            priceModifier: 200,\n            scopeAddition: \"Upgrade to 50-gallon tank capacity (from standard 40-gallon).\"\n          },\n          {\n            id: \"recirculating-pump\",\n            label: \"Hot Water Recirculating Pump\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install demand-type recirculating pump for instant hot water at fixtures.\"\n          }\n        ]\n      },\n      {\n        id: \"tankless-install\",\n        name: \"Tankless Water Heater Installation\",\n        basePriceRange: { low: 3500, high: 5500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"Unit warranty per manufacturer (10-15 years). 2-year labor warranty.\",\n        exclusions: [\"Gas line upgrade if undersized\", \"Electrical panel upgrade\"],\n        baseScope: [\n          \"Remove existing tank water heater and dispose.\",\n          \"Mount new tankless unit on wall or exterior per manufacturer specs.\",\n          \"Run new gas line if required (up to 10 linear feet included).\",\n          \"Install proper venting (category III stainless steel or PVC direct vent).\",\n          \"Connect cold water inlet with isolation valve.\",\n          \"Connect hot water outlet to existing distribution.\",\n          \"Install condensate drain if condensing unit.\",\n          \"Wire unit to power source (dedicated circuit if electric).\",\n          \"Program unit settings and flow rates.\",\n          \"Test operation at multiple fixtures.\",\n          \"Verify gas pressure and combustion.\",\n          \"Provide owner orientation on operation and maintenance.\"\n        ],\n        options: [\n          {\n            id: \"outdoor-unit\",\n            label: \"Outdoor Installation\",\n            type: \"boolean\",\n            priceModifier: -500,\n            scopeAddition: \"Install outdoor-rated tankless unit (eliminates venting requirement).\"\n          },\n          {\n            id: \"whole-house-filter\",\n            label: \"Whole-House Water Filter\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install sediment and scale filter upstream of tankless unit.\"\n          }\n        ]\n      },\n      {\n        id: \"repipe-whole-house\",\n        name: \"Whole House Repipe (PEX)\",\n        basePriceRange: { low: 5500, high: 9500 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"25-year warranty on PEX piping. 2-year labor warranty.\",\n        exclusions: [\"Drywall/ceiling repair (patching only)\", \"Fixture replacement\", \"Permits\"],\n        baseScope: [\n          \"Shut off main water supply to property.\",\n          \"Cut access holes in walls/ceilings as needed for routing.\",\n          \"Remove and dispose of existing galvanized/copper supply lines.\",\n          \"Install new PEX manifold system at central location.\",\n          \"Run new PEX lines to all fixtures using home-run method.\",\n          \"Install shut-off valves at manifold for each fixture.\",\n          \"Install new angle stops at each fixture location.\",\n          \"Pressure test entire system to 80 PSI for 1 hour.\",\n          \"Connect all fixtures and verify operation.\",\n          \"Insulate exposed PEX lines in attic/crawl space.\",\n          \"Patch access holes with drywall (ready for paint).\",\n          \"Final leak check and system walkthrough.\"\n        ],\n        options: [\n          {\n            id: \"drain-repipe\",\n            label: \"Include Drain Line Replacement\",\n            type: \"boolean\",\n            priceModifier: 3500,\n            scopeAddition: \"Replace all accessible drain lines with new ABS or PVC piping.\"\n          },\n          {\n            id: \"hose-bibs\",\n            label: \"New Exterior Hose Bibs\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install (2) new frost-free hose bibs at front and rear of home.\"\n          }\n        ]\n      },\n      {\n        id: \"drain-cleaning\",\n        name: \"Drain Cleaning & Clog Removal\",\n        basePriceRange: { low: 150, high: 450 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"30-day warranty on cleared drain.\",\n        exclusions: [\"Pipe repair or replacement\", \"Septic system issues\", \"Main sewer line replacement\"],\n        baseScope: [\n          \"Diagnose source and location of clog.\",\n          \"Select appropriate clearing method for clog type.\",\n          \"Clear drain using snake/auger or hydro-jetting.\",\n          \"Flush drain with water to verify flow.\",\n          \"Clean accessible drain components.\",\n          \"Test drain operation under normal use.\",\n          \"Provide recommendations for prevention.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"camera-inspection\",\n            label: \"Video Camera Inspection\",\n            type: \"boolean\",\n            priceModifier: 225,\n            scopeAddition: \"Perform video camera inspection of drain line to identify issues and document condition.\"\n          },\n          {\n            id: \"multiple-drains\",\n            label: \"Additional Drain (2-3 total)\",\n            type: \"boolean\",\n            priceModifier: 125,\n            scopeAddition: \"Clear additional drain in same visit.\"\n          }\n        ]\n      },\n      {\n        id: \"fixture-install\",\n        name: \"Plumbing Fixture Installation\",\n        basePriceRange: { low: 250, high: 550 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year labor warranty. Fixture warranty per manufacturer.\",\n        exclusions: [\"Fixture cost (unless specified)\", \"Plumbing rough-in changes\", \"Wall repair\"],\n        baseScope: [\n          \"Shut off water supply to fixture location.\",\n          \"Remove existing fixture and dispose.\",\n          \"Clean and inspect existing connections.\",\n          \"Install new fixture per manufacturer specs.\",\n          \"Connect water supply lines with new stops if needed.\",\n          \"Connect drain assembly.\",\n          \"Apply appropriate sealants and caulk.\",\n          \"Restore water and test for leaks.\",\n          \"Test fixture operation.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"faucet-upgrade\",\n            label: \"Premium Faucet Installation\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Install premium faucet with additional features (pull-down, touchless, etc.).\"\n          },\n          {\n            id: \"supply-lines\",\n            label: \"New Supply Lines\",\n            type: \"boolean\",\n            priceModifier: 75,\n            scopeAddition: \"Replace supply lines with new braided stainless steel.\"\n          }\n        ]\n      },\n      {\n        id: \"sump-pump\",\n        name: \"Sump Pump Installation/Replacement\",\n        basePriceRange: { low: 650, high: 1400 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Pump warranty per manufacturer. 1-year labor warranty.\",\n        exclusions: [\"French drain installation\", \"Foundation waterproofing\", \"Pit excavation\"],\n        baseScope: [\n          \"Remove existing sump pump (if applicable).\",\n          \"Inspect sump pit condition and clean debris.\",\n          \"Install new submersible sump pump.\",\n          \"Connect check valve to prevent backflow.\",\n          \"Connect discharge pipe to existing outlet.\",\n          \"Wire pump to dedicated or existing circuit.\",\n          \"Test pump operation and float switch.\",\n          \"Verify proper discharge and no leaks.\",\n          \"Provide operation and maintenance instructions.\"\n        ],\n        options: [\n          {\n            id: \"battery-backup\",\n            label: \"Battery Backup System\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install battery backup sump pump system for power outage protection.\"\n          },\n          {\n            id: \"high-water-alarm\",\n            label: \"High Water Alarm\",\n            type: \"boolean\",\n            priceModifier: 75,\n            scopeAddition: \"Install audible high water alarm in sump pit.\"\n          }\n        ]\n      },\n      {\n        id: \"toilet-install\",\n        name: \"Toilet Installation/Replacement\",\n        basePriceRange: { low: 350, high: 650 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year labor warranty. Toilet warranty per manufacturer.\",\n        exclusions: [\"Toilet fixture cost (unless included)\", \"Flange repair if heavily corroded\", \"Subfloor repair\"],\n        baseScope: [\n          \"Shut off water supply at angle stop.\",\n          \"Disconnect water supply line from existing toilet.\",\n          \"Remove existing toilet and inspect flange condition.\",\n          \"Clean existing flange and remove old wax/gasket.\",\n          \"Install new wax ring or wax-free seal.\",\n          \"Set new toilet on flange and secure with closet bolts.\",\n          \"Level toilet and shim if necessary.\",\n          \"Connect new water supply line.\",\n          \"Turn on water and fill tank.\",\n          \"Test flush operation and check for leaks.\",\n          \"Caulk base of toilet to floor.\",\n          \"Install new toilet seat.\",\n          \"Clean up work area and remove old toilet.\"\n        ],\n        options: [\n          {\n            id: \"toilet-style\",\n            label: \"Toilet Style\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard Height (14-15\\\")\", priceModifier: 0, scopeAddition: \"Install standard height toilet.\" },\n              { value: \"comfort\", label: \"Comfort Height (17-19\\\")\", priceModifier: 75, scopeAddition: \"Install comfort/ADA height toilet (17-19\\\" seat height).\" },\n              { value: \"elongated\", label: \"Elongated Bowl\", priceModifier: 50, scopeAddition: \"Install toilet with elongated bowl for added comfort.\" }\n            ]\n          },\n          {\n            id: \"flange-repair\",\n            label: \"Flange Repair/Replacement\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Remove damaged closet flange and install new PVC or stainless steel flange.\"\n          },\n          {\n            id: \"new-angle-stop\",\n            label: \"Replace Angle Stop Valve\",\n            type: \"boolean\",\n            priceModifier: 85,\n            scopeAddition: \"Replace existing angle stop with new quarter-turn valve.\"\n          },\n          {\n            id: \"bidet-seat\",\n            label: \"Bidet Seat Installation\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Install electric bidet seat with heated seat and water features (electrical outlet required).\"\n          }\n        ]\n      },\n      {\n        id: \"tub-shower-conversion\",\n        name: \"Tub to Shower Conversion\",\n        basePriceRange: { low: 4500, high: 8500 },\n        estimatedDays: { low: 3, high: 6 },\n        warranty: \"2-year labor warranty on all plumbing work. Manufacturer warranty on fixtures.\",\n        exclusions: [\"Tile work beyond immediate shower area\", \"Bathroom vanity work\", \"Electrical upgrades\", \"Permits\"],\n        baseScope: [\n          \"Shut off water supply to bathroom.\",\n          \"Remove existing tub/shower unit and dispose off-site.\",\n          \"Inspect drain and supply lines for condition.\",\n          \"Modify drain location for shower pan (if needed).\",\n          \"Install new P-trap and connect to existing drain.\",\n          \"Install new shower pan/base with proper slope.\",\n          \"Connect new shower drain to waste line.\",\n          \"Install new shower valve and mixing controls.\",\n          \"Connect hot and cold supply lines to valve.\",\n          \"Install cement board backer on shower walls.\",\n          \"Apply waterproof membrane to wet areas.\",\n          \"Install shower head, arm, and escutcheon.\",\n          \"Test all connections for leaks under pressure.\",\n          \"Restore water supply and verify operation.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"toilet-replacement\",\n            label: \"Replace Toilet (While Access is Open)\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Remove existing toilet, install new toilet with wax ring seal, supply line, and caulk base.\"\n          },\n          {\n            id: \"drain-relocation\",\n            label: \"Drain Line Relocation\",\n            type: \"boolean\",\n            priceModifier: 850,\n            scopeAddition: \"Relocate shower drain up to 24\\\" from existing location; includes concrete cutting if on slab.\"\n          },\n          {\n            id: \"valve-upgrade\",\n            label: \"Thermostatic Valve Upgrade\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install thermostatic mixing valve with anti-scald protection.\"\n          },\n          {\n            id: \"handheld-shower\",\n            label: \"Add Handheld Shower\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Install slide bar with handheld shower head in addition to fixed head.\"\n          },\n          {\n            id: \"body-sprays\",\n            label: \"Body Spray System\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install (3) wall-mounted body spray jets with dedicated valve control.\"\n          },\n          {\n            id: \"linear-drain\",\n            label: \"Linear Drain Upgrade\",\n            type: \"boolean\",\n            priceModifier: 550,\n            scopeAddition: \"Install linear stainless steel drain system in lieu of standard center drain.\"\n          }\n        ]\n      },\n      {\n        id: \"shower-tub-valve\",\n        name: \"Shower/Tub Valve Replacement\",\n        basePriceRange: { low: 450, high: 850 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year labor warranty. Valve warranty per manufacturer.\",\n        exclusions: [\"Tile repair beyond access area\", \"Full shower renovation\", \"Moving valve location\"],\n        baseScope: [\n          \"Shut off water supply to shower/tub.\",\n          \"Remove trim plate and handle to access valve.\",\n          \"Cut access opening in wall if no rear access.\",\n          \"Remove existing valve cartridge or entire valve body.\",\n          \"Install new pressure-balanced valve or cartridge.\",\n          \"Connect supply lines and solder/crimp connections.\",\n          \"Test valve operation before closing wall.\",\n          \"Install new trim kit (escutcheon, handle, spout).\",\n          \"Patch access opening with drywall (ready for paint).\",\n          \"Restore water and test operation.\",\n          \"Verify no leaks at all connections.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"add-diverter\",\n            label: \"Add Tub/Shower Diverter\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Install new diverter valve or spout to switch between tub and shower.\"\n          },\n          {\n            id: \"access-panel\",\n            label: \"Install Access Panel\",\n            type: \"boolean\",\n            priceModifier: 125,\n            scopeAddition: \"Install finished access panel for future valve maintenance.\"\n          },\n          {\n            id: \"toilet-replacement\",\n            label: \"Replace Toilet (Add-On)\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"While on-site, remove old toilet and install new toilet with wax ring, supply line, and seat.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"electrical\",\n    trade: \"Electrical\",\n    jobTypes: [\n      {\n        id: \"panel-upgrade\",\n        name: \"Panel Upgrade & Service\",\n        basePriceRange: { low: 2500, high: 5500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"Lifetime warranty on panel. 1-year labor warranty.\",\n        exclusions: [\"Utility company fees for service change\", \"Permit fees\", \"Tree trimming for service clearance\"],\n        baseScope: [\n          \"Coordinate power shutdown with utility company.\",\n          \"Disconnect and remove existing electrical panel.\",\n          \"Install new 200-amp main breaker panel with copper bus bars.\",\n          \"Install new main breaker and neutral/ground bus bars.\",\n          \"Transfer all existing circuits to new arc-fault/GFCI breakers where required.\",\n          \"Label all circuits clearly per NEC requirements.\",\n          \"Install new grounding electrode system (ground rods and/or Ufer ground).\",\n          \"Install proper bonding to gas, water, and CSST lines.\",\n          \"Restore power and test all circuits for proper operation.\",\n          \"Verify proper voltage and amperage at main and branch circuits.\",\n          \"Provide load calculation documentation.\",\n          \"Arrange for final inspection (permit fee separate).\"\n        ],\n        options: [\n          {\n            id: \"service-upgrade-type\",\n            label: \"Current Service Size\",\n            type: \"select\",\n            choices: [\n              { value: \"100a\", label: \"100A to 200A Upgrade\", priceModifier: 0, scopeAddition: \"Upgrade from 100-amp to 200-amp service.\" },\n              { value: \"60a\", label: \"60A to 200A Upgrade\", priceModifier: 800, scopeAddition: \"Upgrade from 60-amp to 200-amp service; includes new service entrance cable.\" },\n              { value: \"fuse-box\", label: \"Fuse Box to Breaker Panel\", priceModifier: 600, scopeAddition: \"Replace outdated fuse box with modern 200-amp breaker panel.\" }\n            ]\n          },\n          {\n            id: \"meter-mast\",\n            label: \"Replace Meter & Mast\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install new weatherhead, mast, meter base, and service entrance cable.\"\n          },\n          {\n            id: \"surge-protection\",\n            label: \"Whole-House Surge Protection\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install whole-house surge protector at main panel.\"\n          },\n          {\n            id: \"burned-panel\",\n            label: \"Burned/Damaged Panel Replacement\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Remove fire-damaged panel; assess and repair affected wiring connections.\"\n          }\n        ]\n      },\n      {\n        id: \"rewiring\",\n        name: \"Whole-House or Partial Rewire\",\n        basePriceRange: { low: 8000, high: 25000 },\n        estimatedDays: { low: 5, high: 14 },\n        warranty: \"2-year labor warranty on all wiring. Materials per manufacturer warranty.\",\n        exclusions: [\"Drywall repair and painting\", \"Permit fees\", \"Insulation replacement\"],\n        baseScope: [\n          \"Conduct full electrical assessment and document existing conditions.\",\n          \"Develop rewiring plan with circuit layout per NEC code requirements.\",\n          \"De-energize and safely remove existing outdated wiring.\",\n          \"Install new copper wiring (12 AWG and 14 AWG as appropriate).\",\n          \"Install new electrical boxes at all outlet and switch locations.\",\n          \"Run dedicated circuits for major appliances per code.\",\n          \"Install arc-fault circuit interrupter (AFCI) breakers for bedroom circuits.\",\n          \"Install ground-fault circuit interrupter (GFCI) protection in required areas.\",\n          \"Install proper grounding throughout entire system.\",\n          \"Label all circuits at panel per NEC requirements.\",\n          \"Test all circuits for proper voltage, continuity, and grounding.\",\n          \"Coordinate inspections with local authority.\"\n        ],\n        options: [\n          {\n            id: \"rewire-type\",\n            label: \"Rewiring Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"whole-house\", label: \"Whole-House Rewire\", priceModifier: 0, scopeAddition: \"Complete rewire of entire home including all branch circuits.\" },\n              { value: \"knob-tube\", label: \"Knob-and-Tube Replacement\", priceModifier: 2500, scopeAddition: \"Remove all knob-and-tube wiring and replace with modern NM cable.\" },\n              { value: \"aluminum\", label: \"Aluminum Wiring Remediation\", priceModifier: 1800, scopeAddition: \"Address aluminum wiring hazards using COPALUM or approved connectors throughout.\" }\n            ]\n          },\n          {\n            id: \"partial-kitchen\",\n            label: \"Kitchen Rewire Only\",\n            type: \"boolean\",\n            priceModifier: -5000,\n            scopeAddition: \"Rewire kitchen area only with new dedicated circuits for all appliances.\"\n          },\n          {\n            id: \"partial-bath\",\n            label: \"Bathroom Rewire Only\",\n            type: \"boolean\",\n            priceModifier: -6500,\n            scopeAddition: \"Rewire bathroom(s) only with new GFCI circuits and exhaust fan wiring.\"\n          },\n          {\n            id: \"partial-addition\",\n            label: \"Addition/New Room Wiring\",\n            type: \"boolean\",\n            priceModifier: -4000,\n            scopeAddition: \"Wire new addition or converted space with proper circuit allocation.\"\n          }\n        ]\n      },\n      {\n        id: \"kitchen-bath-wiring\",\n        name: \"Kitchen & Bath Remodel Wiring\",\n        basePriceRange: { low: 1800, high: 4500 },\n        estimatedDays: { low: 1, high: 3 },\n        warranty: \"1-year labor warranty on all electrical work.\",\n        exclusions: [\"Permit fees\", \"Fixture costs (unless specified)\", \"Drywall repair\"],\n        baseScope: [\n          \"Assess existing electrical capacity and circuit availability.\",\n          \"Install new 20-amp small appliance circuits per NEC requirements.\",\n          \"Install dedicated circuits for garbage disposal and dishwasher.\",\n          \"Install GFCI outlets at all countertop locations within 6 feet of water.\",\n          \"Install AFCI/GFCI combination protection where required by code.\",\n          \"Wire new exhaust fan/vent hood circuit.\",\n          \"Install proper grounding at all new outlets and fixtures.\",\n          \"Test all circuits for proper operation and protection.\",\n          \"Label new circuits at electrical panel.\",\n          \"Coordinate with other trades for rough-in timing.\"\n        ],\n        options: [\n          {\n            id: \"under-cabinet-lighting\",\n            label: \"Under-Cabinet LED Lighting\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install hardwired LED strip lighting under upper cabinets with dimmer switch.\"\n          },\n          {\n            id: \"recessed-cans\",\n            label: \"Recessed Can Lights (6 lights)\",\n            type: \"boolean\",\n            priceModifier: 850,\n            scopeAddition: \"Install (6) LED recessed can lights with dimmer switch control.\"\n          },\n          {\n            id: \"island-circuit\",\n            label: \"Island Outlet Circuit\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install pop-up or flush-mount outlets in kitchen island with dedicated circuit.\"\n          },\n          {\n            id: \"pendant-wiring\",\n            label: \"Pendant Light Wiring\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install electrical boxes and wiring for pendant lights over island or bar.\"\n          },\n          {\n            id: \"range-circuit\",\n            label: \"Electric Range 50A Circuit\",\n            type: \"boolean\",\n            priceModifier: 550,\n            scopeAddition: \"Install new 50-amp 240V circuit for electric range with proper outlet.\"\n          }\n        ]\n      },\n      {\n        id: \"addition-garage-shed\",\n        name: \"Addition, Garage & Shed Wiring\",\n        basePriceRange: { low: 2500, high: 6500 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"1-year labor warranty. Materials per manufacturer warranty.\",\n        exclusions: [\"Trenching for underground runs\", \"Permit fees\", \"Concrete cutting/patching\"],\n        baseScope: [\n          \"Assess main panel capacity for additional load.\",\n          \"Install subpanel with appropriate amperage for space.\",\n          \"Run feeder cable from main panel to subpanel location.\",\n          \"Design and install lighting layout per space requirements.\",\n          \"Install receptacle outlets per code spacing requirements.\",\n          \"Install 240V outlet for shop equipment or heater if needed.\",\n          \"Install weather-resistant outlets and covers for exposed locations.\",\n          \"Ground subpanel per NEC code requirements.\",\n          \"Label all circuits clearly.\",\n          \"Test all circuits and verify proper operation.\"\n        ],\n        options: [\n          {\n            id: \"subpanel-size\",\n            label: \"Subpanel Size\",\n            type: \"select\",\n            choices: [\n              { value: \"60a\", label: \"60-Amp Subpanel\", priceModifier: 0, scopeAddition: \"Install 60-amp subpanel suitable for basic lighting and outlets.\" },\n              { value: \"100a\", label: \"100-Amp Subpanel\", priceModifier: 400, scopeAddition: \"Install 100-amp subpanel for workshop with heavy equipment.\" },\n              { value: \"125a\", label: \"125-Amp Subpanel\", priceModifier: 600, scopeAddition: \"Install 125-amp subpanel for full addition with HVAC capability.\" }\n            ]\n          },\n          {\n            id: \"underground-run\",\n            label: \"Underground Conduit Run\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Run underground conduit (up to 50 feet) for detached structure power.\"\n          },\n          {\n            id: \"shop-outlets\",\n            label: \"240V Shop Outlet Package\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install (2) 240V outlets for welders, compressors, or shop equipment.\"\n          },\n          {\n            id: \"motion-lights\",\n            label: \"Motion-Sensor Exterior Lights\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install motion-activated LED lights at entry points of structure.\"\n          }\n        ]\n      },\n      {\n        id: \"ev-charger\",\n        name: \"EV Charger Installation\",\n        basePriceRange: { low: 1200, high: 2800 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"Charger warranty per manufacturer. 1-year labor warranty.\",\n        exclusions: [\"Charger unit cost (unless specified)\", \"Trenching for detached garage\", \"Permit fees\"],\n        baseScope: [\n          \"Perform load calculation to assess panel capacity.\",\n          \"Install new dedicated 240V 50-amp circuit for Level 2 charger.\",\n          \"Run conduit and appropriately sized wire to charger location.\",\n          \"Install NEMA 14-50 outlet or hardwire charger directly per spec.\",\n          \"Mount charging station per manufacturer specifications.\",\n          \"Connect, test, and verify proper charger operation.\",\n          \"Program charging schedules and smart features if applicable.\",\n          \"Provide owner orientation on charger operation and features.\",\n          \"Clean up work area and remove all debris.\",\n          \"Provide documentation for any applicable rebates.\"\n        ],\n        options: [\n          {\n            id: \"panel-upgrade-ev\",\n            label: \"Panel Upgrade for EV\",\n            type: \"boolean\",\n            priceModifier: 2200,\n            scopeAddition: \"Upgrade electrical panel to accommodate EV charger load if current capacity insufficient.\"\n          },\n          {\n            id: \"charger-supplied\",\n            label: \"Include Tesla Wall Connector\",\n            type: \"boolean\",\n            priceModifier: 500,\n            scopeAddition: \"Supply and install Tesla Wall Connector unit.\"\n          },\n          {\n            id: \"charger-universal\",\n            label: \"Include Universal J1772 Charger\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Supply and install universal J1772 Level 2 charger (ChargePoint, Grizzl-E, or equivalent).\"\n          },\n          {\n            id: \"extended-run\",\n            label: \"Extended Wire Run (31-75 ft)\",\n            type: \"boolean\",\n            priceModifier: 600,\n            scopeAddition: \"Extended conduit and wire run for distances 31-75 feet from panel.\"\n          },\n          {\n            id: \"load-management\",\n            label: \"Smart Load Management\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install smart load management device to balance EV charging with household demand.\"\n          }\n        ]\n      },\n      {\n        id: \"outdoor-electrical\",\n        name: \"Outdoor & Yard Electrical\",\n        basePriceRange: { low: 1200, high: 3500 },\n        estimatedDays: { low: 1, high: 3 },\n        warranty: \"1-year labor warranty. Fixture warranties per manufacturer.\",\n        exclusions: [\"Trenching (unless specified)\", \"Landscaping repair\", \"Permit fees\"],\n        baseScope: [\n          \"Assess electrical panel capacity for outdoor circuits.\",\n          \"Plan layout for outdoor electrical needs.\",\n          \"Install weather-rated outdoor junction boxes.\",\n          \"Run appropriate wiring with outdoor-rated conduit protection.\",\n          \"Install in-use weather-resistant outlet covers.\",\n          \"Install GFCI protection for all outdoor circuits.\",\n          \"Connect and test all fixtures and outlets.\",\n          \"Verify proper grounding of outdoor circuits.\",\n          \"Clean up work area and restore any disturbed areas.\"\n        ],\n        options: [\n          {\n            id: \"landscape-lighting\",\n            label: \"Low-Voltage Landscape Lighting\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install low-voltage landscape lighting system with transformer, timer, and up to 10 fixtures.\"\n          },\n          {\n            id: \"patio-outlets\",\n            label: \"Patio/Deck Outlet Package\",\n            type: \"boolean\",\n            priceModifier: 550,\n            scopeAddition: \"Install (2-3) weatherproof GFCI outlets on patio or deck area.\"\n          },\n          {\n            id: \"pool-spa\",\n            label: \"Pool/Spa Electrical Hookup\",\n            type: \"boolean\",\n            priceModifier: 1500,\n            scopeAddition: \"Install dedicated circuit for pool pump/spa with proper bonding and GFCI protection.\"\n          },\n          {\n            id: \"security-lights\",\n            label: \"Security Lighting Package\",\n            type: \"boolean\",\n            priceModifier: 850,\n            scopeAddition: \"Install (3-4) motion-sensor LED security lights at key exterior locations.\"\n          },\n          {\n            id: \"camera-wiring\",\n            label: \"Security Camera Wiring\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install power and/or low-voltage wiring for up to 4 security camera locations.\"\n          }\n        ]\n      },\n      {\n        id: \"generator\",\n        name: \"Generator Installation\",\n        basePriceRange: { low: 850, high: 12000 },\n        estimatedDays: { low: 1, high: 3 },\n        warranty: \"Generator warranty per manufacturer. 1-year labor warranty on installation.\",\n        exclusions: [\"Generator unit cost (unless specified)\", \"Gas line installation\", \"Permit fees\", \"Concrete pad\"],\n        baseScope: [\n          \"Assess electrical system and household power requirements.\",\n          \"Determine generator sizing based on critical loads.\",\n          \"Install generator connection components per specifications.\",\n          \"Ensure proper grounding of generator system.\",\n          \"Test system operation and transfer functionality.\",\n          \"Provide owner orientation on generator operation and maintenance.\",\n          \"Clean up work area and remove all debris.\",\n          \"Provide documentation for permit inspection.\"\n        ],\n        options: [\n          {\n            id: \"generator-type\",\n            label: \"Generator Type\",\n            type: \"select\",\n            choices: [\n              { value: \"portable\", label: \"Portable Generator Setup\", priceModifier: 0, scopeAddition: \"Install inlet box, power cord, and manual interlock for portable generator connection.\" },\n              { value: \"standby-small\", label: \"Standby Generator (10-14kW)\", priceModifier: 6000, scopeAddition: \"Install standby generator with automatic transfer switch for essential circuits.\" },\n              { value: \"standby-whole\", label: \"Whole-House Standby (18-24kW)\", priceModifier: 10000, scopeAddition: \"Install whole-house standby generator with automatic transfer switch for full home backup.\" }\n            ]\n          },\n          {\n            id: \"interlock-kit\",\n            label: \"Manual Interlock Kit\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install generator interlock kit on existing panel for safe manual transfer.\"\n          },\n          {\n            id: \"inlet-box\",\n            label: \"Outdoor Power Inlet Box\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Install weatherproof power inlet box with appropriate amperage rating.\"\n          },\n          {\n            id: \"transfer-switch\",\n            label: \"Automatic Transfer Switch\",\n            type: \"boolean\",\n            priceModifier: 1500,\n            scopeAddition: \"Install automatic transfer switch for seamless generator activation during outage.\"\n          },\n          {\n            id: \"load-shedding\",\n            label: \"Smart Load Shedding\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Install load management system to prioritize critical circuits during generator operation.\"\n          }\n        ]\n      },\n      {\n        id: \"recessed-lighting\",\n        name: \"Recessed Lighting Installation\",\n        basePriceRange: { low: 800, high: 1600 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year labor warranty. LED warranty per manufacturer.\",\n        exclusions: [\"Attic insulation replacement\", \"Major ceiling repair\"],\n        baseScope: [\n          \"Mark layout for (6) recessed light locations per plan.\",\n          \"Cut ceiling openings using appropriate template.\",\n          \"Install remodel (retrofit) housing cans.\",\n          \"Run new electrical circuit from switch location.\",\n          \"Install new dimmer switch at designated location.\",\n          \"Wire all fixtures in series to switch.\",\n          \"Install LED trim and bulbs (3000K or 4000K per selection).\",\n          \"Test dimmer operation through full range.\",\n          \"Patch any access holes as needed.\",\n          \"Clean up all debris.\"\n        ],\n        options: [\n          {\n            id: \"additional-lights\",\n            label: \"Additional Lights (7-10 total)\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Install 4 additional recessed lights (10 total) for larger room coverage.\"\n          },\n          {\n            id: \"smart-dimmer\",\n            label: \"Smart Dimmer Switch\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Install Wi-Fi enabled smart dimmer switch with app control.\"\n          },\n          {\n            id: \"second-zone\",\n            label: \"Two-Zone Lighting\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Split lights into two zones with separate switches for flexible control.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"flooring\",\n    trade: \"Flooring\",\n    jobTypes: [\n      {\n        id: \"lvp-install\",\n        name: \"Luxury Vinyl Plank Installation\",\n        basePriceRange: { low: 2500, high: 4500 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"Manufacturer warranty applies (typically 15-25 years). 1-year labor warranty.\",\n        exclusions: [\"Subfloor replacement\", \"Asbestos abatement\", \"Furniture moving (optional add)\"],\n        baseScope: [\n          \"Remove existing flooring material (carpet, vinyl, or laminate).\",\n          \"Dispose of all debris off-site.\",\n          \"Inspect subfloor for damage, levelness, and moisture.\",\n          \"Repair minor subfloor issues; level low spots with compound.\",\n          \"Acclimate LVP planks per manufacturer requirements.\",\n          \"Install moisture barrier underlayment.\",\n          \"Install LVP flooring using floating click-lock method.\",\n          \"Stagger planks per manufacturer pattern requirements.\",\n          \"Undercut door jambs and casings for seamless fit.\",\n          \"Install transition strips at doorways and floor changes.\",\n          \"Install new baseboards or quarter-round trim.\",\n          \"Clean and inspect all installed flooring.\",\n          \"Provide care and maintenance instructions.\"\n        ],\n        options: [\n          {\n            id: \"remove-carpet\",\n            label: \"Include Carpet Removal (additional rooms)\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Remove and dispose of existing carpet and padding in adjacent area.\"\n          },\n          {\n            id: \"furniture-move\",\n            label: \"Furniture Moving Service\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Move furniture out and back for flooring installation (standard room).\"\n          },\n          {\n            id: \"premium-underlayment\",\n            label: \"Premium Sound-Reducing Underlayment\",\n            type: \"boolean\",\n            priceModifier: 300,\n            scopeAddition: \"Upgrade to premium cork underlayment for enhanced sound reduction.\"\n          }\n        ]\n      },\n      {\n        id: \"hardwood-install\",\n        name: \"Hardwood Floor Installation\",\n        basePriceRange: { low: 6500, high: 12000 },\n        estimatedDays: { low: 4, high: 8 },\n        warranty: \"Manufacturer finish warranty (10-25 years). 2-year labor warranty.\",\n        exclusions: [\"Subfloor replacement\", \"Radiant heat installation\", \"Custom staining\"],\n        baseScope: [\n          \"Remove existing flooring and dispose off-site.\",\n          \"Inspect subfloor; repair or replace damaged sections.\",\n          \"Install 15-lb felt paper or approved moisture barrier.\",\n          \"Acclimate hardwood planks for minimum 72 hours.\",\n          \"Nail-down or staple hardwood planks per manufacturer specs.\",\n          \"Maintain proper expansion gaps at walls.\",\n          \"Face-nail and plug border rows.\",\n          \"Undercut all door jambs for seamless transitions.\",\n          \"Install reducer strips and transition pieces.\",\n          \"Sand installed floor with 3-pass sanding system.\",\n          \"Apply stain color (if prefinished, skip sanding/finishing).\",\n          \"Apply 2 coats polyurethane finish with sanding between.\",\n          \"Install new baseboards or shoe molding.\",\n          \"Final cleanup and 24-hour cure time before use.\"\n        ],\n        options: [\n          {\n            id: \"wood-species\",\n            label: \"Wood Species\",\n            type: \"select\",\n            choices: [\n              { value: \"oak\", label: \"Red Oak (Standard)\", priceModifier: 0, scopeAddition: \"Install red oak hardwood flooring.\" },\n              { value: \"white-oak\", label: \"White Oak\", priceModifier: 800, scopeAddition: \"Install white oak hardwood flooring.\" },\n              { value: \"maple\", label: \"Maple\", priceModifier: 600, scopeAddition: \"Install maple hardwood flooring.\" },\n              { value: \"walnut\", label: \"American Walnut\", priceModifier: 2500, scopeAddition: \"Install American walnut hardwood flooring.\" }\n            ]\n          },\n          {\n            id: \"custom-stain\",\n            label: \"Custom Stain Color\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Apply custom stain color (sample approval required) with water-pop technique.\"\n          },\n          {\n            id: \"gloss-level\",\n            label: \"Satin/Matte Finish Upgrade\",\n            type: \"boolean\",\n            priceModifier: 200,\n            scopeAddition: \"Apply satin or matte finish polyurethane in lieu of standard semi-gloss.\"\n          }\n        ]\n      },\n      {\n        id: \"tile-floor\",\n        name: \"Tile Floor Installation\",\n        basePriceRange: { low: 3500, high: 6500 },\n        estimatedDays: { low: 3, high: 5 },\n        warranty: \"1-year labor warranty. Tile warranty per manufacturer.\",\n        exclusions: [\"Floor leveling beyond 1/4\\\"\", \"Radiant heat installation\", \"Decorative inlays\"],\n        baseScope: [\n          \"Remove existing flooring material and dispose off-site.\",\n          \"Inspect subfloor for structural integrity and levelness.\",\n          \"Install cement board underlayment if required.\",\n          \"Apply crack isolation membrane if needed.\",\n          \"Layout tile pattern; dry-fit for appearance approval.\",\n          \"Install tile using thin-set mortar per TCNA standards.\",\n          \"Maintain consistent grout joint spacing.\",\n          \"Allow tile to set for 24 hours minimum.\",\n          \"Apply grout to all joints; clean excess from tile surface.\",\n          \"Apply grout sealer after 72-hour cure.\",\n          \"Install transitions at doorways and floor height changes.\",\n          \"Install baseboards or base tile.\",\n          \"Final cleanup and inspection.\"\n        ],\n        options: [\n          {\n            id: \"tile-size\",\n            label: \"Tile Size\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"12x12 or 12x24\", priceModifier: 0 },\n              { value: \"large-format\", label: \"24x24 Large Format\", priceModifier: 400, scopeAddition: \"Install large format tile requiring leveling system.\" },\n              { value: \"plank\", label: \"Wood-Look Plank Tile\", priceModifier: 600, scopeAddition: \"Install wood-look porcelain plank tile with staggered pattern.\" }\n            ]\n          },\n          {\n            id: \"heated-floor\",\n            label: \"Electric Radiant Heat\",\n            type: \"boolean\",\n            priceModifier: 1400,\n            scopeAddition: \"Install electric radiant heating mat under tile with programmable thermostat.\"\n          },\n          {\n            id: \"decorative-border\",\n            label: \"Decorative Border/Inlay\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install decorative tile border or accent inlay per design.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"roofing\",\n    trade: \"Roofing\",\n    jobTypes: [\n      {\n        id: \"full-roof-asphalt\",\n        name: \"Full Roof Replacement â€“ Asphalt Shingle\",\n        basePriceRange: { low: 8500, high: 15000 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"Manufacturer shingle warranty (20-50 years). 5-year labor warranty.\",\n        exclusions: [\"Structural repairs\", \"Skylight replacement\", \"Gutter replacement\"],\n        baseScope: [\n          \"Set up ground-level debris containment and protection.\",\n          \"Remove all existing shingles, underlayment, and flashing.\",\n          \"Inspect roof deck for damage; report findings to homeowner.\",\n          \"Replace damaged or rotted decking (up to 2 sheets included).\",\n          \"Install ice and water shield at eaves and valleys.\",\n          \"Install synthetic underlayment over entire roof surface.\",\n          \"Install drip edge at eaves and rakes.\",\n          \"Install step flashing at walls and chimneys.\",\n          \"Install new pipe boots and vent flashings.\",\n          \"Install starter strip at eaves and rakes.\",\n          \"Install architectural shingles per manufacturer specs.\",\n          \"Install ridge vent for continuous attic ventilation.\",\n          \"Install ridge cap shingles.\",\n          \"Perform magnetic sweep of property for nails.\",\n          \"Final cleanup and debris removal; haul to dump.\",\n          \"Provide warranty documentation.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 800, scopeAddition: \"Additional equipment and safety measures for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 1500, scopeAddition: \"Additional equipment and safety measures for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 2500, scopeAddition: \"Additional equipment, safety measures, and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"shingle-grade\",\n            label: \"Shingle Grade\",\n            type: \"select\",\n            choices: [\n              { value: \"architectural\", label: \"Architectural (30-year)\", priceModifier: 0, scopeAddition: \"Install 30-year architectural shingles.\" },\n              { value: \"designer\", label: \"Designer (50-year)\", priceModifier: 2500, scopeAddition: \"Install 50-year designer shingles with enhanced aesthetics.\" },\n              { value: \"impact-resistant\", label: \"Impact-Resistant Class 4\", priceModifier: 3500, scopeAddition: \"Install Class 4 impact-resistant shingles (insurance discount may apply).\" }\n            ]\n          },\n          {\n            id: \"chimney-reflash\",\n            label: \"Chimney Reflashing\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Remove existing chimney flashing; install new step and counter flashing.\"\n          },\n          {\n            id: \"skylights-reflash\",\n            label: \"Skylight Reflashing\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install new flashing kit around existing skylight(s).\"\n          },\n          {\n            id: \"additional-decking\",\n            label: \"Additional Decking Allowance\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Additional (4) sheets of OSB decking replacement if needed.\"\n          }\n        ]\n      },\n      {\n        id: \"full-roof-metal\",\n        name: \"Full Roof Replacement â€“ Metal\",\n        basePriceRange: { low: 15000, high: 30000 },\n        estimatedDays: { low: 3, high: 6 },\n        warranty: \"Manufacturer warranty (40-50 years). 10-year labor warranty.\",\n        exclusions: [\"Structural modifications\", \"Skylight replacement\", \"Gutter replacement\"],\n        baseScope: [\n          \"Set up ground-level debris containment and protection.\",\n          \"Remove all existing roofing materials down to deck.\",\n          \"Inspect roof deck for damage; report findings to homeowner.\",\n          \"Replace damaged or rotted decking (up to 2 sheets included).\",\n          \"Install synthetic underlayment over entire roof surface.\",\n          \"Install drip edge at eaves and rakes.\",\n          \"Install eave trim and gable trim.\",\n          \"Install metal roofing panels per manufacturer specifications.\",\n          \"Install ridge cap with proper ventilation.\",\n          \"Install step flashing and counter flashing at walls and penetrations.\",\n          \"Install pipe boots and vent flashings compatible with metal.\",\n          \"Apply sealant at all seams and penetrations.\",\n          \"Final cleanup and debris removal; haul to dump.\",\n          \"Provide warranty documentation.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 1000, scopeAddition: \"Additional equipment and safety measures for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 2000, scopeAddition: \"Additional equipment and safety measures for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 3500, scopeAddition: \"Additional equipment, safety measures, and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"metal-type\",\n            label: \"Metal Type\",\n            type: \"select\",\n            choices: [\n              { value: \"standing-seam\", label: \"Standing Seam\", priceModifier: 0, scopeAddition: \"Install standing seam metal roofing panels.\" },\n              { value: \"corrugated\", label: \"Corrugated\", priceModifier: -2000, scopeAddition: \"Install corrugated metal roofing panels.\" },\n              { value: \"stone-coated\", label: \"Stone-Coated Steel\", priceModifier: 3000, scopeAddition: \"Install stone-coated steel roofing for enhanced aesthetics.\" }\n            ]\n          },\n          {\n            id: \"chimney-reflash\",\n            label: \"Chimney Reflashing\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Remove existing chimney flashing; install new metal-compatible flashing.\"\n          },\n          {\n            id: \"skylights-reflash\",\n            label: \"Skylight Reflashing\",\n            type: \"boolean\",\n            priceModifier: 600,\n            scopeAddition: \"Install new metal-compatible flashing kit around existing skylight(s).\"\n          }\n        ]\n      },\n      {\n        id: \"full-roof-tile-slate\",\n        name: \"Full Roof Replacement â€“ Tile / Slate\",\n        basePriceRange: { low: 25000, high: 50000 },\n        estimatedDays: { low: 5, high: 10 },\n        warranty: \"Manufacturer warranty (50-100 years). 10-year labor warranty.\",\n        exclusions: [\"Structural reinforcement\", \"Skylight replacement\", \"Gutter replacement\"],\n        baseScope: [\n          \"Set up ground-level debris containment and protection.\",\n          \"Remove all existing roofing materials down to deck.\",\n          \"Inspect roof deck and structure for ability to support tile/slate weight.\",\n          \"Replace damaged or rotted decking as needed.\",\n          \"Install ice and water shield at eaves, valleys, and penetrations.\",\n          \"Install appropriate underlayment for tile/slate application.\",\n          \"Install battens or lath system per tile/slate requirements.\",\n          \"Install starter tiles at eaves.\",\n          \"Install field tiles/slates with proper overlap and fastening.\",\n          \"Cut and fit tiles/slates at valleys, hips, and ridges.\",\n          \"Install ridge tiles with mortar or dry ridge system.\",\n          \"Install flashing at walls, chimneys, and penetrations.\",\n          \"Final cleanup and debris removal; haul to dump.\",\n          \"Provide warranty documentation.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 1500, scopeAddition: \"Additional equipment and safety measures for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 3000, scopeAddition: \"Additional equipment and safety measures for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 5000, scopeAddition: \"Additional equipment, safety measures, and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"tile-type\",\n            label: \"Material Type\",\n            type: \"select\",\n            choices: [\n              { value: \"concrete-tile\", label: \"Concrete Tile\", priceModifier: 0, scopeAddition: \"Install concrete roof tiles.\" },\n              { value: \"clay-tile\", label: \"Clay Tile\", priceModifier: 5000, scopeAddition: \"Install traditional clay roof tiles.\" },\n              { value: \"natural-slate\", label: \"Natural Slate\", priceModifier: 15000, scopeAddition: \"Install natural slate roofing.\" },\n              { value: \"synthetic-slate\", label: \"Synthetic Slate\", priceModifier: 3000, scopeAddition: \"Install synthetic slate roofing.\" }\n            ]\n          },\n          {\n            id: \"structural-reinforcement\",\n            label: \"Structural Reinforcement\",\n            type: \"boolean\",\n            priceModifier: 4000,\n            scopeAddition: \"Reinforce roof structure to support additional weight of tile/slate.\"\n          }\n        ]\n      },\n      {\n        id: \"full-roof-flat\",\n        name: \"Full Roof Replacement â€“ Flat Roof (TPO/PVC/Mod Bit)\",\n        basePriceRange: { low: 8000, high: 18000 },\n        estimatedDays: { low: 2, high: 5 },\n        warranty: \"Manufacturer warranty (15-25 years). 5-year labor warranty.\",\n        exclusions: [\"Structural repairs\", \"Parapet wall repairs\", \"HVAC equipment relocation\"],\n        baseScope: [\n          \"Set up debris containment and protection for building.\",\n          \"Remove existing roofing membrane and insulation.\",\n          \"Inspect roof deck for damage; report findings to owner.\",\n          \"Replace damaged decking or substrate as needed.\",\n          \"Install new tapered insulation for proper drainage.\",\n          \"Install cover board over insulation.\",\n          \"Install roofing membrane per manufacturer specifications.\",\n          \"Heat-weld or adhere all seams.\",\n          \"Install edge metal and termination bars.\",\n          \"Flash all penetrations, drains, and curbs.\",\n          \"Install new drain covers and scuppers as needed.\",\n          \"Final cleanup and debris removal.\",\n          \"Provide warranty documentation.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 600, scopeAddition: \"Additional equipment and safety measures for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 1200, scopeAddition: \"Additional equipment and safety measures for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 2000, scopeAddition: \"Additional equipment, safety measures, and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"membrane-type\",\n            label: \"Membrane Type\",\n            type: \"select\",\n            choices: [\n              { value: \"tpo\", label: \"TPO (Thermoplastic)\", priceModifier: 0, scopeAddition: \"Install TPO single-ply membrane roofing.\" },\n              { value: \"pvc\", label: \"PVC\", priceModifier: 1500, scopeAddition: \"Install PVC single-ply membrane roofing.\" },\n              { value: \"mod-bit\", label: \"Modified Bitumen\", priceModifier: -500, scopeAddition: \"Install modified bitumen roofing system.\" },\n              { value: \"epdm\", label: \"EPDM Rubber\", priceModifier: -1000, scopeAddition: \"Install EPDM rubber membrane roofing.\" }\n            ]\n          },\n          {\n            id: \"walkway-pads\",\n            label: \"Walkway Pads\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Install walkway pads for roof access and HVAC service areas.\"\n          }\n        ]\n      },\n      {\n        id: \"repair-leak-only\",\n        name: \"Roof Repair â€“ Leak Only\",\n        basePriceRange: { low: 350, high: 900 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"2-year warranty on repairs.\",\n        exclusions: [\"Interior water damage repair\", \"Full roof replacement\", \"Mold remediation\"],\n        baseScope: [\n          \"Inspect roof to locate source of leak.\",\n          \"Document findings with photos for homeowner.\",\n          \"Remove damaged materials in affected area.\",\n          \"Inspect underlayment and decking for damage.\",\n          \"Replace damaged underlayment if needed.\",\n          \"Install new roofing materials to match existing.\",\n          \"Seal all exposed fasteners and penetrations.\",\n          \"Apply additional sealant at vulnerable areas.\",\n          \"Clean up all debris.\",\n          \"Provide report of findings and repairs made.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 100, scopeAddition: \"Additional equipment for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 200, scopeAddition: \"Additional equipment for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 400, scopeAddition: \"Additional equipment and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"interior-stain-check\",\n            label: \"Interior Stain Documentation\",\n            type: \"boolean\",\n            priceModifier: 75,\n            scopeAddition: \"Document interior ceiling stains with measurements for insurance purposes.\"\n          }\n        ]\n      },\n      {\n        id: \"repair-wind-hail\",\n        name: \"Roof Repair â€“ Wind / Hail Damage\",\n        basePriceRange: { low: 500, high: 2500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"2-year warranty on repairs.\",\n        exclusions: [\"Interior water damage repair\", \"Full roof replacement\", \"Insurance claim filing\"],\n        baseScope: [\n          \"Conduct thorough inspection of entire roof for storm damage.\",\n          \"Document all damage with photos and measurements.\",\n          \"Prepare detailed damage report for insurance purposes.\",\n          \"Remove damaged or displaced shingles/materials.\",\n          \"Inspect underlayment and decking for damage.\",\n          \"Replace damaged underlayment and decking as needed.\",\n          \"Install new roofing materials to match existing.\",\n          \"Replace damaged flashing, vents, and accessories.\",\n          \"Seal all repairs and vulnerable areas.\",\n          \"Clean up all debris.\",\n          \"Provide comprehensive repair report.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 150, scopeAddition: \"Additional equipment for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 300, scopeAddition: \"Additional equipment for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 500, scopeAddition: \"Additional equipment and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"insurance-assist\",\n            label: \"Insurance Claim Assistance\",\n            type: \"boolean\",\n            priceModifier: 0,\n            scopeAddition: \"Assist homeowner with insurance claim documentation and adjuster meeting.\"\n          },\n          {\n            id: \"gutter-repair\",\n            label: \"Gutter Repair\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Repair storm-damaged gutters and downspouts.\"\n          }\n        ]\n      },\n      {\n        id: \"repair-general\",\n        name: \"Roof Repair â€“ General (Shingles / Flashing / Misc.)\",\n        basePriceRange: { low: 400, high: 1500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"2-year warranty on repairs.\",\n        exclusions: [\"Interior water damage repair\", \"Full roof replacement\"],\n        baseScope: [\n          \"Inspect roof to identify all areas needing repair.\",\n          \"Document findings with photos for homeowner.\",\n          \"Remove damaged or deteriorated roofing materials.\",\n          \"Replace damaged shingles, tiles, or other materials.\",\n          \"Repair or replace damaged flashing.\",\n          \"Re-secure loose materials.\",\n          \"Seal all exposed fasteners and joints.\",\n          \"Apply sealant at vulnerable areas.\",\n          \"Clean up all debris.\",\n          \"Provide report of repairs made.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 125, scopeAddition: \"Additional equipment for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 250, scopeAddition: \"Additional equipment for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 450, scopeAddition: \"Additional equipment and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"gutter-clean\",\n            label: \"Gutter Cleaning\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Clean all gutters and downspouts while on roof.\"\n          },\n          {\n            id: \"vent-replacement\",\n            label: \"Vent Replacement\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Replace damaged roof vents with new units.\"\n          }\n        ]\n      },\n      {\n        id: \"new-construction-roof\",\n        name: \"New Construction â€“ Roof Install\",\n        basePriceRange: { low: 10000, high: 25000 },\n        estimatedDays: { low: 3, high: 7 },\n        warranty: \"Manufacturer warranty per materials. 5-year labor warranty.\",\n        exclusions: [\"Framing and sheathing\", \"Permit fees\", \"Gutter installation\"],\n        baseScope: [\n          \"Coordinate with general contractor on scheduling.\",\n          \"Verify roof deck is complete and ready for roofing.\",\n          \"Install ice and water shield at eaves and valleys.\",\n          \"Install synthetic underlayment over entire roof surface.\",\n          \"Install drip edge at eaves and rakes.\",\n          \"Install step flashing at walls.\",\n          \"Install pipe boots and vent flashings.\",\n          \"Install starter strip at eaves and rakes.\",\n          \"Install roofing materials per specifications.\",\n          \"Install ridge vent for attic ventilation.\",\n          \"Install ridge cap.\",\n          \"Flash all penetrations and transitions.\",\n          \"Clean up all debris and perform nail sweep.\",\n          \"Final inspection and punch list.\",\n          \"Provide warranty documentation.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 1000, scopeAddition: \"Additional equipment and safety measures for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 2000, scopeAddition: \"Additional equipment and safety measures for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 3500, scopeAddition: \"Additional equipment, safety measures, and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"roofing-material\",\n            label: \"Roofing Material\",\n            type: \"select\",\n            choices: [\n              { value: \"asphalt-shingle\", label: \"Asphalt Shingle\", priceModifier: 0, scopeAddition: \"Install architectural asphalt shingles.\" },\n              { value: \"metal\", label: \"Metal Roofing\", priceModifier: 8000, scopeAddition: \"Install standing seam metal roofing.\" },\n              { value: \"tile\", label: \"Tile Roofing\", priceModifier: 15000, scopeAddition: \"Install concrete or clay tile roofing.\" }\n            ]\n          },\n          {\n            id: \"skylights\",\n            label: \"Skylight Installation\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Install skylight(s) with proper flashing per plan.\"\n          }\n        ]\n      },\n      {\n        id: \"reroof-overlay\",\n        name: \"Re-Roof (Overlay â€“ Where Allowed)\",\n        basePriceRange: { low: 5500, high: 10000 },\n        estimatedDays: { low: 1, high: 3 },\n        warranty: \"Manufacturer shingle warranty (reduced). 3-year labor warranty.\",\n        exclusions: [\"Tear-off of existing roof\", \"Structural repairs\", \"Skylight replacement\"],\n        baseScope: [\n          \"Verify local code allows overlay installation.\",\n          \"Inspect existing roof for suitability of overlay.\",\n          \"Repair any loose or damaged shingles.\",\n          \"Install drip edge at eaves and rakes.\",\n          \"Install new synthetic underlayment if required by code.\",\n          \"Install starter strip at eaves.\",\n          \"Install new shingles over existing roof.\",\n          \"Install new flashing at walls and penetrations.\",\n          \"Install new pipe boots over existing.\",\n          \"Install ridge vent if not present.\",\n          \"Install ridge cap shingles.\",\n          \"Clean up all debris.\",\n          \"Provide warranty documentation.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 500, scopeAddition: \"Additional equipment for 1.5 story height.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 1000, scopeAddition: \"Additional equipment for 2 story height.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 1800, scopeAddition: \"Additional equipment and staging for 3+ story height.\" }\n            ]\n          },\n          {\n            id: \"shingle-grade\",\n            label: \"Shingle Grade\",\n            type: \"select\",\n            choices: [\n              { value: \"architectural\", label: \"Architectural (30-year)\", priceModifier: 0, scopeAddition: \"Install 30-year architectural shingles.\" },\n              { value: \"designer\", label: \"Designer (50-year)\", priceModifier: 2000, scopeAddition: \"Install 50-year designer shingles.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"inspection-only\",\n        name: \"Inspection Only (Report / Photos)\",\n        basePriceRange: { low: 150, high: 350 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"N/A â€“ Inspection service only.\",\n        exclusions: [\"Repairs\", \"Material costs\", \"Follow-up visits\"],\n        baseScope: [\n          \"Access roof safely using appropriate equipment.\",\n          \"Conduct visual inspection of entire roof surface.\",\n          \"Inspect all flashing, vents, and penetrations.\",\n          \"Check for missing, damaged, or curling shingles.\",\n          \"Inspect valleys, ridges, and hips.\",\n          \"Check gutters and drainage.\",\n          \"Document all findings with photographs.\",\n          \"Assess overall roof condition and remaining life.\",\n          \"Prepare detailed written inspection report.\",\n          \"Provide recommendations for repairs or replacement.\",\n          \"Deliver report to homeowner within 24-48 hours.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 25, scopeAddition: \"Inspection of 1.5 story roof.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 50, scopeAddition: \"Inspection of 2 story roof.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 100, scopeAddition: \"Inspection of 3+ story roof with additional equipment.\" }\n            ]\n          },\n          {\n            id: \"drone-inspection\",\n            label: \"Drone Inspection\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Conduct drone inspection for hard-to-access areas with aerial photos.\"\n          },\n          {\n            id: \"thermal-imaging\",\n            label: \"Thermal Imaging\",\n            type: \"boolean\",\n            priceModifier: 200,\n            scopeAddition: \"Include thermal imaging to detect moisture intrusion.\"\n          }\n        ]\n      },\n      {\n        id: \"maintenance-tuneup\",\n        name: \"Maintenance / Tune-Up (Sealants, Minor Repairs)\",\n        basePriceRange: { low: 250, high: 600 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year warranty on maintenance work.\",\n        exclusions: [\"Major repairs\", \"Roof replacement\", \"Structural work\"],\n        baseScope: [\n          \"Inspect entire roof for maintenance needs.\",\n          \"Clear debris from roof surface and valleys.\",\n          \"Clean and inspect gutters and downspouts.\",\n          \"Re-secure any loose shingles or materials.\",\n          \"Apply sealant to exposed nail heads.\",\n          \"Seal around all pipe boots and vents.\",\n          \"Inspect and seal flashing at walls and chimneys.\",\n          \"Check and seal skylight perimeters if present.\",\n          \"Apply sealant to any small cracks or gaps.\",\n          \"Document condition with photos.\",\n          \"Provide maintenance report with recommendations.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 50, scopeAddition: \"Maintenance for 1.5 story roof.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 100, scopeAddition: \"Maintenance for 2 story roof.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 175, scopeAddition: \"Maintenance for 3+ story roof with additional equipment.\" }\n            ]\n          },\n          {\n            id: \"gutter-guards\",\n            label: \"Gutter Guard Installation\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Install gutter guards to prevent debris buildup.\"\n          },\n          {\n            id: \"moss-treatment\",\n            label: \"Moss/Algae Treatment\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Apply moss and algae treatment to affected areas.\"\n          }\n        ]\n      },\n      {\n        id: \"emergency-tarp\",\n        name: \"Emergency Tarp / Temporary Dry-In\",\n        basePriceRange: { low: 400, high: 1200 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Temporary repair â€“ no warranty on tarping.\",\n        exclusions: [\"Permanent repairs\", \"Interior damage repair\", \"Insurance claims\"],\n        baseScope: [\n          \"Respond to emergency call as quickly as possible.\",\n          \"Assess damage and document with photos.\",\n          \"Clear debris from damaged area.\",\n          \"Install heavy-duty tarp over damaged section.\",\n          \"Secure tarp with battens, weights, or fasteners.\",\n          \"Ensure tarp extends beyond damaged area adequately.\",\n          \"Seal edges to prevent wind uplift.\",\n          \"Verify temporary protection is weather-tight.\",\n          \"Provide damage documentation for insurance.\",\n          \"Schedule follow-up for permanent repair estimate.\"\n        ],\n        options: [\n          {\n            id: \"height-stories\",\n            label: \"Height / Stories\",\n            type: \"select\",\n            choices: [\n              { value: \"1-story\", label: \"1 Story\", priceModifier: 0 },\n              { value: \"1.5-story\", label: \"1.5 Story\", priceModifier: 100, scopeAddition: \"Emergency tarping for 1.5 story roof.\" },\n              { value: \"2-story\", label: \"2 Story\", priceModifier: 200, scopeAddition: \"Emergency tarping for 2 story roof.\" },\n              { value: \"3-plus-story\", label: \"3+ Story\", priceModifier: 350, scopeAddition: \"Emergency tarping for 3+ story roof with additional equipment.\" }\n            ]\n          },\n          {\n            id: \"after-hours\",\n            label: \"After-Hours Service\",\n            type: \"boolean\",\n            priceModifier: 200,\n            scopeAddition: \"After-hours emergency response (evenings/weekends).\"\n          },\n          {\n            id: \"large-area\",\n            label: \"Large Area Coverage (>200 sq ft)\",\n            type: \"boolean\",\n            priceModifier: 300,\n            scopeAddition: \"Additional tarping materials for coverage over 200 square feet.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"deck\",\n    trade: \"Deck & Patio\",\n    jobTypes: [\n      {\n        id: \"deck-build\",\n        name: \"New Deck Construction\",\n        basePriceRange: { low: 12000, high: 25000 },\n        estimatedDays: { low: 5, high: 10 },\n        warranty: \"5-year structural warranty. 1-year warranty on finishes.\",\n        exclusions: [\"Permit fees\", \"Hot tub installation\", \"Outdoor kitchen build\"],\n        baseScope: [\n          \"Obtain required permits (fee separate, if applicable).\",\n          \"Lay out deck footprint per approved plans.\",\n          \"Excavate and pour concrete footings per code.\",\n          \"Install post anchors and support posts.\",\n          \"Install ledger board with proper flashing.\",\n          \"Install rim joists and floor joists per span tables.\",\n          \"Install joist hangers and blocking as required.\",\n          \"Install decking boards with proper spacing.\",\n          \"Install fascia boards around perimeter.\",\n          \"Build and install stair stringers and treads.\",\n          \"Install code-compliant railing system with balusters.\",\n          \"Install post caps and decorative trim.\",\n          \"Apply sealer/stain (if wood) or clean composite.\",\n          \"Final inspection and punch list.\",\n          \"Site cleanup and debris removal.\"\n        ],\n        options: [\n          {\n            id: \"decking-material\",\n            label: \"Decking Material\",\n            type: \"select\",\n            choices: [\n              { value: \"pt-lumber\", label: \"Pressure-Treated Lumber\", priceModifier: 0, scopeAddition: \"Build deck with pressure-treated lumber (requires regular sealing).\" },\n              { value: \"cedar\", label: \"Cedar\", priceModifier: 3500, scopeAddition: \"Build deck with natural cedar decking and trim.\" },\n              { value: \"composite-standard\", label: \"Composite (Standard)\", priceModifier: 5000, scopeAddition: \"Build deck with standard composite decking (Trex Select or equivalent).\" },\n              { value: \"composite-premium\", label: \"Composite (Premium)\", priceModifier: 8500, scopeAddition: \"Build deck with premium capped composite (Trex Transcend or equivalent).\" }\n            ]\n          },\n          {\n            id: \"railing-style\",\n            label: \"Railing Style\",\n            type: \"select\",\n            choices: [\n              { value: \"wood\", label: \"Wood Railing\", priceModifier: 0, scopeAddition: \"Install wood railing with 2x2 balusters.\" },\n              { value: \"aluminum\", label: \"Aluminum Balusters\", priceModifier: 800, scopeAddition: \"Install aluminum balusters with wood top rail.\" },\n              { value: \"cable\", label: \"Cable Railing\", priceModifier: 2500, scopeAddition: \"Install stainless steel cable railing system.\" },\n              { value: \"glass\", label: \"Glass Panel Railing\", priceModifier: 4500, scopeAddition: \"Install tempered glass panel railing system.\" }\n            ]\n          },\n          {\n            id: \"built-in-bench\",\n            label: \"Built-in Bench Seating\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Build integrated bench seating (8-12 linear feet) along deck perimeter.\"\n          },\n          {\n            id: \"deck-lighting\",\n            label: \"Deck Lighting Package\",\n            type: \"boolean\",\n            priceModifier: 1500,\n            scopeAddition: \"Install low-voltage LED lighting in stair risers, post caps, and under rails.\"\n          }\n        ]\n      },\n      {\n        id: \"deck-resurface\",\n        name: \"Deck Resurfacing\",\n        basePriceRange: { low: 5500, high: 10000 },\n        estimatedDays: { low: 3, high: 5 },\n        warranty: \"1-year labor warranty. Material warranty per manufacturer.\",\n        exclusions: [\"Structural repairs to framing\", \"Railing replacement\"],\n        baseScope: [\n          \"Remove existing deck boards and dispose off-site.\",\n          \"Inspect all framing, joists, and ledger for damage.\",\n          \"Replace damaged or rotted joist sections (minor repairs included).\",\n          \"Install new joist tape/flashing on top of joists.\",\n          \"Install new decking boards with hidden fastener system.\",\n          \"Maintain proper board spacing for drainage.\",\n          \"Install new fascia to match decking.\",\n          \"Replace stair treads with new decking material.\",\n          \"Power wash railing system and repaint/stain if wood.\",\n          \"Clean entire deck surface.\",\n          \"Final inspection and walkthrough.\"\n        ],\n        options: [\n          {\n            id: \"new-railing\",\n            label: \"New Railing System\",\n            type: \"boolean\",\n            priceModifier: 2500,\n            scopeAddition: \"Remove existing railing; install new composite or aluminum railing system.\"\n          },\n          {\n            id: \"add-stairs\",\n            label: \"Add New Stair Section\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Build additional stair section (4-6 steps) with landing.\"\n          }\n        ]\n      },\n      {\n        id: \"paver-patio\",\n        name: \"Paver Patio Installation\",\n        basePriceRange: { low: 8000, high: 16000 },\n        estimatedDays: { low: 4, high: 7 },\n        warranty: \"5-year warranty on paver installation and leveling.\",\n        exclusions: [\"Retaining walls over 2 feet\", \"Drainage systems beyond basic slope\", \"Outdoor structures\"],\n        baseScope: [\n          \"Lay out patio footprint with paint/stakes per plan.\",\n          \"Excavate area to required depth (typically 8-10 inches).\",\n          \"Grade subsoil for proper drainage slope.\",\n          \"Install geotextile fabric if required by soil conditions.\",\n          \"Spread and compact 6 inches of crushed gravel base.\",\n          \"Install 1 inch sand setting bed and screed level.\",\n          \"Install paver edge restraints around perimeter.\",\n          \"Lay pavers in selected pattern.\",\n          \"Cut pavers at edges using wet saw.\",\n          \"Compact pavers with plate compactor.\",\n          \"Spread polymeric sand into joints.\",\n          \"Mist and activate polymeric sand per manufacturer.\",\n          \"Clean and seal pavers (if sealer selected).\",\n          \"Final cleanup and grade surrounding area.\",\n          \"Provide care and maintenance instructions.\"\n        ],\n        options: [\n          {\n            id: \"paver-style\",\n            label: \"Paver Style\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard Concrete Pavers\", priceModifier: 0, scopeAddition: \"Install standard concrete pavers in selected color.\" },\n              { value: \"tumbled\", label: \"Tumbled/Antiqued Pavers\", priceModifier: 1200, scopeAddition: \"Install tumbled-finish pavers for rustic appearance.\" },\n              { value: \"natural-stone\", label: \"Natural Stone (Flagstone)\", priceModifier: 4500, scopeAddition: \"Install natural flagstone pavers with irregular pattern.\" },\n              { value: \"permeable\", label: \"Permeable Pavers\", priceModifier: 2500, scopeAddition: \"Install permeable paver system for stormwater management.\" }\n            ]\n          },\n          {\n            id: \"fire-pit\",\n            label: \"Built-in Fire Pit\",\n            type: \"boolean\",\n            priceModifier: 2500,\n            scopeAddition: \"Build 42\\\" diameter fire pit with fire ring and cap stones.\"\n          },\n          {\n            id: \"seating-wall\",\n            label: \"Seating Wall (10 LF)\",\n            type: \"boolean\",\n            priceModifier: 2200,\n            scopeAddition: \"Build 10 linear feet of block seating wall with cap stones.\"\n          },\n          {\n            id: \"patio-sealer\",\n            label: \"Paver Sealer Application\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Apply wet-look or matte sealer to all pavers for enhanced protection.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"hvac\",\n    trade: \"HVAC\",\n    jobTypes: [\n      {\n        id: \"full-system-split\",\n        name: \"Full System Replacement â€“ Split (AC + Furnace)\",\n        basePriceRange: { low: 9500, high: 18000 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"10-year parts warranty with registration. 2-year labor warranty.\",\n        exclusions: [\"Ductwork replacement\", \"Zoning systems\", \"Electrical panel upgrades\", \"Permits (if required by jurisdiction)\"],\n        baseScope: [\n          \"Recover existing refrigerant per EPA Section 608 regulations.\",\n          \"Disconnect and remove existing outdoor A/C condenser unit.\",\n          \"Disconnect and remove existing indoor furnace.\",\n          \"Dispose of old equipment per environmental regulations.\",\n          \"Set new condenser unit on existing pad (or install new pad if required).\",\n          \"Install new furnace in existing location.\",\n          \"Install new evaporator coil matched to condenser tonnage.\",\n          \"Replace refrigerant line set if required by distance or condition.\",\n          \"Install new drain pan and condensate line with trap.\",\n          \"Install new filter drier and service ports.\",\n          \"Braze all refrigerant connections with silver solder.\",\n          \"Pressure test system with nitrogen to 500 PSI.\",\n          \"Evacuate system to 500 microns using vacuum pump.\",\n          \"Charge system with factory-specified refrigerant (R-410A).\",\n          \"Verify subcooling and superheat values per manufacturer specs.\",\n          \"Connect gas line to furnace (if gas) and test for leaks.\",\n          \"Connect and test existing or new thermostat.\",\n          \"Verify airflow at all supply registers.\",\n          \"Test heating and cooling modes for proper operation.\",\n          \"Measure temperature differential (cooling: 16-22Â°F, heating: 40-70Â°F rise).\",\n          \"Program and calibrate thermostat settings.\",\n          \"Register warranty with manufacturer.\",\n          \"Provide system orientation and filter replacement instructions to homeowner.\",\n          \"Clean up work area and remove all debris.\"\n        ],\n        options: [\n          {\n            id: \"tonnage\",\n            label: \"System Size (Tonnage)\",\n            type: \"select\",\n            choices: [\n              { value: \"1.5-ton\", label: \"1.5 Ton\", priceModifier: -1500, scopeAddition: \"Install 1.5-ton system sized for approximately 600-900 sq ft.\" },\n              { value: \"2-ton\", label: \"2 Ton\", priceModifier: -1000, scopeAddition: \"Install 2-ton system sized for approximately 901-1200 sq ft.\" },\n              { value: \"2.5-ton\", label: \"2.5 Ton\", priceModifier: -500, scopeAddition: \"Install 2.5-ton system sized for approximately 1201-1500 sq ft.\" },\n              { value: \"3-ton\", label: \"3 Ton\", priceModifier: 0, scopeAddition: \"Install 3-ton system sized for approximately 1501-1800 sq ft.\" },\n              { value: \"3.5-ton\", label: \"3.5 Ton\", priceModifier: 500, scopeAddition: \"Install 3.5-ton system sized for approximately 1801-2100 sq ft.\" },\n              { value: \"4-ton\", label: \"4 Ton\", priceModifier: 1000, scopeAddition: \"Install 4-ton system sized for approximately 2101-2400 sq ft.\" },\n              { value: \"5-ton\", label: \"5 Ton\", priceModifier: 2000, scopeAddition: \"Install 5-ton system sized for approximately 2401-3000 sq ft.\" }\n            ]\n          },\n          {\n            id: \"efficiency\",\n            label: \"Efficiency Level\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (14-15 SEER / 80% AFUE)\", priceModifier: 0, scopeAddition: \"Install standard efficiency A/C (14-15 SEER) and 80% AFUE furnace.\" },\n              { value: \"high\", label: \"High Efficiency (16-17 SEER / 95% AFUE)\", priceModifier: 2000, scopeAddition: \"Install high-efficiency A/C (16-17 SEER) and 95% AFUE furnace with secondary heat exchanger.\" },\n              { value: \"ultra\", label: \"Ultra Efficiency (18+ SEER / 98% AFUE)\", priceModifier: 4500, scopeAddition: \"Install ultra-efficient variable-speed A/C (18+ SEER) and 98% AFUE modulating furnace.\" }\n            ]\n          },\n          {\n            id: \"smart-thermostat\",\n            label: \"Smart Thermostat (Ecobee/Nest)\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install premium smart thermostat with room sensors and app setup.\"\n          },\n          {\n            id: \"new-pad\",\n            label: \"New Condenser Pad\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Install new composite condenser pad (replace cracked or undersized pad).\"\n          },\n          {\n            id: \"surge-protector\",\n            label: \"HVAC Surge Protector\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Install surge protector at outdoor disconnect for compressor protection.\"\n          },\n          {\n            id: \"uv-light\",\n            label: \"UV Air Purifier\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install UV-C germicidal light in air handler to reduce mold and bacteria.\"\n          },\n          {\n            id: \"duct-cleaning\",\n            label: \"Complete Duct Cleaning\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Clean all supply and return ductwork using rotary brush and HEPA vacuum.\"\n          }\n        ]\n      },\n      {\n        id: \"ac-only\",\n        name: \"AC Only Replacement\",\n        basePriceRange: { low: 4500, high: 9000 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Manufacturer warranty (5-10 years parts). 2-year labor warranty.\",\n        exclusions: [\"Furnace replacement\", \"Ductwork modifications\", \"Indoor coil replacement (unless included)\", \"Electrical panel upgrade\"],\n        baseScope: [\n          \"Recover existing refrigerant per EPA Section 608 regulations.\",\n          \"Disconnect and remove existing outdoor condenser unit.\",\n          \"Dispose of old unit per environmental regulations.\",\n          \"Set new condenser on existing pad (or new pad if required).\",\n          \"Inspect and flush existing line set with nitrogen.\",\n          \"Install new filter drier.\",\n          \"Braze all connections with silver solder.\",\n          \"Pressure test system with nitrogen to 500 PSI.\",\n          \"Evacuate system to 500 microns using vacuum pump.\",\n          \"Charge system with factory-specified refrigerant (R-410A).\",\n          \"Verify subcooling and superheat values per manufacturer specs.\",\n          \"Test operation and measure cooling delta-T (16-22Â°F).\",\n          \"Verify proper amp draw on compressor.\",\n          \"Register warranty with manufacturer.\",\n          \"Clean up work area.\",\n          \"Provide warranty documentation and filter schedule to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"tonnage\",\n            label: \"System Size (Tonnage)\",\n            type: \"select\",\n            choices: [\n              { value: \"1.5-ton\", label: \"1.5 Ton\", priceModifier: -1000, scopeAddition: \"Install 1.5-ton condenser sized for approximately 600-900 sq ft.\" },\n              { value: \"2-ton\", label: \"2 Ton\", priceModifier: -600, scopeAddition: \"Install 2-ton condenser sized for approximately 901-1200 sq ft.\" },\n              { value: \"2.5-ton\", label: \"2.5 Ton\", priceModifier: -300, scopeAddition: \"Install 2.5-ton condenser sized for approximately 1201-1500 sq ft.\" },\n              { value: \"3-ton\", label: \"3 Ton\", priceModifier: 0, scopeAddition: \"Install 3-ton condenser sized for approximately 1501-1800 sq ft.\" },\n              { value: \"3.5-ton\", label: \"3.5 Ton\", priceModifier: 400, scopeAddition: \"Install 3.5-ton condenser sized for approximately 1801-2100 sq ft.\" },\n              { value: \"4-ton\", label: \"4 Ton\", priceModifier: 800, scopeAddition: \"Install 4-ton condenser sized for approximately 2101-2400 sq ft.\" },\n              { value: \"5-ton\", label: \"5 Ton\", priceModifier: 1500, scopeAddition: \"Install 5-ton condenser sized for approximately 2401-3000 sq ft.\" }\n            ]\n          },\n          {\n            id: \"efficiency\",\n            label: \"Efficiency Level\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (14-15 SEER)\", priceModifier: 0, scopeAddition: \"Install 14-15 SEER efficiency condenser.\" },\n              { value: \"high\", label: \"High Efficiency (16-17 SEER)\", priceModifier: 1200, scopeAddition: \"Install 16-17 SEER high-efficiency condenser.\" },\n              { value: \"ultra\", label: \"Ultra Efficiency (18+ SEER)\", priceModifier: 2800, scopeAddition: \"Install 18+ SEER ultra-efficient condenser with variable speed compressor.\" }\n            ]\n          },\n          {\n            id: \"evap-coil\",\n            label: \"New Evaporator Coil\",\n            type: \"boolean\",\n            priceModifier: 1200,\n            scopeAddition: \"Replace indoor evaporator coil to match new condenser for optimal efficiency.\"\n          },\n          {\n            id: \"smart-thermostat\",\n            label: \"Smart Thermostat Upgrade\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install and configure Wi-Fi enabled smart thermostat with app setup.\"\n          },\n          {\n            id: \"new-pad\",\n            label: \"New Condenser Pad\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Install new composite condenser pad (replace cracked or undersized pad).\"\n          },\n          {\n            id: \"surge-protector\",\n            label: \"A/C Surge Protector\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Install surge protector at outdoor disconnect for compressor protection.\"\n          }\n        ]\n      },\n      {\n        id: \"furnace-only\",\n        name: \"Furnace Only Replacement\",\n        basePriceRange: { low: 3500, high: 7500 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Manufacturer warranty (limited lifetime heat exchanger, 10-year parts). 2-year labor warranty.\",\n        exclusions: [\"A/C replacement\", \"Ductwork modifications\", \"Gas line installation\", \"Permits (if required)\"],\n        baseScope: [\n          \"Turn off gas supply and disconnect existing furnace.\",\n          \"Disconnect and cap refrigerant lines (if applicable).\",\n          \"Remove existing furnace and dispose properly.\",\n          \"Install new furnace in existing location.\",\n          \"Reconnect gas supply line and test for leaks with electronic detector.\",\n          \"Reconnect existing evaporator coil (if A/C equipped).\",\n          \"Install new drain pan and condensate line with trap (if high-efficiency).\",\n          \"Connect flue/exhaust per code requirements.\",\n          \"Connect and test thermostat wiring.\",\n          \"Verify proper gas pressure at manifold.\",\n          \"Test ignition sequence and safety controls.\",\n          \"Measure temperature rise across heat exchanger.\",\n          \"Verify proper combustion and draft.\",\n          \"Test all heating stages.\",\n          \"Register warranty with manufacturer.\",\n          \"Clean up work area and provide operating instructions.\"\n        ],\n        options: [\n          {\n            id: \"size\",\n            label: \"Furnace Size (BTU)\",\n            type: \"select\",\n            choices: [\n              { value: \"40k\", label: \"40,000 BTU\", priceModifier: -500, scopeAddition: \"Install 40,000 BTU furnace for smaller homes (800-1200 sq ft).\" },\n              { value: \"60k\", label: \"60,000 BTU\", priceModifier: -200, scopeAddition: \"Install 60,000 BTU furnace for medium homes (1200-1600 sq ft).\" },\n              { value: \"80k\", label: \"80,000 BTU\", priceModifier: 0, scopeAddition: \"Install 80,000 BTU furnace for average homes (1600-2200 sq ft).\" },\n              { value: \"100k\", label: \"100,000 BTU\", priceModifier: 400, scopeAddition: \"Install 100,000 BTU furnace for larger homes (2200-2800 sq ft).\" },\n              { value: \"120k\", label: \"120,000 BTU\", priceModifier: 800, scopeAddition: \"Install 120,000 BTU furnace for large homes (2800+ sq ft).\" }\n            ]\n          },\n          {\n            id: \"efficiency\",\n            label: \"Efficiency Level\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (80% AFUE)\", priceModifier: 0, scopeAddition: \"Install 80% AFUE single-stage furnace with standard efficiency.\" },\n              { value: \"high\", label: \"High Efficiency (95% AFUE)\", priceModifier: 1200, scopeAddition: \"Install 95% AFUE high-efficiency furnace with secondary heat exchanger and PVC venting.\" },\n              { value: \"ultra\", label: \"Ultra Efficiency (98% AFUE)\", priceModifier: 2500, scopeAddition: \"Install 98% AFUE modulating furnace with variable-speed blower for maximum comfort and efficiency.\" }\n            ]\n          },\n          {\n            id: \"smart-thermostat\",\n            label: \"Smart Thermostat Upgrade\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install and configure Wi-Fi enabled smart thermostat with app setup.\"\n          },\n          {\n            id: \"humidifier\",\n            label: \"Whole-House Humidifier\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install bypass or powered humidifier with humidistat control.\"\n          },\n          {\n            id: \"co-detector\",\n            label: \"Carbon Monoxide Detector\",\n            type: \"boolean\",\n            priceModifier: 125,\n            scopeAddition: \"Install hardwired carbon monoxide detector near furnace area.\"\n          }\n        ]\n      },\n      {\n        id: \"heat-pump-system\",\n        name: \"Heat Pump System Replacement\",\n        basePriceRange: { low: 8500, high: 16000 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"10-year parts warranty with registration. 2-year labor warranty.\",\n        exclusions: [\"Ductwork replacement\", \"Electrical panel upgrade\", \"Backup heating installation\", \"Permits (if required)\"],\n        baseScope: [\n          \"Recover existing refrigerant per EPA Section 608 regulations.\",\n          \"Disconnect and remove existing outdoor heat pump or A/C unit.\",\n          \"Remove and dispose of existing indoor air handler.\",\n          \"Set new heat pump condenser on existing or new pad.\",\n          \"Install new air handler with matched coil.\",\n          \"Install new refrigerant line set if required.\",\n          \"Install new drain pan and condensate line with trap.\",\n          \"Install new filter drier and service ports.\",\n          \"Braze all connections with silver solder.\",\n          \"Pressure test system with nitrogen to 500 PSI.\",\n          \"Evacuate system to 500 microns using vacuum pump.\",\n          \"Charge system with factory-specified refrigerant (R-410A).\",\n          \"Verify subcooling and superheat in both heating and cooling modes.\",\n          \"Test reversing valve operation.\",\n          \"Verify defrost cycle operation.\",\n          \"Connect and program thermostat for heat pump operation.\",\n          \"Test electric backup heat strips (if applicable).\",\n          \"Measure temperature differential in heating and cooling modes.\",\n          \"Register warranty with manufacturer.\",\n          \"Provide system orientation to homeowner.\",\n          \"Clean up work area and remove all debris.\"\n        ],\n        options: [\n          {\n            id: \"tonnage\",\n            label: \"System Size (Tonnage)\",\n            type: \"select\",\n            choices: [\n              { value: \"1.5-ton\", label: \"1.5 Ton\", priceModifier: -1200, scopeAddition: \"Install 1.5-ton heat pump sized for approximately 600-900 sq ft.\" },\n              { value: \"2-ton\", label: \"2 Ton\", priceModifier: -800, scopeAddition: \"Install 2-ton heat pump sized for approximately 901-1200 sq ft.\" },\n              { value: \"2.5-ton\", label: \"2.5 Ton\", priceModifier: -400, scopeAddition: \"Install 2.5-ton heat pump sized for approximately 1201-1500 sq ft.\" },\n              { value: \"3-ton\", label: \"3 Ton\", priceModifier: 0, scopeAddition: \"Install 3-ton heat pump sized for approximately 1501-1800 sq ft.\" },\n              { value: \"3.5-ton\", label: \"3.5 Ton\", priceModifier: 500, scopeAddition: \"Install 3.5-ton heat pump sized for approximately 1801-2100 sq ft.\" },\n              { value: \"4-ton\", label: \"4 Ton\", priceModifier: 1000, scopeAddition: \"Install 4-ton heat pump sized for approximately 2101-2400 sq ft.\" },\n              { value: \"5-ton\", label: \"5 Ton\", priceModifier: 1800, scopeAddition: \"Install 5-ton heat pump sized for approximately 2401-3000 sq ft.\" }\n            ]\n          },\n          {\n            id: \"efficiency\",\n            label: \"Efficiency Level\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (14-15 SEER / 8 HSPF)\", priceModifier: 0, scopeAddition: \"Install standard efficiency heat pump (14-15 SEER, 8 HSPF).\" },\n              { value: \"high\", label: \"High Efficiency (16-17 SEER / 9 HSPF)\", priceModifier: 1800, scopeAddition: \"Install high-efficiency heat pump (16-17 SEER, 9 HSPF).\" },\n              { value: \"ultra\", label: \"Ultra Efficiency (18+ SEER / 10+ HSPF)\", priceModifier: 4000, scopeAddition: \"Install ultra-efficient variable-speed heat pump (18+ SEER, 10+ HSPF) with inverter technology.\" }\n            ]\n          },\n          {\n            id: \"backup-heat\",\n            label: \"Electric Backup Heat Strips\",\n            type: \"select\",\n            choices: [\n              { value: \"5kw\", label: \"5 kW Heat Kit\", priceModifier: 350, scopeAddition: \"Install 5 kW electric heat kit for backup heating.\" },\n              { value: \"10kw\", label: \"10 kW Heat Kit\", priceModifier: 500, scopeAddition: \"Install 10 kW electric heat kit for backup heating.\" },\n              { value: \"15kw\", label: \"15 kW Heat Kit\", priceModifier: 700, scopeAddition: \"Install 15 kW electric heat kit for backup heating.\" },\n              { value: \"20kw\", label: \"20 kW Heat Kit\", priceModifier: 900, scopeAddition: \"Install 20 kW electric heat kit for backup heating.\" }\n            ]\n          },\n          {\n            id: \"smart-thermostat\",\n            label: \"Smart Thermostat (Heat Pump Compatible)\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install heat pump compatible smart thermostat with dual-fuel support.\"\n          },\n          {\n            id: \"surge-protector\",\n            label: \"Heat Pump Surge Protector\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Install surge protector at outdoor disconnect for compressor protection.\"\n          }\n        ]\n      },\n      {\n        id: \"mini-split-single\",\n        name: \"Mini-Split Install â€“ Single Zone\",\n        basePriceRange: { low: 3500, high: 6500 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"7-year compressor warranty. 5-year parts warranty. 2-year labor warranty.\",\n        exclusions: [\"Electrical panel upgrade\", \"Major structural modifications\", \"Permits (if required)\"],\n        baseScope: [\n          \"Select and mark optimal locations for indoor and outdoor units.\",\n          \"Install wall-mounted bracket for indoor air handler.\",\n          \"Core 3\\\" hole through exterior wall for line set routing.\",\n          \"Install wall sleeve and seal with weatherproof materials.\",\n          \"Run refrigerant lines, drain line, and control wire between units.\",\n          \"Install outdoor condenser on ground bracket or composite pad.\",\n          \"Connect refrigerant lines with proper flare fittings and torque specs.\",\n          \"Vacuum and leak test refrigerant system.\",\n          \"Release factory charge or add refrigerant per line set length.\",\n          \"Wire indoor unit to outdoor unit with control cable.\",\n          \"Install new dedicated electrical circuit (if required).\",\n          \"Connect electrical supply per code requirements.\",\n          \"Test heating and cooling operation.\",\n          \"Verify proper refrigerant charge via temperature method.\",\n          \"Program remote control and demonstrate functions to owner.\",\n          \"Install line set cover for exterior aesthetics.\",\n          \"Clean up all work areas and remove debris.\",\n          \"Provide warranty documentation and maintenance instructions.\"\n        ],\n        options: [\n          {\n            id: \"tonnage\",\n            label: \"System Size (BTU/Tonnage)\",\n            type: \"select\",\n            choices: [\n              { value: \"9k\", label: \"9,000 BTU (3/4 Ton)\", priceModifier: -800, scopeAddition: \"Install 9,000 BTU mini-split for rooms up to 350 sq ft.\" },\n              { value: \"12k\", label: \"12,000 BTU (1 Ton)\", priceModifier: -400, scopeAddition: \"Install 12,000 BTU mini-split for rooms 350-550 sq ft.\" },\n              { value: \"18k\", label: \"18,000 BTU (1.5 Ton)\", priceModifier: 0, scopeAddition: \"Install 18,000 BTU mini-split for rooms 550-800 sq ft.\" },\n              { value: \"24k\", label: \"24,000 BTU (2 Ton)\", priceModifier: 600, scopeAddition: \"Install 24,000 BTU mini-split for rooms 800-1100 sq ft.\" },\n              { value: \"36k\", label: \"36,000 BTU (3 Ton)\", priceModifier: 1200, scopeAddition: \"Install 36,000 BTU mini-split for areas 1100-1500 sq ft.\" }\n            ]\n          },\n          {\n            id: \"efficiency\",\n            label: \"Efficiency Level\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (18 SEER)\", priceModifier: 0, scopeAddition: \"Install standard 18 SEER mini-split system.\" },\n              { value: \"high\", label: \"High Efficiency (22 SEER)\", priceModifier: 800, scopeAddition: \"Install high-efficiency 22 SEER mini-split system.\" },\n              { value: \"ultra\", label: \"Ultra Efficiency (25+ SEER)\", priceModifier: 1500, scopeAddition: \"Install ultra-efficient 25+ SEER mini-split with inverter technology.\" }\n            ]\n          },\n          {\n            id: \"ceiling-cassette\",\n            label: \"Ceiling Cassette (in lieu of wall unit)\",\n            type: \"boolean\",\n            priceModifier: 900,\n            scopeAddition: \"Install ceiling-recessed cassette style unit for discreet appearance.\"\n          },\n          {\n            id: \"floor-mount\",\n            label: \"Floor-Mounted Unit (in lieu of wall unit)\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Install floor-mounted console unit instead of wall-mounted head.\"\n          },\n          {\n            id: \"wifi-control\",\n            label: \"Wi-Fi Control Adapter\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Install Wi-Fi adapter for smartphone control of mini-split system.\"\n          },\n          {\n            id: \"electrical-circuit\",\n            label: \"New Dedicated Circuit\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install new dedicated 20A or 30A circuit from panel to unit location.\"\n          }\n        ]\n      },\n      {\n        id: \"mini-split-multi\",\n        name: \"Mini-Split Install â€“ Multi Zone\",\n        basePriceRange: { low: 7500, high: 15000 },\n        estimatedDays: { low: 1, high: 3 },\n        warranty: \"7-year compressor warranty. 5-year parts warranty. 2-year labor warranty.\",\n        exclusions: [\"Electrical panel upgrade\", \"Major structural modifications\", \"Permits (if required)\"],\n        baseScope: [\n          \"Evaluate and select optimal locations for each indoor unit and outdoor condenser.\",\n          \"Install wall-mounted brackets for each indoor air handler.\",\n          \"Core holes through exterior walls for each zone's line set routing.\",\n          \"Install wall sleeves and seal with weatherproof materials.\",\n          \"Run individual refrigerant lines, drain lines, and control wires for each zone.\",\n          \"Install multi-zone outdoor condenser on ground bracket or composite pad.\",\n          \"Connect all refrigerant lines to branch distribution box or direct to condenser.\",\n          \"Use proper flare fittings with torque specs for all connections.\",\n          \"Vacuum entire system and test for leaks.\",\n          \"Charge system with proper refrigerant amount per total line set length.\",\n          \"Wire each indoor unit to outdoor unit with control cables.\",\n          \"Install new dedicated electrical circuit for outdoor unit.\",\n          \"Connect electrical supply per code requirements.\",\n          \"Test each zone independently for heating and cooling operation.\",\n          \"Verify proper refrigerant charge and system balance.\",\n          \"Program each zone's remote control and demonstrate to owner.\",\n          \"Install line set covers for exterior aesthetics.\",\n          \"Clean up all work areas and remove debris.\",\n          \"Provide warranty documentation and maintenance instructions for each zone.\"\n        ],\n        options: [\n          {\n            id: \"zone-count\",\n            label: \"Number of Indoor Zones\",\n            type: \"select\",\n            choices: [\n              { value: \"2-zone\", label: \"2 Zones\", priceModifier: 0, scopeAddition: \"Install 2-zone multi-split system with individual temperature control per zone.\" },\n              { value: \"3-zone\", label: \"3 Zones\", priceModifier: 2500, scopeAddition: \"Install 3-zone multi-split system with individual temperature control per zone.\" },\n              { value: \"4-zone\", label: \"4 Zones\", priceModifier: 4500, scopeAddition: \"Install 4-zone multi-split system with individual temperature control per zone.\" },\n              { value: \"5-zone\", label: \"5 Zones\", priceModifier: 6500, scopeAddition: \"Install 5-zone multi-split system with individual temperature control per zone.\" }\n            ]\n          },\n          {\n            id: \"outdoor-capacity\",\n            label: \"Outdoor Unit Capacity\",\n            type: \"select\",\n            choices: [\n              { value: \"24k\", label: \"24,000 BTU (2 Ton)\", priceModifier: -500, scopeAddition: \"Install 24,000 BTU outdoor unit for smaller multi-zone applications.\" },\n              { value: \"36k\", label: \"36,000 BTU (3 Ton)\", priceModifier: 0, scopeAddition: \"Install 36,000 BTU outdoor unit for medium multi-zone applications.\" },\n              { value: \"48k\", label: \"48,000 BTU (4 Ton)\", priceModifier: 1000, scopeAddition: \"Install 48,000 BTU outdoor unit for larger multi-zone applications.\" },\n              { value: \"60k\", label: \"60,000 BTU (5 Ton)\", priceModifier: 2000, scopeAddition: \"Install 60,000 BTU outdoor unit for whole-house multi-zone applications.\" }\n            ]\n          },\n          {\n            id: \"efficiency\",\n            label: \"Efficiency Level\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (18 SEER)\", priceModifier: 0, scopeAddition: \"Install standard 18 SEER multi-zone system.\" },\n              { value: \"high\", label: \"High Efficiency (22 SEER)\", priceModifier: 1200, scopeAddition: \"Install high-efficiency 22 SEER multi-zone system.\" },\n              { value: \"ultra\", label: \"Ultra Efficiency (25+ SEER)\", priceModifier: 2500, scopeAddition: \"Install ultra-efficient 25+ SEER multi-zone system with inverter technology.\" }\n            ]\n          },\n          {\n            id: \"ceiling-cassettes\",\n            label: \"Ceiling Cassettes (per unit)\",\n            type: \"boolean\",\n            priceModifier: 1800,\n            scopeAddition: \"Upgrade indoor units to ceiling-recessed cassettes for discreet appearance.\"\n          },\n          {\n            id: \"wifi-control\",\n            label: \"Wi-Fi Control for All Zones\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install Wi-Fi adapters for smartphone control of all mini-split zones.\"\n          },\n          {\n            id: \"electrical-upgrade\",\n            label: \"New 50A Dedicated Circuit\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install new dedicated 50A circuit from panel to outdoor unit location.\"\n          }\n        ]\n      },\n      {\n        id: \"new-construction\",\n        name: \"New Construction â€“ Full HVAC Install\",\n        basePriceRange: { low: 15000, high: 35000 },\n        estimatedDays: { low: 3, high: 7 },\n        warranty: \"10-year parts warranty with registration. 2-year labor warranty on entire system.\",\n        exclusions: [\"Electrical panel (by electrician)\", \"Gas line to structure (by plumber)\", \"Insulation (by insulation contractor)\", \"Permits (general contractor responsibility)\"],\n        baseScope: [\n          \"Review building plans and perform Manual J load calculation.\",\n          \"Design duct layout per Manual D specifications.\",\n          \"Coordinate equipment location with general contractor.\",\n          \"Set furnace or air handler in designated mechanical space.\",\n          \"Install supply plenum and trunk line per design.\",\n          \"Install return plenum and return air duct system.\",\n          \"Run supply branch ducts to each room per plan.\",\n          \"Install register boots at all supply locations.\",\n          \"Install return air grilles and ductwork.\",\n          \"Seal all duct connections with mastic and/or tape per code.\",\n          \"Install outdoor condenser on pad at designated location.\",\n          \"Run refrigerant line set between indoor and outdoor units.\",\n          \"Braze all refrigerant connections with silver solder.\",\n          \"Pressure test refrigerant system to 500 PSI.\",\n          \"Vacuum system to 500 microns after pressure test.\",\n          \"Charge system with factory-specified refrigerant.\",\n          \"Connect gas line to furnace (if gas system) and test for leaks.\",\n          \"Install thermostat at owner-specified location.\",\n          \"Test heating and cooling operation.\",\n          \"Balance airflow to all registers.\",\n          \"Verify static pressure and system performance.\",\n          \"Register warranty with manufacturer.\",\n          \"Provide as-built drawings to general contractor.\",\n          \"Provide system documentation to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"tonnage\",\n            label: \"System Size (Tonnage)\",\n            type: \"select\",\n            choices: [\n              { value: \"2-ton\", label: \"2 Ton\", priceModifier: -3000, scopeAddition: \"Install 2-ton system for homes approximately 1000-1400 sq ft.\" },\n              { value: \"2.5-ton\", label: \"2.5 Ton\", priceModifier: -1500, scopeAddition: \"Install 2.5-ton system for homes approximately 1400-1800 sq ft.\" },\n              { value: \"3-ton\", label: \"3 Ton\", priceModifier: 0, scopeAddition: \"Install 3-ton system for homes approximately 1800-2200 sq ft.\" },\n              { value: \"3.5-ton\", label: \"3.5 Ton\", priceModifier: 1000, scopeAddition: \"Install 3.5-ton system for homes approximately 2200-2600 sq ft.\" },\n              { value: \"4-ton\", label: \"4 Ton\", priceModifier: 2000, scopeAddition: \"Install 4-ton system for homes approximately 2600-3000 sq ft.\" },\n              { value: \"5-ton\", label: \"5 Ton\", priceModifier: 3500, scopeAddition: \"Install 5-ton system for homes approximately 3000-3600 sq ft.\" }\n            ]\n          },\n          {\n            id: \"system-type\",\n            label: \"System Type\",\n            type: \"select\",\n            choices: [\n              { value: \"gas-split\", label: \"Gas Furnace + A/C Split\", priceModifier: 0, scopeAddition: \"Install gas furnace with matching A/C condenser (split system).\" },\n              { value: \"heat-pump\", label: \"Heat Pump System\", priceModifier: 1200, scopeAddition: \"Install heat pump system for all-electric heating and cooling.\" },\n              { value: \"dual-fuel\", label: \"Dual Fuel (Heat Pump + Gas Backup)\", priceModifier: 2500, scopeAddition: \"Install dual-fuel system with heat pump primary and gas furnace backup.\" }\n            ]\n          },\n          {\n            id: \"efficiency\",\n            label: \"Efficiency Level\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (14 SEER / 80% AFUE)\", priceModifier: 0, scopeAddition: \"Install standard efficiency equipment (14 SEER A/C, 80% AFUE furnace).\" },\n              { value: \"high\", label: \"High Efficiency (16 SEER / 95% AFUE)\", priceModifier: 3500, scopeAddition: \"Install high-efficiency equipment (16 SEER A/C, 95% AFUE furnace).\" },\n              { value: \"ultra\", label: \"Ultra Efficiency (18+ SEER / 98% AFUE)\", priceModifier: 7000, scopeAddition: \"Install ultra-efficient equipment (18+ SEER A/C, 98% AFUE modulating furnace).\" }\n            ]\n          },\n          {\n            id: \"duct-type\",\n            label: \"Duct Material\",\n            type: \"select\",\n            choices: [\n              { value: \"flex\", label: \"Flex Duct\", priceModifier: 0, scopeAddition: \"Install R-6 insulated flex duct for all supply runs.\" },\n              { value: \"metal\", label: \"Sheet Metal Duct\", priceModifier: 3500, scopeAddition: \"Install sheet metal ductwork with external insulation wrap.\" },\n              { value: \"combo\", label: \"Metal Trunk / Flex Branches\", priceModifier: 1500, scopeAddition: \"Install sheet metal trunk lines with flex duct branch runs.\" }\n            ]\n          },\n          {\n            id: \"zoning\",\n            label: \"Zoning System\",\n            type: \"boolean\",\n            priceModifier: 3500,\n            scopeAddition: \"Install 2-zone damper system with zone control panel and multiple thermostats.\"\n          },\n          {\n            id: \"smart-thermostat\",\n            label: \"Smart Thermostat\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install premium smart thermostat with room sensors and app control.\"\n          },\n          {\n            id: \"air-quality\",\n            label: \"Indoor Air Quality Package\",\n            type: \"boolean\",\n            priceModifier: 1800,\n            scopeAddition: \"Install whole-house air cleaner, UV light, and bypass humidifier.\"\n          }\n        ]\n      },\n      {\n        id: \"ductwork-repair\",\n        name: \"Ductwork Repair / Replacement Only\",\n        basePriceRange: { low: 1500, high: 8000 },\n        estimatedDays: { low: 1, high: 3 },\n        warranty: \"5-year warranty on duct installation. 2-year labor warranty.\",\n        exclusions: [\"HVAC equipment\", \"Thermostat replacement\", \"Insulation (unless specified)\", \"Permits (if required)\"],\n        baseScope: [\n          \"Inspect existing duct system for leaks, damage, and insulation condition.\",\n          \"Photograph and document existing conditions.\",\n          \"Disconnect and remove damaged or failed ductwork sections.\",\n          \"Properly dispose of old duct materials.\",\n          \"Install new ductwork per specifications.\",\n          \"Connect all supply and return runs to plenums.\",\n          \"Seal all connections with mastic and UL-listed tape.\",\n          \"Secure ductwork with proper hangers and straps per code.\",\n          \"Reinstall or install new registers and grilles.\",\n          \"Test system for proper airflow at each register.\",\n          \"Verify no air leaks with visual inspection.\",\n          \"Clean up all work areas and remove debris.\",\n          \"Provide before/after documentation to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"scope\",\n            label: \"Repair Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"repair\", label: \"Repair Specific Sections\", priceModifier: 0, scopeAddition: \"Repair or replace damaged duct sections as identified.\" },\n              { value: \"partial\", label: \"Partial Duct Replacement (50%)\", priceModifier: 2000, scopeAddition: \"Replace approximately 50% of existing duct system.\" },\n              { value: \"full\", label: \"Complete Duct Replacement\", priceModifier: 5000, scopeAddition: \"Remove and replace entire duct system with new materials.\" }\n            ]\n          },\n          {\n            id: \"material\",\n            label: \"Duct Material\",\n            type: \"select\",\n            choices: [\n              { value: \"flex\", label: \"Flex Duct (R-6 Insulated)\", priceModifier: 0, scopeAddition: \"Use R-6 insulated flex duct for all runs.\" },\n              { value: \"flex-r8\", label: \"Flex Duct (R-8 Insulated)\", priceModifier: 400, scopeAddition: \"Use R-8 insulated flex duct for improved efficiency.\" },\n              { value: \"metal\", label: \"Sheet Metal\", priceModifier: 2500, scopeAddition: \"Use sheet metal ductwork with external insulation.\" }\n            ]\n          },\n          {\n            id: \"duct-sealing\",\n            label: \"Aeroseal Duct Sealing\",\n            type: \"boolean\",\n            priceModifier: 1500,\n            scopeAddition: \"Apply Aeroseal technology to seal all duct leaks from inside the system.\"\n          },\n          {\n            id: \"insulation-wrap\",\n            label: \"Additional Duct Insulation\",\n            type: \"boolean\",\n            priceModifier: 600,\n            scopeAddition: \"Wrap accessible ducts with additional R-8 insulation blanket.\"\n          },\n          {\n            id: \"return-upgrade\",\n            label: \"Add Return Air Vent\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install additional return air vent to improve airflow balance.\"\n          },\n          {\n            id: \"registers\",\n            label: \"New Registers & Grilles\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Replace all supply registers and return grilles with new units.\"\n          }\n        ]\n      },\n      {\n        id: \"iaq-upgrades\",\n        name: \"Indoor Air Quality / Add-On Upgrades\",\n        basePriceRange: { low: 500, high: 4000 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Manufacturer warranty on equipment. 1-year labor warranty.\",\n        exclusions: [\"HVAC equipment replacement\", \"Ductwork modifications\", \"Electrical panel upgrade\"],\n        baseScope: [\n          \"Evaluate existing HVAC system compatibility.\",\n          \"Determine optimal location for IAQ equipment installation.\",\n          \"Turn off HVAC system and disconnect power.\",\n          \"Install selected air quality equipment per manufacturer specifications.\",\n          \"Make necessary electrical connections.\",\n          \"Connect to existing duct system or air handler as required.\",\n          \"Test equipment operation and verify proper function.\",\n          \"Demonstrate operation and maintenance to homeowner.\",\n          \"Provide warranty documentation and maintenance schedule.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"uv-light\",\n            label: \"UV-C Germicidal Light\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Install UV-C germicidal light in air handler to kill mold, bacteria, and viruses.\"\n          },\n          {\n            id: \"air-cleaner\",\n            label: \"Whole-House Air Cleaner\",\n            type: \"select\",\n            choices: [\n              { value: \"media\", label: \"Media Air Cleaner (MERV 11-13)\", priceModifier: 450, scopeAddition: \"Install 4\\\" or 5\\\" media air cleaner cabinet with MERV 11-13 filter.\" },\n              { value: \"electronic\", label: \"Electronic Air Cleaner\", priceModifier: 900, scopeAddition: \"Install electronic air cleaner for advanced particle removal.\" },\n              { value: \"hepa\", label: \"HEPA Bypass System\", priceModifier: 1800, scopeAddition: \"Install true HEPA bypass filtration system for medical-grade air cleaning.\" }\n            ]\n          },\n          {\n            id: \"humidifier\",\n            label: \"Whole-House Humidifier\",\n            type: \"select\",\n            choices: [\n              { value: \"bypass\", label: \"Bypass Humidifier\", priceModifier: 550, scopeAddition: \"Install bypass humidifier with manual humidistat.\" },\n              { value: \"powered\", label: \"Powered Flow-Through Humidifier\", priceModifier: 750, scopeAddition: \"Install powered flow-through humidifier with automatic humidistat.\" },\n              { value: \"steam\", label: \"Steam Humidifier\", priceModifier: 1500, scopeAddition: \"Install steam humidifier for precise humidity control.\" }\n            ]\n          },\n          {\n            id: \"dehumidifier\",\n            label: \"Whole-House Dehumidifier\",\n            type: \"boolean\",\n            priceModifier: 1800,\n            scopeAddition: \"Install whole-house dehumidifier integrated with HVAC system.\"\n          },\n          {\n            id: \"erv-hrv\",\n            label: \"Energy/Heat Recovery Ventilator\",\n            type: \"select\",\n            choices: [\n              { value: \"hrv\", label: \"Heat Recovery Ventilator (HRV)\", priceModifier: 2200, scopeAddition: \"Install HRV for balanced ventilation with heat recovery (cold climates).\" },\n              { value: \"erv\", label: \"Energy Recovery Ventilator (ERV)\", priceModifier: 2400, scopeAddition: \"Install ERV for balanced ventilation with heat and moisture recovery (humid climates).\" }\n            ]\n          },\n          {\n            id: \"ionizer\",\n            label: \"Bi-Polar Ionization System\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Install needlepoint bi-polar ionization system in ductwork.\"\n          }\n        ]\n      },\n      {\n        id: \"maintenance-tuneup\",\n        name: \"Maintenance / Tune-Up\",\n        basePriceRange: { low: 99, high: 299 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"30-day warranty on repairs performed. No warranty on diagnostics only.\",\n        exclusions: [\"Parts replacement (quoted separately)\", \"Refrigerant (if needed)\", \"Major repairs\"],\n        baseScope: [\n          \"Arrive on time and introduce scope of maintenance visit.\",\n          \"Inspect and replace air filter (standard filter included).\",\n          \"Inspect thermostat operation and calibration.\",\n          \"Check electrical connections and tighten as needed.\",\n          \"Measure voltage and amperage on all components.\",\n          \"Inspect and clean condenser coil (exterior).\",\n          \"Clear debris from around outdoor unit.\",\n          \"Check refrigerant pressure and note any concerns.\",\n          \"Inspect evaporator coil (if accessible).\",\n          \"Test condensate drain and clear if clogged.\",\n          \"Lubricate moving parts as needed.\",\n          \"Test heating and cooling operation.\",\n          \"Measure temperature differential (cooling or heating).\",\n          \"Inspect ductwork for visible issues.\",\n          \"Provide written report of findings and recommendations.\",\n          \"Answer homeowner questions about system condition.\"\n        ],\n        options: [\n          {\n            id: \"service-type\",\n            label: \"Service Type\",\n            type: \"select\",\n            choices: [\n              { value: \"cooling\", label: \"A/C Tune-Up Only\", priceModifier: 0, scopeAddition: \"Perform cooling system tune-up and inspection.\" },\n              { value: \"heating\", label: \"Heating Tune-Up Only\", priceModifier: 0, scopeAddition: \"Perform heating system tune-up and inspection.\" },\n              { value: \"both\", label: \"Complete HVAC Tune-Up\", priceModifier: 75, scopeAddition: \"Perform complete heating and cooling system tune-up.\" }\n            ]\n          },\n          {\n            id: \"coil-cleaning\",\n            label: \"Deep Condenser Coil Cleaning\",\n            type: \"boolean\",\n            priceModifier: 125,\n            scopeAddition: \"Perform chemical cleaning of condenser coil for improved efficiency.\"\n          },\n          {\n            id: \"evap-coil-cleaning\",\n            label: \"Evaporator Coil Cleaning\",\n            type: \"boolean\",\n            priceModifier: 175,\n            scopeAddition: \"Perform foam cleaning of evaporator coil (if accessible).\"\n          },\n          {\n            id: \"capacitor-check\",\n            label: \"Capacitor Test & Report\",\n            type: \"boolean\",\n            priceModifier: 0,\n            scopeAddition: \"Test run and start capacitors and provide readings in report.\"\n          },\n          {\n            id: \"refrigerant-check\",\n            label: \"Full Refrigerant Analysis\",\n            type: \"boolean\",\n            priceModifier: 50,\n            scopeAddition: \"Perform detailed refrigerant analysis with superheat/subcooling readings.\"\n          },\n          {\n            id: \"service-agreement\",\n            label: \"Annual Service Agreement\",\n            type: \"boolean\",\n            priceModifier: 149,\n            scopeAddition: \"Enroll in annual maintenance agreement for 2 visits per year with priority scheduling.\"\n          }\n        ]\n      },\n      {\n        id: \"service-diagnostic\",\n        name: \"Service Call / Diagnostic Only\",\n        basePriceRange: { low: 89, high: 150 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Diagnostic fee applied toward repair if work is approved.\",\n        exclusions: [\"Parts and materials\", \"Repairs (quoted separately)\", \"Refrigerant\"],\n        baseScope: [\n          \"Respond to service request within scheduled window.\",\n          \"Discuss reported symptoms with homeowner.\",\n          \"Perform visual inspection of entire HVAC system.\",\n          \"Check thermostat operation and settings.\",\n          \"Inspect electrical connections and components.\",\n          \"Measure voltage and amperage where applicable.\",\n          \"Check refrigerant pressures (if cooling issue).\",\n          \"Inspect condensate drainage.\",\n          \"Test ignition sequence (if heating issue).\",\n          \"Use diagnostic tools to identify fault.\",\n          \"Explain findings and diagnosis to homeowner.\",\n          \"Provide written estimate for recommended repairs.\",\n          \"Answer questions about repair options.\",\n          \"Apply diagnostic fee to repair if work is approved.\"\n        ],\n        options: [\n          {\n            id: \"urgency\",\n            label: \"Service Urgency\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard (Next Available)\", priceModifier: 0, scopeAddition: \"Schedule service during next available appointment window.\" },\n              { value: \"priority\", label: \"Priority (Same Day)\", priceModifier: 50, scopeAddition: \"Priority same-day service (subject to availability).\" },\n              { value: \"emergency\", label: \"Emergency (After Hours)\", priceModifier: 150, scopeAddition: \"Emergency after-hours service call (evenings/weekends).\" }\n            ]\n          },\n          {\n            id: \"system-type\",\n            label: \"System Being Diagnosed\",\n            type: \"select\",\n            choices: [\n              { value: \"cooling\", label: \"Cooling System (A/C)\", priceModifier: 0, scopeAddition: \"Diagnose air conditioning system issue.\" },\n              { value: \"heating\", label: \"Heating System (Furnace/Heat Pump)\", priceModifier: 0, scopeAddition: \"Diagnose heating system issue.\" },\n              { value: \"both\", label: \"Complete HVAC System\", priceModifier: 25, scopeAddition: \"Diagnose complete HVAC system for multiple issues.\" }\n            ]\n          },\n          {\n            id: \"minor-repair\",\n            label: \"Minor Repair Allowance\",\n            type: \"boolean\",\n            priceModifier: 100,\n            scopeAddition: \"Include up to $100 in minor repairs (fuses, resets, cleaning) if needed during visit.\"\n          },\n          {\n            id: \"second-opinion\",\n            label: \"Second Opinion Documentation\",\n            type: \"boolean\",\n            priceModifier: 25,\n            scopeAddition: \"Provide detailed written report with photos for second opinion purposes.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"landscaping\",\n    trade: \"Landscaping\",\n    jobTypes: [\n      {\n        id: \"full-yard-makeover\",\n        name: \"Full Yard Makeover â€“ Front & Back\",\n        basePriceRange: { low: 15000, high: 45000 },\n        estimatedDays: { low: 10, high: 25 },\n        warranty: \"1-year warranty on all plantings (with proper care). 2-year warranty on hardscape and irrigation workmanship.\",\n        exclusions: [\n          \"Permit fees and HOA approval\",\n          \"Tree removal over 24-inch diameter\",\n          \"Structural retaining walls over 4 feet\",\n          \"Underground utility relocation\",\n          \"Fence installation\"\n        ],\n        baseScope: [\n          \"Initial site consultation and design review with homeowner.\",\n          \"Call 811 for utility location prior to any excavation.\",\n          \"Remove existing plants, grass, and debris as specified in plan.\",\n          \"Grade and level yard for proper drainage away from structure.\",\n          \"Install landscape fabric in designated areas.\",\n          \"Prepare planting beds with soil amendment and compost.\",\n          \"Install all trees, shrubs, and perennials per landscape plan.\",\n          \"Install hardscape elements per design specifications.\",\n          \"Install irrigation system components as specified.\",\n          \"Apply mulch to all planting beds (3-inch depth).\",\n          \"Perform final grading and cleanup of all work areas.\",\n          \"Provide plant care guide and irrigation schedule to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"yard-area\",\n            label: \"Yard Area\",\n            type: \"select\",\n            choices: [\n              { value: \"front\", label: \"Front Yard Only\", priceModifier: -5000, scopeAddition: \"Limit work to front yard area only.\" },\n              { value: \"back\", label: \"Back Yard Only\", priceModifier: -4000, scopeAddition: \"Limit work to back yard area only.\" },\n              { value: \"side\", label: \"Side Yard Only\", priceModifier: -8000, scopeAddition: \"Limit work to side yard area only.\" },\n              { value: \"entire\", label: \"Entire Property\", priceModifier: 0, scopeAddition: \"Complete landscape makeover for entire property.\" }\n            ]\n          },\n          {\n            id: \"planting-scope\",\n            label: \"Planting Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-beds\", label: \"New Planting Beds\", priceModifier: 0, scopeAddition: \"Create new planting beds with fresh plantings and mulch.\" },\n              { value: \"refresh\", label: \"Refresh Existing Beds\", priceModifier: -500, scopeAddition: \"Refresh existing beds with new mulch and select replacement plants.\" },\n              { value: \"shrubs\", label: \"Shrubs Only\", priceModifier: 0, scopeAddition: \"Install shrubs only per landscape plan.\" },\n              { value: \"perennials\", label: \"Perennials & Color\", priceModifier: 500, scopeAddition: \"Install perennials and seasonal color plantings.\" },\n              { value: \"annuals\", label: \"Annual Flowers\", priceModifier: 300, scopeAddition: \"Install annual flowers for seasonal color.\" },\n              { value: \"small-trees\", label: \"Small Trees (under 15 ft)\", priceModifier: 800, scopeAddition: \"Install small ornamental trees (under 15 feet mature height).\" },\n              { value: \"large-trees\", label: \"Large Trees (over 15 ft)\", priceModifier: 2000, scopeAddition: \"Install large shade or specimen trees (over 15 feet mature height).\" }\n            ]\n          },\n          {\n            id: \"hardscape-scope\",\n            label: \"Hardscape Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"paver-patio\", label: \"Paver Patio\", priceModifier: 0, scopeAddition: \"Install paver patio with compacted base and polymeric sand joints.\" },\n              { value: \"concrete-patio\", label: \"Concrete Patio\", priceModifier: -500, scopeAddition: \"Pour concrete patio with proper slope and control joints.\" },\n              { value: \"overlay\", label: \"Paver Overlay\", priceModifier: -800, scopeAddition: \"Install thin pavers over existing concrete surface.\" },\n              { value: \"walkway\", label: \"Paver Walkway\", priceModifier: -1500, scopeAddition: \"Install paver walkway with compacted base.\" },\n              { value: \"stepping-stones\", label: \"Stepping Stones\", priceModifier: -2000, scopeAddition: \"Install stepping stone path with groundcover between stones.\" },\n              { value: \"gravel-path\", label: \"Gravel Path\", priceModifier: -2500, scopeAddition: \"Install gravel path with steel edging and landscape fabric.\" },\n              { value: \"fire-pit\", label: \"Fire Pit Area\", priceModifier: 2500, scopeAddition: \"Install fire pit with paver surround and seating area.\" }\n            ]\n          },\n          {\n            id: \"irrigation-scope\",\n            label: \"Irrigation Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-full\", label: \"New Full System\", priceModifier: 0, scopeAddition: \"Install complete new irrigation system with full coverage.\" },\n              { value: \"new-partial\", label: \"New Partial System\", priceModifier: -1500, scopeAddition: \"Install irrigation for select zones only.\" },\n              { value: \"add-zones\", label: \"Add Zones to Existing\", priceModifier: -2000, scopeAddition: \"Add new zones to existing irrigation system.\" },\n              { value: \"drip\", label: \"Drip Irrigation Only\", priceModifier: -2500, scopeAddition: \"Install drip irrigation in planting beds only.\" },\n              { value: \"smart-controller\", label: \"Smart Controller Upgrade\", priceModifier: 350, scopeAddition: \"Install WiFi-enabled smart irrigation controller with weather adjustment.\" }\n            ]\n          },\n          {\n            id: \"edging-type\",\n            label: \"Edging Type\",\n            type: \"select\",\n            choices: [\n              { value: \"steel\", label: \"Steel Edging\", priceModifier: 450, scopeAddition: \"Install steel landscape edging along all bed borders.\" },\n              { value: \"stone\", label: \"Natural Stone Edging\", priceModifier: 600, scopeAddition: \"Install natural stone edging along bed borders.\" },\n              { value: \"paver\", label: \"Paver Edging\", priceModifier: 500, scopeAddition: \"Install paver soldier course edging along beds.\" },\n              { value: \"plastic\", label: \"Plastic Edging\", priceModifier: 150, scopeAddition: \"Install plastic landscape edging along bed borders.\" },\n              { value: \"none\", label: \"No Edging\", priceModifier: 0, scopeAddition: \"No formal edging installed; natural bed edge maintained.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"front-yard-refresh\",\n        name: \"Front Yard Refresh Only\",\n        basePriceRange: { low: 5000, high: 15000 },\n        estimatedDays: { low: 3, high: 7 },\n        warranty: \"1-year warranty on all plantings (with proper care). 1-year warranty on hardscape workmanship.\",\n        exclusions: [\n          \"Back yard work\",\n          \"Major grading or drainage correction\",\n          \"Tree removal\",\n          \"Irrigation main line repair\"\n        ],\n        baseScope: [\n          \"Initial consultation and design review for front yard.\",\n          \"Remove dead or overgrown plants as specified.\",\n          \"Edge all existing beds and define borders.\",\n          \"Amend soil in planting areas with compost.\",\n          \"Install new plants per approved design.\",\n          \"Refresh mulch in all planting beds (3-inch depth).\",\n          \"Adjust irrigation heads and timing as needed.\",\n          \"Clean up all work areas and debris.\",\n          \"Provide plant care guide to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"planting-scope\",\n            label: \"Planting Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-beds\", label: \"New Planting Beds\", priceModifier: 0, scopeAddition: \"Create new planting beds with fresh plantings and mulch.\" },\n              { value: \"refresh\", label: \"Refresh Existing Beds\", priceModifier: -500, scopeAddition: \"Refresh existing beds with new mulch and select replacement plants.\" },\n              { value: \"shrubs\", label: \"Shrubs Only\", priceModifier: 0, scopeAddition: \"Install shrubs only per landscape plan.\" },\n              { value: \"perennials\", label: \"Perennials & Color\", priceModifier: 500, scopeAddition: \"Install perennials and seasonal color plantings.\" },\n              { value: \"annuals\", label: \"Annual Flowers\", priceModifier: 300, scopeAddition: \"Install annual flowers for seasonal color.\" },\n              { value: \"small-trees\", label: \"Small Trees (under 15 ft)\", priceModifier: 800, scopeAddition: \"Install small ornamental trees (under 15 feet mature height).\" },\n              { value: \"large-trees\", label: \"Large Trees (over 15 ft)\", priceModifier: 2000, scopeAddition: \"Install large shade or specimen trees (over 15 feet mature height).\" }\n            ]\n          },\n          {\n            id: \"hardscape-scope\",\n            label: \"Hardscape Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"paver-patio\", label: \"Paver Patio\", priceModifier: 0, scopeAddition: \"Install paver patio with compacted base and polymeric sand joints.\" },\n              { value: \"concrete-patio\", label: \"Concrete Patio\", priceModifier: -500, scopeAddition: \"Pour concrete patio with proper slope and control joints.\" },\n              { value: \"overlay\", label: \"Paver Overlay\", priceModifier: -800, scopeAddition: \"Install thin pavers over existing concrete surface.\" },\n              { value: \"walkway\", label: \"Paver Walkway\", priceModifier: -1500, scopeAddition: \"Install paver walkway with compacted base.\" },\n              { value: \"stepping-stones\", label: \"Stepping Stones\", priceModifier: -2000, scopeAddition: \"Install stepping stone path with groundcover between stones.\" },\n              { value: \"gravel-path\", label: \"Gravel Path\", priceModifier: -2500, scopeAddition: \"Install gravel path with steel edging and landscape fabric.\" },\n              { value: \"fire-pit\", label: \"Fire Pit Area\", priceModifier: 2500, scopeAddition: \"Install fire pit with paver surround and seating area.\" }\n            ]\n          },\n          {\n            id: \"irrigation-scope\",\n            label: \"Irrigation Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-full\", label: \"New Full System\", priceModifier: 0, scopeAddition: \"Install complete new irrigation system with full coverage.\" },\n              { value: \"new-partial\", label: \"New Partial System\", priceModifier: -1500, scopeAddition: \"Install irrigation for select zones only.\" },\n              { value: \"add-zones\", label: \"Add Zones to Existing\", priceModifier: -2000, scopeAddition: \"Add new zones to existing irrigation system.\" },\n              { value: \"drip\", label: \"Drip Irrigation Only\", priceModifier: -2500, scopeAddition: \"Install drip irrigation in planting beds only.\" },\n              { value: \"smart-controller\", label: \"Smart Controller Upgrade\", priceModifier: 350, scopeAddition: \"Install WiFi-enabled smart irrigation controller with weather adjustment.\" }\n            ]\n          },\n          {\n            id: \"edging-type\",\n            label: \"Edging Type\",\n            type: \"select\",\n            choices: [\n              { value: \"steel\", label: \"Steel Edging\", priceModifier: 450, scopeAddition: \"Install steel landscape edging along all bed borders.\" },\n              { value: \"stone\", label: \"Natural Stone Edging\", priceModifier: 600, scopeAddition: \"Install natural stone edging along bed borders.\" },\n              { value: \"paver\", label: \"Paver Edging\", priceModifier: 500, scopeAddition: \"Install paver soldier course edging along beds.\" },\n              { value: \"plastic\", label: \"Plastic Edging\", priceModifier: 150, scopeAddition: \"Install plastic landscape edging along bed borders.\" },\n              { value: \"none\", label: \"No Edging\", priceModifier: 0, scopeAddition: \"No formal edging installed; natural bed edge maintained.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"back-yard-refresh\",\n        name: \"Back Yard Refresh Only\",\n        basePriceRange: { low: 6000, high: 18000 },\n        estimatedDays: { low: 4, high: 10 },\n        warranty: \"1-year warranty on all plantings (with proper care). 1-year warranty on hardscape workmanship.\",\n        exclusions: [\n          \"Front yard work\",\n          \"Pool or spa installation\",\n          \"Major grading or retaining walls\",\n          \"Fence installation\"\n        ],\n        baseScope: [\n          \"Initial consultation and design review for back yard.\",\n          \"Remove dead or overgrown plants as specified.\",\n          \"Edge all existing beds and define borders.\",\n          \"Amend soil in planting areas with compost.\",\n          \"Install new plants per approved design.\",\n          \"Install or refresh hardscape elements as specified.\",\n          \"Refresh mulch in all planting beds (3-inch depth).\",\n          \"Adjust irrigation heads and timing as needed.\",\n          \"Clean up all work areas and debris.\",\n          \"Provide plant care guide to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"planting-scope\",\n            label: \"Planting Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-beds\", label: \"New Planting Beds\", priceModifier: 0, scopeAddition: \"Create new planting beds with fresh plantings and mulch.\" },\n              { value: \"refresh\", label: \"Refresh Existing Beds\", priceModifier: -500, scopeAddition: \"Refresh existing beds with new mulch and select replacement plants.\" },\n              { value: \"shrubs\", label: \"Shrubs Only\", priceModifier: 0, scopeAddition: \"Install shrubs only per landscape plan.\" },\n              { value: \"perennials\", label: \"Perennials & Color\", priceModifier: 500, scopeAddition: \"Install perennials and seasonal color plantings.\" },\n              { value: \"annuals\", label: \"Annual Flowers\", priceModifier: 300, scopeAddition: \"Install annual flowers for seasonal color.\" },\n              { value: \"small-trees\", label: \"Small Trees (under 15 ft)\", priceModifier: 800, scopeAddition: \"Install small ornamental trees (under 15 feet mature height).\" },\n              { value: \"large-trees\", label: \"Large Trees (over 15 ft)\", priceModifier: 2000, scopeAddition: \"Install large shade or specimen trees (over 15 feet mature height).\" }\n            ]\n          },\n          {\n            id: \"hardscape-scope\",\n            label: \"Hardscape Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"paver-patio\", label: \"Paver Patio\", priceModifier: 0, scopeAddition: \"Install paver patio with compacted base and polymeric sand joints.\" },\n              { value: \"concrete-patio\", label: \"Concrete Patio\", priceModifier: -500, scopeAddition: \"Pour concrete patio with proper slope and control joints.\" },\n              { value: \"overlay\", label: \"Paver Overlay\", priceModifier: -800, scopeAddition: \"Install thin pavers over existing concrete surface.\" },\n              { value: \"walkway\", label: \"Paver Walkway\", priceModifier: -1500, scopeAddition: \"Install paver walkway with compacted base.\" },\n              { value: \"stepping-stones\", label: \"Stepping Stones\", priceModifier: -2000, scopeAddition: \"Install stepping stone path with groundcover between stones.\" },\n              { value: \"gravel-path\", label: \"Gravel Path\", priceModifier: -2500, scopeAddition: \"Install gravel path with steel edging and landscape fabric.\" },\n              { value: \"fire-pit\", label: \"Fire Pit Area\", priceModifier: 2500, scopeAddition: \"Install fire pit with paver surround and seating area.\" }\n            ]\n          },\n          {\n            id: \"irrigation-scope\",\n            label: \"Irrigation Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-full\", label: \"New Full System\", priceModifier: 0, scopeAddition: \"Install complete new irrigation system with full coverage.\" },\n              { value: \"new-partial\", label: \"New Partial System\", priceModifier: -1500, scopeAddition: \"Install irrigation for select zones only.\" },\n              { value: \"add-zones\", label: \"Add Zones to Existing\", priceModifier: -2000, scopeAddition: \"Add new zones to existing irrigation system.\" },\n              { value: \"drip\", label: \"Drip Irrigation Only\", priceModifier: -2500, scopeAddition: \"Install drip irrigation in planting beds only.\" },\n              { value: \"smart-controller\", label: \"Smart Controller Upgrade\", priceModifier: 350, scopeAddition: \"Install WiFi-enabled smart irrigation controller with weather adjustment.\" }\n            ]\n          },\n          {\n            id: \"edging-type\",\n            label: \"Edging Type\",\n            type: \"select\",\n            choices: [\n              { value: \"steel\", label: \"Steel Edging\", priceModifier: 450, scopeAddition: \"Install steel landscape edging along all bed borders.\" },\n              { value: \"stone\", label: \"Natural Stone Edging\", priceModifier: 600, scopeAddition: \"Install natural stone edging along bed borders.\" },\n              { value: \"paver\", label: \"Paver Edging\", priceModifier: 500, scopeAddition: \"Install paver soldier course edging along beds.\" },\n              { value: \"plastic\", label: \"Plastic Edging\", priceModifier: 150, scopeAddition: \"Install plastic landscape edging along bed borders.\" },\n              { value: \"none\", label: \"No Edging\", priceModifier: 0, scopeAddition: \"No formal edging installed; natural bed edge maintained.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"new-construction\",\n        name: \"New Construction Landscape Install\",\n        basePriceRange: { low: 12000, high: 35000 },\n        estimatedDays: { low: 7, high: 15 },\n        warranty: \"1-year warranty on all plantings (with proper care). 2-year warranty on hardscape and irrigation workmanship.\",\n        exclusions: [\n          \"Builder cleanup or debris removal\",\n          \"Fence installation\",\n          \"Pool or water feature installation\",\n          \"Exterior lighting beyond landscape lights\"\n        ],\n        baseScope: [\n          \"Initial site consultation and design review.\",\n          \"Coordinate with builder on final grade and drainage.\",\n          \"Call 811 for utility location prior to excavation.\",\n          \"Install complete irrigation system per design.\",\n          \"Prepare and amend soil throughout planting areas.\",\n          \"Install sod in lawn areas per specifications.\",\n          \"Install all trees, shrubs, and perennials per plan.\",\n          \"Install hardscape elements (patio, walkway) as specified.\",\n          \"Apply mulch to all planting beds (3-inch depth).\",\n          \"Program irrigation controller and test all zones.\",\n          \"Final cleanup and debris removal from site.\",\n          \"Provide complete plant care guide and warranty documentation.\"\n        ],\n        options: [\n          {\n            id: \"yard-area\",\n            label: \"Yard Area\",\n            type: \"select\",\n            choices: [\n              { value: \"front\", label: \"Front Yard Only\", priceModifier: -5000, scopeAddition: \"Limit work to front yard area only.\" },\n              { value: \"back\", label: \"Back Yard Only\", priceModifier: -4000, scopeAddition: \"Limit work to back yard area only.\" },\n              { value: \"side\", label: \"Side Yard Only\", priceModifier: -8000, scopeAddition: \"Limit work to side yard area only.\" },\n              { value: \"entire\", label: \"Entire Property\", priceModifier: 0, scopeAddition: \"Complete landscape installation for entire property.\" }\n            ]\n          },\n          {\n            id: \"planting-scope\",\n            label: \"Planting Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-beds\", label: \"New Planting Beds\", priceModifier: 0, scopeAddition: \"Create new planting beds with fresh plantings and mulch.\" },\n              { value: \"refresh\", label: \"Refresh Existing Beds\", priceModifier: -500, scopeAddition: \"Refresh existing beds with new mulch and select replacement plants.\" },\n              { value: \"shrubs\", label: \"Shrubs Only\", priceModifier: 0, scopeAddition: \"Install shrubs only per landscape plan.\" },\n              { value: \"perennials\", label: \"Perennials & Color\", priceModifier: 500, scopeAddition: \"Install perennials and seasonal color plantings.\" },\n              { value: \"annuals\", label: \"Annual Flowers\", priceModifier: 300, scopeAddition: \"Install annual flowers for seasonal color.\" },\n              { value: \"small-trees\", label: \"Small Trees (under 15 ft)\", priceModifier: 800, scopeAddition: \"Install small ornamental trees (under 15 feet mature height).\" },\n              { value: \"large-trees\", label: \"Large Trees (over 15 ft)\", priceModifier: 2000, scopeAddition: \"Install large shade or specimen trees (over 15 feet mature height).\" }\n            ]\n          },\n          {\n            id: \"hardscape-scope\",\n            label: \"Hardscape Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"paver-patio\", label: \"Paver Patio\", priceModifier: 0, scopeAddition: \"Install paver patio with compacted base and polymeric sand joints.\" },\n              { value: \"concrete-patio\", label: \"Concrete Patio\", priceModifier: -500, scopeAddition: \"Pour concrete patio with proper slope and control joints.\" },\n              { value: \"overlay\", label: \"Paver Overlay\", priceModifier: -800, scopeAddition: \"Install thin pavers over existing concrete surface.\" },\n              { value: \"walkway\", label: \"Paver Walkway\", priceModifier: -1500, scopeAddition: \"Install paver walkway with compacted base.\" },\n              { value: \"stepping-stones\", label: \"Stepping Stones\", priceModifier: -2000, scopeAddition: \"Install stepping stone path with groundcover between stones.\" },\n              { value: \"gravel-path\", label: \"Gravel Path\", priceModifier: -2500, scopeAddition: \"Install gravel path with steel edging and landscape fabric.\" },\n              { value: \"fire-pit\", label: \"Fire Pit Area\", priceModifier: 2500, scopeAddition: \"Install fire pit with paver surround and seating area.\" }\n            ]\n          },\n          {\n            id: \"irrigation-scope\",\n            label: \"Irrigation Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-full\", label: \"New Full System\", priceModifier: 0, scopeAddition: \"Install complete new irrigation system with full coverage.\" },\n              { value: \"new-partial\", label: \"New Partial System\", priceModifier: -1500, scopeAddition: \"Install irrigation for select zones only.\" },\n              { value: \"add-zones\", label: \"Add Zones to Existing\", priceModifier: -2000, scopeAddition: \"Add new zones to existing irrigation system.\" },\n              { value: \"drip\", label: \"Drip Irrigation Only\", priceModifier: -2500, scopeAddition: \"Install drip irrigation in planting beds only.\" },\n              { value: \"smart-controller\", label: \"Smart Controller Upgrade\", priceModifier: 350, scopeAddition: \"Install WiFi-enabled smart irrigation controller with weather adjustment.\" }\n            ]\n          },\n          {\n            id: \"edging-type\",\n            label: \"Edging Type\",\n            type: \"select\",\n            choices: [\n              { value: \"steel\", label: \"Steel Edging\", priceModifier: 450, scopeAddition: \"Install steel landscape edging along all bed borders.\" },\n              { value: \"stone\", label: \"Natural Stone Edging\", priceModifier: 600, scopeAddition: \"Install natural stone edging along bed borders.\" },\n              { value: \"paver\", label: \"Paver Edging\", priceModifier: 500, scopeAddition: \"Install paver soldier course edging along beds.\" },\n              { value: \"plastic\", label: \"Plastic Edging\", priceModifier: 150, scopeAddition: \"Install plastic landscape edging along bed borders.\" },\n              { value: \"none\", label: \"No Edging\", priceModifier: 0, scopeAddition: \"No formal edging installed; natural bed edge maintained.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"sod-install\",\n        name: \"Sod Installation Only\",\n        basePriceRange: { low: 2500, high: 6000 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"30-day establishment warranty (with proper watering schedule followed).\",\n        exclusions: [\n          \"Irrigation system installation or repair\",\n          \"Major grading or drainage work\",\n          \"Tree or stump removal\",\n          \"Sprinkler head adjustment\"\n        ],\n        baseScope: [\n          \"Remove existing lawn or dead grass areas.\",\n          \"Grade and level soil for proper drainage.\",\n          \"Add topsoil as needed for proper sod depth (2-3 inches).\",\n          \"Apply starter fertilizer to prepared soil.\",\n          \"Install fresh sod in brick-lay pattern for stability.\",\n          \"Cut sod to fit around edges and obstacles.\",\n          \"Roll sod to ensure root contact with soil.\",\n          \"Water thoroughly immediately after installation.\",\n          \"Provide detailed watering schedule for establishment.\",\n          \"Clean up all debris and excess materials.\"\n        ],\n        options: [\n          {\n            id: \"sod-type\",\n            label: \"Sod Type\",\n            type: \"select\",\n            choices: [\n              { value: \"fescue\", label: \"Tall Fescue\", priceModifier: 0, scopeAddition: \"Install tall fescue sod suited for partial shade and cool seasons.\" },\n              { value: \"bermuda\", label: \"Bermuda Grass\", priceModifier: 200, scopeAddition: \"Install Bermuda grass sod for full sun areas and warm climates.\" },\n              { value: \"zoysia\", label: \"Zoysia Grass\", priceModifier: 800, scopeAddition: \"Install Zoysia grass sod for dense, drought-tolerant lawn.\" },\n              { value: \"st-augustine\", label: \"St. Augustine\", priceModifier: 600, scopeAddition: \"Install St. Augustine sod for warm coastal climates.\" }\n            ]\n          },\n          {\n            id: \"soil-amendment\",\n            label: \"Soil Amendment Package\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Add compost and soil conditioner for improved root establishment and drainage.\"\n          }\n        ]\n      },\n      {\n        id: \"planting-beds\",\n        name: \"Planting / Garden Beds Only\",\n        basePriceRange: { low: 1500, high: 8000 },\n        estimatedDays: { low: 1, high: 5 },\n        warranty: \"1-year plant replacement warranty (with proper care and watering).\",\n        exclusions: [\n          \"Irrigation installation\",\n          \"Hardscape construction\",\n          \"Tree removal or large tree planting\",\n          \"Lawn installation\"\n        ],\n        baseScope: [\n          \"Review site conditions: sun exposure, soil type, and drainage.\",\n          \"Remove existing plants as directed by homeowner.\",\n          \"Define bed borders and install edging as specified.\",\n          \"Amend soil in planting areas with compost and fertilizer.\",\n          \"Install shrubs at proper spacing for mature size.\",\n          \"Install perennials and groundcovers per design.\",\n          \"Apply mulch to all planting beds (3-inch depth).\",\n          \"Deep water all plants after installation.\",\n          \"Clean up all work areas and debris.\",\n          \"Provide plant identification and care guide.\"\n        ],\n        options: [\n          {\n            id: \"planting-scope\",\n            label: \"Planting Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-beds\", label: \"New Planting Beds\", priceModifier: 0, scopeAddition: \"Create new planting beds with fresh plantings and mulch.\" },\n              { value: \"refresh\", label: \"Refresh Existing Beds\", priceModifier: -500, scopeAddition: \"Refresh existing beds with new mulch and select replacement plants.\" },\n              { value: \"shrubs\", label: \"Shrubs Only\", priceModifier: 0, scopeAddition: \"Install shrubs only per landscape plan.\" },\n              { value: \"perennials\", label: \"Perennials & Color\", priceModifier: 500, scopeAddition: \"Install perennials and seasonal color plantings.\" },\n              { value: \"annuals\", label: \"Annual Flowers\", priceModifier: 300, scopeAddition: \"Install annual flowers for seasonal color.\" },\n              { value: \"small-trees\", label: \"Small Trees (under 15 ft)\", priceModifier: 800, scopeAddition: \"Install small ornamental trees (under 15 feet mature height).\" },\n              { value: \"large-trees\", label: \"Large Trees (over 15 ft)\", priceModifier: 2000, scopeAddition: \"Install large shade or specimen trees (over 15 feet mature height).\" }\n            ]\n          },\n          {\n            id: \"edging-type\",\n            label: \"Edging Type\",\n            type: \"select\",\n            choices: [\n              { value: \"steel\", label: \"Steel Edging\", priceModifier: 450, scopeAddition: \"Install steel landscape edging along all bed borders.\" },\n              { value: \"stone\", label: \"Natural Stone Edging\", priceModifier: 600, scopeAddition: \"Install natural stone edging along bed borders.\" },\n              { value: \"paver\", label: \"Paver Edging\", priceModifier: 500, scopeAddition: \"Install paver soldier course edging along beds.\" },\n              { value: \"plastic\", label: \"Plastic Edging\", priceModifier: 150, scopeAddition: \"Install plastic landscape edging along bed borders.\" },\n              { value: \"none\", label: \"No Edging\", priceModifier: 0, scopeAddition: \"No formal edging installed; natural bed edge maintained.\" }\n            ]\n          },\n          {\n            id: \"mulch-type\",\n            label: \"Mulch Type\",\n            type: \"select\",\n            choices: [\n              { value: \"hardwood\", label: \"Hardwood Mulch\", priceModifier: 0, scopeAddition: \"Apply double-shredded hardwood mulch to all beds.\" },\n              { value: \"pine\", label: \"Pine Bark Mulch\", priceModifier: 50, scopeAddition: \"Apply pine bark mulch to all beds.\" },\n              { value: \"cedar\", label: \"Cedar Mulch\", priceModifier: 150, scopeAddition: \"Apply cedar mulch to all beds for insect resistance.\" },\n              { value: \"rubber\", label: \"Rubber Mulch\", priceModifier: 300, scopeAddition: \"Apply rubber mulch to all beds for long-lasting coverage.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"tree-work\",\n        name: \"Tree Work â€“ Planting / Removal / Trimming\",\n        basePriceRange: { low: 400, high: 3500 },\n        estimatedDays: { low: 1, high: 3 },\n        warranty: \"1-year warranty on planted trees (with proper care). No warranty on removal or trimming.\",\n        exclusions: [\n          \"Trees over 50 feet tall\",\n          \"Hazardous tree removal near power lines\",\n          \"Stump grinding below grade level\",\n          \"Permit fees for protected tree species\"\n        ],\n        baseScope: [\n          \"Evaluate tree condition and discuss work scope with homeowner.\",\n          \"Set up safety barriers and protect surrounding landscaping.\",\n          \"Perform tree work as specified in service type.\",\n          \"Chip and remove all branches and debris from site.\",\n          \"Clean up all work areas thoroughly.\",\n          \"Provide care instructions for planted trees.\"\n        ],\n        options: [\n          {\n            id: \"tree-service\",\n            label: \"Tree Service Type\",\n            type: \"select\",\n            choices: [\n              { value: \"plant-small\", label: \"Plant Small Tree (under 8 ft)\", priceModifier: 0, scopeAddition: \"Plant small tree with proper root flare exposure, stake, and mulch ring.\" },\n              { value: \"plant-large\", label: \"Plant Large Tree (8-15 ft)\", priceModifier: 500, scopeAddition: \"Plant large tree with proper root flare, guy wires, and mulch ring.\" },\n              { value: \"removal\", label: \"Tree Removal\", priceModifier: 800, scopeAddition: \"Remove tree including trunk and major branches; leave stump at grade.\" },\n              { value: \"trim\", label: \"Tree Trimming / Pruning\", priceModifier: 0, scopeAddition: \"Trim and prune tree per ISA standards; remove deadwood and shape canopy.\" },\n              { value: \"stump-grinding\", label: \"Stump Grinding\", priceModifier: 200, scopeAddition: \"Grind stump to 6 inches below grade and backfill with soil.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"hardscape-patio\",\n        name: \"Hardscape â€“ Patio / Walkway\",\n        basePriceRange: { low: 4000, high: 15000 },\n        estimatedDays: { low: 3, high: 7 },\n        warranty: \"2-year warranty on workmanship. Paver manufacturer warranty applies to materials.\",\n        exclusions: [\n          \"Retaining walls over 2 feet\",\n          \"Major drainage correction\",\n          \"Covered structures or pergolas\",\n          \"Electrical or gas line installation\"\n        ],\n        baseScope: [\n          \"Call 811 for utility location prior to excavation.\",\n          \"Lay out patio or walkway area with stakes and string.\",\n          \"Excavate to proper depth for base material and pavers.\",\n          \"Compact subgrade and install geotextile fabric.\",\n          \"Install and compact crushed stone base (4-6 inches).\",\n          \"Install and screed sand setting bed (1 inch).\",\n          \"Install pavers in selected pattern with proper spacing.\",\n          \"Cut pavers at edges with wet saw for clean fit.\",\n          \"Install edge restraints to secure perimeter.\",\n          \"Apply polymeric sand and compact pavers.\",\n          \"Clean excess sand and seal if specified.\",\n          \"Final cleanup and debris removal.\"\n        ],\n        options: [\n          {\n            id: \"hardscape-type\",\n            label: \"Hardscape Type\",\n            type: \"select\",\n            choices: [\n              { value: \"paver-patio\", label: \"Paver Patio\", priceModifier: 0, scopeAddition: \"Install paver patio with compacted base and polymeric sand joints.\" },\n              { value: \"concrete-patio\", label: \"Concrete Patio\", priceModifier: -1000, scopeAddition: \"Pour concrete patio with proper slope, control joints, and broom finish.\" },\n              { value: \"overlay\", label: \"Paver Overlay on Concrete\", priceModifier: -500, scopeAddition: \"Install thin pavers over existing concrete surface with adhesive.\" },\n              { value: \"paver-walkway\", label: \"Paver Walkway\", priceModifier: -2000, scopeAddition: \"Install paver walkway (3-4 feet wide) with compacted base.\" },\n              { value: \"stepping-stones\", label: \"Stepping Stone Path\", priceModifier: -2500, scopeAddition: \"Install stepping stones in gravel or groundcover bed.\" },\n              { value: \"gravel-path\", label: \"Gravel Path\", priceModifier: -3000, scopeAddition: \"Install gravel path with steel edging and landscape fabric.\" }\n            ]\n          },\n          {\n            id: \"fire-pit\",\n            label: \"Add Fire Pit\",\n            type: \"boolean\",\n            priceModifier: 2500,\n            scopeAddition: \"Install built-in fire pit with paver or stone surround and fire ring.\"\n          },\n          {\n            id: \"seating-wall\",\n            label: \"Add Seating Wall\",\n            type: \"boolean\",\n            priceModifier: 3000,\n            scopeAddition: \"Build low seating wall (18-20 inches) with matching block and cap stones.\"\n          }\n        ]\n      },\n      {\n        id: \"hardscape-retaining\",\n        name: \"Hardscape â€“ Retaining Wall\",\n        basePriceRange: { low: 3500, high: 12000 },\n        estimatedDays: { low: 3, high: 6 },\n        warranty: \"2-year warranty on workmanship. Block manufacturer warranty applies to materials.\",\n        exclusions: [\n          \"Walls over 4 feet requiring engineering\",\n          \"Permit fees\",\n          \"Major excavation or fill material\",\n          \"Drainage system beyond wall base\"\n        ],\n        baseScope: [\n          \"Call 811 for utility location prior to excavation.\",\n          \"Stake and mark wall location and grade.\",\n          \"Excavate trench for base course below frost line.\",\n          \"Compact subgrade and install crushed stone base.\",\n          \"Set first course level and backfill with drainage gravel.\",\n          \"Install subsequent courses with proper setback.\",\n          \"Install geogrid reinforcement at specified intervals.\",\n          \"Backfill behind wall with drainage gravel as wall rises.\",\n          \"Install perforated drain pipe at base of wall.\",\n          \"Install cap stones with adhesive.\",\n          \"Backfill and compact soil behind wall.\",\n          \"Final grading and cleanup.\"\n        ],\n        options: [\n          {\n            id: \"wall-type\",\n            label: \"Wall Type\",\n            type: \"select\",\n            choices: [\n              { value: \"block\", label: \"Segmental Block Wall\", priceModifier: 0, scopeAddition: \"Build retaining wall using interlocking segmental block system.\" },\n              { value: \"timber\", label: \"Timber Wall\", priceModifier: -500, scopeAddition: \"Build retaining wall using pressure-treated landscape timbers.\" },\n              { value: \"stone\", label: \"Natural Stone Wall\", priceModifier: 1500, scopeAddition: \"Build retaining wall using natural stone (dry-stack or mortared).\" }\n            ]\n          },\n          {\n            id: \"wall-height\",\n            label: \"Wall Height\",\n            type: \"select\",\n            choices: [\n              { value: \"2ft\", label: \"Up to 2 Feet\", priceModifier: 0, scopeAddition: \"Build wall up to 2 feet in exposed height.\" },\n              { value: \"3ft\", label: \"Up to 3 Feet\", priceModifier: 800, scopeAddition: \"Build wall up to 3 feet in exposed height.\" },\n              { value: \"4ft\", label: \"Up to 4 Feet\", priceModifier: 1800, scopeAddition: \"Build wall up to 4 feet in exposed height (maximum without engineering).\" },\n              { value: \"6ft\", label: \"Up to 6 Feet (Engineered)\", priceModifier: 4000, scopeAddition: \"Build engineered wall up to 6 feet (permit and engineering required).\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"xeriscape\",\n        name: \"Gravel / Rock / Xeriscape Conversion\",\n        basePriceRange: { low: 3000, high: 10000 },\n        estimatedDays: { low: 2, high: 5 },\n        warranty: \"1-year warranty on installed plants. No warranty on rock or gravel materials.\",\n        exclusions: [\n          \"Irrigation removal or modification\",\n          \"Major grading\",\n          \"Fence or hardscape installation\",\n          \"Tree removal\"\n        ],\n        baseScope: [\n          \"Remove existing lawn, plants, and debris as specified.\",\n          \"Grade area for proper drainage away from structures.\",\n          \"Install professional-grade weed barrier fabric.\",\n          \"Install steel or aluminum edging at all borders.\",\n          \"Spread and level rock or gravel material (2-3 inch depth).\",\n          \"Install drought-tolerant plants per design.\",\n          \"Install decorative boulders or accent stones as specified.\",\n          \"Clean up all work areas and debris.\",\n          \"Provide care guide for drought-tolerant plants.\"\n        ],\n        options: [\n          {\n            id: \"cover-type\",\n            label: \"Ground Cover Type\",\n            type: \"select\",\n            choices: [\n              { value: \"gravel\", label: \"Pea Gravel\", priceModifier: 0, scopeAddition: \"Install pea gravel ground cover in specified areas.\" },\n              { value: \"river-rock\", label: \"River Rock\", priceModifier: 300, scopeAddition: \"Install river rock ground cover (1-3 inch size).\" },\n              { value: \"decomposed-granite\", label: \"Decomposed Granite\", priceModifier: 200, scopeAddition: \"Install decomposed granite ground cover (compacts for firmer surface).\" },\n              { value: \"lava-rock\", label: \"Lava Rock\", priceModifier: 250, scopeAddition: \"Install lava rock ground cover for distinctive appearance.\" }\n            ]\n          },\n          {\n            id: \"weed-barrier\",\n            label: \"Premium Weed Barrier\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Upgrade to commercial-grade woven weed barrier with 20-year rating.\"\n          },\n          {\n            id: \"boulder-accents\",\n            label: \"Boulder Accents\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Install decorative boulders (3-5 stones) as focal points in landscape.\"\n          }\n        ]\n      },\n      {\n        id: \"drainage\",\n        name: \"Drainage Correction Only\",\n        basePriceRange: { low: 2000, high: 8000 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"2-year warranty on drainage workmanship.\",\n        exclusions: [\n          \"Foundation repair\",\n          \"Sump pump electrical work\",\n          \"Landscape restoration beyond trench repair\",\n          \"Gutter or downspout work\"\n        ],\n        baseScope: [\n          \"Evaluate property drainage patterns and identify problem areas.\",\n          \"Call 811 for utility location prior to excavation.\",\n          \"Excavate trenches with proper slope toward outlet.\",\n          \"Install drainage solution per specifications.\",\n          \"Backfill trenches and compact soil.\",\n          \"Restore disturbed lawn areas with seed or sod.\",\n          \"Test drainage system with water flow.\",\n          \"Clean up all work areas and debris.\"\n        ],\n        options: [\n          {\n            id: \"drainage-type\",\n            label: \"Drainage Type\",\n            type: \"select\",\n            choices: [\n              { value: \"french-drain\", label: \"French Drain\", priceModifier: 0, scopeAddition: \"Install French drain with perforated pipe, gravel, and filter fabric.\" },\n              { value: \"channel-drain\", label: \"Channel Drain\", priceModifier: 500, scopeAddition: \"Install surface channel drain with grate for patio or driveway drainage.\" },\n              { value: \"dry-creek\", label: \"Dry Creek Bed\", priceModifier: 800, scopeAddition: \"Install decorative dry creek bed with river rock and landscape fabric.\" },\n              { value: \"sump-pump\", label: \"Sump Pump Basin\", priceModifier: 1200, scopeAddition: \"Install sump pump basin with pump and discharge line (electrical by others).\" },\n              { value: \"grading\", label: \"Regrading Only\", priceModifier: -500, scopeAddition: \"Regrade soil to correct drainage slope away from foundation.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"irrigation-install\",\n        name: \"Irrigation System Install / Upgrade\",\n        basePriceRange: { low: 3500, high: 9000 },\n        estimatedDays: { low: 2, high: 5 },\n        warranty: \"2-year warranty on workmanship. Manufacturer warranty on components.\",\n        exclusions: [\n          \"Backflow preventer permit (if required)\",\n          \"Water meter upgrade\",\n          \"Trenching through concrete or asphalt\",\n          \"Smart home integration beyond controller\"\n        ],\n        baseScope: [\n          \"Design irrigation layout based on plant water needs and sun exposure.\",\n          \"Call 811 for utility location prior to trenching.\",\n          \"Connect to existing water supply with backflow preventer.\",\n          \"Trench and install main line and lateral lines.\",\n          \"Install zone valves in valve box(es).\",\n          \"Install sprinkler heads and drip emitters per zone.\",\n          \"Install irrigation controller at designated location.\",\n          \"Program controller with appropriate watering schedule.\",\n          \"Test all zones and adjust head coverage.\",\n          \"Backfill trenches and restore lawn areas.\",\n          \"Demonstrate system operation to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"irrigation-scope\",\n            label: \"Irrigation Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"new-full\", label: \"New Full System\", priceModifier: 0, scopeAddition: \"Install complete new irrigation system with full property coverage.\" },\n              { value: \"new-partial\", label: \"New Partial System\", priceModifier: -1500, scopeAddition: \"Install irrigation for front yard or back yard only.\" },\n              { value: \"add-zones\", label: \"Add Zones to Existing\", priceModifier: -2000, scopeAddition: \"Add new zones to existing irrigation system.\" },\n              { value: \"drip-conversion\", label: \"Drip Conversion\", priceModifier: -2500, scopeAddition: \"Convert existing spray zones to drip irrigation for water savings.\" },\n              { value: \"controller-standard\", label: \"Controller Upgrade (Standard)\", priceModifier: -2800, scopeAddition: \"Replace existing controller with new standard multi-zone controller.\" },\n              { value: \"controller-smart\", label: \"Controller Upgrade (Smart)\", priceModifier: -2500, scopeAddition: \"Replace existing controller with WiFi-enabled smart controller.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"irrigation-repair\",\n        name: \"Irrigation Repair Only\",\n        basePriceRange: { low: 150, high: 600 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"90-day warranty on repairs.\",\n        exclusions: [\n          \"Major line breaks requiring excavation\",\n          \"Backflow preventer replacement\",\n          \"Full system winterization\",\n          \"Well pump issues\"\n        ],\n        baseScope: [\n          \"Diagnose irrigation system issue.\",\n          \"Turn off water supply to system.\",\n          \"Perform repair as specified.\",\n          \"Test repaired zone for proper operation.\",\n          \"Adjust head spray pattern and coverage as needed.\",\n          \"Turn system back on and verify all zones.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"repair-type\",\n            label: \"Repair Type\",\n            type: \"select\",\n            choices: [\n              { value: \"heads\", label: \"Replace Sprinkler Heads\", priceModifier: 0, scopeAddition: \"Replace broken or clogged sprinkler heads (up to 5 heads).\" },\n              { value: \"valves\", label: \"Repair Zone Valve\", priceModifier: 75, scopeAddition: \"Repair or replace malfunctioning zone valve.\" },\n              { value: \"pipes\", label: \"Repair Pipe Break\", priceModifier: 100, scopeAddition: \"Locate and repair pipe break with compression fitting.\" },\n              { value: \"controller\", label: \"Controller Troubleshoot\", priceModifier: 50, scopeAddition: \"Troubleshoot and repair controller programming or wiring issue.\" },\n              { value: \"winterize\", label: \"Winterization\", priceModifier: 75, scopeAddition: \"Blow out irrigation lines with compressed air for winter.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"fence-new\",\n        name: \"Fence Install â€“ New\",\n        basePriceRange: { low: 4500, high: 12000 },\n        estimatedDays: { low: 2, high: 5 },\n        warranty: \"1-year warranty on workmanship. Material warranties vary by fence type.\",\n        exclusions: [\n          \"Permit fees\",\n          \"Survey if property lines disputed\",\n          \"Rock drilling for post holes\",\n          \"Gate automation or smart locks\"\n        ],\n        baseScope: [\n          \"Call 811 for utility location prior to digging.\",\n          \"Lay out fence line per property survey or agreement.\",\n          \"Set corner and end posts in concrete footings (24-inch depth).\",\n          \"Set line posts at proper spacing in concrete.\",\n          \"Allow concrete to cure minimum 24 hours.\",\n          \"Install horizontal rails between posts.\",\n          \"Attach fence panels or pickets with exterior-grade fasteners.\",\n          \"Install post caps on all posts.\",\n          \"Build and hang gate(s) with appropriate hardware.\",\n          \"Install gate latch and self-closing hinges.\",\n          \"Clean up all debris and excess materials.\",\n          \"Final walkthrough and gate adjustment.\"\n        ],\n        options: [\n          {\n            id: \"fence-type\",\n            label: \"Fence Type\",\n            type: \"select\",\n            choices: [\n              { value: \"wood-standard\", label: \"Wood â€“ Standard Privacy\", priceModifier: 0, scopeAddition: \"Install standard wood privacy fence with dog-ear pickets.\" },\n              { value: \"wood-board-on-board\", label: \"Wood â€“ Board on Board\", priceModifier: 800, scopeAddition: \"Install board-on-board wood fence for full privacy from both sides.\" },\n              { value: \"horizontal-wood\", label: \"Wood â€“ Horizontal Slat\", priceModifier: 1200, scopeAddition: \"Install modern horizontal slat wood fence.\" },\n              { value: \"wrought-iron\", label: \"Wrought Iron\", priceModifier: 3000, scopeAddition: \"Install ornamental wrought iron fence with decorative elements.\" },\n              { value: \"vinyl\", label: \"Vinyl Privacy\", priceModifier: 1500, scopeAddition: \"Install vinyl privacy fence panels (maintenance-free).\" },\n              { value: \"chain-link\", label: \"Chain Link\", priceModifier: -2000, scopeAddition: \"Install galvanized chain link fence with top rail.\" },\n              { value: \"ranch\", label: \"Ranch / Split Rail\", priceModifier: -1000, scopeAddition: \"Install split rail or ranch-style fence (not privacy).\" },\n              { value: \"composite\", label: \"Composite\", priceModifier: 2500, scopeAddition: \"Install composite fence panels (wood-look, low maintenance).\" },\n              { value: \"masonry\", label: \"Masonry / Brick Columns\", priceModifier: 5000, scopeAddition: \"Install masonry columns with fence panels between.\" }\n            ]\n          },\n          {\n            id: \"fence-height\",\n            label: \"Fence Height\",\n            type: \"select\",\n            choices: [\n              { value: \"4ft\", label: \"4 Feet\", priceModifier: -500, scopeAddition: \"Install 4-foot tall fence.\" },\n              { value: \"6ft\", label: \"6 Feet\", priceModifier: 0, scopeAddition: \"Install standard 6-foot tall fence.\" },\n              { value: \"8ft\", label: \"8 Feet\", priceModifier: 1500, scopeAddition: \"Install 8-foot tall fence for maximum privacy.\" }\n            ]\n          },\n          {\n            id: \"gate-options\",\n            label: \"Gate Options\",\n            type: \"select\",\n            choices: [\n              { value: \"none\", label: \"No Gate\", priceModifier: 0, scopeAddition: \"No gate included in fence installation.\" },\n              { value: \"walk-gate\", label: \"Single Walk Gate\", priceModifier: 350, scopeAddition: \"Install single walk gate (3-4 feet wide) with latch and hinges.\" },\n              { value: \"double-gate\", label: \"Double Drive Gate\", priceModifier: 750, scopeAddition: \"Install double drive gate (6-8 feet wide) for vehicle access.\" },\n              { value: \"both\", label: \"Walk Gate + Double Gate\", priceModifier: 1000, scopeAddition: \"Install both walk gate and double drive gate.\" }\n            ]\n          },\n          {\n            id: \"finish\",\n            label: \"Finish Option\",\n            type: \"select\",\n            choices: [\n              { value: \"none\", label: \"No Finish (Natural)\", priceModifier: 0, scopeAddition: \"Leave fence natural or as-manufactured.\" },\n              { value: \"stain-seal\", label: \"Stain & Seal\", priceModifier: 800, scopeAddition: \"Apply exterior stain and sealer to entire fence.\" },\n              { value: \"paint\", label: \"Paint\", priceModifier: 1000, scopeAddition: \"Prime and paint entire fence (2 coats).\" }\n            ]\n          },\n          {\n            id: \"decorative-top\",\n            label: \"Decorative Top Rail\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Add decorative lattice or trim top to fence for enhanced appearance.\"\n          }\n        ]\n      },\n      {\n        id: \"fence-replace\",\n        name: \"Fence Replacement\",\n        basePriceRange: { low: 4000, high: 10000 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"1-year warranty on workmanship. Material warranties vary by fence type.\",\n        exclusions: [\n          \"Permit fees\",\n          \"Survey if property lines disputed\",\n          \"Rock drilling for post holes\",\n          \"Gate automation\"\n        ],\n        baseScope: [\n          \"Remove existing fence panels, posts, and concrete footings.\",\n          \"Dispose of all old fence materials off-site.\",\n          \"Call 811 for utility location if new post locations needed.\",\n          \"Set new posts in concrete footings at proper spacing.\",\n          \"Allow concrete to cure minimum 24 hours.\",\n          \"Install horizontal rails between posts.\",\n          \"Attach fence panels or pickets with exterior-grade fasteners.\",\n          \"Install post caps on all posts.\",\n          \"Build and hang gate(s) with appropriate hardware.\",\n          \"Clean up all debris and excess materials.\",\n          \"Final walkthrough and adjustment.\"\n        ],\n        options: [\n          {\n            id: \"fence-type\",\n            label: \"Fence Type\",\n            type: \"select\",\n            choices: [\n              { value: \"wood-standard\", label: \"Wood â€“ Standard Privacy\", priceModifier: 0, scopeAddition: \"Install standard wood privacy fence with dog-ear pickets.\" },\n              { value: \"wood-board-on-board\", label: \"Wood â€“ Board on Board\", priceModifier: 800, scopeAddition: \"Install board-on-board wood fence for full privacy from both sides.\" },\n              { value: \"horizontal-wood\", label: \"Wood â€“ Horizontal Slat\", priceModifier: 1200, scopeAddition: \"Install modern horizontal slat wood fence.\" },\n              { value: \"wrought-iron\", label: \"Wrought Iron\", priceModifier: 3000, scopeAddition: \"Install ornamental wrought iron fence with decorative elements.\" },\n              { value: \"vinyl\", label: \"Vinyl Privacy\", priceModifier: 1500, scopeAddition: \"Install vinyl privacy fence panels (maintenance-free).\" },\n              { value: \"chain-link\", label: \"Chain Link\", priceModifier: -2000, scopeAddition: \"Install galvanized chain link fence with top rail.\" },\n              { value: \"ranch\", label: \"Ranch / Split Rail\", priceModifier: -1000, scopeAddition: \"Install split rail or ranch-style fence (not privacy).\" },\n              { value: \"composite\", label: \"Composite\", priceModifier: 2500, scopeAddition: \"Install composite fence panels (wood-look, low maintenance).\" },\n              { value: \"masonry\", label: \"Masonry / Brick Columns\", priceModifier: 5000, scopeAddition: \"Install masonry columns with fence panels between.\" }\n            ]\n          },\n          {\n            id: \"fence-height\",\n            label: \"Fence Height\",\n            type: \"select\",\n            choices: [\n              { value: \"4ft\", label: \"4 Feet\", priceModifier: -500, scopeAddition: \"Install 4-foot tall fence.\" },\n              { value: \"6ft\", label: \"6 Feet\", priceModifier: 0, scopeAddition: \"Install standard 6-foot tall fence.\" },\n              { value: \"8ft\", label: \"8 Feet\", priceModifier: 1500, scopeAddition: \"Install 8-foot tall fence for maximum privacy.\" }\n            ]\n          },\n          {\n            id: \"removal-haul\",\n            label: \"Old Fence Removal & Haul\",\n            type: \"boolean\",\n            priceModifier: 0,\n            scopeAddition: \"Remove and haul away all existing fence materials (included in base price).\"\n          },\n          {\n            id: \"gate-options\",\n            label: \"Gate Options\",\n            type: \"select\",\n            choices: [\n              { value: \"none\", label: \"No Gate\", priceModifier: 0, scopeAddition: \"No gate included in fence installation.\" },\n              { value: \"walk-gate\", label: \"Single Walk Gate\", priceModifier: 350, scopeAddition: \"Install single walk gate (3-4 feet wide) with latch and hinges.\" },\n              { value: \"double-gate\", label: \"Double Drive Gate\", priceModifier: 750, scopeAddition: \"Install double drive gate (6-8 feet wide) for vehicle access.\" },\n              { value: \"both\", label: \"Walk Gate + Double Gate\", priceModifier: 1000, scopeAddition: \"Install both walk gate and double drive gate.\" }\n            ]\n          },\n          {\n            id: \"finish\",\n            label: \"Finish Option\",\n            type: \"select\",\n            choices: [\n              { value: \"none\", label: \"No Finish (Natural)\", priceModifier: 0, scopeAddition: \"Leave fence natural or as-manufactured.\" },\n              { value: \"stain-seal\", label: \"Stain & Seal\", priceModifier: 800, scopeAddition: \"Apply exterior stain and sealer to entire fence.\" },\n              { value: \"paint\", label: \"Paint\", priceModifier: 1000, scopeAddition: \"Prime and paint entire fence (2 coats).\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"fence-repair\",\n        name: \"Fence Repair Only\",\n        basePriceRange: { low: 300, high: 1500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"90-day warranty on repairs.\",\n        exclusions: [\n          \"Full fence replacement\",\n          \"Storm damage requiring insurance claim\",\n          \"Gate automation\",\n          \"Painting or staining entire fence\"\n        ],\n        baseScope: [\n          \"Evaluate fence damage and determine repair scope.\",\n          \"Remove damaged posts, panels, or sections as needed.\",\n          \"Set replacement posts in concrete if required.\",\n          \"Install replacement rails or pickets to match existing.\",\n          \"Secure all components with exterior-grade fasteners.\",\n          \"Adjust gate operation if affected.\",\n          \"Clean up all debris.\",\n          \"Apply finish to repaired sections if specified.\"\n        ],\n        options: [\n          {\n            id: \"repair-scope\",\n            label: \"Repair Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"posts-only\", label: \"Post Repair/Replace\", priceModifier: 0, scopeAddition: \"Replace damaged or rotted fence posts (up to 3 posts).\" },\n              { value: \"panels-only\", label: \"Panel/Picket Repair\", priceModifier: -100, scopeAddition: \"Replace damaged fence panels or pickets (up to 2 sections).\" },\n              { value: \"section\", label: \"Section Replacement\", priceModifier: 200, scopeAddition: \"Replace complete fence section including posts, rails, and pickets.\" },\n              { value: \"gate-repair\", label: \"Gate Repair\", priceModifier: 50, scopeAddition: \"Repair gate sag, latch, or hinge issues.\" }\n            ]\n          },\n          {\n            id: \"finish\",\n            label: \"Finish Option\",\n            type: \"select\",\n            choices: [\n              { value: \"none\", label: \"No Finish\", priceModifier: 0, scopeAddition: \"Leave repairs unfinished to weather naturally.\" },\n              { value: \"stain-seal\", label: \"Stain & Seal Repairs\", priceModifier: 150, scopeAddition: \"Apply stain and sealer to repaired sections only.\" },\n              { value: \"paint\", label: \"Paint Repairs\", priceModifier: 200, scopeAddition: \"Prime and paint repaired sections to match existing.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"gate-install\",\n        name: \"Gate Install / Replacement\",\n        basePriceRange: { low: 500, high: 2500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"1-year warranty on gate installation and hardware.\",\n        exclusions: [\n          \"Fence modification beyond gate opening\",\n          \"Gate automation or electric openers\",\n          \"Masonry or brick column work\",\n          \"Permit fees\"\n        ],\n        baseScope: [\n          \"Evaluate existing fence and gate opening.\",\n          \"Remove old gate and hardware if replacing.\",\n          \"Reinforce or replace gate posts if needed.\",\n          \"Build or install new gate to fit opening.\",\n          \"Install heavy-duty hinges rated for gate size.\",\n          \"Install latch and any additional hardware.\",\n          \"Adjust gate for proper swing and clearance.\",\n          \"Test gate operation and make final adjustments.\"\n        ],\n        options: [\n          {\n            id: \"gate-type\",\n            label: \"Gate Type\",\n            type: \"select\",\n            choices: [\n              { value: \"walk-gate\", label: \"Walk Gate (3-4 ft)\", priceModifier: 0, scopeAddition: \"Install single walk gate for pedestrian access.\" },\n              { value: \"double-drive\", label: \"Double Drive Gate (6-8 ft)\", priceModifier: 600, scopeAddition: \"Install double drive gate for vehicle or equipment access.\" },\n              { value: \"automatic\", label: \"Automatic Swing Gate\", priceModifier: 1500, scopeAddition: \"Install automatic swing gate with electric opener and remote.\" }\n            ]\n          },\n          {\n            id: \"gate-material\",\n            label: \"Gate Material\",\n            type: \"select\",\n            choices: [\n              { value: \"match-existing\", label: \"Match Existing Fence\", priceModifier: 0, scopeAddition: \"Build gate to match existing fence material and style.\" },\n              { value: \"wood\", label: \"Wood\", priceModifier: 0, scopeAddition: \"Build wood gate with steel frame for durability.\" },\n              { value: \"iron\", label: \"Wrought Iron\", priceModifier: 500, scopeAddition: \"Install decorative wrought iron gate.\" },\n              { value: \"vinyl\", label: \"Vinyl\", priceModifier: 200, scopeAddition: \"Install vinyl gate to match vinyl fence.\" }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"yard-cleanup\",\n        name: \"One-Time Yard Cleanup\",\n        basePriceRange: { low: 350, high: 1200 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"No warranty on cleanup services.\",\n        exclusions: [\n          \"Tree removal or major trimming\",\n          \"Fence repair\",\n          \"Irrigation work\",\n          \"Ongoing maintenance\"\n        ],\n        baseScope: [\n          \"Clear all leaves and debris from lawn and beds.\",\n          \"Edge all bed borders and sidewalks.\",\n          \"Prune overgrown shrubs (light trimming only).\",\n          \"Remove dead plants and spent annuals.\",\n          \"Weed all planting beds.\",\n          \"Rake and level lawn areas.\",\n          \"Blow off all hard surfaces.\",\n          \"Haul away all debris (if included).\"\n        ],\n        options: [\n          {\n            id: \"cleanup-scope\",\n            label: \"Cleanup Scope\",\n            type: \"select\",\n            choices: [\n              { value: \"basic\", label: \"Basic Cleanup\", priceModifier: 0, scopeAddition: \"Basic cleanup: mow, edge, blow, and light weeding.\" },\n              { value: \"full\", label: \"Full Cleanup\", priceModifier: 300, scopeAddition: \"Full cleanup: mow, edge, blow, prune shrubs, weed all beds, and mulch touch-up.\" },\n              { value: \"heavy-brush\", label: \"Heavy Brush Clearing\", priceModifier: 500, scopeAddition: \"Heavy cleanup: clear overgrown brush, vines, and accumulated debris.\" }\n            ]\n          },\n          {\n            id: \"debris-haul\",\n            label: \"Debris Haul-Away\",\n            type: \"boolean\",\n            priceModifier: 0,\n            scopeAddition: \"Haul away all debris from cleanup (included in base price).\"\n          }\n        ]\n      },\n      {\n        id: \"maintenance\",\n        name: \"Recurring Maintenance (Mowing / Beds)\",\n        basePriceRange: { low: 150, high: 400 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Satisfaction guaranteed on each visit.\",\n        exclusions: [\n          \"Major pruning or tree work\",\n          \"Irrigation repairs\",\n          \"Pest or disease treatment\",\n          \"Seasonal plantings\"\n        ],\n        baseScope: [\n          \"Mow lawn at appropriate height for grass type.\",\n          \"Edge along sidewalks, driveways, and beds.\",\n          \"String trim around obstacles and fence lines.\",\n          \"Blow clippings off all hard surfaces.\",\n          \"Spot-weed visible weeds in beds (service level dependent).\",\n          \"Check for obvious issues and report to homeowner.\"\n        ],\n        options: [\n          {\n            id: \"service-level\",\n            label: \"Service Level\",\n            type: \"select\",\n            choices: [\n              { value: \"basic-mowing\", label: \"Basic Mowing Only\", priceModifier: 0, scopeAddition: \"Mow, edge, string trim, and blow; beds not included.\" },\n              { value: \"mowing-beds\", label: \"Mowing + Bed Care\", priceModifier: 100, scopeAddition: \"Mow, edge, trim, blow, plus weed beds and refresh mulch as needed.\" },\n              { value: \"full-service\", label: \"Full Service\", priceModifier: 200, scopeAddition: \"Complete lawn and bed care: mow, edge, trim, blow, weed, prune shrubs, and seasonal fertilization.\" }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"windows-doors\",\n    trade: \"Windows & Doors\",\n    jobTypes: [\n      {\n        id: \"window-replacement\",\n        name: \"Window Replacement\",\n        basePriceRange: { low: 450, high: 1200 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Window warranty per manufacturer (20-lifetime). 2-year labor warranty.\",\n        exclusions: [\"Structural modifications\", \"Siding repair beyond trim\", \"Interior casing replacement\"],\n        baseScope: [\n          \"Remove existing window sash and frame (insert method).\",\n          \"Inspect rough opening for damage or rot.\",\n          \"Clean and prep opening for new window.\",\n          \"Dry-fit new window and check for level/plumb.\",\n          \"Apply waterproof membrane at sill and jambs.\",\n          \"Set window in opening; shim for level and plumb.\",\n          \"Secure window with screws through frame.\",\n          \"Insulate gap between window and framing.\",\n          \"Apply exterior caulk at all joints.\",\n          \"Install interior trim pieces.\",\n          \"Clean glass and hardware.\",\n          \"Test window operation and locks.\"\n        ],\n        options: [\n          {\n            id: \"window-style\",\n            label: \"Window Style\",\n            type: \"select\",\n            choices: [\n              { value: \"double-hung\", label: \"Double-Hung\", priceModifier: 0, scopeAddition: \"Install double-hung window with tilt-in sashes.\" },\n              { value: \"casement\", label: \"Casement\", priceModifier: 150, scopeAddition: \"Install casement window with crank operator.\" },\n              { value: \"picture\", label: \"Picture/Fixed\", priceModifier: -100, scopeAddition: \"Install fixed picture window (non-operable).\" }\n            ]\n          },\n          {\n            id: \"triple-pane\",\n            label: \"Triple-Pane Glass Upgrade\",\n            type: \"boolean\",\n            priceModifier: 200,\n            scopeAddition: \"Upgrade to triple-pane glass for enhanced energy efficiency.\"\n          },\n          {\n            id: \"interior-trim\",\n            label: \"New Interior Casing\",\n            type: \"boolean\",\n            priceModifier: 125,\n            scopeAddition: \"Install new interior window casing and sill to match existing style.\"\n          }\n        ]\n      },\n      {\n        id: \"entry-door\",\n        name: \"Entry Door Replacement\",\n        basePriceRange: { low: 1800, high: 4500 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"Door warranty per manufacturer. 2-year labor warranty.\",\n        exclusions: [\"Sidelight replacement\", \"Transom installation\", \"Security system integration\"],\n        baseScope: [\n          \"Remove existing door, frame, and hardware.\",\n          \"Inspect rough opening and repair any rot.\",\n          \"Install new door frame with proper flashing.\",\n          \"Set and shim door for level and plumb.\",\n          \"Secure frame with screws through shims.\",\n          \"Insulate gap around frame.\",\n          \"Install weatherstripping at all contact points.\",\n          \"Install new threshold with proper seal.\",\n          \"Install new lockset, deadbolt, and hinges.\",\n          \"Install door sweep at bottom.\",\n          \"Apply exterior caulk at frame joints.\",\n          \"Install interior and exterior trim.\",\n          \"Adjust door for proper closure and latch.\",\n          \"Test all locks and hardware.\"\n        ],\n        options: [\n          {\n            id: \"door-material\",\n            label: \"Door Material\",\n            type: \"select\",\n            choices: [\n              { value: \"steel\", label: \"Steel (Insulated)\", priceModifier: 0, scopeAddition: \"Install insulated steel entry door.\" },\n              { value: \"fiberglass\", label: \"Fiberglass\", priceModifier: 400, scopeAddition: \"Install fiberglass entry door with wood-grain texture.\" },\n              { value: \"wood\", label: \"Solid Wood\", priceModifier: 1200, scopeAddition: \"Install solid wood entry door with weatherproof finish.\" }\n            ]\n          },\n          {\n            id: \"smart-lock\",\n            label: \"Smart Lock Installation\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Install smart deadbolt with keypad and smartphone connectivity.\"\n          },\n          {\n            id: \"glass-insert\",\n            label: \"Decorative Glass Insert\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Install decorative glass insert panel in door.\"\n          }\n        ]\n      },\n      {\n        id: \"patio-door\",\n        name: \"Sliding Patio Door Replacement\",\n        basePriceRange: { low: 2200, high: 4500 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"Door warranty per manufacturer. 2-year labor warranty.\",\n        exclusions: [\"Structural header modifications\", \"Deck/patio repair\", \"Blinds/shades\"],\n        baseScope: [\n          \"Remove existing sliding door and frame.\",\n          \"Inspect rough opening for damage.\",\n          \"Clean and prep opening.\",\n          \"Install new frame with proper flashing tape.\",\n          \"Set and level door frame.\",\n          \"Secure frame with appropriate fasteners.\",\n          \"Insulate perimeter gap.\",\n          \"Install exterior trim and caulk.\",\n          \"Install interior casing.\",\n          \"Adjust rollers for smooth operation.\",\n          \"Install screen door.\",\n          \"Test lock and handle operation.\",\n          \"Clean glass panels.\"\n        ],\n        options: [\n          {\n            id: \"door-size\",\n            label: \"Door Size\",\n            type: \"select\",\n            choices: [\n              { value: \"6ft\", label: \"6-Foot Standard\", priceModifier: 0 },\n              { value: \"8ft\", label: \"8-Foot Wide\", priceModifier: 600, scopeAddition: \"Install wider 8-foot sliding door system.\" },\n              { value: \"12ft\", label: \"12-Foot (4-panel)\", priceModifier: 1800, scopeAddition: \"Install 12-foot 4-panel sliding door system.\" }\n            ]\n          },\n          {\n            id: \"blinds-between-glass\",\n            label: \"Blinds Between Glass\",\n            type: \"boolean\",\n            priceModifier: 350,\n            scopeAddition: \"Upgrade to door with integrated blinds between glass panes.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"drywall\",\n    trade: \"Drywall & Texture\",\n    jobTypes: [\n      {\n        id: \"drywall-repair\",\n        name: \"Drywall Repair & Patching\",\n        basePriceRange: { low: 250, high: 650 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"1-year warranty on repairs.\",\n        exclusions: [\"Mold remediation\", \"Plumbing/electrical repairs\", \"Large-scale replacement\"],\n        baseScope: [\n          \"Assess damage and determine repair method.\",\n          \"Cut out damaged drywall to solid edges.\",\n          \"Install backing support if needed.\",\n          \"Cut and fit new drywall patch.\",\n          \"Secure patch with drywall screws.\",\n          \"Apply mesh tape at all seams.\",\n          \"Apply three coats of joint compound with sanding between.\",\n          \"Feather edges to blend with existing wall.\",\n          \"Prime repaired area.\",\n          \"Match existing wall texture (if applicable).\",\n          \"Sand and prep for paint.\",\n          \"Clean up all debris.\"\n        ],\n        options: [\n          {\n            id: \"multiple-repairs\",\n            label: \"Additional Repairs (2-4 locations)\",\n            type: \"boolean\",\n            priceModifier: 200,\n            scopeAddition: \"Repair multiple small holes/damaged areas in same visit.\"\n          },\n          {\n            id: \"texture-match\",\n            label: \"Texture Matching\",\n            type: \"boolean\",\n            priceModifier: 150,\n            scopeAddition: \"Match existing wall texture (knockdown, orange peel, skip trowel).\"\n          },\n          {\n            id: \"prime-paint\",\n            label: \"Prime & Paint Repair Area\",\n            type: \"boolean\",\n            priceModifier: 125,\n            scopeAddition: \"Apply primer and paint to repaired area to match existing wall color.\"\n          }\n        ]\n      },\n      {\n        id: \"drywall-install\",\n        name: \"Drywall Installation (New Construction)\",\n        basePriceRange: { low: 2500, high: 5500 },\n        estimatedDays: { low: 3, high: 6 },\n        warranty: \"1-year warranty on installation.\",\n        exclusions: [\"Framing modifications\", \"Electrical/plumbing rough-in\", \"Painting\"],\n        baseScope: [\n          \"Measure and calculate drywall needs.\",\n          \"Deliver drywall materials to work area.\",\n          \"Mark stud and joist locations.\",\n          \"Hang ceiling drywall first using lift.\",\n          \"Hang wall drywall with proper stagger pattern.\",\n          \"Cut around outlets, switches, and fixtures.\",\n          \"Secure all panels with drywall screws.\",\n          \"Apply paper tape at all flat seams.\",\n          \"Apply corner bead at outside corners.\",\n          \"Apply three coats of mud with sanding between.\",\n          \"Sand smooth to Level 4 finish (Level 5 optional).\",\n          \"Clean up all debris and dust.\",\n          \"Inspect and touch up as needed.\"\n        ],\n        options: [\n          {\n            id: \"drywall-type\",\n            label: \"Drywall Type\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard 1/2\\\"\", priceModifier: 0 },\n              { value: \"moisture\", label: \"Moisture-Resistant (Green Board)\", priceModifier: 300, scopeAddition: \"Use moisture-resistant drywall in applicable areas.\" },\n              { value: \"fire-rated\", label: \"Fire-Rated (Type X)\", priceModifier: 250, scopeAddition: \"Use Type X fire-rated drywall where required by code.\" }\n            ]\n          },\n          {\n            id: \"level-5\",\n            label: \"Level 5 Finish\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Apply skim coat for Level 5 finish (recommended for high-gloss paint).\"\n          }\n        ]\n      },\n      {\n        id: \"popcorn-removal\",\n        name: \"Popcorn Ceiling Removal\",\n        basePriceRange: { low: 1200, high: 2800 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"1-year warranty.\",\n        exclusions: [\"Asbestos testing/abatement\", \"Painting\", \"Light fixture reinstallation\"],\n        baseScope: [\n          \"Test for asbestos (if not already tested).\",\n          \"Move furniture and cover floors with plastic.\",\n          \"Mask walls and protect surfaces.\",\n          \"Wet ceiling sections to soften texture.\",\n          \"Scrape popcorn texture using drywall knife.\",\n          \"Remove all loose material.\",\n          \"Skim coat ceiling to smooth imperfections.\",\n          \"Apply second coat if needed for smooth finish.\",\n          \"Sand ceiling smooth.\",\n          \"Prime entire ceiling.\",\n          \"Remove all protective materials.\",\n          \"Clean up all debris.\",\n          \"Final inspection for missed areas.\"\n        ],\n        options: [\n          {\n            id: \"ceiling-texture\",\n            label: \"New Texture Application\",\n            type: \"select\",\n            choices: [\n              { value: \"smooth\", label: \"Smooth Finish\", priceModifier: 0, scopeAddition: \"Leave ceiling with smooth finish after removal.\" },\n              { value: \"knockdown\", label: \"Knockdown Texture\", priceModifier: 350, scopeAddition: \"Apply knockdown texture to ceiling after removal.\" },\n              { value: \"orange-peel\", label: \"Orange Peel Texture\", priceModifier: 300, scopeAddition: \"Apply orange peel texture to ceiling after removal.\" }\n            ]\n          },\n          {\n            id: \"paint-ceiling\",\n            label: \"Paint Ceiling\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Apply two coats of flat ceiling paint after texture work.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"concrete\",\n    trade: \"Concrete & Masonry\",\n    jobTypes: [\n      {\n        id: \"concrete-slab\",\n        name: \"Concrete Slab/Pad Pour\",\n        basePriceRange: { low: 2500, high: 6500 },\n        estimatedDays: { low: 2, high: 4 },\n        warranty: \"5-year warranty against structural cracking.\",\n        exclusions: [\"Excavation beyond 6\\\"\", \"Plumbing/electrical\", \"Permits\"],\n        baseScope: [\n          \"Lay out slab footprint per plan.\",\n          \"Excavate area to 4-6 inch depth.\",\n          \"Compact subgrade to proper density.\",\n          \"Install 4 inches of compacted gravel base.\",\n          \"Set forms to proper grade and level.\",\n          \"Install vapor barrier if required.\",\n          \"Place rebar or wire mesh reinforcement.\",\n          \"Order and receive ready-mix concrete.\",\n          \"Pour concrete and screed to level.\",\n          \"Float surface to desired finish.\",\n          \"Cut control joints at proper intervals.\",\n          \"Apply curing compound.\",\n          \"Remove forms after 24-48 hours.\",\n          \"Backfill edges if needed.\",\n          \"Clean up site and debris.\"\n        ],\n        options: [\n          {\n            id: \"slab-thickness\",\n            label: \"Slab Thickness\",\n            type: \"select\",\n            choices: [\n              { value: \"4inch\", label: \"4-Inch Standard\", priceModifier: 0 },\n              { value: \"6inch\", label: \"6-Inch Heavy Duty\", priceModifier: 600, scopeAddition: \"Pour 6-inch thick slab for heavier loads.\" }\n            ]\n          },\n          {\n            id: \"broom-finish\",\n            label: \"Broom Finish (Non-Slip)\",\n            type: \"boolean\",\n            priceModifier: 0,\n            scopeAddition: \"Apply broom finish for non-slip texture.\"\n          },\n          {\n            id: \"stamped-border\",\n            label: \"Stamped Border Design\",\n            type: \"boolean\",\n            priceModifier: 800,\n            scopeAddition: \"Apply stamped concrete border pattern around slab perimeter.\"\n          },\n          {\n            id: \"integral-color\",\n            label: \"Integral Color\",\n            type: \"boolean\",\n            priceModifier: 450,\n            scopeAddition: \"Add integral color to concrete mix for consistent coloring.\"\n          }\n        ]\n      },\n      {\n        id: \"concrete-repair\",\n        name: \"Concrete Crack/Spalling Repair\",\n        basePriceRange: { low: 350, high: 1200 },\n        estimatedDays: { low: 1, high: 2 },\n        warranty: \"2-year warranty on repairs.\",\n        exclusions: [\"Full slab replacement\", \"Foundation repair\", \"Structural issues\"],\n        baseScope: [\n          \"Assess crack or spalling damage.\",\n          \"Clean crack or damaged area thoroughly.\",\n          \"Chase crack with grinder to create V-groove.\",\n          \"Apply bonding agent to prepared surface.\",\n          \"Fill crack with flexible polyurethane sealant or epoxy.\",\n          \"For spalling: apply concrete patch compound.\",\n          \"Smooth and texture to match existing surface.\",\n          \"Allow proper cure time per product specs.\",\n          \"Apply concrete sealer to repaired area.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"sealer-application\",\n            label: \"Full Surface Sealer\",\n            type: \"boolean\",\n            priceModifier: 250,\n            scopeAddition: \"Apply penetrating sealer to entire concrete surface.\"\n          },\n          {\n            id: \"leveling\",\n            label: \"Level Uneven Sections\",\n            type: \"boolean\",\n            priceModifier: 400,\n            scopeAddition: \"Apply self-leveling compound to correct uneven areas.\"\n          }\n        ]\n      },\n      {\n        id: \"retaining-wall\",\n        name: \"Block Retaining Wall\",\n        basePriceRange: { low: 3500, high: 8500 },\n        estimatedDays: { low: 3, high: 6 },\n        warranty: \"5-year warranty on structural integrity.\",\n        exclusions: [\"Engineering for walls over 4ft\", \"Major drainage systems\", \"Permits\"],\n        baseScope: [\n          \"Lay out wall footprint with stakes and string.\",\n          \"Excavate trench to proper depth for base.\",\n          \"Install geotextile fabric in trench.\",\n          \"Spread and compact 6 inches of gravel base.\",\n          \"Set first course of blocks level and aligned.\",\n          \"Backfill behind first course with drainage gravel.\",\n          \"Stack subsequent courses with proper setback.\",\n          \"Install wall fabric at intervals per engineering.\",\n          \"Backfill with drainage gravel as wall rises.\",\n          \"Install drainage pipe behind wall.\",\n          \"Install cap blocks with adhesive.\",\n          \"Backfill and grade final soil.\",\n          \"Clean wall face of debris.\",\n          \"Final site cleanup.\"\n        ],\n        options: [\n          {\n            id: \"wall-height\",\n            label: \"Wall Height\",\n            type: \"select\",\n            choices: [\n              { value: \"2ft\", label: \"Up to 2 Feet\", priceModifier: 0 },\n              { value: \"3ft\", label: \"2-3 Feet\", priceModifier: 1200, scopeAddition: \"Build wall 2-3 feet high with additional reinforcement.\" },\n              { value: \"4ft\", label: \"3-4 Feet\", priceModifier: 2500, scopeAddition: \"Build wall 3-4 feet high with geogrid reinforcement.\" }\n            ]\n          },\n          {\n            id: \"block-style\",\n            label: \"Block Style\",\n            type: \"select\",\n            choices: [\n              { value: \"standard\", label: \"Standard Textured\", priceModifier: 0, scopeAddition: \"Use standard split-face retaining wall block.\" },\n              { value: \"natural-stone\", label: \"Natural Stone Look\", priceModifier: 800, scopeAddition: \"Use premium natural stone-style blocks.\" }\n            ]\n          },\n          {\n            id: \"built-in-steps\",\n            label: \"Built-in Steps\",\n            type: \"boolean\",\n            priceModifier: 650,\n            scopeAddition: \"Build integrated steps into retaining wall.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"handyman\",\n    trade: \"Handyman & General Repairs\",\n    jobTypes: [\n      {\n        id: \"general-repairs\",\n        name: \"General Home Repairs (Per Hour)\",\n        basePriceRange: { low: 150, high: 450 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"30-day warranty on repairs performed.\",\n        exclusions: [\"Specialty trade work requiring license\", \"Permit work\", \"Structural modifications\"],\n        baseScope: [\n          \"Assess repair needs with homeowner.\",\n          \"Gather tools and materials for tasks.\",\n          \"Complete repair items as discussed.\",\n          \"Test all repaired items for function.\",\n          \"Clean up work area.\",\n          \"Review completed work with homeowner.\",\n          \"Provide recommendations for future maintenance.\"\n        ],\n        options: [\n          {\n            id: \"time-block\",\n            label: \"Time Block\",\n            type: \"select\",\n            choices: [\n              { value: \"2hr\", label: \"2-Hour Block\", priceModifier: 0, scopeAddition: \"2-hour handyman service block.\" },\n              { value: \"4hr\", label: \"Half Day (4 hours)\", priceModifier: 200, scopeAddition: \"4-hour handyman service block.\" },\n              { value: \"8hr\", label: \"Full Day (8 hours)\", priceModifier: 500, scopeAddition: \"Full day handyman service (8 hours).\" }\n            ]\n          },\n          {\n            id: \"materials-included\",\n            label: \"Basic Materials Included\",\n            type: \"boolean\",\n            priceModifier: 75,\n            scopeAddition: \"Common materials (screws, anchors, caulk, etc.) included.\"\n          }\n        ]\n      },\n      {\n        id: \"door-hardware\",\n        name: \"Door & Hardware Repairs\",\n        basePriceRange: { low: 150, high: 350 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year warranty on hardware repairs.\",\n        exclusions: [\"Full door replacement\", \"Structural frame repair\"],\n        baseScope: [\n          \"Inspect door and identify issues.\",\n          \"Tighten or replace loose hinges.\",\n          \"Adjust strike plate for proper latch engagement.\",\n          \"Shim and adjust door for proper fit.\",\n          \"Repair or replace damaged weatherstripping.\",\n          \"Lubricate hinges and lock mechanisms.\",\n          \"Test door operation.\",\n          \"Clean up work area.\"\n        ],\n        options: [\n          {\n            id: \"new-lockset\",\n            label: \"New Lockset Installation\",\n            type: \"boolean\",\n            priceModifier: 125,\n            scopeAddition: \"Remove old lockset and install new (lockset cost separate).\"\n          },\n          {\n            id: \"door-sweep\",\n            label: \"New Door Sweep\",\n            type: \"boolean\",\n            priceModifier: 45,\n            scopeAddition: \"Install new door sweep at bottom of door.\"\n          },\n          {\n            id: \"doorstop-repair\",\n            label: \"Door Stop Replacement\",\n            type: \"boolean\",\n            priceModifier: 35,\n            scopeAddition: \"Replace damaged or missing door stops.\"\n          }\n        ]\n      },\n      {\n        id: \"ceiling-fan\",\n        name: \"Ceiling Fan Installation\",\n        basePriceRange: { low: 175, high: 350 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year labor warranty. Fan warranty per manufacturer.\",\n        exclusions: [\"New circuit installation\", \"Structural ceiling modifications\", \"High/vaulted ceilings over 12ft\"],\n        baseScope: [\n          \"Turn off power at breaker.\",\n          \"Remove existing light fixture or fan.\",\n          \"Verify electrical box is fan-rated.\",\n          \"Assemble new ceiling fan per manufacturer.\",\n          \"Mount fan bracket to electrical box.\",\n          \"Hang fan motor and secure.\",\n          \"Connect wiring (hot, neutral, ground).\",\n          \"Install fan blades.\",\n          \"Install light kit (if applicable).\",\n          \"Restore power and test all speeds.\",\n          \"Test light function and pull chains.\",\n          \"Balance fan if needed.\",\n          \"Clean up packaging and debris.\"\n        ],\n        options: [\n          {\n            id: \"remote-control\",\n            label: \"Remote Control Kit\",\n            type: \"boolean\",\n            priceModifier: 65,\n            scopeAddition: \"Install wireless remote control for fan and light.\"\n          },\n          {\n            id: \"new-box\",\n            label: \"Fan-Rated Electrical Box\",\n            type: \"boolean\",\n            priceModifier: 95,\n            scopeAddition: \"Replace existing box with fan-rated support brace and box.\"\n          },\n          {\n            id: \"downrod-extension\",\n            label: \"Extended Downrod\",\n            type: \"boolean\",\n            priceModifier: 45,\n            scopeAddition: \"Install extended downrod for high ceilings.\"\n          }\n        ]\n      },\n      {\n        id: \"shelving-install\",\n        name: \"Shelving & Storage Installation\",\n        basePriceRange: { low: 200, high: 550 },\n        estimatedDays: { low: 1, high: 1 },\n        warranty: \"1-year warranty on installation.\",\n        exclusions: [\"Custom cabinetry\", \"Built-in furniture\"],\n        baseScope: [\n          \"Measure and mark shelf locations.\",\n          \"Locate wall studs with stud finder.\",\n          \"Level and install shelf brackets or tracks.\",\n          \"Secure brackets with appropriate fasteners.\",\n          \"Install shelving boards or components.\",\n          \"Check level and adjust as needed.\",\n          \"Test weight capacity.\",\n          \"Clean up installation area.\"\n        ],\n        options: [\n          {\n            id: \"shelf-type\",\n            label: \"Shelving Type\",\n            type: \"select\",\n            choices: [\n              { value: \"floating\", label: \"Floating Shelves (2-3)\", priceModifier: 0, scopeAddition: \"Install 2-3 floating shelves.\" },\n              { value: \"wire-closet\", label: \"Wire Closet System\", priceModifier: 150, scopeAddition: \"Install wire closet shelving system.\" },\n              { value: \"wood-closet\", label: \"Wood Closet System\", priceModifier: 350, scopeAddition: \"Install wood closet organization system.\" }\n            ]\n          },\n          {\n            id: \"closet-rod\",\n            label: \"Closet Rod Installation\",\n            type: \"boolean\",\n            priceModifier: 45,\n            scopeAddition: \"Install closet rod with brackets.\"\n          }\n        ]\n      }\n    ]\n  }\n];\n\n// Spanish translations for electrical job types\nexport const electricalJobTypesEs: Record<string, { name: string; baseScope: string[]; warranty?: string; exclusions?: string[]; options: Record<string, { label: string; scopeAddition?: string; choices?: { value: string; label: string; scopeAddition?: string }[] }> }> = {\n  \"panel-upgrade\": {\n    name: \"ActualizaciÃ³n de Panel y Servicio\",\n    warranty: \"GarantÃ­a de por vida en el panel. GarantÃ­a de 1 aÃ±o en mano de obra.\",\n    exclusions: [\"Tarifas de la compaÃ±Ã­a elÃ©ctrica por cambio de servicio\", \"Tarifas de permisos\", \"Poda de Ã¡rboles para despeje del servicio\"],\n    baseScope: [\n      \"Coordinar corte de energÃ­a con la compaÃ±Ã­a elÃ©ctrica.\",\n      \"Desconectar y remover panel elÃ©ctrico existente.\",\n      \"Instalar nuevo panel principal de 200 amperios con barras de cobre.\",\n      \"Instalar nuevo interruptor principal y barras de neutro/tierra.\",\n      \"Transferir todos los circuitos existentes a nuevos interruptores AFCI/GFCI donde sea requerido.\",\n      \"Etiquetar todos los circuitos claramente segÃºn requisitos NEC.\",\n      \"Instalar nuevo sistema de electrodo de tierra (varillas de tierra y/o tierra Ufer).\",\n      \"Instalar uniÃ³n adecuada a lÃ­neas de gas, agua y CSST.\",\n      \"Restaurar energÃ­a y probar todos los circuitos para operaciÃ³n correcta.\",\n      \"Verificar voltaje y amperaje correcto en circuitos principales y derivados.\",\n      \"Proporcionar documentaciÃ³n de cÃ¡lculo de carga.\",\n      \"Coordinar inspecciÃ³n final (tarifa de permiso por separado).\"\n    ],\n    options: {\n      \"service-upgrade-type\": {\n        label: \"TamaÃ±o de Servicio Actual\",\n        choices: [\n          { value: \"100a\", label: \"ActualizaciÃ³n de 100A a 200A\", scopeAddition: \"Actualizar de servicio de 100 amperios a 200 amperios.\" },\n          { value: \"60a\", label: \"ActualizaciÃ³n de 60A a 200A\", scopeAddition: \"Actualizar de servicio de 60 amperios a 200 amperios; incluye nuevo cable de entrada de servicio.\" },\n          { value: \"fuse-box\", label: \"Caja de Fusibles a Panel de Interruptores\", scopeAddition: \"Reemplazar caja de fusibles obsoleta con panel moderno de 200 amperios.\" }\n        ]\n      },\n      \"meter-mast\": { label: \"Reemplazar Medidor y MÃ¡stil\", scopeAddition: \"Instalar nuevo cabezal de intemperie, mÃ¡stil, base del medidor y cable de entrada de servicio.\" },\n      \"surge-protection\": { label: \"ProtecciÃ³n contra Sobretensiones para Toda la Casa\", scopeAddition: \"Instalar protector contra sobretensiones para toda la casa en el panel principal.\" },\n      \"burned-panel\": { label: \"Reemplazo de Panel Quemado/DaÃ±ado\", scopeAddition: \"Remover panel daÃ±ado por fuego; evaluar y reparar conexiones de cableado afectadas.\" }\n    }\n  },\n  \"rewiring\": {\n    name: \"Recableado Total o Parcial de la Casa\",\n    warranty: \"GarantÃ­a de 2 aÃ±os en mano de obra para todo el cableado. Materiales segÃºn garantÃ­a del fabricante.\",\n    exclusions: [\"ReparaciÃ³n de paneles de yeso y pintura\", \"Tarifas de permisos\", \"Reemplazo de aislamiento\"],\n    baseScope: [\n      \"Realizar evaluaciÃ³n elÃ©ctrica completa y documentar condiciones existentes.\",\n      \"Desarrollar plan de recableado con diseÃ±o de circuitos segÃºn cÃ³digo NEC.\",\n      \"Desenergizar y remover de manera segura el cableado obsoleto existente.\",\n      \"Instalar nuevo cableado de cobre (12 AWG y 14 AWG segÃºn corresponda).\",\n      \"Instalar nuevas cajas elÃ©ctricas en todas las ubicaciones de tomacorrientes e interruptores.\",\n      \"Instalar circuitos dedicados para electrodomÃ©sticos principales segÃºn cÃ³digo.\",\n      \"Instalar interruptores de falla de arco (AFCI) para circuitos de dormitorios.\",\n      \"Instalar protecciÃ³n de interruptor de falla a tierra (GFCI) en Ã¡reas requeridas.\",\n      \"Instalar conexiÃ³n a tierra adecuada en todo el sistema.\",\n      \"Etiquetar todos los circuitos en el panel segÃºn requisitos NEC.\",\n      \"Probar todos los circuitos para voltaje, continuidad y conexiÃ³n a tierra correctos.\",\n      \"Coordinar inspecciones con la autoridad local.\"\n    ],\n    options: {\n      \"rewire-type\": {\n        label: \"Alcance del Recableado\",\n        choices: [\n          { value: \"whole-house\", label: \"Recableado de Toda la Casa\", scopeAddition: \"Recableado completo de toda la casa incluyendo todos los circuitos derivados.\" },\n          { value: \"knob-tube\", label: \"Reemplazo de Knob-and-Tube\", scopeAddition: \"Remover todo el cableado knob-and-tube y reemplazar con cable NM moderno.\" },\n          { value: \"aluminum\", label: \"RemediaciÃ³n de Cableado de Aluminio\", scopeAddition: \"Abordar peligros del cableado de aluminio usando conectores COPALUM o aprobados en toda la casa.\" }\n        ]\n      },\n      \"partial-kitchen\": { label: \"Solo Recableado de Cocina\", scopeAddition: \"Recablear solo el Ã¡rea de la cocina con nuevos circuitos dedicados para todos los electrodomÃ©sticos.\" },\n      \"partial-bath\": { label: \"Solo Recableado de BaÃ±o\", scopeAddition: \"Recablear solo baÃ±o(s) con nuevos circuitos GFCI y cableado de extractor.\" },\n      \"partial-addition\": { label: \"Cableado de AdiciÃ³n/Cuarto Nuevo\", scopeAddition: \"Cablear nueva adiciÃ³n o espacio convertido con asignaciÃ³n de circuitos adecuada.\" }\n    }\n  },\n  \"kitchen-bath-wiring\": {\n    name: \"Cableado para RemodelaciÃ³n de Cocina y BaÃ±o\",\n    warranty: \"GarantÃ­a de 1 aÃ±o en mano de obra para todo el trabajo elÃ©ctrico.\",\n    exclusions: [\"Tarifas de permisos\", \"Costo de accesorios (a menos que se especifique)\", \"ReparaciÃ³n de paneles de yeso\"],\n    baseScope: [\n      \"Evaluar capacidad elÃ©ctrica existente y disponibilidad de circuitos.\",\n      \"Instalar nuevos circuitos de 20 amperios para pequeÃ±os electrodomÃ©sticos segÃºn requisitos NEC.\",\n      \"Instalar circuitos dedicados para triturador de basura y lavavajillas.\",\n      \"Instalar tomacorrientes GFCI en todas las ubicaciones de encimera dentro de 6 pies del agua.\",\n      \"Instalar protecciÃ³n combinada AFCI/GFCI donde sea requerido por cÃ³digo.\",\n      \"Cablear nuevo circuito para extractor/campana.\",\n      \"Instalar conexiÃ³n a tierra adecuada en todos los nuevos tomacorrientes y accesorios.\",\n      \"Probar todos los circuitos para operaciÃ³n y protecciÃ³n correctas.\",\n      \"Etiquetar nuevos circuitos en el panel elÃ©ctrico.\",\n      \"Coordinar con otros oficios para el momento del trabajo en bruto.\"\n    ],\n    options: {\n      \"under-cabinet-lighting\": { label: \"IluminaciÃ³n LED Bajo Gabinete\", scopeAddition: \"Instalar iluminaciÃ³n LED de tira cableada bajo gabinetes superiores con interruptor atenuador.\" },\n      \"recessed-cans\": { label: \"Luces Empotradas (6 luces)\", scopeAddition: \"Instalar (6) luces LED empotradas con control de interruptor atenuador.\" },\n      \"island-circuit\": { label: \"Circuito de Tomacorriente de Isla\", scopeAddition: \"Instalar tomacorrientes emergentes o empotrados en isla de cocina con circuito dedicado.\" },\n      \"pendant-wiring\": { label: \"Cableado para Luces Colgantes\", scopeAddition: \"Instalar cajas elÃ©ctricas y cableado para luces colgantes sobre isla o barra.\" },\n      \"range-circuit\": { label: \"Circuito de 50A para Estufa ElÃ©ctrica\", scopeAddition: \"Instalar nuevo circuito de 50 amperios 240V para estufa elÃ©ctrica con tomacorriente adecuado.\" }\n    }\n  },\n  \"addition-garage-shed\": {\n    name: \"Cableado de AdiciÃ³n, Garaje y Cobertizo\",\n    warranty: \"GarantÃ­a de 1 aÃ±o en mano de obra. Materiales segÃºn garantÃ­a del fabricante.\",\n    exclusions: [\"Zanjeo para tendidos subterrÃ¡neos\", \"Tarifas de permisos\", \"Corte/parcheo de concreto\"],\n    baseScope: [\n      \"Evaluar capacidad del panel principal para carga adicional.\",\n      \"Instalar subpanel con amperaje apropiado para el espacio.\",\n      \"Instalar cable alimentador desde panel principal a ubicaciÃ³n del subpanel.\",\n      \"DiseÃ±ar e instalar distribuciÃ³n de iluminaciÃ³n segÃºn requisitos del espacio.\",\n      \"Instalar tomacorrientes segÃºn requisitos de espaciado del cÃ³digo.\",\n      \"Instalar tomacorriente de 240V para equipo de taller o calefactor si es necesario.\",\n      \"Instalar tomacorrientes y cubiertas resistentes a la intemperie para ubicaciones expuestas.\",\n      \"Conectar subpanel a tierra segÃºn requisitos del cÃ³digo NEC.\",\n      \"Etiquetar todos los circuitos claramente.\",\n      \"Probar todos los circuitos y verificar operaciÃ³n correcta.\"\n    ],\n    options: {\n      \"subpanel-size\": {\n        label: \"TamaÃ±o del Subpanel\",\n        choices: [\n          { value: \"60a\", label: \"Subpanel de 60 Amperios\", scopeAddition: \"Instalar subpanel de 60 amperios adecuado para iluminaciÃ³n y tomacorrientes bÃ¡sicos.\" },\n          { value: \"100a\", label: \"Subpanel de 100 Amperios\", scopeAddition: \"Instalar subpanel de 100 amperios para taller con equipo pesado.\" },\n          { value: \"125a\", label: \"Subpanel de 125 Amperios\", scopeAddition: \"Instalar subpanel de 125 amperios para adiciÃ³n completa con capacidad de HVAC.\" }\n        ]\n      },\n      \"underground-run\": { label: \"Conducto SubterrÃ¡neo\", scopeAddition: \"Instalar conducto subterrÃ¡neo (hasta 50 pies) para energÃ­a a estructura separada.\" },\n      \"shop-outlets\": { label: \"Paquete de Tomacorrientes de 240V para Taller\", scopeAddition: \"Instalar (2) tomacorrientes de 240V para soldadores, compresores o equipo de taller.\" },\n      \"motion-lights\": { label: \"Luces Exteriores con Sensor de Movimiento\", scopeAddition: \"Instalar luces LED activadas por movimiento en puntos de entrada de la estructura.\" }\n    }\n  },\n  \"ev-charger\": {\n    name: \"InstalaciÃ³n de Cargador para VehÃ­culo ElÃ©ctrico\",\n    warranty: \"GarantÃ­a del cargador segÃºn fabricante. GarantÃ­a de 1 aÃ±o en mano de obra.\",\n    exclusions: [\"Costo de la unidad del cargador (a menos que se especifique)\", \"Zanjeo para garaje separado\", \"Tarifas de permisos\"],\n    baseScope: [\n      \"Realizar cÃ¡lculo de carga para evaluar capacidad del panel.\",\n      \"Instalar nuevo circuito dedicado de 240V 50 amperios para cargador Nivel 2.\",\n      \"Instalar conducto y cable de tamaÃ±o apropiado hasta ubicaciÃ³n del cargador.\",\n      \"Instalar tomacorriente NEMA 14-50 o conectar cargador directamente segÃºn especificaciÃ³n.\",\n      \"Montar estaciÃ³n de carga segÃºn especificaciones del fabricante.\",\n      \"Conectar, probar y verificar operaciÃ³n correcta del cargador.\",\n      \"Programar horarios de carga y funciones inteligentes si aplica.\",\n      \"Proporcionar orientaciÃ³n al propietario sobre operaciÃ³n y funciones del cargador.\",\n      \"Limpiar Ã¡rea de trabajo y remover todos los escombros.\",\n      \"Proporcionar documentaciÃ³n para cualquier reembolso aplicable.\"\n    ],\n    options: {\n      \"panel-upgrade-ev\": { label: \"ActualizaciÃ³n de Panel para VE\", scopeAddition: \"Actualizar panel elÃ©ctrico para acomodar carga del cargador VE si la capacidad actual es insuficiente.\" },\n      \"charger-supplied\": { label: \"Incluir Tesla Wall Connector\", scopeAddition: \"Suministrar e instalar unidad Tesla Wall Connector.\" },\n      \"charger-universal\": { label: \"Incluir Cargador Universal J1772\", scopeAddition: \"Suministrar e instalar cargador universal J1772 Nivel 2 (ChargePoint, Grizzl-E o equivalente).\" },\n      \"extended-run\": { label: \"Tendido de Cable Extendido (31-75 pies)\", scopeAddition: \"Conducto y tendido de cable extendido para distancias de 31-75 pies desde el panel.\" },\n      \"load-management\": { label: \"GestiÃ³n Inteligente de Carga\", scopeAddition: \"Instalar dispositivo de gestiÃ³n inteligente de carga para equilibrar carga del VE con demanda del hogar.\" }\n    }\n  },\n  \"outdoor-electrical\": {\n    name: \"Electricidad Exterior y de JardÃ­n\",\n    warranty: \"GarantÃ­a de 1 aÃ±o en mano de obra. GarantÃ­as de accesorios segÃºn fabricante.\",\n    exclusions: [\"Zanjeo (a menos que se especifique)\", \"ReparaciÃ³n de paisajismo\", \"Tarifas de permisos\"],\n    baseScope: [\n      \"Evaluar capacidad del panel elÃ©ctrico para circuitos exteriores.\",\n      \"Planificar distribuciÃ³n para necesidades elÃ©ctricas exteriores.\",\n      \"Instalar cajas de empalme exteriores con clasificaciÃ³n de intemperie.\",\n      \"Instalar cableado apropiado con protecciÃ³n de conducto para exteriores.\",\n      \"Instalar cubiertas de tomacorrientes resistentes a la intemperie tipo en uso.\",\n      \"Instalar protecciÃ³n GFCI para todos los circuitos exteriores.\",\n      \"Conectar y probar todos los accesorios y tomacorrientes.\",\n      \"Verificar conexiÃ³n a tierra adecuada de circuitos exteriores.\",\n      \"Limpiar Ã¡rea de trabajo y restaurar cualquier Ã¡rea perturbada.\"\n    ],\n    options: {\n      \"landscape-lighting\": { label: \"IluminaciÃ³n de Paisaje de Bajo Voltaje\", scopeAddition: \"Instalar sistema de iluminaciÃ³n de paisaje de bajo voltaje con transformador, temporizador y hasta 10 accesorios.\" },\n      \"patio-outlets\": { label: \"Paquete de Tomacorrientes para Patio/Terraza\", scopeAddition: \"Instalar (2-3) tomacorrientes GFCI a prueba de intemperie en Ã¡rea de patio o terraza.\" },\n      \"pool-spa\": { label: \"ConexiÃ³n ElÃ©ctrica de Piscina/Spa\", scopeAddition: \"Instalar circuito dedicado para bomba de piscina/spa con uniÃ³n y protecciÃ³n GFCI adecuadas.\" },\n      \"security-lights\": { label: \"Paquete de IluminaciÃ³n de Seguridad\", scopeAddition: \"Instalar (3-4) luces LED de seguridad con sensor de movimiento en ubicaciones exteriores clave.\" },\n      \"camera-wiring\": { label: \"Cableado para CÃ¡maras de Seguridad\", scopeAddition: \"Instalar cableado de energÃ­a y/o bajo voltaje para hasta 4 ubicaciones de cÃ¡maras de seguridad.\" }\n    }\n  },\n  \"generator\": {\n    name: \"InstalaciÃ³n de Generador\",\n    warranty: \"GarantÃ­a del generador segÃºn fabricante. GarantÃ­a de 1 aÃ±o en mano de obra de instalaciÃ³n.\",\n    exclusions: [\"Costo de la unidad del generador (a menos que se especifique)\", \"InstalaciÃ³n de lÃ­nea de gas\", \"Tarifas de permisos\", \"Losa de concreto\"],\n    baseScope: [\n      \"Evaluar sistema elÃ©ctrico y requisitos de energÃ­a del hogar.\",\n      \"Determinar tamaÃ±o del generador basado en cargas crÃ­ticas.\",\n      \"Instalar componentes de conexiÃ³n del generador segÃºn especificaciones.\",\n      \"Asegurar conexiÃ³n a tierra adecuada del sistema del generador.\",\n      \"Probar operaciÃ³n del sistema y funcionalidad de transferencia.\",\n      \"Proporcionar orientaciÃ³n al propietario sobre operaciÃ³n y mantenimiento del generador.\",\n      \"Limpiar Ã¡rea de trabajo y remover todos los escombros.\",\n      \"Proporcionar documentaciÃ³n para inspecciÃ³n de permisos.\"\n    ],\n    options: {\n      \"generator-type\": {\n        label: \"Tipo de Generador\",\n        choices: [\n          { value: \"portable\", label: \"ConfiguraciÃ³n de Generador PortÃ¡til\", scopeAddition: \"Instalar caja de entrada, cable de alimentaciÃ³n e interlock manual para conexiÃ³n de generador portÃ¡til.\" },\n          { value: \"standby-small\", label: \"Generador de Respaldo (10-14kW)\", scopeAddition: \"Instalar generador de respaldo con interruptor de transferencia automÃ¡tica para circuitos esenciales.\" },\n          { value: \"standby-whole\", label: \"Generador de Respaldo para Toda la Casa (18-24kW)\", scopeAddition: \"Instalar generador de respaldo para toda la casa con interruptor de transferencia automÃ¡tica para respaldo completo del hogar.\" }\n        ]\n      },\n      \"interlock-kit\": { label: \"Kit de Interlock Manual\", scopeAddition: \"Instalar kit de interlock de generador en panel existente para transferencia manual segura.\" },\n      \"inlet-box\": { label: \"Caja de Entrada de EnergÃ­a Exterior\", scopeAddition: \"Instalar caja de entrada de energÃ­a a prueba de intemperie con clasificaciÃ³n de amperaje apropiada.\" },\n      \"transfer-switch\": { label: \"Interruptor de Transferencia AutomÃ¡tica\", scopeAddition: \"Instalar interruptor de transferencia automÃ¡tica para activaciÃ³n perfecta del generador durante cortes.\" },\n      \"load-shedding\": { label: \"ReducciÃ³n Inteligente de Carga\", scopeAddition: \"Instalar sistema de gestiÃ³n de carga para priorizar circuitos crÃ­ticos durante operaciÃ³n del generador.\" }\n    }\n  },\n  \"recessed-lighting\": {\n    name: \"InstalaciÃ³n de IluminaciÃ³n Empotrada\",\n    warranty: \"GarantÃ­a de 1 aÃ±o en mano de obra. GarantÃ­a de LED segÃºn fabricante.\",\n    exclusions: [\"Reemplazo de aislamiento de Ã¡tico\", \"ReparaciÃ³n mayor de techo\"],\n    baseScope: [\n      \"Marcar distribuciÃ³n para (6) ubicaciones de luces empotradas segÃºn plan.\",\n      \"Cortar aberturas en el techo usando plantilla apropiada.\",\n      \"Instalar carcasas de remodelaciÃ³n (retrofit).\",\n      \"Instalar nuevo circuito elÃ©ctrico desde ubicaciÃ³n del interruptor.\",\n      \"Instalar nuevo interruptor atenuador en ubicaciÃ³n designada.\",\n      \"Cablear todos los accesorios en serie al interruptor.\",\n      \"Instalar molduras y bombillas LED (3000K o 4000K segÃºn selecciÃ³n).\",\n      \"Probar operaciÃ³n del atenuador en todo el rango.\",\n      \"Parchar cualquier agujero de acceso segÃºn sea necesario.\",\n      \"Limpiar todos los escombros.\"\n    ],\n    options: {\n      \"additional-lights\": { label: \"Luces Adicionales (7-10 total)\", scopeAddition: \"Instalar 4 luces empotradas adicionales (10 total) para mayor cobertura de la habitaciÃ³n.\" },\n      \"smart-dimmer\": { label: \"Interruptor Atenuador Inteligente\", scopeAddition: \"Instalar interruptor atenuador inteligente con Wi-Fi y control por aplicaciÃ³n.\" },\n      \"second-zone\": { label: \"IluminaciÃ³n de Dos Zonas\", scopeAddition: \"Dividir luces en dos zonas con interruptores separados para control flexible.\" }\n    }\n  }\n};\n\n// Helper function to get Spanish translation for electrical templates\nexport function getElectricalJobTypeEs(jobTypeId: string) {\n  return electricalJobTypesEs[jobTypeId];\n}\n\n// Spanish translations for HVAC job types\nexport const hvacJobTypesEs: Record<string, { name: string; baseScope: string[]; warranty?: string; exclusions?: string[]; options: Record<string, { label: string; scopeAddition?: string; choices?: { value: string; label: string; scopeAddition?: string }[] }> }> = {\n  \"full-system-split\": {\n    name: \"Reemplazo Completo de Sistema â€“ Split (A/C + Calefactor)\",\n    warranty: \"GarantÃ­a de 10 aÃ±os en piezas con registro. GarantÃ­a de 2 aÃ±os en mano de obra.\",\n    exclusions: [\"Reemplazo de ductos\", \"Sistemas de zonificaciÃ³n\", \"Actualizaciones del panel elÃ©ctrico\", \"Permisos (si lo requiere la jurisdicciÃ³n)\"],\n    baseScope: [\n      \"Recuperar refrigerante existente segÃºn regulaciones EPA SecciÃ³n 608.\",\n      \"Desconectar y remover unidad condensadora exterior existente.\",\n      \"Desconectar y remover calefactor interior existente.\",\n      \"Desechar equipos viejos segÃºn regulaciones ambientales.\",\n      \"Colocar nueva unidad condensadora en base existente (o instalar nueva base si es necesario).\",\n      \"Instalar nuevo calefactor en ubicaciÃ³n existente.\",\n      \"Instalar nuevo serpentÃ­n evaporador compatible con tonelaje del condensador.\",\n      \"Reemplazar lÃ­nea de refrigerante si es requerido por distancia o condiciÃ³n.\",\n      \"Instalar nueva bandeja de drenaje y lÃ­nea de condensado con trampa.\",\n      \"Instalar nuevo filtro secador y puertos de servicio.\",\n      \"Soldar todas las conexiones de refrigerante con soldadura de plata.\",\n      \"Probar presiÃ³n del sistema con nitrÃ³geno a 500 PSI.\",\n      \"Evacuar sistema a 500 micrones usando bomba de vacÃ­o.\",\n      \"Cargar sistema con refrigerante especificado por fÃ¡brica (R-410A).\",\n      \"Verificar valores de subenfriamiento y sobrecalentamiento segÃºn especificaciones del fabricante.\",\n      \"Conectar lÃ­nea de gas al calefactor (si es de gas) y probar fugas.\",\n      \"Conectar y probar termostato existente o nuevo.\",\n      \"Verificar flujo de aire en todos los registros de suministro.\",\n      \"Probar modos de calefacciÃ³n y enfriamiento para operaciÃ³n correcta.\",\n      \"Medir diferencial de temperatura (enfriamiento: 16-22Â°F, calefacciÃ³n: 40-70Â°F de aumento).\",\n      \"Programar y calibrar configuraciones del termostato.\",\n      \"Registrar garantÃ­a con el fabricante.\",\n      \"Proporcionar orientaciÃ³n del sistema e instrucciones de reemplazo de filtro al propietario.\",\n      \"Limpiar Ã¡rea de trabajo y remover todos los escombros.\"\n    ],\n    options: {\n      \"tonnage\": {\n        label: \"TamaÃ±o del Sistema (Tonelaje)\",\n        choices: [\n          { value: \"1.5-ton\", label: \"1.5 Toneladas\", scopeAddition: \"Instalar sistema de 1.5 toneladas dimensionado para aproximadamente 600-900 pies cuadrados.\" },\n          { value: \"2-ton\", label: \"2 Toneladas\", scopeAddition: \"Instalar sistema de 2 toneladas dimensionado para aproximadamente 901-1200 pies cuadrados.\" },\n          { value: \"2.5-ton\", label: \"2.5 Toneladas\", scopeAddition: \"Instalar sistema de 2.5 toneladas dimensionado para aproximadamente 1201-1500 pies cuadrados.\" },\n          { value: \"3-ton\", label: \"3 Toneladas\", scopeAddition: \"Instalar sistema de 3 toneladas dimensionado para aproximadamente 1501-1800 pies cuadrados.\" },\n          { value: \"3.5-ton\", label: \"3.5 Toneladas\", scopeAddition: \"Instalar sistema de 3.5 toneladas dimensionado para aproximadamente 1801-2100 pies cuadrados.\" },\n          { value: \"4-ton\", label: \"4 Toneladas\", scopeAddition: \"Instalar sistema de 4 toneladas dimensionado para aproximadamente 2101-2400 pies cuadrados.\" },\n          { value: \"5-ton\", label: \"5 Toneladas\", scopeAddition: \"Instalar sistema de 5 toneladas dimensionado para aproximadamente 2401-3000 pies cuadrados.\" }\n        ]\n      },\n      \"efficiency\": {\n        label: \"Nivel de Eficiencia\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (14-15 SEER / 80% AFUE)\", scopeAddition: \"Instalar A/C de eficiencia estÃ¡ndar (14-15 SEER) y calefactor 80% AFUE.\" },\n          { value: \"high\", label: \"Alta Eficiencia (16-17 SEER / 95% AFUE)\", scopeAddition: \"Instalar A/C de alta eficiencia (16-17 SEER) y calefactor 95% AFUE con intercambiador de calor secundario.\" },\n          { value: \"ultra\", label: \"Ultra Eficiencia (18+ SEER / 98% AFUE)\", scopeAddition: \"Instalar A/C ultra eficiente de velocidad variable (18+ SEER) y calefactor modulante 98% AFUE.\" }\n        ]\n      },\n      \"smart-thermostat\": { label: \"Termostato Inteligente (Ecobee/Nest)\", scopeAddition: \"Instalar termostato inteligente premium con sensores de habitaciÃ³n y configuraciÃ³n de aplicaciÃ³n.\" },\n      \"new-pad\": { label: \"Nueva Base para Condensador\", scopeAddition: \"Instalar nueva base compuesta para condensador (reemplazar base agrietada o subdimensionada).\" },\n      \"surge-protector\": { label: \"Protector de SobretensiÃ³n HVAC\", scopeAddition: \"Instalar protector de sobretensiÃ³n en desconector exterior para protecciÃ³n del compresor.\" },\n      \"uv-light\": { label: \"Purificador de Aire UV\", scopeAddition: \"Instalar luz germicida UV-C en manejador de aire para reducir moho y bacterias.\" },\n      \"duct-cleaning\": { label: \"Limpieza Completa de Ductos\", scopeAddition: \"Limpiar todos los ductos de suministro y retorno usando cepillo rotativo y aspiradora HEPA.\" }\n    }\n  },\n  \"ac-only\": {\n    name: \"Reemplazo Solo de A/C\",\n    warranty: \"GarantÃ­a del fabricante (5-10 aÃ±os en piezas). GarantÃ­a de 2 aÃ±os en mano de obra.\",\n    exclusions: [\"Reemplazo del calefactor\", \"Modificaciones de ductos\", \"Reemplazo del serpentÃ­n interior (a menos que se incluya)\", \"ActualizaciÃ³n del panel elÃ©ctrico\"],\n    baseScope: [\n      \"Recuperar refrigerante existente segÃºn regulaciones EPA SecciÃ³n 608.\",\n      \"Desconectar y remover unidad condensadora exterior existente.\",\n      \"Desechar unidad vieja segÃºn regulaciones ambientales.\",\n      \"Colocar nuevo condensador en base existente (o nueva base si es necesario).\",\n      \"Inspeccionar y limpiar lÃ­nea de refrigerante existente con nitrÃ³geno.\",\n      \"Instalar nuevo filtro secador.\",\n      \"Soldar todas las conexiones con soldadura de plata.\",\n      \"Probar presiÃ³n del sistema con nitrÃ³geno a 500 PSI.\",\n      \"Evacuar sistema a 500 micrones usando bomba de vacÃ­o.\",\n      \"Cargar sistema con refrigerante especificado por fÃ¡brica (R-410A).\",\n      \"Verificar valores de subenfriamiento y sobrecalentamiento segÃºn especificaciones del fabricante.\",\n      \"Probar operaciÃ³n y medir delta-T de enfriamiento (16-22Â°F).\",\n      \"Verificar amperaje correcto en el compresor.\",\n      \"Registrar garantÃ­a con el fabricante.\",\n      \"Limpiar Ã¡rea de trabajo.\",\n      \"Proporcionar documentaciÃ³n de garantÃ­a y calendario de filtros al propietario.\"\n    ],\n    options: {\n      \"tonnage\": {\n        label: \"TamaÃ±o del Sistema (Tonelaje)\",\n        choices: [\n          { value: \"1.5-ton\", label: \"1.5 Toneladas\", scopeAddition: \"Instalar condensador de 1.5 toneladas dimensionado para aproximadamente 600-900 pies cuadrados.\" },\n          { value: \"2-ton\", label: \"2 Toneladas\", scopeAddition: \"Instalar condensador de 2 toneladas dimensionado para aproximadamente 901-1200 pies cuadrados.\" },\n          { value: \"2.5-ton\", label: \"2.5 Toneladas\", scopeAddition: \"Instalar condensador de 2.5 toneladas dimensionado para aproximadamente 1201-1500 pies cuadrados.\" },\n          { value: \"3-ton\", label: \"3 Toneladas\", scopeAddition: \"Instalar condensador de 3 toneladas dimensionado para aproximadamente 1501-1800 pies cuadrados.\" },\n          { value: \"3.5-ton\", label: \"3.5 Toneladas\", scopeAddition: \"Instalar condensador de 3.5 toneladas dimensionado para aproximadamente 1801-2100 pies cuadrados.\" },\n          { value: \"4-ton\", label: \"4 Toneladas\", scopeAddition: \"Instalar condensador de 4 toneladas dimensionado para aproximadamente 2101-2400 pies cuadrados.\" },\n          { value: \"5-ton\", label: \"5 Toneladas\", scopeAddition: \"Instalar condensador de 5 toneladas dimensionado para aproximadamente 2401-3000 pies cuadrados.\" }\n        ]\n      },\n      \"efficiency\": {\n        label: \"Nivel de Eficiencia\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (14-15 SEER)\", scopeAddition: \"Instalar condensador de eficiencia 14-15 SEER.\" },\n          { value: \"high\", label: \"Alta Eficiencia (16-17 SEER)\", scopeAddition: \"Instalar condensador de alta eficiencia 16-17 SEER.\" },\n          { value: \"ultra\", label: \"Ultra Eficiencia (18+ SEER)\", scopeAddition: \"Instalar condensador ultra eficiente 18+ SEER con compresor de velocidad variable.\" }\n        ]\n      },\n      \"evap-coil\": { label: \"Nuevo SerpentÃ­n Evaporador\", scopeAddition: \"Reemplazar serpentÃ­n evaporador interior para coincidir con nuevo condensador para eficiencia Ã³ptima.\" },\n      \"smart-thermostat\": { label: \"ActualizaciÃ³n de Termostato Inteligente\", scopeAddition: \"Instalar y configurar termostato inteligente con Wi-Fi y configuraciÃ³n de aplicaciÃ³n.\" },\n      \"new-pad\": { label: \"Nueva Base para Condensador\", scopeAddition: \"Instalar nueva base compuesta para condensador (reemplazar base agrietada o subdimensionada).\" },\n      \"surge-protector\": { label: \"Protector de SobretensiÃ³n A/C\", scopeAddition: \"Instalar protector de sobretensiÃ³n en desconector exterior para protecciÃ³n del compresor.\" }\n    }\n  },\n  \"furnace-only\": {\n    name: \"Reemplazo Solo de Calefactor\",\n    warranty: \"GarantÃ­a del fabricante (garantÃ­a limitada de por vida en intercambiador de calor, 10 aÃ±os en piezas). GarantÃ­a de 2 aÃ±os en mano de obra.\",\n    exclusions: [\"Reemplazo de A/C\", \"Modificaciones de ductos\", \"InstalaciÃ³n de lÃ­nea de gas\", \"Permisos (si se requieren)\"],\n    baseScope: [\n      \"Cerrar suministro de gas y desconectar calefactor existente.\",\n      \"Desconectar y tapar lÃ­neas de refrigerante (si aplica).\",\n      \"Remover calefactor existente y desechar apropiadamente.\",\n      \"Instalar nuevo calefactor en ubicaciÃ³n existente.\",\n      \"Reconectar lÃ­nea de suministro de gas y probar fugas con detector electrÃ³nico.\",\n      \"Reconectar serpentÃ­n evaporador existente (si tiene A/C).\",\n      \"Instalar nueva bandeja de drenaje y lÃ­nea de condensado con trampa (si es alta eficiencia).\",\n      \"Conectar chimenea/escape segÃºn requisitos del cÃ³digo.\",\n      \"Conectar y probar cableado del termostato.\",\n      \"Verificar presiÃ³n de gas correcta en el colector.\",\n      \"Probar secuencia de encendido y controles de seguridad.\",\n      \"Medir aumento de temperatura a travÃ©s del intercambiador de calor.\",\n      \"Verificar combustiÃ³n y tiro correctos.\",\n      \"Probar todas las etapas de calefacciÃ³n.\",\n      \"Registrar garantÃ­a con el fabricante.\",\n      \"Limpiar Ã¡rea de trabajo y proporcionar instrucciones de operaciÃ³n.\"\n    ],\n    options: {\n      \"size\": {\n        label: \"TamaÃ±o del Calefactor (BTU)\",\n        choices: [\n          { value: \"40k\", label: \"40,000 BTU\", scopeAddition: \"Instalar calefactor de 40,000 BTU para casas pequeÃ±as (800-1200 pies cuadrados).\" },\n          { value: \"60k\", label: \"60,000 BTU\", scopeAddition: \"Instalar calefactor de 60,000 BTU para casas medianas (1200-1600 pies cuadrados).\" },\n          { value: \"80k\", label: \"80,000 BTU\", scopeAddition: \"Instalar calefactor de 80,000 BTU para casas promedio (1600-2200 pies cuadrados).\" },\n          { value: \"100k\", label: \"100,000 BTU\", scopeAddition: \"Instalar calefactor de 100,000 BTU para casas grandes (2200-2800 pies cuadrados).\" },\n          { value: \"120k\", label: \"120,000 BTU\", scopeAddition: \"Instalar calefactor de 120,000 BTU para casas muy grandes (2800+ pies cuadrados).\" }\n        ]\n      },\n      \"efficiency\": {\n        label: \"Nivel de Eficiencia\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (80% AFUE)\", scopeAddition: \"Instalar calefactor de una etapa 80% AFUE con eficiencia estÃ¡ndar.\" },\n          { value: \"high\", label: \"Alta Eficiencia (95% AFUE)\", scopeAddition: \"Instalar calefactor de alta eficiencia 95% AFUE con intercambiador de calor secundario y ventilaciÃ³n PVC.\" },\n          { value: \"ultra\", label: \"Ultra Eficiencia (98% AFUE)\", scopeAddition: \"Instalar calefactor modulante 98% AFUE con soplador de velocidad variable para mÃ¡ximo confort y eficiencia.\" }\n        ]\n      },\n      \"smart-thermostat\": { label: \"ActualizaciÃ³n de Termostato Inteligente\", scopeAddition: \"Instalar y configurar termostato inteligente con Wi-Fi y configuraciÃ³n de aplicaciÃ³n.\" },\n      \"humidifier\": { label: \"Humidificador de Toda la Casa\", scopeAddition: \"Instalar humidificador de derivaciÃ³n o motorizado con control de humidistato.\" },\n      \"co-detector\": { label: \"Detector de MonÃ³xido de Carbono\", scopeAddition: \"Instalar detector de monÃ³xido de carbono cableado cerca del Ã¡rea del calefactor.\" }\n    }\n  },\n  \"heat-pump-system\": {\n    name: \"Reemplazo de Sistema de Bomba de Calor\",\n    warranty: \"GarantÃ­a de 10 aÃ±os en piezas con registro. GarantÃ­a de 2 aÃ±os en mano de obra.\",\n    exclusions: [\"Reemplazo de ductos\", \"ActualizaciÃ³n del panel elÃ©ctrico\", \"InstalaciÃ³n de calefacciÃ³n de respaldo\", \"Permisos (si se requieren)\"],\n    baseScope: [\n      \"Recuperar refrigerante existente segÃºn regulaciones EPA SecciÃ³n 608.\",\n      \"Desconectar y remover bomba de calor exterior o unidad de A/C existente.\",\n      \"Remover y desechar manejador de aire interior existente.\",\n      \"Colocar nueva bomba de calor condensadora en base existente o nueva.\",\n      \"Instalar nuevo manejador de aire con serpentÃ­n compatible.\",\n      \"Instalar nueva lÃ­nea de refrigerante si es necesario.\",\n      \"Instalar nueva bandeja de drenaje y lÃ­nea de condensado con trampa.\",\n      \"Instalar nuevo filtro secador y puertos de servicio.\",\n      \"Soldar todas las conexiones con soldadura de plata.\",\n      \"Probar presiÃ³n del sistema con nitrÃ³geno a 500 PSI.\",\n      \"Evacuar sistema a 500 micrones usando bomba de vacÃ­o.\",\n      \"Cargar sistema con refrigerante especificado por fÃ¡brica (R-410A).\",\n      \"Verificar subenfriamiento y sobrecalentamiento en modos de calefacciÃ³n y enfriamiento.\",\n      \"Probar operaciÃ³n de vÃ¡lvula reversible.\",\n      \"Verificar operaciÃ³n del ciclo de descongelaciÃ³n.\",\n      \"Conectar y programar termostato para operaciÃ³n de bomba de calor.\",\n      \"Probar resistencias elÃ©ctricas de respaldo (si aplica).\",\n      \"Medir diferencial de temperatura en modos de calefacciÃ³n y enfriamiento.\",\n      \"Registrar garantÃ­a con el fabricante.\",\n      \"Proporcionar orientaciÃ³n del sistema al propietario.\",\n      \"Limpiar Ã¡rea de trabajo y remover todos los escombros.\"\n    ],\n    options: {\n      \"tonnage\": {\n        label: \"TamaÃ±o del Sistema (Tonelaje)\",\n        choices: [\n          { value: \"1.5-ton\", label: \"1.5 Toneladas\", scopeAddition: \"Instalar bomba de calor de 1.5 toneladas dimensionada para aproximadamente 600-900 pies cuadrados.\" },\n          { value: \"2-ton\", label: \"2 Toneladas\", scopeAddition: \"Instalar bomba de calor de 2 toneladas dimensionada para aproximadamente 901-1200 pies cuadrados.\" },\n          { value: \"2.5-ton\", label: \"2.5 Toneladas\", scopeAddition: \"Instalar bomba de calor de 2.5 toneladas dimensionada para aproximadamente 1201-1500 pies cuadrados.\" },\n          { value: \"3-ton\", label: \"3 Toneladas\", scopeAddition: \"Instalar bomba de calor de 3 toneladas dimensionada para aproximadamente 1501-1800 pies cuadrados.\" },\n          { value: \"3.5-ton\", label: \"3.5 Toneladas\", scopeAddition: \"Instalar bomba de calor de 3.5 toneladas dimensionada para aproximadamente 1801-2100 pies cuadrados.\" },\n          { value: \"4-ton\", label: \"4 Toneladas\", scopeAddition: \"Instalar bomba de calor de 4 toneladas dimensionada para aproximadamente 2101-2400 pies cuadrados.\" },\n          { value: \"5-ton\", label: \"5 Toneladas\", scopeAddition: \"Instalar bomba de calor de 5 toneladas dimensionada para aproximadamente 2401-3000 pies cuadrados.\" }\n        ]\n      },\n      \"efficiency\": {\n        label: \"Nivel de Eficiencia\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (14-15 SEER / 8 HSPF)\", scopeAddition: \"Instalar bomba de calor de eficiencia estÃ¡ndar (14-15 SEER, 8 HSPF).\" },\n          { value: \"high\", label: \"Alta Eficiencia (16-17 SEER / 9 HSPF)\", scopeAddition: \"Instalar bomba de calor de alta eficiencia (16-17 SEER, 9 HSPF).\" },\n          { value: \"ultra\", label: \"Ultra Eficiencia (18+ SEER / 10+ HSPF)\", scopeAddition: \"Instalar bomba de calor ultra eficiente de velocidad variable (18+ SEER, 10+ HSPF) con tecnologÃ­a inversora.\" }\n        ]\n      },\n      \"backup-heat\": {\n        label: \"Resistencias ElÃ©ctricas de Respaldo\",\n        choices: [\n          { value: \"5kw\", label: \"Kit de Calor 5 kW\", scopeAddition: \"Instalar kit de calor elÃ©ctrico de 5 kW para calefacciÃ³n de respaldo.\" },\n          { value: \"10kw\", label: \"Kit de Calor 10 kW\", scopeAddition: \"Instalar kit de calor elÃ©ctrico de 10 kW para calefacciÃ³n de respaldo.\" },\n          { value: \"15kw\", label: \"Kit de Calor 15 kW\", scopeAddition: \"Instalar kit de calor elÃ©ctrico de 15 kW para calefacciÃ³n de respaldo.\" },\n          { value: \"20kw\", label: \"Kit de Calor 20 kW\", scopeAddition: \"Instalar kit de calor elÃ©ctrico de 20 kW para calefacciÃ³n de respaldo.\" }\n        ]\n      },\n      \"smart-thermostat\": { label: \"Termostato Inteligente (Compatible con Bomba de Calor)\", scopeAddition: \"Instalar termostato inteligente compatible con bomba de calor con soporte dual-fuel.\" },\n      \"surge-protector\": { label: \"Protector de SobretensiÃ³n para Bomba de Calor\", scopeAddition: \"Instalar protector de sobretensiÃ³n en desconector exterior para protecciÃ³n del compresor.\" }\n    }\n  },\n  \"mini-split-single\": {\n    name: \"InstalaciÃ³n de Mini-Split â€“ Zona Ãšnica\",\n    warranty: \"GarantÃ­a de 7 aÃ±os en compresor. GarantÃ­a de 5 aÃ±os en piezas. GarantÃ­a de 2 aÃ±os en mano de obra.\",\n    exclusions: [\"ActualizaciÃ³n del panel elÃ©ctrico\", \"Modificaciones estructurales mayores\", \"Permisos (si se requieren)\"],\n    baseScope: [\n      \"Seleccionar y marcar ubicaciones Ã³ptimas para unidades interior y exterior.\",\n      \"Instalar soporte de pared para manejador de aire interior.\",\n      \"Perforar agujero de 3\\\" a travÃ©s de pared exterior para paso de lÃ­neas.\",\n      \"Instalar manguito de pared y sellar con materiales impermeables.\",\n      \"Pasar lÃ­neas de refrigerante, lÃ­nea de drenaje y cable de control entre unidades.\",\n      \"Instalar condensador exterior en soporte de suelo o base compuesta.\",\n      \"Conectar lÃ­neas de refrigerante con accesorios de abocardado y especificaciones de torque correctas.\",\n      \"Vaciar y probar fugas del sistema de refrigerante.\",\n      \"Liberar carga de fÃ¡brica o agregar refrigerante segÃºn longitud de lÃ­neas.\",\n      \"Cablear unidad interior a unidad exterior con cable de control.\",\n      \"Instalar nuevo circuito elÃ©ctrico dedicado (si es necesario).\",\n      \"Conectar suministro elÃ©ctrico segÃºn requisitos del cÃ³digo.\",\n      \"Probar operaciÃ³n de calefacciÃ³n y enfriamiento.\",\n      \"Verificar carga de refrigerante correcta mediante mÃ©todo de temperatura.\",\n      \"Programar control remoto y demostrar funciones al propietario.\",\n      \"Instalar cubierta de lÃ­neas para estÃ©tica exterior.\",\n      \"Limpiar todas las Ã¡reas de trabajo y remover escombros.\",\n      \"Proporcionar documentaciÃ³n de garantÃ­a e instrucciones de mantenimiento.\"\n    ],\n    options: {\n      \"tonnage\": {\n        label: \"TamaÃ±o del Sistema (BTU/Tonelaje)\",\n        choices: [\n          { value: \"9k\", label: \"9,000 BTU (3/4 Tonelada)\", scopeAddition: \"Instalar mini-split de 9,000 BTU para habitaciones hasta 350 pies cuadrados.\" },\n          { value: \"12k\", label: \"12,000 BTU (1 Tonelada)\", scopeAddition: \"Instalar mini-split de 12,000 BTU para habitaciones de 350-550 pies cuadrados.\" },\n          { value: \"18k\", label: \"18,000 BTU (1.5 Toneladas)\", scopeAddition: \"Instalar mini-split de 18,000 BTU para habitaciones de 550-800 pies cuadrados.\" },\n          { value: \"24k\", label: \"24,000 BTU (2 Toneladas)\", scopeAddition: \"Instalar mini-split de 24,000 BTU para habitaciones de 800-1100 pies cuadrados.\" },\n          { value: \"36k\", label: \"36,000 BTU (3 Toneladas)\", scopeAddition: \"Instalar mini-split de 36,000 BTU para Ã¡reas de 1100-1500 pies cuadrados.\" }\n        ]\n      },\n      \"efficiency\": {\n        label: \"Nivel de Eficiencia\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (18 SEER)\", scopeAddition: \"Instalar sistema mini-split estÃ¡ndar de 18 SEER.\" },\n          { value: \"high\", label: \"Alta Eficiencia (22 SEER)\", scopeAddition: \"Instalar sistema mini-split de alta eficiencia de 22 SEER.\" },\n          { value: \"ultra\", label: \"Ultra Eficiencia (25+ SEER)\", scopeAddition: \"Instalar mini-split ultra eficiente de 25+ SEER con tecnologÃ­a inversora.\" }\n        ]\n      },\n      \"ceiling-cassette\": { label: \"Cassette de Techo (en lugar de unidad de pared)\", scopeAddition: \"Instalar unidad estilo cassette empotrada en techo para apariencia discreta.\" },\n      \"floor-mount\": { label: \"Unidad de Piso (en lugar de unidad de pared)\", scopeAddition: \"Instalar unidad de consola montada en piso en lugar de cabezal montado en pared.\" },\n      \"wifi-control\": { label: \"Adaptador de Control Wi-Fi\", scopeAddition: \"Instalar adaptador Wi-Fi para control por telÃ©fono inteligente del sistema mini-split.\" },\n      \"electrical-circuit\": { label: \"Nuevo Circuito Dedicado\", scopeAddition: \"Instalar nuevo circuito dedicado de 20A o 30A desde el panel hasta ubicaciÃ³n de la unidad.\" }\n    }\n  },\n  \"mini-split-multi\": {\n    name: \"InstalaciÃ³n de Mini-Split â€“ Multi Zona\",\n    warranty: \"GarantÃ­a de 7 aÃ±os en compresor. GarantÃ­a de 5 aÃ±os en piezas. GarantÃ­a de 2 aÃ±os en mano de obra.\",\n    exclusions: [\"ActualizaciÃ³n del panel elÃ©ctrico\", \"Modificaciones estructurales mayores\", \"Permisos (si se requieren)\"],\n    baseScope: [\n      \"Evaluar y seleccionar ubicaciones Ã³ptimas para cada unidad interior y condensador exterior.\",\n      \"Instalar soportes de pared para cada manejador de aire interior.\",\n      \"Perforar agujeros a travÃ©s de paredes exteriores para paso de lÃ­neas de cada zona.\",\n      \"Instalar manguitos de pared y sellar con materiales impermeables.\",\n      \"Pasar lÃ­neas de refrigerante, lÃ­neas de drenaje y cables de control individuales para cada zona.\",\n      \"Instalar condensador multi-zona exterior en soporte de suelo o base compuesta.\",\n      \"Conectar todas las lÃ­neas de refrigerante a caja de distribuciÃ³n de derivaciÃ³n o directamente al condensador.\",\n      \"Usar accesorios de abocardado con especificaciones de torque para todas las conexiones.\",\n      \"Vaciar todo el sistema y probar fugas.\",\n      \"Cargar sistema con cantidad correcta de refrigerante segÃºn longitud total de lÃ­neas.\",\n      \"Cablear cada unidad interior a unidad exterior con cables de control.\",\n      \"Instalar nuevo circuito elÃ©ctrico dedicado para unidad exterior.\",\n      \"Conectar suministro elÃ©ctrico segÃºn requisitos del cÃ³digo.\",\n      \"Probar cada zona independientemente para operaciÃ³n de calefacciÃ³n y enfriamiento.\",\n      \"Verificar carga de refrigerante correcta y balance del sistema.\",\n      \"Programar control remoto de cada zona y demostrar al propietario.\",\n      \"Instalar cubiertas de lÃ­neas para estÃ©tica exterior.\",\n      \"Limpiar todas las Ã¡reas de trabajo y remover escombros.\",\n      \"Proporcionar documentaciÃ³n de garantÃ­a e instrucciones de mantenimiento para cada zona.\"\n    ],\n    options: {\n      \"zone-count\": {\n        label: \"NÃºmero de Zonas Interiores\",\n        choices: [\n          { value: \"2-zone\", label: \"2 Zonas\", scopeAddition: \"Instalar sistema multi-split de 2 zonas con control de temperatura individual por zona.\" },\n          { value: \"3-zone\", label: \"3 Zonas\", scopeAddition: \"Instalar sistema multi-split de 3 zonas con control de temperatura individual por zona.\" },\n          { value: \"4-zone\", label: \"4 Zonas\", scopeAddition: \"Instalar sistema multi-split de 4 zonas con control de temperatura individual por zona.\" },\n          { value: \"5-zone\", label: \"5 Zonas\", scopeAddition: \"Instalar sistema multi-split de 5 zonas con control de temperatura individual por zona.\" }\n        ]\n      },\n      \"outdoor-capacity\": {\n        label: \"Capacidad de Unidad Exterior\",\n        choices: [\n          { value: \"24k\", label: \"24,000 BTU (2 Toneladas)\", scopeAddition: \"Instalar unidad exterior de 24,000 BTU para aplicaciones multi-zona pequeÃ±as.\" },\n          { value: \"36k\", label: \"36,000 BTU (3 Toneladas)\", scopeAddition: \"Instalar unidad exterior de 36,000 BTU para aplicaciones multi-zona medianas.\" },\n          { value: \"48k\", label: \"48,000 BTU (4 Toneladas)\", scopeAddition: \"Instalar unidad exterior de 48,000 BTU para aplicaciones multi-zona grandes.\" },\n          { value: \"60k\", label: \"60,000 BTU (5 Toneladas)\", scopeAddition: \"Instalar unidad exterior de 60,000 BTU para aplicaciones multi-zona de toda la casa.\" }\n        ]\n      },\n      \"efficiency\": {\n        label: \"Nivel de Eficiencia\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (18 SEER)\", scopeAddition: \"Instalar sistema multi-zona estÃ¡ndar de 18 SEER.\" },\n          { value: \"high\", label: \"Alta Eficiencia (22 SEER)\", scopeAddition: \"Instalar sistema multi-zona de alta eficiencia de 22 SEER.\" },\n          { value: \"ultra\", label: \"Ultra Eficiencia (25+ SEER)\", scopeAddition: \"Instalar sistema multi-zona ultra eficiente de 25+ SEER con tecnologÃ­a inversora.\" }\n        ]\n      },\n      \"ceiling-cassettes\": { label: \"Cassettes de Techo (por unidad)\", scopeAddition: \"Actualizar unidades interiores a cassettes empotrados en techo para apariencia discreta.\" },\n      \"wifi-control\": { label: \"Control Wi-Fi para Todas las Zonas\", scopeAddition: \"Instalar adaptadores Wi-Fi para control por telÃ©fono inteligente de todas las zonas mini-split.\" },\n      \"electrical-upgrade\": { label: \"Nuevo Circuito Dedicado de 50A\", scopeAddition: \"Instalar nuevo circuito dedicado de 50A desde el panel hasta ubicaciÃ³n de unidad exterior.\" }\n    }\n  },\n  \"new-construction\": {\n    name: \"Nueva ConstrucciÃ³n â€“ InstalaciÃ³n Completa de HVAC\",\n    warranty: \"GarantÃ­a de 10 aÃ±os en piezas con registro. GarantÃ­a de 2 aÃ±os en mano de obra en todo el sistema.\",\n    exclusions: [\"Panel elÃ©ctrico (por electricista)\", \"LÃ­nea de gas a la estructura (por plomero)\", \"Aislamiento (por contratista de aislamiento)\", \"Permisos (responsabilidad del contratista general)\"],\n    baseScope: [\n      \"Revisar planos de construcciÃ³n y realizar cÃ¡lculo de carga Manual J.\",\n      \"DiseÃ±ar distribuciÃ³n de ductos segÃºn especificaciones Manual D.\",\n      \"Coordinar ubicaciÃ³n de equipos con contratista general.\",\n      \"Colocar calefactor o manejador de aire en espacio mecÃ¡nico designado.\",\n      \"Instalar plenum de suministro y lÃ­nea troncal segÃºn diseÃ±o.\",\n      \"Instalar plenum de retorno y sistema de ductos de retorno de aire.\",\n      \"Pasar ductos de derivaciÃ³n de suministro a cada habitaciÃ³n segÃºn plano.\",\n      \"Instalar botas de registro en todas las ubicaciones de suministro.\",\n      \"Instalar rejillas de retorno de aire y ductos.\",\n      \"Sellar todas las conexiones de ductos con masilla y/o cinta segÃºn cÃ³digo.\",\n      \"Instalar condensador exterior en base en ubicaciÃ³n designada.\",\n      \"Pasar lÃ­nea de refrigerante entre unidades interior y exterior.\",\n      \"Soldar todas las conexiones de refrigerante con soldadura de plata.\",\n      \"Probar presiÃ³n del sistema de refrigerante a 500 PSI.\",\n      \"Vaciar sistema a 500 micrones despuÃ©s de prueba de presiÃ³n.\",\n      \"Cargar sistema con refrigerante especificado por fÃ¡brica.\",\n      \"Conectar lÃ­nea de gas al calefactor (si es sistema de gas) y probar fugas.\",\n      \"Instalar termostato en ubicaciÃ³n especificada por propietario.\",\n      \"Probar operaciÃ³n de calefacciÃ³n y enfriamiento.\",\n      \"Balancear flujo de aire en todos los registros.\",\n      \"Verificar presiÃ³n estÃ¡tica y rendimiento del sistema.\",\n      \"Registrar garantÃ­a con el fabricante.\",\n      \"Proporcionar planos as-built al contratista general.\",\n      \"Proporcionar documentaciÃ³n del sistema al propietario.\"\n    ],\n    options: {\n      \"tonnage\": {\n        label: \"TamaÃ±o del Sistema (Tonelaje)\",\n        choices: [\n          { value: \"2-ton\", label: \"2 Toneladas\", scopeAddition: \"Instalar sistema de 2 toneladas para casas de aproximadamente 1000-1400 pies cuadrados.\" },\n          { value: \"2.5-ton\", label: \"2.5 Toneladas\", scopeAddition: \"Instalar sistema de 2.5 toneladas para casas de aproximadamente 1400-1800 pies cuadrados.\" },\n          { value: \"3-ton\", label: \"3 Toneladas\", scopeAddition: \"Instalar sistema de 3 toneladas para casas de aproximadamente 1800-2200 pies cuadrados.\" },\n          { value: \"3.5-ton\", label: \"3.5 Toneladas\", scopeAddition: \"Instalar sistema de 3.5 toneladas para casas de aproximadamente 2200-2600 pies cuadrados.\" },\n          { value: \"4-ton\", label: \"4 Toneladas\", scopeAddition: \"Instalar sistema de 4 toneladas para casas de aproximadamente 2600-3000 pies cuadrados.\" },\n          { value: \"5-ton\", label: \"5 Toneladas\", scopeAddition: \"Instalar sistema de 5 toneladas para casas de aproximadamente 3000-3600 pies cuadrados.\" }\n        ]\n      },\n      \"system-type\": {\n        label: \"Tipo de Sistema\",\n        choices: [\n          { value: \"gas-split\", label: \"Calefactor de Gas + A/C Split\", scopeAddition: \"Instalar calefactor de gas con condensador A/C compatible (sistema split).\" },\n          { value: \"heat-pump\", label: \"Sistema de Bomba de Calor\", scopeAddition: \"Instalar sistema de bomba de calor para calefacciÃ³n y enfriamiento completamente elÃ©ctricos.\" },\n          { value: \"dual-fuel\", label: \"Dual Fuel (Bomba de Calor + Respaldo de Gas)\", scopeAddition: \"Instalar sistema dual-fuel con bomba de calor primaria y calefactor de gas de respaldo.\" }\n        ]\n      },\n      \"efficiency\": {\n        label: \"Nivel de Eficiencia\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (14 SEER / 80% AFUE)\", scopeAddition: \"Instalar equipo de eficiencia estÃ¡ndar (A/C 14 SEER, calefactor 80% AFUE).\" },\n          { value: \"high\", label: \"Alta Eficiencia (16 SEER / 95% AFUE)\", scopeAddition: \"Instalar equipo de alta eficiencia (A/C 16 SEER, calefactor 95% AFUE).\" },\n          { value: \"ultra\", label: \"Ultra Eficiencia (18+ SEER / 98% AFUE)\", scopeAddition: \"Instalar equipo ultra eficiente (A/C 18+ SEER, calefactor modulante 98% AFUE).\" }\n        ]\n      },\n      \"duct-type\": {\n        label: \"Material de Ductos\",\n        choices: [\n          { value: \"flex\", label: \"Ducto Flexible\", scopeAddition: \"Instalar ducto flexible aislado R-6 para todos los conductos de suministro.\" },\n          { value: \"metal\", label: \"Ducto de LÃ¡mina MetÃ¡lica\", scopeAddition: \"Instalar ductos de lÃ¡mina metÃ¡lica con envoltura de aislamiento exterior.\" },\n          { value: \"combo\", label: \"Troncal MetÃ¡lico / Derivaciones Flexibles\", scopeAddition: \"Instalar lÃ­neas troncales de lÃ¡mina metÃ¡lica con conductos de derivaciÃ³n flexibles.\" }\n        ]\n      },\n      \"zoning\": { label: \"Sistema de ZonificaciÃ³n\", scopeAddition: \"Instalar sistema de compuertas de 2 zonas con panel de control de zona y mÃºltiples termostatos.\" },\n      \"smart-thermostat\": { label: \"Termostato Inteligente\", scopeAddition: \"Instalar termostato inteligente premium con sensores de habitaciÃ³n y control por aplicaciÃ³n.\" },\n      \"air-quality\": { label: \"Paquete de Calidad de Aire Interior\", scopeAddition: \"Instalar limpiador de aire de toda la casa, luz UV y humidificador de derivaciÃ³n.\" }\n    }\n  },\n  \"ductwork-repair\": {\n    name: \"ReparaciÃ³n / Reemplazo de Ductos Solamente\",\n    warranty: \"GarantÃ­a de 5 aÃ±os en instalaciÃ³n de ductos. GarantÃ­a de 2 aÃ±os en mano de obra.\",\n    exclusions: [\"Equipo HVAC\", \"Reemplazo de termostato\", \"Aislamiento (a menos que se especifique)\", \"Permisos (si se requieren)\"],\n    baseScope: [\n      \"Inspeccionar sistema de ductos existente para fugas, daÃ±os y condiciÃ³n del aislamiento.\",\n      \"Fotografiar y documentar condiciones existentes.\",\n      \"Desconectar y remover secciones de ductos daÃ±adas o fallidas.\",\n      \"Desechar materiales de ductos viejos apropiadamente.\",\n      \"Instalar nuevos ductos segÃºn especificaciones.\",\n      \"Conectar todos los conductos de suministro y retorno a plenums.\",\n      \"Sellar todas las conexiones con masilla y cinta listada UL.\",\n      \"Asegurar ductos con soportes y correas apropiados segÃºn cÃ³digo.\",\n      \"Reinstalar o instalar nuevos registros y rejillas.\",\n      \"Probar sistema para flujo de aire correcto en cada registro.\",\n      \"Verificar que no haya fugas de aire con inspecciÃ³n visual.\",\n      \"Limpiar todas las Ã¡reas de trabajo y remover escombros.\",\n      \"Proporcionar documentaciÃ³n antes/despuÃ©s al propietario.\"\n    ],\n    options: {\n      \"scope\": {\n        label: \"Alcance de ReparaciÃ³n\",\n        choices: [\n          { value: \"repair\", label: \"Reparar Secciones EspecÃ­ficas\", scopeAddition: \"Reparar o reemplazar secciones de ductos daÃ±adas segÃºn se identifiquen.\" },\n          { value: \"partial\", label: \"Reemplazo Parcial de Ductos (50%)\", scopeAddition: \"Reemplazar aproximadamente 50% del sistema de ductos existente.\" },\n          { value: \"full\", label: \"Reemplazo Completo de Ductos\", scopeAddition: \"Remover y reemplazar todo el sistema de ductos con materiales nuevos.\" }\n        ]\n      },\n      \"material\": {\n        label: \"Material de Ductos\",\n        choices: [\n          { value: \"flex\", label: \"Ducto Flexible (Aislado R-6)\", scopeAddition: \"Usar ducto flexible aislado R-6 para todos los conductos.\" },\n          { value: \"flex-r8\", label: \"Ducto Flexible (Aislado R-8)\", scopeAddition: \"Usar ducto flexible aislado R-8 para eficiencia mejorada.\" },\n          { value: \"metal\", label: \"LÃ¡mina MetÃ¡lica\", scopeAddition: \"Usar ductos de lÃ¡mina metÃ¡lica con aislamiento exterior.\" }\n        ]\n      },\n      \"duct-sealing\": { label: \"Sellado de Ductos Aeroseal\", scopeAddition: \"Aplicar tecnologÃ­a Aeroseal para sellar todas las fugas de ductos desde el interior del sistema.\" },\n      \"insulation-wrap\": { label: \"Aislamiento Adicional de Ductos\", scopeAddition: \"Envolver ductos accesibles con manta de aislamiento R-8 adicional.\" },\n      \"return-upgrade\": { label: \"Agregar Rejilla de Retorno de Aire\", scopeAddition: \"Instalar rejilla de retorno de aire adicional para mejorar el balance del flujo de aire.\" },\n      \"registers\": { label: \"Nuevos Registros y Rejillas\", scopeAddition: \"Reemplazar todos los registros de suministro y rejillas de retorno con unidades nuevas.\" }\n    }\n  },\n  \"iaq-upgrades\": {\n    name: \"Calidad de Aire Interior / Mejoras Adicionales\",\n    warranty: \"GarantÃ­a del fabricante en equipo. GarantÃ­a de 1 aÃ±o en mano de obra.\",\n    exclusions: [\"Reemplazo de equipo HVAC\", \"Modificaciones de ductos\", \"ActualizaciÃ³n del panel elÃ©ctrico\"],\n    baseScope: [\n      \"Evaluar compatibilidad del sistema HVAC existente.\",\n      \"Determinar ubicaciÃ³n Ã³ptima para instalaciÃ³n de equipo IAQ.\",\n      \"Apagar sistema HVAC y desconectar energÃ­a.\",\n      \"Instalar equipo de calidad de aire seleccionado segÃºn especificaciones del fabricante.\",\n      \"Realizar conexiones elÃ©ctricas necesarias.\",\n      \"Conectar al sistema de ductos existente o manejador de aire segÃºn se requiera.\",\n      \"Probar operaciÃ³n del equipo y verificar funciÃ³n correcta.\",\n      \"Demostrar operaciÃ³n y mantenimiento al propietario.\",\n      \"Proporcionar documentaciÃ³n de garantÃ­a y calendario de mantenimiento.\",\n      \"Limpiar Ã¡rea de trabajo.\"\n    ],\n    options: {\n      \"uv-light\": { label: \"Luz Germicida UV-C\", scopeAddition: \"Instalar luz germicida UV-C en manejador de aire para matar moho, bacterias y virus.\" },\n      \"air-cleaner\": {\n        label: \"Limpiador de Aire de Toda la Casa\",\n        choices: [\n          { value: \"media\", label: \"Limpiador de Aire de Medios (MERV 11-13)\", scopeAddition: \"Instalar gabinete de limpiador de aire de medios de 4\\\" o 5\\\" con filtro MERV 11-13.\" },\n          { value: \"electronic\", label: \"Limpiador de Aire ElectrÃ³nico\", scopeAddition: \"Instalar limpiador de aire electrÃ³nico para eliminaciÃ³n avanzada de partÃ­culas.\" },\n          { value: \"hepa\", label: \"Sistema de DerivaciÃ³n HEPA\", scopeAddition: \"Instalar sistema de filtraciÃ³n de derivaciÃ³n HEPA verdadero para limpieza de aire de grado mÃ©dico.\" }\n        ]\n      },\n      \"humidifier\": {\n        label: \"Humidificador de Toda la Casa\",\n        choices: [\n          { value: \"bypass\", label: \"Humidificador de DerivaciÃ³n\", scopeAddition: \"Instalar humidificador de derivaciÃ³n con humidistato manual.\" },\n          { value: \"powered\", label: \"Humidificador de Flujo Motorizado\", scopeAddition: \"Instalar humidificador de flujo motorizado con humidistato automÃ¡tico.\" },\n          { value: \"steam\", label: \"Humidificador de Vapor\", scopeAddition: \"Instalar humidificador de vapor para control preciso de humedad.\" }\n        ]\n      },\n      \"dehumidifier\": { label: \"Deshumidificador de Toda la Casa\", scopeAddition: \"Instalar deshumidificador de toda la casa integrado con sistema HVAC.\" },\n      \"erv-hrv\": {\n        label: \"Ventilador de RecuperaciÃ³n de EnergÃ­a/Calor\",\n        choices: [\n          { value: \"hrv\", label: \"Ventilador de RecuperaciÃ³n de Calor (HRV)\", scopeAddition: \"Instalar HRV para ventilaciÃ³n balanceada con recuperaciÃ³n de calor (climas frÃ­os).\" },\n          { value: \"erv\", label: \"Ventilador de RecuperaciÃ³n de EnergÃ­a (ERV)\", scopeAddition: \"Instalar ERV para ventilaciÃ³n balanceada con recuperaciÃ³n de calor y humedad (climas hÃºmedos).\" }\n        ]\n      },\n      \"ionizer\": { label: \"Sistema de IonizaciÃ³n Bi-Polar\", scopeAddition: \"Instalar sistema de ionizaciÃ³n bi-polar de punta de aguja en ductos.\" }\n    }\n  },\n  \"maintenance-tuneup\": {\n    name: \"Mantenimiento / Puesta a Punto\",\n    warranty: \"GarantÃ­a de 30 dÃ­as en reparaciones realizadas. Sin garantÃ­a solo en diagnÃ³sticos.\",\n    exclusions: [\"Reemplazo de piezas (cotizado por separado)\", \"Refrigerante (si se necesita)\", \"Reparaciones mayores\"],\n    baseScope: [\n      \"Llegar a tiempo y presentar alcance de visita de mantenimiento.\",\n      \"Inspeccionar y reemplazar filtro de aire (filtro estÃ¡ndar incluido).\",\n      \"Inspeccionar operaciÃ³n y calibraciÃ³n del termostato.\",\n      \"Revisar conexiones elÃ©ctricas y apretar segÃºn sea necesario.\",\n      \"Medir voltaje y amperaje en todos los componentes.\",\n      \"Inspeccionar y limpiar serpentÃ­n del condensador (exterior).\",\n      \"Limpiar escombros alrededor de unidad exterior.\",\n      \"Revisar presiÃ³n de refrigerante y anotar cualquier preocupaciÃ³n.\",\n      \"Inspeccionar serpentÃ­n evaporador (si es accesible).\",\n      \"Probar drenaje de condensado y despejar si estÃ¡ obstruido.\",\n      \"Lubricar partes mÃ³viles segÃºn sea necesario.\",\n      \"Probar operaciÃ³n de calefacciÃ³n y enfriamiento.\",\n      \"Medir diferencial de temperatura (enfriamiento o calefacciÃ³n).\",\n      \"Inspeccionar ductos para problemas visibles.\",\n      \"Proporcionar reporte escrito de hallazgos y recomendaciones.\",\n      \"Responder preguntas del propietario sobre condiciÃ³n del sistema.\"\n    ],\n    options: {\n      \"service-type\": {\n        label: \"Tipo de Servicio\",\n        choices: [\n          { value: \"cooling\", label: \"Puesta a Punto Solo de A/C\", scopeAddition: \"Realizar puesta a punto e inspecciÃ³n del sistema de enfriamiento.\" },\n          { value: \"heating\", label: \"Puesta a Punto Solo de CalefacciÃ³n\", scopeAddition: \"Realizar puesta a punto e inspecciÃ³n del sistema de calefacciÃ³n.\" },\n          { value: \"both\", label: \"Puesta a Punto Completa de HVAC\", scopeAddition: \"Realizar puesta a punto completa del sistema de calefacciÃ³n y enfriamiento.\" }\n        ]\n      },\n      \"coil-cleaning\": { label: \"Limpieza Profunda de SerpentÃ­n del Condensador\", scopeAddition: \"Realizar limpieza quÃ­mica del serpentÃ­n del condensador para eficiencia mejorada.\" },\n      \"evap-coil-cleaning\": { label: \"Limpieza del SerpentÃ­n Evaporador\", scopeAddition: \"Realizar limpieza con espuma del serpentÃ­n evaporador (si es accesible).\" },\n      \"capacitor-check\": { label: \"Prueba y Reporte de Capacitor\", scopeAddition: \"Probar capacitores de arranque y funcionamiento y proporcionar lecturas en reporte.\" },\n      \"refrigerant-check\": { label: \"AnÃ¡lisis Completo de Refrigerante\", scopeAddition: \"Realizar anÃ¡lisis detallado de refrigerante con lecturas de sobrecalentamiento/subenfriamiento.\" },\n      \"service-agreement\": { label: \"Acuerdo de Servicio Anual\", scopeAddition: \"Inscribirse en acuerdo de mantenimiento anual para 2 visitas por aÃ±o con programaciÃ³n prioritaria.\" }\n    }\n  },\n  \"service-diagnostic\": {\n    name: \"Llamada de Servicio / Solo DiagnÃ³stico\",\n    warranty: \"Tarifa de diagnÃ³stico aplicada a reparaciÃ³n si se aprueba el trabajo.\",\n    exclusions: [\"Piezas y materiales\", \"Reparaciones (cotizadas por separado)\", \"Refrigerante\"],\n    baseScope: [\n      \"Responder a solicitud de servicio dentro de ventana programada.\",\n      \"Discutir sÃ­ntomas reportados con propietario.\",\n      \"Realizar inspecciÃ³n visual de todo el sistema HVAC.\",\n      \"Revisar operaciÃ³n y configuraciones del termostato.\",\n      \"Inspeccionar conexiones y componentes elÃ©ctricos.\",\n      \"Medir voltaje y amperaje donde aplique.\",\n      \"Revisar presiones de refrigerante (si es problema de enfriamiento).\",\n      \"Inspeccionar drenaje de condensado.\",\n      \"Probar secuencia de encendido (si es problema de calefacciÃ³n).\",\n      \"Usar herramientas de diagnÃ³stico para identificar falla.\",\n      \"Explicar hallazgos y diagnÃ³stico al propietario.\",\n      \"Proporcionar estimaciÃ³n escrita para reparaciones recomendadas.\",\n      \"Responder preguntas sobre opciones de reparaciÃ³n.\",\n      \"Aplicar tarifa de diagnÃ³stico a reparaciÃ³n si se aprueba el trabajo.\"\n    ],\n    options: {\n      \"urgency\": {\n        label: \"Urgencia del Servicio\",\n        choices: [\n          { value: \"standard\", label: \"EstÃ¡ndar (PrÃ³ximo Disponible)\", scopeAddition: \"Programar servicio durante prÃ³xima ventana de cita disponible.\" },\n          { value: \"priority\", label: \"Prioritario (Mismo DÃ­a)\", scopeAddition: \"Servicio prioritario el mismo dÃ­a (sujeto a disponibilidad).\" },\n          { value: \"emergency\", label: \"Emergencia (Fuera de Horario)\", scopeAddition: \"Llamada de servicio de emergencia fuera de horario (noches/fines de semana).\" }\n        ]\n      },\n      \"system-type\": {\n        label: \"Sistema a Diagnosticar\",\n        choices: [\n          { value: \"cooling\", label: \"Sistema de Enfriamiento (A/C)\", scopeAddition: \"Diagnosticar problema del sistema de aire acondicionado.\" },\n          { value: \"heating\", label: \"Sistema de CalefacciÃ³n (Calefactor/Bomba de Calor)\", scopeAddition: \"Diagnosticar problema del sistema de calefacciÃ³n.\" },\n          { value: \"both\", label: \"Sistema HVAC Completo\", scopeAddition: \"Diagnosticar sistema HVAC completo para mÃºltiples problemas.\" }\n        ]\n      },\n      \"minor-repair\": { label: \"ProvisiÃ³n para ReparaciÃ³n Menor\", scopeAddition: \"Incluir hasta $100 en reparaciones menores (fusibles, resets, limpieza) si se necesita durante visita.\" },\n      \"second-opinion\": { label: \"DocumentaciÃ³n de Segunda OpiniÃ³n\", scopeAddition: \"Proporcionar reporte escrito detallado con fotos para propÃ³sitos de segunda opiniÃ³n.\" }\n    }\n  }\n};\n\n// Helper function to get Spanish translation for HVAC templates\nexport function getHvacJobTypeEs(jobTypeId: string) {\n  return hvacJobTypesEs[jobTypeId];\n}\n\n// Spanish translations for Interior Painting job types\nexport const paintingJobTypesEs: Record<string, { name: string; baseScope: string[]; warranty?: string; exclusions?: string[]; options: Record<string, { label: string; scopeAddition?: string; choices?: { value: string; label: string; scopeAddition?: string }[] }> }> = {\n  \"interior-room\": {\n    name: \"Pintura de HabitaciÃ³n Individual\",\n    warranty: \"GarantÃ­a de 1 aÃ±o contra descascarado, descamaciÃ³n o ampollas.\",\n    exclusions: [\"ReparaciÃ³n de daÃ±os por agua\", \"RemociÃ³n de papel tapiz\", \"Abatimiento de pintura con plomo\"],\n    baseScope: [\n      \"Mover muebles al centro de la habitaciÃ³n y cubrir con lonas protectoras.\",\n      \"Encintar pisos, molduras, tomacorrientes y ventanas con cinta y plÃ¡stico.\",\n      \"Reparar hoyos menores, clavos saltados y grietas finas con compuesto de resane.\",\n      \"Lijar reparaciones hasta quedar lisas y aplicar imprimador en puntos reparados.\",\n      \"Sellar espacios entre molduras y paredes con masilla pintable.\",\n      \"Aplicar dos capas de pintura lÃ¡tex premium para interiores (solo paredes).\",\n      \"Hacer cortes en todos los bordes, esquinas y alrededor de accesorios.\",\n      \"Remover todos los materiales de enmascarar; limpiar goteos de pintura.\",\n      \"Regresar muebles a sus posiciones originales.\",\n      \"Retoque final y recorrido de inspecciÃ³n.\"\n    ],\n    options: {\n      \"room-area\": {\n        label: \"Ãrea de la Casa\",\n        choices: [\n          { value: \"basement\", label: \"SÃ³tano\", scopeAddition: \"Pintar habitaciÃ³n designada del sÃ³tano.\" },\n          { value: \"mud-room\", label: \"Cuarto de Entrada\", scopeAddition: \"Pintar cuarto de entrada / Ã¡rea de vestÃ­bulo.\" },\n          { value: \"master-bathroom\", label: \"BaÃ±o Principal\", scopeAddition: \"Pintar baÃ±o principal incluyendo preparaciÃ³n resistente a la humedad para Ã¡rea de alta humedad.\" },\n          { value: \"dining-room\", label: \"Comedor\", scopeAddition: \"Pintar comedor.\" }\n        ]\n      },\n      \"trim-doors\": { label: \"Incluir Molduras y Puertas\", scopeAddition: \"Lijar, imprimar y aplicar pintura semi-brillante a todos los zÃ³calos, marcos de puertas y hojas de puertas.\" },\n      \"ceilings\": { label: \"Incluir Techo\", scopeAddition: \"Aplicar dos capas de pintura mate para techo en toda la superficie del techo.\" },\n      \"closets\": { label: \"Incluir ClÃ³set(s)\", scopeAddition: \"Pintar paredes interiores y techo del clÃ³set o clÃ³sets en la habitaciÃ³n.\" },\n      \"accent-wall\": { label: \"Pared de Acento (color diferente)\", scopeAddition: \"Aplicar pintura de color contrastante en pared de acento designada.\" }\n    }\n  },\n  \"whole-house-interior\": {\n    name: \"Pintura Interior de Toda la Casa\",\n    warranty: \"GarantÃ­a de 2 aÃ±os contra descascarado, descamaciÃ³n o ampollas.\",\n    exclusions: [\"ReparaciÃ³n extensa de paneles de yeso\", \"RemociÃ³n de techo de palomitas\", \"Abatimiento de pintura con plomo\"],\n    baseScope: [\n      \"Proteger todos los pisos con lonas y plÃ¡stico protector.\",\n      \"Mover muebles segÃºn sea necesario; cubrir con materiales protectores.\",\n      \"Encintar todas las ventanas, puertas, gabinetes y accesorios.\",\n      \"Reparar todos los hoyos, grietas y clavos saltados en toda la casa.\",\n      \"Lijar reparaciones y aplicar imprimador a las reparaciones.\",\n      \"Sellar todos los espacios entre molduras y paredes.\",\n      \"Aplicar dos capas de lÃ¡tex premium para interiores en todas las superficies de pared.\",\n      \"Hacer cortes en todos los bordes y alrededor de todos los accesorios.\",\n      \"Aplicar pintura semi-brillante a todos los marcos y molduras de puertas.\",\n      \"Pintar todas las puertas interiores (ambos lados si se solicita).\",\n      \"Pintar todos los zÃ³calos en toda la casa.\",\n      \"Retocar todas las Ã¡reas segÃºn sea necesario.\",\n      \"Remover todos los materiales de enmascarar y protecciÃ³n.\",\n      \"Limpieza final y recorrido de inspecciÃ³n.\"\n    ],\n    options: {\n      \"ceilings-all\": { label: \"Todos los Techos\", scopeAddition: \"Aplicar dos capas de pintura mate para techo en todos los techos de la casa.\" },\n      \"staircase\": { label: \"Escalera y Barandal\", scopeAddition: \"Lijar y pintar barandales, balaustres y postes de escalera.\" },\n      \"cabinet-paint\": { label: \"Pintura de Gabinetes de Cocina\", scopeAddition: \"Preparar, imprimar y pintar cajas, puertas y cajones de gabinetes de cocina (agregar 3-4 dÃ­as).\" }\n    }\n  },\n  \"exterior-paint\": {\n    name: \"Pintura Exterior de Casa\",\n    warranty: \"GarantÃ­a de 5 aÃ±os contra descascarado, descamaciÃ³n o ampollas.\",\n    exclusions: [\"Reparaciones de carpinterÃ­a mÃ¡s allÃ¡ de parcheo menor\", \"Abatimiento de pintura con plomo\", \"Tinte de terraza/cerca\"],\n    baseScope: [\n      \"Lavar a presiÃ³n todas las superficies exteriores para remover suciedad y moho.\",\n      \"Permitir que las superficies sequen completamente antes de pintar.\",\n      \"Raspar y lijar toda la pintura suelta o descascarada.\",\n      \"Sellar todos los espacios alrededor de ventanas, puertas y molduras.\",\n      \"Imprimar madera al descubierto y reparaciones con imprimador exterior.\",\n      \"Encintar ventanas, puertas y accesorios con cinta y plÃ¡stico.\",\n      \"Aplicar dos capas de pintura exterior premium al revestimiento/cuerpo.\",\n      \"Aplicar color contrastante a molduras, fascia y sofitos.\",\n      \"Pintar puerta principal con color de acento (si se selecciona).\",\n      \"Pintar contraventanas y elementos decorativos.\",\n      \"Remover todos los materiales de enmascarar.\",\n      \"Retocar cualquier Ã¡rea faltante o goteos.\",\n      \"Limpieza final y remociÃ³n de escombros.\"\n    ],\n    options: {\n      \"pressure-wash-only\": { label: \"Lavar a PresiÃ³n Terraza/Patio\", scopeAddition: \"Lavar a presiÃ³n superficie de terraza y/o patio como parte del proyecto de pintura.\" },\n      \"gutter-paint\": { label: \"Pintar Canaletas y Bajantes\", scopeAddition: \"Preparar y pintar todas las canaletas y bajantes para combinar con color de molduras.\" },\n      \"front-door-accent\": { label: \"Puerta Principal de Acento\", scopeAddition: \"Lijar, imprimar y pintar puerta principal con color de acento premium.\" }\n    }\n  }\n};\n\n// Spanish translations for Landscaping job types\nexport const landscapingJobTypesEs: Record<string, { name: string; baseScope: string[]; warranty?: string; exclusions?: string[]; options: Record<string, { label: string; scopeAddition?: string; choices?: { value: string; label: string; scopeAddition?: string }[] }> }> = {\n  \"full-yard-makeover\": {\n    name: \"RenovaciÃ³n Completa â€“ Patio Delantero y Trasero\",\n    warranty: \"GarantÃ­a de 1 aÃ±o en todas las plantas (con cuidado adecuado). GarantÃ­a de 2 aÃ±os en pavimento duro y mano de obra de riego.\",\n    exclusions: [\n      \"Tarifas de permisos y aprobaciÃ³n de HOA\",\n      \"RemociÃ³n de Ã¡rboles con diÃ¡metro mayor a 24 pulgadas\",\n      \"Muros de contenciÃ³n estructurales mayores a 4 pies\",\n      \"ReubicaciÃ³n de servicios subterrÃ¡neos\",\n      \"InstalaciÃ³n de cerca\"\n    ],\n    baseScope: [\n      \"Consulta inicial en sitio y revisiÃ³n de diseÃ±o con propietario.\",\n      \"Llamar al 811 para ubicaciÃ³n de servicios previo a cualquier excavaciÃ³n.\",\n      \"Remover plantas existentes, cÃ©sped y escombros segÃºn especificaciones del plan.\",\n      \"Nivelar y emparejar jardÃ­n para drenaje adecuado alejÃ¡ndose de la estructura.\",\n      \"Instalar tela de paisajismo en Ã¡reas designadas.\",\n      \"Preparar macizos de plantaciÃ³n con enmienda de suelo y composta.\",\n      \"Instalar todos los Ã¡rboles, arbustos y plantas perennes segÃºn plan de paisajismo.\",\n      \"Inst","path":null,"size_bytes":360000,"size_tokens":null},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","path":null,"size_bytes":2333,"size_tokens":null},"server/stripeClient.ts":{"content":"import Stripe from 'stripe';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY\n    ? 'repl ' + process.env.REPL_IDENTITY\n    : process.env.WEB_REPL_RENEWAL\n      ? 'depl ' + process.env.WEB_REPL_RENEWAL\n      : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\n  }\n\n  const connectorName = 'stripe';\n  const isProduction = process.env.REPLIT_DEPLOYMENT === '1';\n  const targetEnvironment = isProduction ? 'production' : 'development';\n\n  const url = new URL(`https://${hostname}/api/v2/connection`);\n  url.searchParams.set('include_secrets', 'true');\n  url.searchParams.set('connector_names', connectorName);\n  url.searchParams.set('environment', targetEnvironment);\n\n  const response = await fetch(url.toString(), {\n    headers: {\n      'Accept': 'application/json',\n      'X_REPLIT_TOKEN': xReplitToken\n    }\n  });\n\n  const data = await response.json();\n  \n  connectionSettings = data.items?.[0];\n\n  if (!connectionSettings || (!connectionSettings.settings.publishable || !connectionSettings.settings.secret)) {\n    throw new Error(`Stripe ${targetEnvironment} connection not found`);\n  }\n\n  return {\n    publishableKey: connectionSettings.settings.publishable,\n    secretKey: connectionSettings.settings.secret,\n  };\n}\n\nexport async function getUncachableStripeClient() {\n  const { secretKey } = await getCredentials();\n\n  return new Stripe(secretKey);\n}\n\nexport async function getStripePublishableKey() {\n  const { publishableKey } = await getCredentials();\n  return publishableKey;\n}\n\nexport async function getStripeSecretKey() {\n  const { secretKey } = await getCredentials();\n  return secretKey;\n}\n\nexport function createStripeClientWithKey(secretKey: string) {\n  return new Stripe(secretKey);\n}\n\nlet stripeSync: any = null;\n\nexport async function getStripeSync() {\n  if (!stripeSync) {\n    const { StripeSync } = await import('stripe-replit-sync');\n    const secretKey = await getStripeSecretKey();\n\n    stripeSync = new StripeSync({\n      poolConfig: {\n        connectionString: process.env.DATABASE_URL!,\n        max: 2,\n      },\n      stripeSecretKey: secretKey,\n    });\n  }\n  return stripeSync;\n}\n","path":null,"size_bytes":2275,"size_tokens":null},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","path":null,"size_bytes":862,"size_tokens":null},"client/src/components/paywall-modal.tsx":{"content":"import { useState } from \"react\";\nimport { Lock, Check, Loader2, Zap, Package, Shield, Star, Users } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface PaywallModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onUnlock: () => void;\n}\n\ntype PricingOption = 'single' | 'pack';\n\nexport default function PaywallModal({ isOpen, onClose, onUnlock }: PaywallModalProps) {\n  const [selectedOption, setSelectedOption] = useState<PricingOption>('pack');\n  const [checkoutLoading, setCheckoutLoading] = useState(false);\n\n  const handleCheckout = async () => {\n    setCheckoutLoading(true);\n    try {\n      const response = await fetch('/api/stripe/checkout', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n          productType: selectedOption \n        }),\n      });\n      \n      const data = await response.json();\n      \n      if (data.url) {\n        window.location.href = data.url;\n      } else {\n        console.error('No checkout URL returned');\n      }\n    } catch (error) {\n      console.error('Checkout error:', error);\n    } finally {\n      setCheckoutLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-lg border-none shadow-2xl p-0 overflow-hidden\">\n        <div className=\"bg-slate-900 p-6 text-center text-white relative overflow-hidden\">\n          <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-secondary to-transparent opacity-50\"></div>\n          <div className=\"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm\">\n            <Lock className=\"w-8 h-8 text-secondary\" />\n          </div>\n          <DialogTitle className=\"text-2xl font-heading font-bold mb-2\">Unlock Full Proposal</DialogTitle>\n          <p className=\"text-slate-300 text-sm\">\n            Get the complete, unblurred PDF and editable text to send to your client immediately.\n          </p>\n        </div>\n\n        <div className=\"p-6 bg-white\">\n          <div className=\"grid gap-4\">\n            <div \n              data-testid=\"option-single\"\n              onClick={() => setSelectedOption('single')}\n              className={`border rounded-xl p-5 flex items-start gap-4 hover:border-primary transition-all cursor-pointer group ${\n                selectedOption === 'single' ? 'border-primary bg-primary/5 shadow-md' : 'border-slate-200'\n              }`}\n            >\n              <div className={`w-12 h-12 rounded-lg flex items-center justify-center shrink-0 ${\n                selectedOption === 'single' ? 'bg-primary text-white' : 'bg-slate-100 text-slate-600 group-hover:bg-primary/10'\n              }`}>\n                <Zap className=\"w-6 h-6\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center justify-between gap-2\">\n                  <h4 className=\"font-bold text-slate-900 text-lg\">Single Pro Proposal</h4>\n                  <span className=\"font-heading font-bold text-2xl text-primary whitespace-nowrap\">\n                    $12\n                  </span>\n                </div>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  Perfect for one-off jobs. Unlock this proposal instantly.\n                </p>\n              </div>\n            </div>\n\n            <div \n              data-testid=\"option-pack\"\n              onClick={() => setSelectedOption('pack')}\n              className={`border-2 rounded-xl p-5 flex items-start gap-4 relative cursor-pointer ${\n                selectedOption === 'pack' ? 'border-secondary bg-orange-50/50 shadow-lg' : 'border-secondary/40 bg-orange-50/20'\n              }`}\n            >\n              <div className=\"absolute -top-3 left-4 bg-secondary text-secondary-foreground text-xs font-bold px-3 py-1 rounded-full shadow-sm\">\n                BEST VALUE - SAVE 67%\n              </div>\n              <div className={`w-12 h-12 rounded-lg flex items-center justify-center shrink-0 ${\n                selectedOption === 'pack' ? 'bg-secondary text-white' : 'bg-orange-100 text-secondary'\n              }`}>\n                <Package className=\"w-6 h-6\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center justify-between gap-2\">\n                  <h4 className=\"font-bold text-slate-900 text-lg\">Contractor Pack</h4>\n                  <div className=\"text-right whitespace-nowrap\">\n                    <span className=\"font-heading font-bold text-2xl text-secondary\">$39</span>\n                    <span className=\"text-sm text-muted-foreground ml-1 line-through\">$120</span>\n                  </div>\n                </div>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  <span className=\"font-semibold text-secondary\">10 proposal credits</span> â€¢ Valid for 6 months\n                </p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Just $3.90 per proposal - ideal for busy contractors\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Before/After Visual Comparison */}\n          <div className=\"mt-6 rounded-lg border border-slate-200 overflow-hidden\">\n            <div className=\"grid grid-cols-2\">\n              <div className=\"p-4 bg-slate-50 border-r border-slate-200 text-center\">\n                <div className=\"text-xs text-slate-500 uppercase font-semibold mb-2\">Before</div>\n                <div className=\"bg-white rounded p-3 shadow-inner relative\">\n                  <div className=\"h-2 w-full bg-slate-200 rounded mb-2\"></div>\n                  <div className=\"h-2 w-3/4 bg-slate-200 rounded mb-2\"></div>\n                  <div className=\"h-6 w-full bg-slate-200 rounded blur-sm\"></div>\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <span className=\"text-xs text-slate-400 font-medium\">Blurred</span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"p-4 bg-green-50/50 text-center\">\n                <div className=\"text-xs text-green-600 uppercase font-semibold mb-2\">After</div>\n                <div className=\"bg-white rounded p-3 shadow-inner\">\n                  <div className=\"h-2 w-full bg-primary/30 rounded mb-2\"></div>\n                  <div className=\"h-2 w-3/4 bg-primary/30 rounded mb-2\"></div>\n                  <div className=\"h-6 w-full bg-green-200 rounded flex items-center justify-center\">\n                    <span className=\"text-[10px] text-green-700 font-bold\">$4,500 - $6,200</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <ul className=\"mt-6 space-y-2\">\n            {[\n              \"Remove all watermarks & blurs\",\n              \"Export to professional PDF\",\n              \"Save to your dashboard\",\n              \"Email directly to client\"\n            ].map((item, i) => (\n              <li key={i} className=\"flex items-center gap-2 text-sm text-slate-600\">\n                <Check className=\"w-4 h-4 text-green-500 shrink-0\" /> {item}\n              </li>\n            ))}\n          </ul>\n\n          {/* Trust Badges */}\n          <div className=\"mt-6 flex items-center justify-center gap-6 py-3 border-y border-slate-100\">\n            <div className=\"flex items-center gap-1.5 text-xs text-slate-500\">\n              <Users className=\"w-4 h-4 text-primary\" />\n              <span><strong className=\"text-slate-700\">15,000+</strong> proposals</span>\n            </div>\n            <div className=\"flex items-center gap-1.5 text-xs text-slate-500\">\n              <Star className=\"w-4 h-4 text-amber-400 fill-amber-400\" />\n              <span><strong className=\"text-slate-700\">4.9</strong> rating</span>\n            </div>\n            <div className=\"flex items-center gap-1.5 text-xs text-slate-500\">\n              <Shield className=\"w-4 h-4 text-green-500\" />\n              <span>Secure</span>\n            </div>\n          </div>\n\n          <Button \n            data-testid=\"button-unlock\"\n            onClick={handleCheckout}\n            disabled={checkoutLoading}\n            className=\"w-full mt-6 bg-primary hover:bg-primary/90 text-white font-bold py-6 text-lg shadow-lg shadow-primary/20\"\n          >\n            {checkoutLoading ? (\n              <>\n                <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\n                Processing...\n              </>\n            ) : selectedOption === 'pack' ? (\n              'Get 10 Credits for $39'\n            ) : (\n              'Unlock for $12'\n            )}\n          </Button>\n          \n          <p className=\"text-center text-xs text-muted-foreground mt-4\">\n            Secure payment via Stripe. One-time purchase, no subscription.\n          </p>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":9085,"size_tokens":null},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","path":null,"size_bytes":2209,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"client/src/components/layout.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Hammer, Menu, X } from \"lucide-react\";\nimport { LanguageSwitcher } from \"@/components/language-switcher\";\nimport { useLanguage } from \"@/hooks/useLanguage\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { OnboardingModal } from \"@/components/onboarding-modal\";\n\nexport default function Layout({ children }: { children: React.ReactNode }) {\n  const [location] = useLocation();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const { t } = useLanguage();\n\n  const { data: user } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/auth/user\");\n      if (!res.ok) return null;\n      return res.json();\n    },\n    retry: false,\n  });\n\n  const showOnboarding = Boolean(user && !user.onboardingCompleted);\n\n  return (\n    <div className=\"min-h-screen flex flex-col font-sans\">\n      <header className=\"border-b border-border bg-white sticky top-0 z-50\">\n        <div className=\"container mx-auto px-4 h-16 flex items-center justify-between\">\n          <Link href=\"/\" className=\"flex items-center gap-2 hover:opacity-80 transition-opacity\">\n            <div className=\"bg-secondary p-1.5 rounded-sm\">\n              <Hammer className=\"w-5 h-5 text-primary-foreground\" />\n            </div>\n            <span className=\"text-xl font-heading font-bold text-primary uppercase tracking-tight\">\n              ScopeGen\n            </span>\n          </Link>\n\n          {/* Desktop Navigation - Alphabetical Order */}\n          <nav className=\"hidden md:flex items-center gap-6\">\n            <Link href=\"/dashboard\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\">\n              {t.nav.dashboard}\n            </Link>\n            <a href=\"/#how-it-works\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\">{t.nav.howItWorks}</a>\n            <Link href=\"/market-pricing\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\" data-testid=\"nav-market-pricing\">\n              Market Pricing\n            </Link>\n            <a href=\"/#pricing\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\">{t.pricing.title}</a>\n            {(user?.subscriptionPlan === 'pro' || user?.subscriptionPlan === 'crew') && (\n              <Link href=\"/pricing-insights\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\">\n                Pricing Insights\n              </Link>\n            )}\n            {user?.subscriptionPlan === 'crew' && (\n              <Link href=\"/search-console\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\">\n                Search Console\n              </Link>\n            )}\n            <Link href=\"/settings\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\">\n              {t.nav.settings}\n            </Link>\n            {user?.subscriptionPlan === 'crew' && (\n              <Link href=\"/crew\" className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors\">\n                Team\n              </Link>\n            )}\n            <LanguageSwitcher />\n            {location === \"/\" && (\n              <Link href=\"/app\" className=\"bg-primary text-primary-foreground px-4 py-2 rounded-md text-sm font-semibold hover:bg-primary/90 transition-colors\">\n                {t.hero.cta}\n              </Link>\n            )}\n          </nav>\n\n          {/* Mobile Menu Button */}\n          <button\n            className=\"md:hidden p-2 -mr-2 text-slate-600 hover:text-primary transition-colors\"\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            aria-label=\"Toggle menu\"\n            data-testid=\"button-mobile-menu\"\n          >\n            {mobileMenuOpen ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\n          </button>\n        </div>\n\n        {/* Mobile Navigation - Alphabetical Order */}\n        {mobileMenuOpen && (\n          <nav className=\"md:hidden border-t border-border bg-white animate-in slide-in-from-top-2 duration-200\">\n            <div className=\"container mx-auto px-4 py-4 flex flex-col gap-4\">\n              <Link \n                href=\"/dashboard\" \n                className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                {t.nav.dashboard}\n              </Link>\n              <a \n                href=\"/#how-it-works\" \n                className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                {t.nav.howItWorks}\n              </a>\n              <Link \n                href=\"/market-pricing\" \n                className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                onClick={() => setMobileMenuOpen(false)}\n                data-testid=\"nav-market-pricing-mobile\"\n              >\n                Market Pricing\n              </Link>\n              <a \n                href=\"/#pricing\" \n                className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                {t.pricing.title}\n              </a>\n              {(user?.subscriptionPlan === 'pro' || user?.subscriptionPlan === 'crew') && (\n                <Link \n                  href=\"/pricing-insights\" \n                  className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                  onClick={() => setMobileMenuOpen(false)}\n                >\n                  Pricing Insights\n                </Link>\n              )}\n              {user?.subscriptionPlan === 'crew' && (\n                <Link \n                  href=\"/search-console\" \n                  className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                  onClick={() => setMobileMenuOpen(false)}\n                >\n                  Search Console\n                </Link>\n              )}\n              <Link \n                href=\"/settings\" \n                className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                {t.nav.settings}\n              </Link>\n              {user?.subscriptionPlan === 'crew' && (\n                <Link \n                  href=\"/crew\" \n                  className=\"text-base font-medium text-slate-700 hover:text-primary transition-colors py-2\"\n                  onClick={() => setMobileMenuOpen(false)}\n                >\n                  Team\n                </Link>\n              )}\n              <div className=\"py-2\">\n                <LanguageSwitcher />\n              </div>\n              <Link \n                href=\"/app\" \n                className=\"bg-primary text-primary-foreground px-4 py-3 rounded-md text-base font-semibold hover:bg-primary/90 transition-colors text-center mt-2\"\n                onClick={() => setMobileMenuOpen(false)}\n              >\n                {t.hero.cta}\n              </Link>\n            </div>\n          </nav>\n        )}\n      </header>\n\n      <main className=\"flex-1 flex flex-col\">\n        {children}\n      </main>\n\n      <footer className=\"bg-slate-900 text-slate-400 py-12 border-t border-slate-800\">\n        <div className=\"container mx-auto px-4 grid grid-cols-2 md:grid-cols-5 gap-8\">\n          <div className=\"col-span-2 md:col-span-1\">\n            <div className=\"flex items-center gap-2 mb-4\">\n              <Hammer className=\"w-5 h-5 text-secondary\" />\n              <span className=\"text-lg font-heading font-bold text-white uppercase\">ScopeGen</span>\n            </div>\n            <p className=\"text-sm leading-relaxed\">\n              {t.footer.builtFor}\n            </p>\n          </div>\n          \n          <div>\n            <h4 className=\"text-white font-bold mb-4\">{t.nav.product}</h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li><a href=\"/#pricing\" className=\"hover:text-white\">{t.pricing.title}</a></li>\n              <li><Link href=\"/app\" className=\"hover:text-white\">{t.nav.generator}</Link></li>\n            </ul>\n          </div>\n\n          <div>\n            <h4 className=\"text-white font-bold mb-4\">{t.nav.company}</h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li><a href=\"/#how-it-works\" className=\"hover:text-white\">{t.nav.howItWorks}</a></li>\n              <li><Link href=\"/dashboard\" className=\"hover:text-white\">{t.nav.dashboard}</Link></li>\n              <li><Link href=\"/blog\" className=\"hover:text-white\">Blog</Link></li>\n            </ul>\n          </div>\n\n          <div>\n            <h4 className=\"text-white font-bold mb-4\">Legal</h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li><Link href=\"/privacy\" className=\"hover:text-white\">Privacy Policy</Link></li>\n              <li><Link href=\"/terms\" className=\"hover:text-white\">Terms of Service</Link></li>\n            </ul>\n          </div>\n\n          <div className=\"col-span-2 md:col-span-2\">\n            <h4 className=\"text-white font-bold mb-4\">{t.hero.cta}</h4>\n            <Link \n              href=\"/app\" \n              className=\"inline-block bg-secondary text-slate-900 px-4 py-2 rounded font-bold text-sm hover:bg-secondary/90 transition-colors\"\n            >\n              {t.hero.cta}\n            </Link>\n          </div>\n        </div>\n        <div className=\"container mx-auto px-4 mt-12 pt-8 border-t border-slate-800 text-center text-xs\">\n          Â© {new Date().getFullYear()} Lead Ledger LLC. {t.footer.copyright}\n        </div>\n      </footer>\n\n      <OnboardingModal open={showOnboarding} userName={user?.firstName} />\n    </div>\n  );\n}\n","path":null,"size_bytes":10046,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2143,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1237,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1828,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1031,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker\n      .register('/sw.js')\n      .then((registration) => {\n        console.log('Service Worker registered with scope:', registration.scope);\n      })\n      .catch((error) => {\n        console.log('Service Worker registration failed:', error);\n      });\n  });\n}\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":524,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2859,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1267,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1877,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/node-postgres\";\nimport pg from \"pg\";\nimport * as schema from \"@shared/schema\";\n\nconst { Pool } = pg;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":395,"size_tokens":null},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\ninterface User {\n  id: string;\n  username: string;\n  firstName: string | null;\n  lastName: string | null;\n  profileImageUrl: string | null;\n  isPro: boolean;\n  stripeCustomerId: string | null;\n  stripeSubscriptionId: string | null;\n  proposalCredits: number;\n  creditsExpireAt: string | null;\n  companyName: string | null;\n  companyAddress: string | null;\n  companyPhone: string | null;\n  companyLogo: string | null;\n  licenseNumber: string | null;\n  priceMultiplier: number;\n  tradeMultipliers: Record<string, number> | null;\n  selectedTrades: string[] | null;\n  userStripeEnabled: boolean;\n  hasStripeKey: boolean;\n  emailNotificationsEnabled: boolean;\n  smsNotificationsEnabled: boolean;\n}\n\nexport function useAuth() {\n  const { data: user, isLoading, refetch } = useQuery<User | null>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n    refetch,\n  };\n}\n","path":null,"size_bytes":986,"size_tokens":null},"client/src/index.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --font-sans: \"Inter\", sans-serif;\n  --font-heading: \"Barlow Condensed\", sans-serif;\n\n  --radius-sm: 4px;\n  --radius-md: 6px;\n  --radius-lg: 8px;\n\n  /* Industrial Professional Palette */\n  --color-background: hsl(210 20% 98%); /* Light Grayish Blue Background */\n  --color-foreground: hsl(215 25% 20%); /* Dark Slate Text */\n\n  --color-card: hsl(0 0% 100%);\n  --color-card-foreground: hsl(215 25% 20%);\n\n  --color-popover: hsl(0 0% 100%);\n  --color-popover-foreground: hsl(215 25% 20%);\n\n  --color-primary: hsl(215 40% 30%); /* Professional Navy */\n  --color-primary-foreground: hsl(0 0% 100%);\n\n  --color-secondary: hsl(35 90% 55%); /* Safety Orange Accent */\n  --color-secondary-foreground: hsl(215 40% 15%);\n\n  --color-muted: hsl(210 20% 90%);\n  --color-muted-foreground: hsl(215 20% 45%);\n\n  --color-accent: hsl(210 20% 94%);\n  --color-accent-foreground: hsl(215 25% 20%);\n\n  --color-destructive: hsl(0 84% 60%);\n  --color-destructive-foreground: hsl(0 0% 100%);\n\n  --color-border: hsl(215 20% 85%);\n  --color-input: hsl(215 20% 85%);\n  --color-ring: hsl(215 40% 30%);\n\n  --color-chart-1: hsl(215 40% 30%);\n  --color-chart-2: hsl(35 90% 55%);\n  --color-chart-3: hsl(200 80% 45%);\n  --color-chart-4: hsl(150 60% 40%);\n  --color-chart-5: hsl(0 70% 50%);\n\n  --color-sidebar: hsl(215 30% 25%);\n  --color-sidebar-foreground: hsl(210 20% 95%);\n  --color-sidebar-primary: hsl(35 90% 55%);\n  --color-sidebar-primary-foreground: hsl(215 40% 15%);\n  --color-sidebar-accent: hsl(215 30% 30%);\n  --color-sidebar-accent-foreground: hsl(210 20% 95%);\n  --color-sidebar-border: hsl(215 30% 30%);\n  --color-sidebar-ring: hsl(35 90% 55%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    @apply font-heading font-bold tracking-tight;\n  }\n}\n","path":null,"size_bytes":1945,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4419,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3007,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","path":null,"size_bytes":4971,"size_tokens":null},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","path":null,"size_bytes":2396,"size_tokens":null},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","path":null,"size_bytes":116,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/pages/generator.tsx":{"content":"import { useState, useRef } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { templates, JobType, JobOption, Template, getLocalizedJobType, getLocalizedJobTypes } from \"@/lib/proposal-data\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Loader2, ChevronRight, Wand2, Download, FileText, Sparkles, Plus, Trash2, GripVertical, Lock, Save } from \"lucide-react\";\nimport ProposalPreview from \"@/components/proposal-preview\";\nimport PaywallModal from \"@/components/paywall-modal\";\nimport { CostInsights } from \"@/components/cost-insights\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLanguage } from \"@/hooks/useLanguage\";\nimport html2canvas from \"html2canvas\";\nimport jsPDF from \"jspdf\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { getRegionalMultiplier } from \"@/lib/regional-pricing\";\nimport { cn } from \"@/lib/utils\";\n\n// Service item interface for multi-trade support\ninterface ServiceItem {\n  id: string;\n  tradeId: string;\n  jobTypeId: string;\n  jobSize: number;\n  homeArea: string;\n  footage: number | null; // Square feet or linear feet depending on trade\n  options: Record<string, boolean | string>;\n}\n\n// Area-based price multipliers - different areas cost more/less\nconst areaMultipliers: Record<string, number> = {\n  // Bathroom areas\n  \"master-bathroom\": 1.25,\n  \"bathroom\": 1.0,\n  \"guest-bathroom\": 0.95,\n  \"half-bath\": 0.7,\n  \n  // Kitchen areas\n  \"kitchen\": 1.0,\n  \"kitchenette\": 0.6,\n  \"outdoor-kitchen\": 1.4,\n  \n  // Interior rooms - based on typical size/complexity\n  \"living-room\": 1.0,\n  \"dining-room\": 0.85,\n  \"bedroom\": 0.9,\n  \"master-bedroom\": 1.15,\n  \"hallway\": 0.5,\n  \"home-office\": 0.8,\n  \"closet\": 0.4,\n  \"mudroom\": 0.5,\n  \"basement\": 1.5,\n  \"attic\": 1.3,\n  \"whole-house\": 3.5,\n  \n  // Exterior areas\n  \"front-yard\": 1.0,\n  \"backyard\": 1.1,\n  \"side-yard\": 0.6,\n  \"patio\": 0.8,\n  \"deck\": 1.0,\n  \"driveway\": 1.2,\n  \"walkway\": 0.5,\n  \"garage\": 0.9,\n  \"carport\": 0.7,\n  \"exterior-full\": 2.8,\n  \n  // Roofing areas\n  \"main-roof\": 1.0,\n  \"garage-roof\": 0.4,\n  \"porch-roof\": 0.35,\n  \"addition-roof\": 0.5,\n  \"full-roof\": 1.0,\n};\n\n// Trades that use square footage for pricing\nconst squareFootageTrades = [\"painting\", \"flooring\", \"drywall\", \"roofing\", \"concrete\", \"decks-patios\", \"landscape\"];\n\n// Trades that use linear footage for pricing  \nconst linearFootageTrades = [\"fencing\"];\n\n// Price per unit by trade and job type (will use base if not found)\nconst pricePerUnit: Record<string, { sqft?: { low: number; high: number }; linear?: { low: number; high: number } }> = {\n  \"painting\": { sqft: { low: 2.5, high: 4.5 } },\n  \"flooring\": { sqft: { low: 6, high: 14 } },\n  \"drywall\": { sqft: { low: 2, high: 4 } },\n  \"roofing\": { sqft: { low: 4, high: 9 } },\n  \"concrete\": { sqft: { low: 8, high: 16 } },\n  \"fencing\": { linear: { low: 25, high: 55 } },\n  \"decks-patios\": { sqft: { low: 25, high: 65 } },\n  \"landscape\": { sqft: { low: 3, high: 12 } },\n};\n\n// Check if trade uses footage-based pricing\nconst usesFootagePricing = (tradeId: string): \"sqft\" | \"linear\" | null => {\n  if (squareFootageTrades.includes(tradeId)) return \"sqft\";\n  if (linearFootageTrades.includes(tradeId)) return \"linear\";\n  return null;\n};\n\n// Get footage label for trade\nconst getFootageLabel = (tradeId: string): string => {\n  const type = usesFootagePricing(tradeId);\n  if (type === \"sqft\") return \"Square Footage\";\n  if (type === \"linear\") return \"Linear Footage\";\n  return \"\";\n};\n\n// Get footage placeholder for trade\nconst getFootagePlaceholder = (tradeId: string): string => {\n  const type = usesFootagePricing(tradeId);\n  if (type === \"sqft\") return \"e.g., 400 sq ft\";\n  if (type === \"linear\") return \"e.g., 150 linear ft\";\n  return \"\";\n};\n\n// Form Schema\nconst formSchema = z.object({\n  clientName: z.string().min(2, \"Client name is required\"),\n  address: z.string().min(5, \"Address is required\"),\n});\n\n// Trade-aware area options\nconst interiorRooms = [\n  { value: \"living-room\", label: \"Living Room\" },\n  { value: \"dining-room\", label: \"Dining Room\" },\n  { value: \"bedroom\", label: \"Bedroom\" },\n  { value: \"master-bedroom\", label: \"Master Bedroom\" },\n  { value: \"hallway\", label: \"Hallway\" },\n  { value: \"home-office\", label: \"Home Office\" },\n  { value: \"closet\", label: \"Closet\" },\n  { value: \"mudroom\", label: \"Mudroom\" },\n  { value: \"basement\", label: \"Basement\" },\n  { value: \"attic\", label: \"Attic\" },\n  { value: \"whole-house\", label: \"Whole House Interior\" },\n];\n\nconst bathroomAreas = [\n  { value: \"bathroom\", label: \"Bathroom\" },\n  { value: \"master-bathroom\", label: \"Master Bathroom\" },\n  { value: \"half-bath\", label: \"Half Bath / Powder Room\" },\n  { value: \"guest-bathroom\", label: \"Guest Bathroom\" },\n];\n\nconst kitchenAreas = [\n  { value: \"kitchen\", label: \"Kitchen\" },\n  { value: \"kitchenette\", label: \"Kitchenette\" },\n  { value: \"outdoor-kitchen\", label: \"Outdoor Kitchen\" },\n];\n\nconst exteriorAreas = [\n  { value: \"front-yard\", label: \"Front Yard\" },\n  { value: \"backyard\", label: \"Backyard\" },\n  { value: \"side-yard\", label: \"Side Yard\" },\n  { value: \"patio\", label: \"Patio\" },\n  { value: \"deck\", label: \"Deck\" },\n  { value: \"driveway\", label: \"Driveway\" },\n  { value: \"walkway\", label: \"Walkway\" },\n  { value: \"garage\", label: \"Garage\" },\n  { value: \"carport\", label: \"Carport\" },\n  { value: \"exterior-full\", label: \"Full Exterior\" },\n];\n\nconst roofingAreas = [\n  { value: \"main-roof\", label: \"Main Roof\" },\n  { value: \"garage-roof\", label: \"Garage Roof\" },\n  { value: \"porch-roof\", label: \"Porch Roof\" },\n  { value: \"addition-roof\", label: \"Addition Roof\" },\n  { value: \"full-roof\", label: \"Full Roof (Entire Home)\" },\n];\n\nconst getAreaOptionsForTrade = (tradeId: string): { value: string; label: string }[] => {\n  switch (tradeId) {\n    case \"bathroom\":\n      return bathroomAreas;\n    case \"kitchen\":\n      return kitchenAreas;\n    case \"painting\":\n      return [...interiorRooms, ...exteriorAreas];\n    case \"flooring\":\n    case \"drywall\":\n      return interiorRooms;\n    case \"roofing\":\n      return roofingAreas;\n    case \"concrete\":\n    case \"landscape\":\n      return exteriorAreas;\n    case \"plumbing\":\n    case \"electrical\":\n    case \"handyman\":\n      return [...bathroomAreas, ...kitchenAreas, ...interiorRooms.filter(r => r.value !== \"whole-house\"), { value: \"whole-house\", label: \"Whole House\" }];\n    case \"windows-doors\":\n      return [...interiorRooms.filter(r => ![\"whole-house\", \"closet\"].includes(r.value)), ...exteriorAreas.filter(r => [\"front-yard\", \"backyard\", \"patio\", \"garage\"].includes(r.value))];\n    default:\n      return [...interiorRooms, ...exteriorAreas];\n  }\n};\n\nexport default function Generator() {\n  const [step, setStep] = useState<1 | 2>(1);\n  const [services, setServices] = useState<ServiceItem[]>([\n    { id: crypto.randomUUID(), tradeId: \"\", jobTypeId: \"\", jobSize: 2, homeArea: \"\", footage: null, options: {} }\n  ]);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [showPaywall, setShowPaywall] = useState(false);\n  const [isUnlocked, setIsUnlocked] = useState(false);\n  const [enhancedScopes, setEnhancedScopes] = useState<Record<string, string[]>>({});\n  const [isEnhancing, setIsEnhancing] = useState(false);\n  const [isSavingDraft, setIsSavingDraft] = useState(false);\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const { t, language } = useLanguage();\n  const previewRef = useRef<HTMLDivElement>(null);\n\n  const userSelectedTrades = user?.selectedTrades || [];\n  const availableTemplates = userSelectedTrades.length > 0\n    ? templates.filter(t => userSelectedTrades.includes(t.id))\n    : templates;\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      clientName: \"\",\n      address: \"\",\n    },\n  });\n\n  const watchedValues = form.watch();\n\n  const getJobTypeForService = (service: ServiceItem): JobType | null => {\n    const trade = availableTemplates.find((t) => t.id === service.tradeId);\n    const jobType = trade?.jobTypes.find((j) => j.id === service.jobTypeId) || null;\n    if (!jobType || !trade) return null;\n    return getLocalizedJobType(jobType, trade.id, language);\n  };\n\n  const updateService = (serviceId: string, updates: Partial<ServiceItem>) => {\n    setServices(prev => prev.map(s => \n      s.id === serviceId ? { ...s, ...updates } : s\n    ));\n  };\n\n  const addService = () => {\n    setServices(prev => [...prev, {\n      id: crypto.randomUUID(),\n      tradeId: \"\",\n      jobTypeId: \"\",\n      jobSize: 2,\n      homeArea: \"\",\n      footage: null,\n      options: {}\n    }]);\n  };\n\n  const removeService = (serviceId: string) => {\n    if (services.length > 1) {\n      setServices(prev => prev.filter(s => s.id !== serviceId));\n    }\n  };\n\n  const handleTradeChange = (serviceId: string, tradeId: string) => {\n    updateService(serviceId, { tradeId, jobTypeId: \"\", homeArea: \"\", footage: null, options: {} });\n  };\n\n  const handleJobTypeChange = (serviceId: string, jobTypeId: string) => {\n    updateService(serviceId, { jobTypeId, homeArea: \"\", footage: null, options: {} });\n  };\n\n  const generateServiceData = (service: ServiceItem) => {\n    const jobType = getJobTypeForService(service);\n    if (!jobType) return null;\n\n    let finalScope = [...jobType.baseScope];\n    let priceModifier = 1;\n\n    const size = service.jobSize || 2;\n    if (size === 1) priceModifier = 0.8;\n    if (size === 3) priceModifier = 1.3;\n\n    const opts = service.options || {};\n    let extraCost = 0;\n\n    jobType.options.forEach((opt) => {\n      const value = opts[opt.id];\n      if (value) {\n        if (opt.type === 'select' && opt.choices && typeof value === 'string') {\n          const selectedChoice = opt.choices.find(c => c.value === value);\n          if (selectedChoice) {\n            if (selectedChoice.scopeAddition) finalScope.push(selectedChoice.scopeAddition);\n            if (selectedChoice.priceModifier) extraCost += selectedChoice.priceModifier;\n          }\n        } else if (opt.type === 'boolean' && value === true) {\n          if (opt.scopeAddition) finalScope.push(opt.scopeAddition);\n          if (opt.priceModifier) extraCost += opt.priceModifier;\n        }\n      }\n    });\n\n    // Get area-based multiplier (defaults to 1.0 if area not selected or not found)\n    const areaMultiplier = service.homeArea ? (areaMultipliers[service.homeArea] || 1.0) : 1.0;\n\n    // Check if this trade uses footage-based pricing\n    const footageType = usesFootagePricing(service.tradeId);\n    const tradeUnitPricing = pricePerUnit[service.tradeId];\n\n    let baseLowPrice: number;\n    let baseHighPrice: number;\n\n    if (footageType && service.footage && service.footage > 0 && tradeUnitPricing) {\n      // Calculate price based on footage - footage already accounts for size, so we use a\n      // reduced complexity multiplier from area (only for very complex areas like basement/attic)\n      const unitPricing = footageType === \"sqft\" ? tradeUnitPricing.sqft : tradeUnitPricing.linear;\n      if (unitPricing) {\n        // For footage-based pricing, only apply a complexity factor for difficult areas\n        // (basement, attic, outdoor kitchen) - not the full area multiplier\n        const complexityFactor = areaMultiplier > 1.2 ? 1 + (areaMultiplier - 1) * 0.3 : 1.0;\n        baseLowPrice = (service.footage * unitPricing.low * priceModifier * complexityFactor) + extraCost;\n        baseHighPrice = (service.footage * unitPricing.high * priceModifier * complexityFactor) + extraCost;\n      } else {\n        // Fallback to base price if unit pricing not defined\n        baseLowPrice = (jobType.basePriceRange.low * priceModifier * areaMultiplier) + extraCost;\n        baseHighPrice = (jobType.basePriceRange.high * priceModifier * areaMultiplier) + extraCost;\n      }\n    } else {\n      // Use traditional base price with full area multiplier\n      baseLowPrice = (jobType.basePriceRange.low * priceModifier * areaMultiplier) + extraCost;\n      baseHighPrice = (jobType.basePriceRange.high * priceModifier * areaMultiplier) + extraCost;\n    }\n    \n    const userMultiplier = (user?.priceMultiplier || 100) / 100;\n    const tradeMultiplier = (user?.tradeMultipliers?.[service.tradeId] ?? 100) / 100;\n    const { multiplier: regionalMultiplier, region } = getRegionalMultiplier(watchedValues.address);\n    \n    const lowPrice = baseLowPrice * userMultiplier * tradeMultiplier * regionalMultiplier;\n    const highPrice = baseHighPrice * userMultiplier * tradeMultiplier * regionalMultiplier;\n\n    let timelineLow = jobType.estimatedDays?.low || 1;\n    let timelineHigh = jobType.estimatedDays?.high || 3;\n    \n    // Adjust timeline based on size\n    if (size === 1) {\n      timelineLow = Math.max(1, Math.floor(timelineLow * 0.8));\n      timelineHigh = Math.max(1, Math.floor(timelineHigh * 0.8));\n    }\n    if (size === 3) {\n      timelineLow = Math.ceil(timelineLow * 1.3);\n      timelineHigh = Math.ceil(timelineHigh * 1.3);\n    }\n    \n    // Also adjust timeline for area multiplier (larger areas = more time)\n    if (areaMultiplier > 1.5) {\n      timelineLow = Math.ceil(timelineLow * 1.2);\n      timelineHigh = Math.ceil(timelineHigh * 1.3);\n    } else if (areaMultiplier < 0.7) {\n      timelineLow = Math.max(1, Math.floor(timelineLow * 0.8));\n      timelineHigh = Math.max(1, Math.floor(timelineHigh * 0.9));\n    }\n\n    const trade = availableTemplates.find((t) => t.id === service.tradeId);\n\n    return {\n      serviceId: service.id,\n      tradeName: trade?.trade || \"\",\n      jobTypeName: jobType.name,\n      scope: enhancedScopes[service.id] || finalScope,\n      priceRange: {\n        low: Math.round(lowPrice / 100) * 100,\n        high: Math.round(highPrice / 100) * 100,\n      },\n      estimatedDays: { low: timelineLow, high: timelineHigh },\n      warranty: jobType.warranty,\n      exclusions: jobType.exclusions,\n      regionalInfo: region ? {\n        state: region.state,\n        abbrev: region.abbrev,\n        region: region.region,\n        multiplier: region.multiplier,\n      } : null,\n      footage: service.footage,\n      homeArea: service.homeArea,\n    };\n  };\n\n  const generateProposalData = () => {\n    const validServices = services.filter(s => s.tradeId && s.jobTypeId);\n    if (validServices.length === 0) return { lineItems: [] };\n\n    const lineItems = validServices.map(generateServiceData).filter((item): item is NonNullable<typeof item> => item !== null);\n    \n    // Calculate totals\n    const totalPriceLow = lineItems.reduce((sum, item) => sum + (item?.priceRange.low || 0), 0);\n    const totalPriceHigh = lineItems.reduce((sum, item) => sum + (item?.priceRange.high || 0), 0);\n    const totalDaysLow = lineItems.reduce((sum, item) => sum + (item?.estimatedDays.low || 0), 0);\n    const totalDaysHigh = lineItems.reduce((sum, item) => sum + (item?.estimatedDays.high || 0), 0);\n\n    // Combine all scopes\n    const allScope = lineItems.flatMap(item => item?.scope || []);\n    const allExclusions = Array.from(new Set(lineItems.flatMap(item => item?.exclusions || [])));\n    const allWarranties = Array.from(new Set(lineItems.map(item => item?.warranty).filter((w): w is string => !!w)));\n\n    // Get first regional info\n    const firstRegionalInfo = lineItems.find(item => item?.regionalInfo)?.regionalInfo || null;\n\n    return {\n      clientName: watchedValues.clientName,\n      address: watchedValues.address,\n      lineItems,\n      jobTypeName: lineItems.length === 1 \n        ? lineItems[0]?.jobTypeName \n        : `Multi-Service Proposal (${lineItems.length} services)`,\n      scope: allScope,\n      priceRange: {\n        low: Math.round(totalPriceLow / 100) * 100,\n        high: Math.round(totalPriceHigh / 100) * 100,\n      },\n      estimatedDays: { low: totalDaysLow, high: totalDaysHigh },\n      warranty: allWarranties.join(\" \"),\n      exclusions: allExclusions,\n      regionalInfo: firstRegionalInfo,\n    };\n  };\n\n  const hasValidServices = services.some(s => s.tradeId && s.jobTypeId);\n\n  const onSubmit = async (data: z.infer<typeof formSchema>) => {\n    if (!hasValidServices) {\n      toast({\n        title: t.common.error,\n        description: \"Please add at least one service\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    setIsGenerating(true);\n    await new Promise((resolve) => setTimeout(resolve, 1500));\n    setIsGenerating(false);\n    setStep(2);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handleDownload = async () => {\n    if (!previewRef.current) return;\n    \n    setIsDownloading(true);\n    try {\n      const element = previewRef.current;\n      const canvas = await html2canvas(element, {\n        scale: 2,\n        backgroundColor: \"#ffffff\",\n      });\n      \n      const imgData = canvas.toDataURL(\"image/png\");\n      const pdf = new jsPDF({\n        orientation: \"portrait\",\n        unit: \"mm\",\n        format: \"a4\",\n      });\n      \n      const imgWidth = 210;\n      const imgHeight = (canvas.height * imgWidth) / canvas.width;\n      \n      pdf.addImage(imgData, \"PNG\", 0, 0, imgWidth, imgHeight);\n      pdf.save(`proposal-${watchedValues.clientName || \"draft\"}.pdf`);\n      \n      toast({ \n        title: t.common.success, \n        description: t.toast.downloadSuccess \n      });\n    } catch (error) {\n      console.error(\"PDF Generation Error:\", error);\n      toast({ \n        title: t.common.error, \n        description: t.toast.downloadError,\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsDownloading(false);\n    }\n  };\n\n  const handleEnhanceScope = async () => {\n    if (!user) {\n      toast({ \n        title: t.common.error, \n        description: t.toast.loginRequired,\n        variant: \"destructive\"\n      });\n      return;\n    }\n    \n    const validServices = services.filter(s => s.tradeId && s.jobTypeId);\n    if (validServices.length === 0) {\n      toast({ \n        title: t.common.error, \n        description: \"Please add at least one service first\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    \n    setIsEnhancing(true);\n    try {\n      const newEnhancedScopes: Record<string, string[]> = {};\n      \n      for (const service of validServices) {\n        const serviceData = generateServiceData(service);\n        if (!serviceData) continue;\n        \n        const response = await apiRequest(\"POST\", \"/api/ai/enhance-scope\", {\n          jobTypeName: serviceData.jobTypeName,\n          baseScope: serviceData.scope,\n          clientName: watchedValues.clientName,\n          address: watchedValues.address,\n          jobNotes: service.homeArea,\n        });\n        const data = await response.json();\n        if (data.enhancedScope) {\n          newEnhancedScopes[service.id] = data.enhancedScope;\n        }\n      }\n      \n      setEnhancedScopes(prev => ({ ...prev, ...newEnhancedScopes }));\n      toast({ \n        title: t.toast.scopeEnhanced, \n        description: t.toast.scopeEnhancedDesc \n      });\n    } catch (error) {\n      console.error(\"Error enhancing scope:\", error);\n      toast({ \n        title: t.common.error, \n        description: t.toast.scopeEnhanceError,\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsEnhancing(false);\n    }\n  };\n\n  const handleSaveDraft = async () => {\n    if (!user) {\n      toast({ \n        title: t.common.error, \n        description: t.toast.loginRequired,\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const validServices = services.filter(s => s.tradeId && s.jobTypeId);\n    if (validServices.length === 0) {\n      toast({ \n        title: t.common.error, \n        description: \"Please add at least one service first\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (!watchedValues.clientName || !watchedValues.address) {\n      toast({ \n        title: t.common.error, \n        description: \"Please fill in client name and address\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setIsSavingDraft(true);\n    try {\n      const firstService = validServices[0];\n      const serviceData = generateServiceData(firstService);\n      if (!serviceData) throw new Error(\"Invalid service data\");\n\n      const booleanOptions: Record<string, boolean> = {};\n      for (const [key, value] of Object.entries(firstService.options)) {\n        if (typeof value === 'boolean') {\n          booleanOptions[key] = value;\n        }\n      }\n\n      const proposalData = {\n        clientName: watchedValues.clientName,\n        address: watchedValues.address,\n        tradeId: firstService.tradeId,\n        jobTypeId: firstService.jobTypeId,\n        jobTypeName: serviceData.jobTypeName,\n        jobSize: firstService.jobSize,\n        scope: enhancedScopes[firstService.id] || serviceData.scope,\n        options: booleanOptions,\n        priceLow: serviceData.priceRange.low,\n        priceHigh: serviceData.priceRange.high,\n        status: \"draft\",\n        isUnlocked: false,\n      };\n\n      const response = await fetch('/api/proposals', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(proposalData),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to save draft');\n      }\n\n      toast({ \n        title: t.common.success, \n        description: t.generator.draftSaved,\n      });\n    } catch (error) {\n      console.error(\"Error saving draft:\", error);\n      toast({ \n        title: t.common.error, \n        description: \"Failed to save draft\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsSavingDraft(false);\n    }\n  };\n\n  const previewData = generateProposalData();\n\n  const renderServiceCard = (service: ServiceItem, index: number) => {\n    const jobType = getJobTypeForService(service);\n    const trade = availableTemplates.find((t) => t.id === service.tradeId);\n    const localizedJobTypes = trade ? getLocalizedJobTypes(trade, language) : [];\n\n    return (\n      <div \n        key={service.id} \n        className={cn(\n          \"border rounded-lg p-4 space-y-4 bg-white\",\n          services.length > 1 && \"border-l-4 border-l-secondary\"\n        )}\n        data-testid={`service-card-${index}`}\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            {services.length > 1 && (\n              <GripVertical className=\"w-4 h-4 text-slate-400\" />\n            )}\n            <span className=\"text-sm font-bold text-slate-600\">\n              Service {index + 1}\n            </span>\n          </div>\n          {services.length > 1 && (\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => removeService(service.id)}\n              className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\n              data-testid={`button-remove-service-${index}`}\n            >\n              <Trash2 className=\"w-4 h-4\" />\n            </Button>\n          )}\n        </div>\n\n        {/* Trade Selection */}\n        <div>\n          <label className=\"text-sm font-medium mb-1.5 block\">{t.generator.tradeCategory}</label>\n          <Select\n            onValueChange={(val) => handleTradeChange(service.id, val)}\n            value={service.tradeId}\n          >\n            <SelectTrigger data-testid={`select-trade-${index}`}>\n              <SelectValue placeholder={t.generator.selectTrade} />\n            </SelectTrigger>\n            <SelectContent>\n              {availableTemplates.map((template) => (\n                <SelectItem key={template.id} value={template.id}>{template.trade}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Job Type Selection */}\n        {service.tradeId && (\n          <div className=\"animate-in fade-in slide-in-from-top-2\">\n            <label className=\"text-sm font-medium mb-1.5 block\">{t.generator.jobType}</label>\n            <Select\n              onValueChange={(val) => handleJobTypeChange(service.id, val)}\n              value={service.jobTypeId}\n            >\n              <SelectTrigger data-testid={`select-jobtype-${index}`}>\n                <SelectValue placeholder={t.generator.selectJobType} />\n              </SelectTrigger>\n              <SelectContent>\n                {localizedJobTypes.map((j) => (\n                  <SelectItem key={j.id} value={j.id}>{j.name}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        )}\n\n        {/* Area of Home Selection - Trade-Aware */}\n        {service.jobTypeId && (() => {\n          const areaOptions = getAreaOptionsForTrade(service.tradeId);\n          return areaOptions.length > 0 ? (\n            <div className=\"animate-in fade-in slide-in-from-top-2\">\n              <label className=\"text-sm font-medium mb-1.5 block\">Area of Home</label>\n              <Select\n                value={service.homeArea}\n                onValueChange={(val) => updateService(service.id, { homeArea: val })}\n              >\n                <SelectTrigger data-testid={`select-home-area-${index}`}>\n                  <SelectValue placeholder=\"Select area...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {areaOptions.map((area) => (\n                    <SelectItem key={area.value} value={area.value}>\n                      {area.label}\n                      {areaMultipliers[area.value] && areaMultipliers[area.value] !== 1.0 && (\n                        <span className={`ml-2 text-xs ${areaMultipliers[area.value] > 1 ? 'text-orange-600' : 'text-green-600'}`}>\n                          {areaMultipliers[area.value] > 1 ? '+' : ''}{Math.round((areaMultipliers[area.value] - 1) * 100)}%\n                        </span>\n                      )}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          ) : null;\n        })()}\n\n        {/* Footage Input - for trades that use sq/linear ft pricing */}\n        {service.jobTypeId && usesFootagePricing(service.tradeId) && (\n          <div className=\"animate-in fade-in slide-in-from-top-2\">\n            <label className=\"text-sm font-medium mb-1.5 block\">\n              {getFootageLabel(service.tradeId)}\n              <span className=\"text-xs text-slate-500 ml-1\">(optional - for accurate pricing)</span>\n            </label>\n            <Input\n              type=\"number\"\n              min={0}\n              placeholder={getFootagePlaceholder(service.tradeId)}\n              value={service.footage || \"\"}\n              onChange={(e) => {\n                const value = e.target.value ? parseInt(e.target.value, 10) : null;\n                updateService(service.id, { footage: value });\n              }}\n              data-testid={`input-footage-${index}`}\n              className=\"bg-white\"\n            />\n            {service.footage && service.footage > 0 && (\n              <p className=\"text-xs text-slate-500 mt-1\">\n                {usesFootagePricing(service.tradeId) === \"sqft\" \n                  ? `${service.footage.toLocaleString()} sq ft` \n                  : `${service.footage.toLocaleString()} linear ft`}\n                {pricePerUnit[service.tradeId] && (() => {\n                  const pricing = usesFootagePricing(service.tradeId) === \"sqft\" \n                    ? pricePerUnit[service.tradeId].sqft \n                    : pricePerUnit[service.tradeId].linear;\n                  if (pricing) {\n                    return ` @ $${pricing.low}-$${pricing.high}/ft`;\n                  }\n                  return \"\";\n                })()}\n              </p>\n            )}\n          </div>\n        )}\n\n        {/* Job Size & Options */}\n        {jobType && (\n          <div className=\"space-y-4 animate-in fade-in slide-in-from-top-4 pt-2 border-t\">\n            {/* Job Size */}\n            <div>\n              <div className=\"flex justify-between mb-2\">\n                <label className=\"text-sm font-medium\">{t.generator.jobSize}</label>\n                <span className=\"text-xs font-bold text-secondary uppercase\">\n                  {service.jobSize === 1 ? t.generator.small : service.jobSize === 2 ? t.generator.medium : t.generator.large}\n                </span>\n              </div>\n              <Slider\n                min={1}\n                max={3}\n                step={1}\n                value={[service.jobSize]}\n                onValueChange={(vals) => updateService(service.id, { jobSize: vals[0] })}\n                className=\"py-2\"\n                data-testid={`slider-size-${index}`}\n              />\n            </div>\n\n            {/* Options */}\n            {jobType.options.length > 0 && (\n              <div className=\"space-y-2\">\n                <span className=\"text-sm font-medium\">{t.generator.jobOptions}</span>\n                <div className=\"grid grid-cols-1 gap-2\">\n                  {jobType.options.map((option) => (\n                    option.type === 'select' && option.choices ? (\n                      <div key={option.id} className=\"rounded-md border p-3 bg-slate-50\">\n                        <label className=\"text-sm font-medium block mb-1.5\">{option.label}</label>\n                        <Select\n                          onValueChange={(val) => updateService(service.id, {\n                            options: { ...service.options, [option.id]: val }\n                          })}\n                          value={service.options[option.id] as string || ''}\n                        >\n                          <SelectTrigger className=\"bg-white\" data-testid={`select-option-${option.id}-${index}`}>\n                            <SelectValue placeholder={t.common.selectOption} />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {option.choices.map((choice) => (\n                              <SelectItem key={choice.value} value={choice.value}>\n                                {choice.label}\n                                {choice.priceModifier !== 0 && (\n                                  <span className={`ml-2 text-xs ${choice.priceModifier > 0 ? 'text-orange-600' : 'text-green-600'}`}>\n                                    {choice.priceModifier > 0 ? '+' : ''}{choice.priceModifier < 0 ? '-' : ''}${Math.abs(choice.priceModifier).toLocaleString()}\n                                  </span>\n                                )}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    ) : (\n                      <label \n                        key={option.id} \n                        className=\"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-3 hover:bg-slate-50 transition-colors cursor-pointer bg-white\"\n                        htmlFor={`checkbox-${option.id}-${index}`}\n                      >\n                        <Checkbox\n                          id={`checkbox-${option.id}-${index}`}\n                          checked={service.options[option.id] as boolean || false}\n                          onCheckedChange={(checked) => updateService(service.id, {\n                            options: { ...service.options, [option.id]: checked }\n                          })}\n                          data-testid={`checkbox-option-${option.id}-${index}`}\n                        />\n                        <div className=\"space-y-1 leading-none flex-1\">\n                          <span className=\"cursor-pointer flex justify-between text-sm font-medium\">\n                            <span>{option.label}</span>\n                            {option.priceModifier && option.priceModifier !== 0 && (\n                              <span className={`text-xs ${option.priceModifier > 0 ? 'text-orange-600' : 'text-green-600'}`}>\n                                {option.priceModifier > 0 ? '+' : ''}{option.priceModifier < 0 ? '-' : ''}${Math.abs(option.priceModifier).toLocaleString()}\n                              </span>\n                            )}\n                          </span>\n                        </div>\n                      </label>\n                    )\n                  ))}\n                </div>\n              </div>\n            )}\n\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 flex-1\">\n        <div className=\"container mx-auto px-4 py-8\">\n          \n          <div className=\"grid lg:grid-cols-12 gap-8\">\n            {/* LEFT COLUMN: Form / Controls */}\n            <div className=\"lg:col-span-4 space-y-6\">\n              <Card className=\"border-t-4 border-t-primary shadow-md\">\n                <CardContent className=\"p-6\">\n                  <div className=\"mb-6\">\n                    <h2 className=\"text-xl font-heading font-bold flex items-center gap-2\">\n                      <Wand2 className=\"w-5 h-5 text-secondary\" />\n                      {t.generator.title}\n                    </h2>\n                    <p className=\"text-sm text-muted-foreground\">{t.generator.subtitle}</p>\n                  </div>\n\n                  <Form {...form}>\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                      \n                      {/* Client Info */}\n                      <div className=\"space-y-4\">\n                        <FormField\n                          control={form.control}\n                          name=\"clientName\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>{t.generator.clientName}</FormLabel>\n                              <FormControl>\n                                <Input placeholder={t.generator.clientNamePlaceholder} {...field} data-testid=\"input-client-name\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={form.control}\n                          name=\"address\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>{t.generator.jobAddress}</FormLabel>\n                              <FormControl>\n                                <Input placeholder={t.generator.jobAddressPlaceholder} {...field} data-testid=\"input-address\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      <div className=\"h-px bg-border\" />\n\n                      {/* Services Section */}\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between\">\n                          <h3 className=\"text-sm font-bold text-slate-700 uppercase tracking-wide\">\n                            Services\n                          </h3>\n                          {services.length > 0 && (\n                            <span className=\"text-xs text-slate-500\">\n                              {services.filter(s => s.tradeId && s.jobTypeId).length} service(s) added\n                            </span>\n                          )}\n                        </div>\n\n                        <div className=\"space-y-4\">\n                          {services.map((service, index) => renderServiceCard(service, index))}\n                        </div>\n\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          className=\"w-full border-dashed border-2 hover:border-secondary hover:bg-secondary/5\"\n                          onClick={addService}\n                          data-testid=\"button-add-service\"\n                        >\n                          <Plus className=\"w-4 h-4 mr-2\" />\n                          Add Another Service\n                        </Button>\n                      </div>\n\n                      {/* Total Price Summary */}\n                      {hasValidServices && (\n                        <div className=\"bg-primary/5 border border-primary/20 rounded-lg p-4 animate-in fade-in\">\n                          <div className=\"flex justify-between items-center mb-2\">\n                            <span className=\"text-sm font-medium text-slate-700\">Total Estimate</span>\n                            <span className=\"text-lg font-bold text-primary\">\n                              ${previewData.priceRange?.low?.toLocaleString() || 0} - ${previewData.priceRange?.high?.toLocaleString() || 0}\n                            </span>\n                          </div>\n                          <div className=\"flex justify-between items-center text-sm text-slate-500\">\n                            <span>Estimated Duration</span>\n                            <span>\n                              {previewData.estimatedDays?.low || 0} - {previewData.estimatedDays?.high || 0} days\n                            </span>\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Market Pricing Insights */}\n                      {services[0]?.tradeId && watchedValues.address && (\n                        <CostInsights \n                          tradeId={services[0].tradeId} \n                          address={watchedValues.address} \n                        />\n                      )}\n\n                      <Button \n                        type=\"submit\" \n                        className=\"w-full bg-primary hover:bg-primary/90 text-white font-bold h-12 text-lg\"\n                        disabled={isGenerating || !hasValidServices}\n                        data-testid=\"button-generate-proposal\"\n                      >\n                        {isGenerating ? (\n                          <>\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> {t.generator.generating}\n                          </>\n                        ) : (\n                          <>\n                            {t.generator.generateProposal} <ChevronRight className=\"ml-2 h-4 w-4\" />\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* RIGHT COLUMN: Preview */}\n            <div className=\"lg:col-span-8\">\n              {!hasValidServices && (\n                <div className=\"h-full min-h-[400px] flex flex-col items-center justify-center text-muted-foreground border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50 p-8 text-center\">\n                   <div className=\"bg-white p-4 rounded-full shadow-sm mb-4\">\n                      <FileText className=\"w-8 h-8 text-slate-300\" />\n                   </div>\n                   <h3 className=\"text-lg font-medium text-slate-900\">{t.generator.readyToStart}</h3>\n                   <p className=\"max-w-xs mx-auto mt-2\">{t.generator.readyToStartDesc}</p>\n                </div>\n              )}\n\n              {hasValidServices && (\n                <div className=\"relative animate-in fade-in duration-700\">\n                   {/* Toolbar */}\n                   <div className=\"flex justify-between items-center mb-4\">\n                      <h3 className=\"font-heading font-bold text-xl text-slate-700\">{t.generator.livePreview}</h3>\n                      <div className=\"flex gap-2\">\n                        {step === 2 && user && (\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\"\n                            className=\"gap-2\"\n                            onClick={handleEnhanceScope}\n                            disabled={isEnhancing}\n                            data-testid=\"button-enhance-scope\"\n                          >\n                            {isEnhancing ? (\n                              <Loader2 className=\"w-4 h-4 animate-spin\" />\n                            ) : (\n                              <Sparkles className=\"w-4 h-4\" />\n                            )}\n                            {isEnhancing ? t.generator.enhancing : t.generator.enhanceWithAI}\n                          </Button>\n                        )}\n                        {step === 2 && user && !isUnlocked && (\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\"\n                            className=\"gap-2\"\n                            onClick={handleSaveDraft}\n                            disabled={isSavingDraft}\n                            data-testid=\"button-save-draft\"\n                          >\n                            {isSavingDraft ? (\n                              <Loader2 className=\"w-4 h-4 animate-spin\" />\n                            ) : (\n                              <Save className=\"w-4 h-4\" />\n                            )}\n                            {t.generator.saveDraft}\n                          </Button>\n                        )}\n                        {step === 2 && (\n                          <Button \n                            variant={isUnlocked ? \"outline\" : \"default\"}\n                            size=\"sm\"\n                            className={`gap-2 ${!isUnlocked ? \"bg-primary hover:bg-primary/90\" : \"\"}`}\n                            onClick={() => {\n                              if (!isUnlocked) {\n                                setShowPaywall(true);\n                              } else {\n                                handleDownload();\n                              }\n                            }}\n                            disabled={isDownloading}\n                            data-testid=\"button-download-pdf\"\n                          >\n                            {isDownloading ? (\n                              <Loader2 className=\"w-4 h-4 animate-spin\" />\n                            ) : isUnlocked ? (\n                              <Download className=\"w-4 h-4\" />\n                            ) : (\n                              <Lock className=\"w-4 h-4\" />\n                            )}\n                            {isDownloading ? t.generator.generatingPDF : isUnlocked ? t.generator.downloadPDF : t.generator.downloadPreview}\n                          </Button>\n                        )}\n                      </div>\n                   </div>\n\n                   {/* The Document */}\n                   <ProposalPreview \n                      ref={previewRef}\n                      data={previewData} \n                      blurred={!isUnlocked} \n                      onUnlock={() => setShowPaywall(true)}\n                      companyInfo={user ? {\n                        companyName: user.companyName,\n                        companyAddress: user.companyAddress,\n                        companyPhone: user.companyPhone,\n                        companyLogo: user.companyLogo,\n                      } : undefined}\n                   />\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <PaywallModal \n        isOpen={showPaywall} \n        onClose={() => setShowPaywall(false)} \n        onUnlock={() => {\n          setIsUnlocked(true);\n          setShowPaywall(false);\n          toast({\n            title: \"Success!\",\n            description: \"Full proposal unlocked. You can now download and edit.\",\n            duration: 5000,\n          });\n        }}\n      />\n    </Layout>\n  );\n}\n","path":null,"size_bytes":44206,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7606,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1330,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7406,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","path":null,"size_bytes":4494,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4280,"size_tokens":null},"client/src/pages/dashboard.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Download, Edit, Pen } from \"lucide-react\";\nimport Layout from \"@/components/layout\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  LayoutDashboard, \n  FileText, \n  Plus, \n  Search, \n  MoreVertical, \n  Calendar, \n  DollarSign, \n  Users,\n  CheckCircle,\n  XCircle,\n  Loader2,\n  Coins,\n  Trophy,\n  ThumbsDown,\n  Mail,\n  CreditCard,\n  List,\n  Columns,\n  Eye,\n  ChevronRight,\n  ChevronLeft\n} from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport PaywallModal from \"@/components/paywall-modal\";\nimport EmailProposalModal from \"@/components/email-proposal-modal\";\nimport EditPriceModal from \"@/components/edit-price-modal\";\nimport CountersignModal from \"@/components/countersign-modal\";\nimport PaymentLinkModal from \"@/components/payment-link-modal\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLanguage } from \"@/hooks/useLanguage\";\n\ninterface Proposal {\n  id: number;\n  clientName: string;\n  address: string;\n  jobTypeName: string;\n  priceLow: number;\n  priceHigh: number;\n  status: string;\n  createdAt: string;\n  publicToken?: string | null;\n  contractorSignature?: string | null;\n  contractorSignedAt?: string | null;\n  paymentLinkUrl?: string | null;\n  depositPercentage?: number | null;\n  depositAmount?: number | null;\n  paymentStatus?: string | null;\n  paidAmount?: number | null;\n  viewCount?: number | null;\n  lastViewedAt?: string | null;\n}\n\nfunction StatusBadge({ status, t }: { status: string; t: any }) {\n  const styles: Record<string, string> = {\n    sent: \"bg-blue-100 text-blue-700 border-blue-200\",\n    draft: \"bg-slate-100 text-slate-700 border-slate-200\",\n    won: \"bg-green-100 text-green-700 border-green-200\",\n    lost: \"bg-red-100 text-red-700 border-red-200\",\n    accepted: \"bg-green-100 text-green-700 border-green-200\",\n    viewed: \"bg-purple-100 text-purple-700 border-purple-200\",\n  };\n  \n  const labels: Record<string, string> = {\n    sent: t.dashboard.sent,\n    draft: t.dashboard.draft,\n    won: t.dashboard.won,\n    lost: t.dashboard.lost,\n    accepted: t.dashboard.accepted,\n    declined: t.dashboard.declined,\n    viewed: t.dashboard.viewed,\n  };\n  \n  const style = styles[status.toLowerCase()] || styles.draft;\n  const label = labels[status.toLowerCase()] || status;\n\n  return (\n    <span className={`px-2.5 py-0.5 rounded-full text-xs font-bold border ${style}`}>\n      {label}\n    </span>\n  );\n}\n\nfunction PipelineView({ \n  proposals, \n  t, \n  language,\n  onStatusChange,\n  onViewProposal\n}: { \n  proposals: Proposal[];\n  t: any;\n  language: string;\n  onStatusChange: (proposalId: number, status: string) => void;\n  onViewProposal: (proposal: Proposal) => void;\n}) {\n  const stages = [\n    { key: 'draft', label: t.dashboard.draft, color: 'bg-slate-500' },\n    { key: 'sent', label: t.dashboard.sent, color: 'bg-blue-500' },\n    { key: 'viewed', label: t.dashboard.viewed, color: 'bg-purple-500' },\n    { key: 'accepted', label: t.dashboard.accepted, color: 'bg-emerald-500' },\n    { key: 'won', label: t.dashboard.won, color: 'bg-green-600' },\n    { key: 'lost', label: t.dashboard.lost, color: 'bg-red-500' },\n  ];\n\n  const getProposalsForStage = (stageKey: string) => {\n    return proposals.filter(p => p.status.toLowerCase() === stageKey);\n  };\n\n  const getNextStatus = (currentStatus: string): string | null => {\n    const order = ['draft', 'sent', 'viewed', 'accepted', 'won'];\n    const idx = order.indexOf(currentStatus.toLowerCase());\n    if (idx >= 0 && idx < order.length - 1) {\n      return order[idx + 1];\n    }\n    return null;\n  };\n\n  const getPrevStatus = (currentStatus: string): string | null => {\n    const order = ['draft', 'sent', 'viewed', 'accepted', 'won'];\n    const idx = order.indexOf(currentStatus.toLowerCase());\n    if (idx > 0) {\n      return order[idx - 1];\n    }\n    return null;\n  };\n\n  return (\n    <div className=\"overflow-x-auto pb-4\">\n      <div className=\"flex gap-4 min-w-max p-4\">\n        {stages.map((stage) => {\n          const stageProposals = getProposalsForStage(stage.key);\n          return (\n            <div \n              key={stage.key} \n              className=\"flex flex-col w-64 bg-slate-50 rounded-lg\"\n              data-testid={`pipeline-column-${stage.key}`}\n            >\n              <div className={`px-3 py-2 rounded-t-lg ${stage.color}`}>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"font-semibold text-white text-sm\">{stage.label}</span>\n                  <span className=\"bg-white/20 text-white text-xs px-2 py-0.5 rounded-full font-medium\">\n                    {stageProposals.length}\n                  </span>\n                </div>\n              </div>\n              \n              <div className=\"flex-1 p-2 space-y-2 min-h-[200px] max-h-[500px] overflow-y-auto\">\n                {stageProposals.length === 0 ? (\n                  <div className=\"text-center py-8 text-slate-400 text-sm\">\n                    {t.dashboard.noProposals}\n                  </div>\n                ) : (\n                  stageProposals.map((proposal) => (\n                    <div\n                      key={proposal.id}\n                      className=\"bg-white rounded-lg p-3 shadow-sm border border-slate-200 hover:shadow-md transition-shadow cursor-pointer\"\n                      data-testid={`pipeline-card-${proposal.id}`}\n                      onClick={() => onViewProposal(proposal)}\n                    >\n                      <div className=\"font-semibold text-slate-900 text-sm truncate mb-1\">\n                        {proposal.clientName}\n                      </div>\n                      <div className=\"text-xs text-slate-500 truncate mb-2\">\n                        {proposal.jobTypeName}\n                      </div>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"font-bold text-slate-800 text-sm\">\n                          {new Intl.NumberFormat(language === 'es' ? 'es-ES' : 'en-US', { \n                            style: 'currency', \n                            currency: 'USD', \n                            maximumFractionDigits: 0 \n                          }).format(Math.round((proposal.priceLow + proposal.priceHigh) / 2))}\n                        </span>\n                        {proposal.viewCount != null && proposal.viewCount > 0 && (\n                          <span \n                            className=\"flex items-center gap-1 bg-purple-100 text-purple-700 text-xs px-2 py-0.5 rounded-full\"\n                            data-testid={`view-count-badge-${proposal.id}`}\n                          >\n                            <Eye className=\"w-3 h-3\" />\n                            {proposal.viewCount} {t.dashboard.views}\n                          </span>\n                        )}\n                      </div>\n                      \n                      <div className=\"flex items-center justify-between gap-1 pt-2 border-t border-slate-100\">\n                        {getPrevStatus(proposal.status) && stage.key !== 'lost' ? (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            className=\"h-7 px-2 text-slate-400 hover:text-slate-600\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              const prev = getPrevStatus(proposal.status);\n                              if (prev) onStatusChange(proposal.id, prev);\n                            }}\n                            data-testid={`move-prev-${proposal.id}`}\n                          >\n                            <ChevronLeft className=\"w-4 h-4\" />\n                          </Button>\n                        ) : (\n                          <div className=\"w-7\" />\n                        )}\n                        \n                        {stage.key !== 'won' && stage.key !== 'lost' && (\n                          <div className=\"flex gap-1\">\n                            {stage.key === 'accepted' ? (\n                              <>\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  className=\"h-7 px-2 text-green-600 hover:bg-green-50\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    onStatusChange(proposal.id, 'won');\n                                  }}\n                                  data-testid={`move-won-${proposal.id}`}\n                                >\n                                  <Trophy className=\"w-4 h-4\" />\n                                </Button>\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  className=\"h-7 px-2 text-red-600 hover:bg-red-50\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    onStatusChange(proposal.id, 'lost');\n                                  }}\n                                  data-testid={`move-lost-${proposal.id}`}\n                                >\n                                  <ThumbsDown className=\"w-4 h-4\" />\n                                </Button>\n                              </>\n                            ) : (\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"h-7 px-2 text-slate-400 hover:text-slate-600\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  const next = getNextStatus(proposal.status);\n                                  if (next) onStatusChange(proposal.id, next);\n                                }}\n                                data-testid={`move-next-${proposal.id}`}\n                              >\n                                <ChevronRight className=\"w-4 h-4\" />\n                              </Button>\n                            )}\n                          </div>\n                        )}\n                        \n                        {(stage.key === 'won' || stage.key === 'lost') && (\n                          <div className=\"w-7\" />\n                        )}\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nfunction MobileProposalMenu({ \n  proposal, \n  t, \n  onEdit, \n  onView, \n  onEmail, \n  onPrice, \n  onCountersign,\n  onPayment,\n  onStatusChange,\n  showPaymentLink\n}: { \n  proposal: Proposal;\n  t: any;\n  onEdit: () => void;\n  onView: () => void;\n  onEmail: () => void;\n  onPrice: () => void;\n  onCountersign: () => void;\n  onPayment: () => void;\n  onStatusChange: (status: string) => void;\n  showPaymentLink: boolean;\n}) {\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-9 w-9 text-slate-400 hover:text-slate-600\">\n          <MoreVertical className=\"w-5 h-5\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-48\">\n        <DropdownMenuLabel className=\"text-xs\">{t.dashboard.actions}</DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        <DropdownMenuItem onClick={onEdit} className=\"py-3\">\n          <Edit className=\"w-4 h-4 mr-3\" />\n          {t.dashboard.editProposal}\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={onView} className=\"py-3\">\n          <Download className=\"w-4 h-4 mr-3\" />\n          {t.dashboard.downloadPdf}\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={onPrice} className=\"py-3\">\n          <DollarSign className=\"w-4 h-4 mr-3\" />\n          {t.dashboard.adjustPrice}\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={onEmail} className=\"py-3\">\n          <Mail className=\"w-4 h-4 mr-3\" />\n          {t.dashboard.sendViaEmail}\n        </DropdownMenuItem>\n        {showPaymentLink && (\n          <DropdownMenuItem onClick={onPayment} className=\"py-3 text-primary\" data-testid={`menu-payment-${proposal.id}`}>\n            <CreditCard className=\"w-4 h-4 mr-3\" />\n            {t.dashboard.requestPayment}\n          </DropdownMenuItem>\n        )}\n        {proposal.status === 'accepted' && !proposal.contractorSignature && (\n          <>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem onClick={onCountersign} className=\"py-3 text-green-600 font-medium\">\n              <Pen className=\"w-4 h-4 mr-3\" />\n              {t.dashboard.countersign}\n            </DropdownMenuItem>\n          </>\n        )}\n        <DropdownMenuSeparator />\n        <DropdownMenuLabel className=\"text-xs\">{t.dashboard.markStatus}</DropdownMenuLabel>\n        <DropdownMenuItem onClick={() => onStatusChange('won')} className=\"py-3 text-green-600\">\n          <Trophy className=\"w-4 h-4 mr-3\" />\n          {t.dashboard.markAsWon}\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={() => onStatusChange('lost')} className=\"py-3 text-red-600\">\n          <ThumbsDown className=\"w-4 h-4 mr-3\" />\n          {t.dashboard.markAsLost}\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n\nexport default function Dashboard() {\n  const { user, isLoading: authLoading } = useAuth();\n  const { t, language } = useLanguage();\n  const [, setLocation] = useLocation();\n  const [proposals, setProposals] = useState<Proposal[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showPaywall, setShowPaywall] = useState(false);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  const [isSuccess, setIsSuccess] = useState<boolean>(true);\n  const [emailModalData, setEmailModalData] = useState<{ id: number; clientName: string } | null>(null);\n  const [priceModalData, setPriceModalData] = useState<{ \n    id: number; \n    clientName: string; \n    priceLow: number; \n    priceHigh: number; \n  } | null>(null);\n  const [countersignModalData, setCountersignModalData] = useState<{\n    id: number;\n    clientName: string;\n  } | null>(null);\n  const [paymentModalData, setPaymentModalData] = useState<{\n    id: number;\n    clientName: string;\n    priceLow: number;\n    priceHigh: number;\n    paymentLinkUrl?: string | null;\n    depositPercentage?: number | null;\n  } | null>(null);\n  const [viewMode, setViewMode] = useState<'list' | 'pipeline'>('list');\n\n  const handleViewProposal = (proposal: Proposal) => {\n    if (proposal.publicToken) {\n      window.open(`/p/${proposal.publicToken}`, '_blank');\n    }\n  };\n\n  const handleEditProposal = (proposal: Proposal) => {\n    setLocation(`/app?edit=${proposal.id}`);\n  };\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get('success') === 'true') {\n      const sessionId = urlParams.get('session_id');\n      if (sessionId) {\n        fetch('/api/stripe/verify-session', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          credentials: 'include',\n          body: JSON.stringify({ sessionId }),\n        })\n          .then(res => res.json())\n          .then((data) => {\n            if (data.creditsAdded) {\n              setSuccessMessage(`${t.dashboard.paymentSuccessful} ${data.creditsAdded} ${t.dashboard.paymentSuccessCredits}`);\n              setIsSuccess(true);\n              window.location.reload();\n            } else {\n              setSuccessMessage(t.dashboard.paymentSuccessful);\n              setIsSuccess(true);\n            }\n          })\n          .catch(() => {\n            setSuccessMessage(t.dashboard.paymentReceived);\n            setIsSuccess(true);\n          });\n      } else {\n        setSuccessMessage(t.dashboard.paymentSuccessful);\n        setIsSuccess(true);\n      }\n      window.history.replaceState({}, '', '/dashboard');\n    } else if (urlParams.get('canceled') === 'true') {\n      setSuccessMessage(t.dashboard.paymentCanceled);\n      setIsSuccess(false);\n      window.history.replaceState({}, '', '/dashboard');\n    }\n  }, [t]);\n\n  useEffect(() => {\n    if (user) {\n      fetch('/api/proposals', { credentials: 'include' })\n        .then(res => res.json())\n        .then(data => {\n          setProposals(Array.isArray(data) ? data : []);\n        })\n        .catch(console.error)\n        .finally(() => setLoading(false));\n    } else if (!authLoading) {\n      setLoading(false);\n    }\n  }, [user, authLoading]);\n\n  const creditsExpired = user?.creditsExpireAt && new Date(user.creditsExpireAt) < new Date();\n  const availableCredits = creditsExpired ? 0 : (user?.proposalCredits || 0);\n\n  const updateProposalStatus = async (proposalId: number, status: string) => {\n    try {\n      const response = await fetch(`/api/proposals/${proposalId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ status }),\n      });\n      \n      if (response.ok) {\n        setProposals(prev => \n          prev.map(p => p.id === proposalId ? { ...p, status } : p)\n        );\n      }\n    } catch (error) {\n      console.error('Error updating proposal status:', error);\n    }\n  };\n  \n  const stats = [\n    {\n      title: t.dashboard.proposalCredits,\n      value: availableCredits.toString(),\n      change: user?.creditsExpireAt && !creditsExpired \n        ? `${t.dashboard.expires} ${new Date(user.creditsExpireAt).toLocaleDateString()}` \n        : t.dashboard.availableToUse,\n      icon: Coins,\n      color: \"text-purple-500\",\n      bgColor: \"bg-purple-50\",\n    },\n    {\n      title: t.dashboard.totalProposals,\n      value: proposals.length.toString(),\n      change: t.dashboard.allTime,\n      icon: FileText,\n      color: \"text-blue-500\",\n      bgColor: \"bg-blue-50\",\n    },\n    {\n      title: t.dashboard.revenueWon,\n      value: new Intl.NumberFormat(language === 'es' ? 'es-ES' : 'en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(\n        proposals\n          .filter(p => p.status === 'won')\n          .reduce((sum, p) => sum + (p.priceLow + p.priceHigh) / 2, 0)\n      ),\n      change: t.dashboard.fromWonProposals,\n      icon: DollarSign,\n      color: \"text-green-500\",\n      bgColor: \"bg-green-50\",\n    },\n    {\n      title: t.dashboard.pending,\n      value: proposals.filter(p => p.status === 'sent' || p.status === 'draft').length.toString(),\n      change: t.dashboard.awaitingResponse,\n      icon: Users,\n      color: \"text-orange-500\",\n      bgColor: \"bg-orange-50\",\n    },\n  ];\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    \n    if (days === 0) return t.dashboard.today;\n    if (days === 1) return t.dashboard.yesterday;\n    const locale = language === 'es' ? 'es-ES' : 'en-US';\n    return date.toLocaleDateString(locale, { month: 'short', day: 'numeric' });\n  };\n\n  if (authLoading || loading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Layout>\n        <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center px-4\">\n          <h2 className=\"text-2xl font-bold mb-4\">{t.settings.signInRequired}</h2>\n          <p className=\"text-muted-foreground mb-6\">{t.dashboard.subtitle}</p>\n          <a href=\"/api/login\" className=\"bg-primary text-white px-6 py-3 rounded-md font-semibold\">\n            {t.settings.signInWithReplit}\n          </a>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen pb-12\">\n        {successMessage && (\n          <div className={`py-3 px-4 text-center text-sm font-medium ${\n            isSuccess \n              ? 'bg-green-100 text-green-800' \n              : 'bg-yellow-100 text-yellow-800'\n          }`}>\n            <div className=\"flex items-center justify-center gap-2\">\n              {isSuccess ? (\n                <CheckCircle className=\"w-4 h-4\" />\n              ) : (\n                <XCircle className=\"w-4 h-4\" />\n              )}\n              {successMessage}\n            </div>\n          </div>\n        )}\n\n        <div className=\"bg-white border-b border-slate-200\">\n          <div className=\"container mx-auto px-4 py-4 md:py-8\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-3 md:gap-4\">\n              <div>\n                <h1 className=\"text-xl md:text-2xl font-heading font-bold text-slate-900\">{t.dashboard.dashboardTitle}</h1>\n                <p className=\"text-slate-500 text-xs md:text-sm\">\n                  {t.dashboard.welcomeBack}, {user.firstName || t.dashboard.contractor}\n                  {user.isPro && (\n                    <span className=\"ml-2 bg-secondary text-secondary-foreground text-xs px-2 py-0.5 rounded font-bold\">\n                      PRO\n                    </span>\n                  )}\n                </p>\n              </div>\n              <div className=\"flex items-center gap-2 md:gap-3\">\n                <Button variant=\"outline\" className=\"gap-2 h-9 md:h-10 text-xs md:text-sm px-3 md:px-4 hidden md:flex\">\n                  <LayoutDashboard className=\"w-4 h-4\" />\n                  {t.dashboard.manageTemplates}\n                </Button>\n                <Link href=\"/app\" className=\"inline-flex items-center justify-center h-9 md:h-10 px-3 md:px-4 py-2 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 font-medium text-xs md:text-sm transition-colors gap-2\" data-testid=\"button-new-proposal\">\n                  <Plus className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\">{t.dashboard.newProposal}</span>\n                  <span className=\"sm:hidden\">New</span>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"container mx-auto px-4 py-6 md:py-8 space-y-6 md:space-y-8\">\n          {/* Stats Grid - 2 columns on mobile, 4 on desktop */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6\">\n            {stats.map((stat, i) => (\n              <Card key={i} className=\"border-none shadow-sm hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-3 md:p-6 flex items-center justify-between\">\n                  <div className=\"min-w-0 flex-1\">\n                    <p className=\"text-xs md:text-sm font-medium text-slate-500 mb-0.5 md:mb-1 truncate\">{stat.title}</p>\n                    <div className=\"text-lg md:text-2xl font-heading font-bold text-slate-900 truncate\">{stat.value}</div>\n                    <p className=\"text-[10px] md:text-xs text-green-600 mt-0.5 md:mt-1 font-medium truncate\">{stat.change}</p>\n                  </div>\n                  <div className={`h-8 w-8 md:h-12 md:w-12 rounded-full ${stat.bgColor} flex items-center justify-center flex-shrink-0 ml-2`}>\n                    <stat.icon className={`w-4 h-4 md:w-6 md:h-6 ${stat.color}`} />\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          <Card className=\"border-none shadow-sm\">\n            <CardHeader className=\"px-4 md:px-6 py-4 md:py-5 border-b border-slate-100 flex flex-row items-center justify-between bg-white rounded-t-lg gap-2\">\n              <CardTitle className=\"text-base md:text-lg font-bold text-slate-800\">{t.dashboard.recentProposals}</CardTitle>\n              <div className=\"flex items-center gap-2 md:gap-3\">\n                <div className=\"hidden md:flex items-center bg-slate-100 rounded-lg p-1\">\n                  <Button\n                    variant={viewMode === 'list' ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    className={`h-7 px-3 gap-1.5 text-xs ${viewMode === 'list' ? '' : 'hover:bg-slate-200'}`}\n                    onClick={() => setViewMode('list')}\n                    data-testid=\"toggle-list-view\"\n                  >\n                    <List className=\"w-3.5 h-3.5\" />\n                    {t.dashboard.listView}\n                  </Button>\n                  <Button\n                    variant={viewMode === 'pipeline' ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    className={`h-7 px-3 gap-1.5 text-xs ${viewMode === 'pipeline' ? '' : 'hover:bg-slate-200'}`}\n                    onClick={() => setViewMode('pipeline')}\n                    data-testid=\"toggle-pipeline-view\"\n                  >\n                    <Columns className=\"w-3.5 h-3.5\" />\n                    {t.dashboard.pipelineView}\n                  </Button>\n                </div>\n                <div className=\"relative w-full max-w-[200px] md:max-w-[256px]\">\n                  <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400\" />\n                  <Input placeholder={t.dashboard.searchPlaceholder} className=\"pl-9 h-9 text-sm bg-slate-50 border-slate-200\" />\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n              {proposals.length === 0 ? (\n                <div className=\"text-center py-8 md:py-12 px-4\">\n                  <FileText className=\"w-10 h-10 md:w-12 md:h-12 mx-auto text-slate-300 mb-3 md:mb-4\" />\n                  <h3 className=\"font-bold text-slate-700 mb-2 text-sm md:text-base\">{t.dashboard.noProposals}</h3>\n                  <p className=\"text-slate-500 text-xs md:text-sm mb-4\">{t.dashboard.noProposalsDesc}</p>\n                  <Link href=\"/app\" className=\"inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-md font-medium text-sm\">\n                    <Plus className=\"w-4 h-4\" />\n                    {t.dashboard.createProposal}\n                  </Link>\n                </div>\n              ) : viewMode === 'pipeline' ? (\n                <PipelineView \n                  proposals={proposals}\n                  t={t}\n                  language={language}\n                  onStatusChange={updateProposalStatus}\n                  onViewProposal={handleViewProposal}\n                />\n              ) : (\n                <>\n                  {/* Mobile Card View */}\n                  <div className=\"md:hidden divide-y divide-slate-100\">\n                    {proposals.map((proposal) => (\n                      <div key={proposal.id} data-testid={`card-proposal-mobile-${proposal.id}`} className=\"p-4 bg-white hover:bg-slate-50/50 transition-colors\">\n                        <div className=\"flex items-start justify-between gap-3 mb-3\">\n                          <div className=\"min-w-0 flex-1\">\n                            <div className=\"font-bold text-slate-900 truncate\">{proposal.clientName}</div>\n                            <div className=\"text-xs text-slate-500 truncate\">{proposal.address}</div>\n                          </div>\n                          <div className=\"flex items-center gap-1 flex-shrink-0\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              className=\"h-9 w-9 text-slate-400 hover:text-blue-600\"\n                              onClick={() => setEmailModalData({ \n                                id: proposal.id, \n                                clientName: proposal.clientName \n                              })}\n                              title={t.dashboard.quickSend}\n                              data-testid={`button-quick-send-mobile-${proposal.id}`}\n                            >\n                              <Mail className=\"w-5 h-5\" />\n                            </Button>\n                            <MobileProposalMenu \n                              proposal={proposal}\n                              t={t}\n                              onEdit={() => handleEditProposal(proposal)}\n                              onView={() => handleViewProposal(proposal)}\n                              onEmail={() => setEmailModalData({ id: proposal.id, clientName: proposal.clientName })}\n                              onPrice={() => setPriceModalData({ id: proposal.id, clientName: proposal.clientName, priceLow: proposal.priceLow, priceHigh: proposal.priceHigh })}\n                              onCountersign={() => setCountersignModalData({ id: proposal.id, clientName: proposal.clientName })}\n                              onPayment={() => setPaymentModalData({ \n                                id: proposal.id, \n                                clientName: proposal.clientName, \n                                priceLow: proposal.priceLow, \n                                priceHigh: proposal.priceHigh,\n                                paymentLinkUrl: proposal.paymentLinkUrl,\n                                depositPercentage: proposal.depositPercentage\n                              })}\n                              onStatusChange={(status) => updateProposalStatus(proposal.id, status)}\n                              showPaymentLink={!!user?.userStripeEnabled}\n                            />\n                          </div>\n                        </div>\n                        <div className=\"flex items-center justify-between gap-2 text-xs\">\n                          <span className=\"inline-flex items-center px-2 py-0.5 rounded-full font-medium bg-blue-50 text-blue-700 border border-blue-100 truncate max-w-[120px]\">\n                            {proposal.jobTypeName}\n                          </span>\n                          <span className=\"font-bold text-slate-700\">\n                            {new Intl.NumberFormat(language === 'es' ? 'es-ES' : 'en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(Math.round((proposal.priceLow + proposal.priceHigh) / 2))}\n                          </span>\n                        </div>\n                        <div className=\"flex items-center justify-between gap-2 mt-2\">\n                          <div className=\"flex items-center gap-1 text-xs text-slate-500\">\n                            <Calendar className=\"w-3 h-3\" /> {formatDate(proposal.createdAt)}\n                          </div>\n                          <StatusBadge status={proposal.status} t={t} />\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Desktop Table View */}\n                  <div className=\"hidden md:block overflow-x-auto\">\n                    <table className=\"w-full text-sm text-left\">\n                      <thead className=\"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-100\">\n                        <tr>\n                          <th className=\"px-6 py-3 font-semibold\">{t.dashboard.clientProject}</th>\n                          <th className=\"px-6 py-3 font-semibold\">{t.dashboard.jobType}</th>\n                          <th className=\"px-6 py-3 font-semibold\">{t.dashboard.value}</th>\n                          <th className=\"px-6 py-3 font-semibold\">{t.dashboard.date}</th>\n                          <th className=\"px-6 py-3 font-semibold\">{t.dashboard.status}</th>\n                          <th className=\"px-6 py-3 font-semibold text-right\">{t.dashboard.actions}</th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"divide-y divide-slate-100\">\n                        {proposals.map((proposal) => (\n                          <tr key={proposal.id} data-testid={`row-proposal-${proposal.id}`} className=\"bg-white hover:bg-slate-50/50 transition-colors group\">\n                            <td className=\"px-6 py-4\">\n                              <div className=\"font-bold text-slate-900\">{proposal.clientName}</div>\n                              <div className=\"text-xs text-slate-500\">{proposal.address}</div>\n                            </td>\n                            <td className=\"px-6 py-4\">\n                              <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100\">\n                                {proposal.jobTypeName}\n                              </span>\n                            </td>\n                            <td className=\"px-6 py-4 font-medium text-slate-700\">\n                              {new Intl.NumberFormat(language === 'es' ? 'es-ES' : 'en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(Math.round((proposal.priceLow + proposal.priceHigh) / 2))}\n                            </td>\n                            <td className=\"px-6 py-4 text-slate-500\">\n                              <div className=\"flex items-center gap-1\">\n                                <Calendar className=\"w-3 h-3\" /> {formatDate(proposal.createdAt)}\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4\">\n                              <StatusBadge status={proposal.status} t={t} />\n                            </td>\n                            <td className=\"px-6 py-4 text-right\">\n                              <div className=\"flex items-center justify-end gap-1\">\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"icon\"\n                                  className=\"h-8 w-8 text-slate-400 hover:text-blue-600\"\n                                  onClick={() => setEmailModalData({ \n                                    id: proposal.id, \n                                    clientName: proposal.clientName \n                                  })}\n                                  title={t.dashboard.quickSend}\n                                  data-testid={`button-quick-send-${proposal.id}`}\n                                >\n                                  <Mail className=\"w-4 h-4\" />\n                                </Button>\n                            <DropdownMenu>\n                              <DropdownMenuTrigger asChild>\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-slate-400 hover:text-slate-600\">\n                                  <MoreVertical className=\"w-4 h-4\" />\n                                </Button>\n                              </DropdownMenuTrigger>\n                              <DropdownMenuContent align=\"end\">\n                                <DropdownMenuLabel>{t.dashboard.actions}</DropdownMenuLabel>\n                                <DropdownMenuSeparator />\n                                <DropdownMenuItem \n                                  onClick={() => handleEditProposal(proposal)}\n                                  data-testid={`button-edit-proposal-${proposal.id}`}\n                                >\n                                  <Edit className=\"w-4 h-4 mr-2\" />\n                                  {t.dashboard.editProposal}\n                                </DropdownMenuItem>\n                                <DropdownMenuItem \n                                  onClick={() => handleViewProposal(proposal)}\n                                  data-testid={`button-download-proposal-${proposal.id}`}\n                                >\n                                  <Download className=\"w-4 h-4 mr-2\" />\n                                  {t.dashboard.downloadPdf}\n                                </DropdownMenuItem>\n                                <DropdownMenuItem \n                                  onClick={() => setPriceModalData({ \n                                    id: proposal.id, \n                                    clientName: proposal.clientName,\n                                    priceLow: proposal.priceLow,\n                                    priceHigh: proposal.priceHigh\n                                  })}\n                                  data-testid={`button-adjust-price-${proposal.id}`}\n                                >\n                                  <DollarSign className=\"w-4 h-4 mr-2\" />\n                                  Adjust Price\n                                </DropdownMenuItem>\n                                <DropdownMenuItem \n                                  onClick={() => setEmailModalData({ \n                                    id: proposal.id, \n                                    clientName: proposal.clientName \n                                  })}\n                                  data-testid={`button-email-proposal-${proposal.id}`}\n                                >\n                                  {t.dashboard.sendViaEmail}\n                                </DropdownMenuItem>\n                                {user?.userStripeEnabled && (\n                                  <DropdownMenuItem \n                                    onClick={() => setPaymentModalData({ \n                                      id: proposal.id, \n                                      clientName: proposal.clientName,\n                                      priceLow: proposal.priceLow,\n                                      priceHigh: proposal.priceHigh,\n                                      paymentLinkUrl: proposal.paymentLinkUrl,\n                                      depositPercentage: proposal.depositPercentage\n                                    })}\n                                    data-testid={`button-payment-link-${proposal.id}`}\n                                    className=\"text-primary\"\n                                  >\n                                    <CreditCard className=\"w-4 h-4 mr-2\" />\n                                    Request Payment\n                                  </DropdownMenuItem>\n                                )}\n                                {proposal.status === 'accepted' && !proposal.contractorSignature && (\n                                  <>\n                                    <DropdownMenuSeparator />\n                                    <DropdownMenuItem \n                                      onClick={() => setCountersignModalData({ \n                                        id: proposal.id, \n                                        clientName: proposal.clientName \n                                      })}\n                                      data-testid={`button-countersign-${proposal.id}`}\n                                      className=\"text-green-600 font-medium\"\n                                    >\n                                      <Pen className=\"w-4 h-4 mr-2\" />\n                                      Countersign Proposal\n                                    </DropdownMenuItem>\n                                  </>\n                                )}\n                                <DropdownMenuSeparator />\n                                <DropdownMenuLabel>{t.dashboard.markStatus}</DropdownMenuLabel>\n                                <DropdownMenuItem \n                                  onClick={() => updateProposalStatus(proposal.id, 'won')}\n                                  data-testid={`button-mark-won-${proposal.id}`}\n                                  className=\"text-green-600\"\n                                >\n                                  <Trophy className=\"w-4 h-4 mr-2\" />\n                                  {t.dashboard.markAsWon}\n                                </DropdownMenuItem>\n                                <DropdownMenuItem \n                                  onClick={() => updateProposalStatus(proposal.id, 'lost')}\n                                  data-testid={`button-mark-lost-${proposal.id}`}\n                                  className=\"text-red-600\"\n                                >\n                                  <ThumbsDown className=\"w-4 h-4 mr-2\" />\n                                  {t.dashboard.markAsLost}\n                                </DropdownMenuItem>\n                                <DropdownMenuSeparator />\n                                <DropdownMenuItem className=\"text-red-600\">{t.dashboard.delete}</DropdownMenuItem>\n                              </DropdownMenuContent>\n                            </DropdownMenu>\n                            </div>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                  </div>\n                </>\n              )}\n            </CardContent>\n          </Card>\n          \n          {!user.isPro && (\n            <div className=\"bg-slate-900 rounded-xl p-4 md:p-8 text-white flex flex-col md:flex-row items-center justify-between gap-4 md:gap-6 shadow-lg relative overflow-hidden\">\n              <div className=\"absolute top-0 right-0 w-64 h-64 bg-secondary opacity-10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2\"></div>\n              \n              <div className=\"relative z-10 text-center md:text-left\">\n                <h3 className=\"text-lg md:text-2xl font-heading font-bold mb-1 md:mb-2\">{t.dashboard.unlockUnlimited}</h3>\n                <p className=\"text-slate-300 max-w-xl text-sm md:text-base\">\n                  {t.dashboard.upgradeDescription}\n                </p>\n              </div>\n              <Button \n                data-testid=\"button-upgrade\"\n                onClick={() => setShowPaywall(true)}\n                className=\"bg-secondary hover:bg-secondary/90 text-slate-900 font-bold px-6 md:px-8 relative z-10 shadow-lg shadow-secondary/20 w-full md:w-auto\"\n              >\n                {t.dashboard.upgradeNow}\n              </Button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <PaywallModal \n        isOpen={showPaywall} \n        onClose={() => setShowPaywall(false)} \n        onUnlock={() => setShowPaywall(false)} \n      />\n\n      {emailModalData && (\n        <EmailProposalModal\n          isOpen={true}\n          onClose={() => setEmailModalData(null)}\n          proposalId={emailModalData.id}\n          clientName={emailModalData.clientName}\n          onSuccess={() => {\n            fetch('/api/proposals', { credentials: 'include' })\n              .then(res => res.json())\n              .then(data => setProposals(Array.isArray(data) ? data : []))\n              .catch(console.error);\n          }}\n        />\n      )}\n\n      {priceModalData && (\n        <EditPriceModal\n          isOpen={true}\n          onClose={() => setPriceModalData(null)}\n          proposalId={priceModalData.id}\n          clientName={priceModalData.clientName}\n          currentPriceLow={priceModalData.priceLow}\n          currentPriceHigh={priceModalData.priceHigh}\n          onUpdated={() => {\n            fetch('/api/proposals', { credentials: 'include' })\n              .then(res => res.json())\n              .then(data => setProposals(Array.isArray(data) ? data : []))\n              .catch(console.error);\n          }}\n        />\n      )}\n\n      {countersignModalData && (\n        <CountersignModal\n          isOpen={true}\n          onClose={() => setCountersignModalData(null)}\n          proposalId={countersignModalData.id}\n          clientName={countersignModalData.clientName}\n          onSuccess={() => {\n            setSuccessMessage(\"Proposal countersigned! Client has been notified.\");\n            setIsSuccess(true);\n            fetch('/api/proposals', { credentials: 'include' })\n              .then(res => res.json())\n              .then(data => setProposals(Array.isArray(data) ? data : []))\n              .catch(console.error);\n          }}\n        />\n      )}\n\n      {paymentModalData && (\n        <PaymentLinkModal\n          isOpen={true}\n          onClose={() => setPaymentModalData(null)}\n          proposalId={paymentModalData.id}\n          clientName={paymentModalData.clientName}\n          priceLow={paymentModalData.priceLow}\n          priceHigh={paymentModalData.priceHigh}\n          existingPaymentLink={paymentModalData.paymentLinkUrl}\n          existingDepositPercentage={paymentModalData.depositPercentage}\n          onSuccess={() => {\n            setSuccessMessage(\"Payment link created!\");\n            setIsSuccess(true);\n            fetch('/api/proposals', { credentials: 'include' })\n              .then(res => res.json())\n              .then(data => setProposals(Array.isArray(data) ? data : []))\n              .catch(console.error);\n          }}\n        />\n      )}\n    </Layout>\n  );\n}\n","path":null,"size_bytes":44926,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1148,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":649,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2356,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1598,"size_tokens":null},"client/src/App.tsx":{"content":"import { useEffect } from \"react\";\nimport { Switch, Route, useLocation } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { LanguageProvider } from \"@/hooks/useLanguage\";\nimport { initGA } from \"@/lib/analytics\";\nimport { usePageTracking } from \"@/hooks/use-analytics\";\nimport NotFound from \"@/pages/not-found\";\nimport Home from \"@/pages/home\";\nimport Generator from \"@/pages/generator\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Settings from \"@/pages/settings\";\nimport PublicProposal from \"@/pages/public-proposal\";\nimport Crew from \"@/pages/crew\";\nimport Invite from \"@/pages/invite\";\nimport PricingInsights from \"@/pages/pricing-insights\";\nimport SearchConsole from \"@/pages/search-console\";\nimport TradeLandingPage, { cityData as tradeCityData, tradeCityRoutes, cityKeys as tradeCityKeys } from \"@/pages/trade-landing\";\nimport LocationLandingPage, { cities, trades } from \"@/pages/location-landing\";\nimport ComparePage, { competitorSlugs } from \"@/pages/compare\";\nimport BlogIndex, { blogSlugs } from \"@/pages/blog\";\nimport BlogPostPage from \"@/pages/blog-post\";\nimport SpanishLocationLandingPage, { spanishCities } from \"@/pages/spanish-location-landing\";\nimport Calculator from \"@/pages/calculator\";\nimport CompareBuildertrend from \"@/pages/compare-buildertrend\";\nimport CompareJobber from \"@/pages/compare-jobber\";\nimport CompareHouzz from \"@/pages/compare-houzz\";\nimport SEOTemplatePage, { templateSlugs } from \"@/pages/seo-template\";\nimport PrivacyPolicy from \"@/pages/privacy\";\nimport TermsOfService from \"@/pages/terms\";\nimport MarketPricing from \"@/pages/market-pricing\";\n// Cost lookup page hidden for now - can be re-enabled later\n// import CostLookup from \"@/pages/cost-lookup\";\n\nconst cityKeys = Object.keys(cities);\nconst tradeKeys = Object.keys(trades);\nconst spanishCityKeys = Object.keys(spanishCities);\n\nfunction ScrollToTop() {\n  const [location] = useLocation();\n  \n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location]);\n  \n  return null;\n}\n\nfunction Router() {\n  usePageTracking();\n  \n  return (\n    <>\n      <ScrollToTop />\n      <Switch>\n        <Route path=\"/\" component={Home} />\n        <Route path=\"/app\" component={Generator} />\n        <Route path=\"/dashboard\" component={Dashboard} />\n        <Route path=\"/settings\" component={Settings} />\n        <Route path=\"/crew\" component={Crew} />\n        <Route path=\"/pricing-insights\" component={PricingInsights} />\n        <Route path=\"/search-console\" component={SearchConsole} />\n        <Route path=\"/calculator\" component={Calculator} />\n        <Route path=\"/invite/:token\" component={Invite} />\n        <Route path=\"/p/:token\" component={PublicProposal} />\n        <Route path=\"/privacy\" component={PrivacyPolicy} />\n        <Route path=\"/terms\" component={TermsOfService} />\n        <Route path=\"/market-pricing\" component={MarketPricing} />\n        {/* Cost lookup hidden for now - re-enable when ready */}\n        \n        {/* Trade-specific SEO landing pages */}\n        <Route path=\"/bathroom-remodeling-proposal\">{() => <TradeLandingPage tradeSlug=\"bathroom-remodeling-proposal\" />}</Route>\n        <Route path=\"/kitchen-remodeling-proposal\">{() => <TradeLandingPage tradeSlug=\"kitchen-remodeling-proposal\" />}</Route>\n        <Route path=\"/roofing-proposal\">{() => <TradeLandingPage tradeSlug=\"roofing-proposal\" />}</Route>\n        <Route path=\"/painting-proposal\">{() => <TradeLandingPage tradeSlug=\"painting-proposal\" />}</Route>\n        <Route path=\"/landscaping-proposal\">{() => <TradeLandingPage tradeSlug=\"landscaping-proposal\" />}</Route>\n        <Route path=\"/hvac-proposal\">{() => <TradeLandingPage tradeSlug=\"hvac-proposal\" />}</Route>\n        <Route path=\"/plumbing-proposal\">{() => <TradeLandingPage tradeSlug=\"plumbing-proposal\" />}</Route>\n        <Route path=\"/electrical-proposal\">{() => <TradeLandingPage tradeSlug=\"electrical-proposal\" />}</Route>\n        <Route path=\"/flooring-proposal\">{() => <TradeLandingPage tradeSlug=\"flooring-proposal\" />}</Route>\n        <Route path=\"/siding-proposal\">{() => <TradeLandingPage tradeSlug=\"siding-proposal\" />}</Route>\n        <Route path=\"/drywall-proposal\">{() => <TradeLandingPage tradeSlug=\"drywall-proposal\" />}</Route>\n        <Route path=\"/window-installation-proposal\">{() => <TradeLandingPage tradeSlug=\"window-installation-proposal\" />}</Route>\n        <Route path=\"/deck-building-proposal\">{() => <TradeLandingPage tradeSlug=\"deck-building-proposal\" />}</Route>\n        <Route path=\"/fence-installation-proposal\">{() => <TradeLandingPage tradeSlug=\"fence-installation-proposal\" />}</Route>\n        <Route path=\"/concrete-proposal\">{() => <TradeLandingPage tradeSlug=\"concrete-proposal\" />}</Route>\n        <Route path=\"/tile-installation-proposal\">{() => <TradeLandingPage tradeSlug=\"tile-installation-proposal\" />}</Route>\n        <Route path=\"/cabinet-installation-proposal\">{() => <TradeLandingPage tradeSlug=\"cabinet-installation-proposal\" />}</Route>\n        \n        {/* Trade + City SEO landing pages (top 3 trades Ã— 5 Texas cities = 15 routes) */}\n        {tradeCityRoutes.flatMap(tradeBase => \n          tradeCityKeys.map(citySlug => (\n            <Route \n              key={`${tradeBase}-${citySlug}`}\n              path={`/${tradeBase}-${citySlug}`}\n            >\n              {() => <TradeLandingPage tradeSlug={`${tradeBase}-proposal`} citySlug={citySlug} />}\n            </Route>\n          ))\n        )}\n        \n        {/* Location + Trade SEO landing pages (90 combinations) */}\n        {cityKeys.flatMap(citySlug => \n          tradeKeys.map(tradeSlug => (\n            <Route \n              key={`${citySlug}-${tradeSlug}`}\n              path={`/${citySlug}-${tradeSlug}-proposal`}\n            >\n              {() => <LocationLandingPage citySlug={citySlug} tradeSlug={tradeSlug} />}\n            </Route>\n          ))\n        )}\n        \n        {/* Competitor comparison pages */}\n        {competitorSlugs.map(slug => (\n          <Route key={`compare-${slug}`} path={`/compare/${slug}`}>\n            {() => <ComparePage competitorSlug={slug} />}\n          </Route>\n        ))}\n        \n        {/* SEO comparison pages with /vs/ routes */}\n        <Route path=\"/vs/buildertrend\" component={CompareBuildertrend} />\n        <Route path=\"/vs/jobber\" component={CompareJobber} />\n        <Route path=\"/vs/houzz-pro\" component={CompareHouzz} />\n        \n        {/* Blog pages */}\n        <Route path=\"/blog\" component={BlogIndex} />\n        {blogSlugs.map(slug => (\n          <Route key={`blog-${slug}`} path={`/blog/${slug}`}>\n            {() => <BlogPostPage slug={slug} />}\n          </Route>\n        ))}\n        \n        {/* Spanish city landing pages */}\n        {spanishCityKeys.map(citySlug => (\n          <Route key={`es-${citySlug}`} path={`/es/${citySlug}`}>\n            {() => <SpanishLocationLandingPage citySlug={citySlug} />}\n          </Route>\n        ))}\n        \n        {/* Long-tail keyword SEO template pages */}\n        {templateSlugs.map(slug => (\n          <Route key={`template-${slug}`} path={`/${slug}`}>\n            {() => <SEOTemplatePage templateSlug={slug} />}\n          </Route>\n        ))}\n        \n        <Route component={NotFound} />\n      </Switch>\n    </>\n  );\n}\n\ninitGA();\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <LanguageProvider>\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </LanguageProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":7679,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","path":null,"size_bytes":7569,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"pg\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1417,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1342,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":2001,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1037,"size_tokens":null},"server/webhookHandlers.ts":{"content":"import Stripe from 'stripe';\nimport { getStripeSync, getUncachableStripeClient } from './stripeClient';\nimport { storage } from './storage';\nimport { sendPurchaseNotification } from './emailService';\n\nconst ADMIN_NOTIFICATION_EMAIL = process.env.ADMIN_EMAIL || '';\n\nexport class WebhookHandlers {\n  static async processWebhook(payload: Buffer, signature: string, uuid: string): Promise<void> {\n    if (!Buffer.isBuffer(payload)) {\n      throw new Error(\n        'STRIPE WEBHOOK ERROR: Payload must be a Buffer. ' +\n        'Received type: ' + typeof payload + '. ' +\n        'This usually means express.json() parsed the body before reaching this handler. ' +\n        'FIX: Ensure webhook route is registered BEFORE app.use(express.json()).'\n      );\n    }\n\n    const sync = await getStripeSync();\n    await sync.processWebhook(payload, signature, uuid);\n\n    const event = JSON.parse(payload.toString()) as Stripe.Event;\n    await WebhookHandlers.handleEvent(event);\n  }\n\n  static async handleEvent(event: Stripe.Event): Promise<void> {\n    console.log(`Processing Stripe event: ${event.type}`);\n\n    switch (event.type) {\n      case 'checkout.session.completed':\n        await WebhookHandlers.handleCheckoutCompleted(event.data.object as Stripe.Checkout.Session);\n        break;\n\n      case 'customer.subscription.updated':\n        await WebhookHandlers.handleSubscriptionUpdated(event.data.object as Stripe.Subscription);\n        break;\n\n      case 'customer.subscription.deleted':\n        await WebhookHandlers.handleSubscriptionDeleted(event.data.object as Stripe.Subscription);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  static async handleCheckoutCompleted(session: Stripe.Checkout.Session): Promise<void> {\n    // Check if this is a proposal payment (from payment link)\n    if (session.payment_link) {\n      await WebhookHandlers.handlePaymentLinkCompleted(session);\n      return;\n    }\n\n    const userId = session.client_reference_id;\n    const customerId = session.customer as string;\n    const subscriptionId = session.subscription as string;\n    const planType = session.metadata?.planType as 'pro' | 'crew' | undefined;\n\n    if (!userId) {\n      console.error('No user ID in checkout session');\n      return;\n    }\n\n    console.log(`Activating Pro for user ${userId}, customer ${customerId}, subscription ${subscriptionId}, plan: ${planType}`);\n\n    await storage.updateUserStripeInfo(userId, {\n      stripeCustomerId: customerId,\n      stripeSubscriptionId: subscriptionId,\n      isPro: true,\n      subscriptionPlan: planType || 'pro',\n    });\n\n    // Send email notification to admin about the new purchase\n    if (ADMIN_NOTIFICATION_EMAIL) {\n      try {\n        const stripe = await getUncachableStripeClient();\n        \n        // Fetch customer and subscription details\n        const [customer, subscription] = await Promise.all([\n          stripe.customers.retrieve(customerId),\n          stripe.subscriptions.retrieve(subscriptionId)\n        ]);\n\n        const customerData = customer as Stripe.Customer;\n        const planName = subscription.items.data[0]?.price?.nickname || 'ScopeGen Pro';\n        const amount = subscription.items.data[0]?.price?.unit_amount || 0;\n\n        const result = await sendPurchaseNotification(ADMIN_NOTIFICATION_EMAIL, {\n          customerEmail: customerData.email || 'unknown',\n          customerName: customerData.name || undefined,\n          planName,\n          amount,\n          subscriptionId,\n        });\n\n        if (result.success) {\n          console.log(`Purchase notification sent to ${ADMIN_NOTIFICATION_EMAIL}`);\n        } else {\n          console.error('Failed to send purchase notification:', result.error);\n        }\n      } catch (error) {\n        console.error('Error sending purchase notification:', error);\n      }\n    }\n  }\n\n  static async handleSubscriptionUpdated(subscription: Stripe.Subscription): Promise<void> {\n    const customerId = subscription.customer as string;\n    const subscriptionId = subscription.id;\n    const isActive = ['active', 'trialing'].includes(subscription.status);\n\n    const user = await storage.getUserByStripeCustomerId(customerId);\n    if (!user) {\n      console.error(`No user found for customer ${customerId}`);\n      return;\n    }\n\n    console.log(`Updating subscription for user ${user.id}, active: ${isActive}`);\n\n    await storage.updateUserStripeInfo(user.id, {\n      stripeSubscriptionId: subscriptionId,\n      isPro: isActive,\n    });\n  }\n\n  static async handleSubscriptionDeleted(subscription: Stripe.Subscription): Promise<void> {\n    const customerId = subscription.customer as string;\n\n    const user = await storage.getUserByStripeCustomerId(customerId);\n    if (!user) {\n      console.error(`No user found for customer ${customerId}`);\n      return;\n    }\n\n    console.log(`Deactivating Pro for user ${user.id}`);\n\n    await storage.updateUserStripeInfo(user.id, {\n      stripeSubscriptionId: null,\n      isPro: false,\n      subscriptionPlan: null,\n    });\n  }\n\n  static async handlePaymentLinkCompleted(session: Stripe.Checkout.Session): Promise<void> {\n    const paymentLinkId = session.payment_link as string;\n    const amountTotal = session.amount_total || 0;\n    const paymentIntentId = session.payment_intent as string;\n\n    console.log(`Processing payment link completion: ${paymentLinkId}, amount: ${amountTotal}`);\n\n    // Find the proposal with this payment link\n    const proposal = await storage.getProposalByPaymentLinkId(paymentLinkId);\n    if (!proposal) {\n      console.error(`No proposal found for payment link ${paymentLinkId}`);\n      return;\n    }\n\n    // Idempotency check: if this payment intent was already processed, skip\n    if (proposal.stripePaymentIntentId === paymentIntentId) {\n      console.log(`Payment intent ${paymentIntentId} already processed for proposal ${proposal.id}, skipping`);\n      return;\n    }\n\n    console.log(`Updating payment status for proposal ${proposal.id}`);\n\n    // Calculate new paid amount\n    const newPaidAmount = (proposal.paidAmount || 0) + amountTotal;\n    const depositAmount = proposal.depositAmount || 0;\n    \n    // Determine payment status\n    let paymentStatus = 'partial';\n    if (newPaidAmount >= depositAmount) {\n      paymentStatus = 'paid';\n    }\n\n    // Update the proposal\n    await storage.updateProposalPaymentStatus(proposal.id, {\n      paidAmount: newPaidAmount,\n      paymentStatus,\n      stripePaymentIntentId: paymentIntentId,\n    });\n\n    console.log(`Payment recorded for proposal ${proposal.id}: ${paymentStatus}, paid: ${newPaidAmount}`);\n  }\n}\n","path":null,"size_bytes":6566,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  const publicPath = path.resolve(__dirname, \"..\", \"public\");\n  \n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  // Serve static assets from dist/public (the built React app)\n  app.use(express.static(distPath));\n  \n  // Also serve files from the public folder (for favicon, robots.txt, etc.)\n  if (fs.existsSync(publicPath)) {\n    app.use(express.static(publicPath));\n  }\n\n  // Serve static landing page at root path only\n  app.get(\"/\", (_req, res) => {\n    const landingPage = path.resolve(publicPath, \"index.html\");\n    if (fs.existsSync(landingPage)) {\n      res.sendFile(landingPage);\n    } else {\n      // Fallback to React app if no static landing page\n      res.sendFile(path.resolve(distPath, \"index.html\"));\n    }\n  });\n\n  // All other routes serve the React SPA\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":1177,"size_tokens":null},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","path":null,"size_bytes":6044,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4887,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1486,"size_tokens":null},"server/stripeService.ts":{"content":"import { storage } from './storage';\nimport { getUncachableStripeClient, createStripeClientWithKey } from './stripeClient';\nimport { db } from './db';\nimport { sql } from 'drizzle-orm';\n\nexport class StripeService {\n  async createCustomer(email: string, userId: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.customers.create({\n      email,\n      metadata: { userId },\n    });\n  }\n\n  async createCheckoutSession(customerId: string, priceId: string, successUrl: string, cancelUrl: string, userId: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.checkout.sessions.create({\n      customer: customerId,\n      client_reference_id: userId,\n      payment_method_types: ['card'],\n      line_items: [{ price: priceId, quantity: 1 }],\n      mode: 'subscription',\n      success_url: successUrl,\n      cancel_url: cancelUrl,\n      metadata: { userId },\n    });\n  }\n\n  async createOneTimeCheckoutSession(\n    customerId: string, \n    productType: 'starter' | 'single' | 'pack',\n    successUrl: string, \n    cancelUrl: string, \n    userId: string\n  ) {\n    const stripe = await getUncachableStripeClient();\n    \n    // New pricing: Starter = $9 per proposal\n    // Legacy support: single = $9, pack = $39 (10 credits)\n    let priceData: { unit_amount: number; currency: string };\n    let productName: string;\n    let description: string;\n    let credits: number;\n    \n    switch (productType) {\n      case 'starter':\n      case 'single':\n        priceData = { unit_amount: 900, currency: 'usd' };\n        productName = 'Starter - Single Proposal';\n        description = 'Unlock 1 professional proposal';\n        credits = 1;\n        break;\n      case 'pack':\n        priceData = { unit_amount: 3900, currency: 'usd' };\n        productName = 'Proposal Pack (10 Credits)';\n        description = '10 proposal credits for active contractors';\n        credits = 10;\n        break;\n    }\n    \n    return await stripe.checkout.sessions.create({\n      customer: customerId || undefined,\n      client_reference_id: userId,\n      payment_method_types: ['card'],\n      line_items: [{\n        price_data: {\n          currency: priceData.currency,\n          unit_amount: priceData.unit_amount,\n          product_data: {\n            name: productName,\n            description: description,\n          },\n        },\n        quantity: 1,\n      }],\n      mode: 'payment',\n      success_url: successUrl,\n      cancel_url: cancelUrl,\n      metadata: { \n        userId,\n        productType,\n        credits: credits.toString(),\n      },\n    });\n  }\n\n  async createSubscriptionCheckoutSession(\n    customerId: string,\n    planType: 'pro' | 'crew',\n    successUrl: string,\n    cancelUrl: string,\n    userId: string\n  ) {\n    const stripe = await getUncachableStripeClient();\n    \n    // Pro = $29/month (15 proposals), Crew = $79/month (50 proposals)\n    let priceData: { unit_amount: number; currency: string };\n    let productName: string;\n    let description: string;\n    let proposalsPerMonth: number;\n    \n    switch (planType) {\n      case 'pro':\n        priceData = { unit_amount: 2900, currency: 'usd' };\n        productName = 'ScopeGen Pro';\n        description = 'Up to 15 proposals per month - less than $2 each';\n        proposalsPerMonth = 15;\n        break;\n      case 'crew':\n        priceData = { unit_amount: 7900, currency: 'usd' };\n        productName = 'ScopeGen Crew';\n        description = 'Up to 50 proposals per month + team members';\n        proposalsPerMonth = 50;\n        break;\n    }\n    \n    return await stripe.checkout.sessions.create({\n      customer: customerId || undefined,\n      client_reference_id: userId,\n      payment_method_types: ['card'],\n      line_items: [{\n        price_data: {\n          currency: priceData.currency,\n          unit_amount: priceData.unit_amount,\n          recurring: {\n            interval: 'month',\n          },\n          product_data: {\n            name: productName,\n            description: description,\n          },\n        },\n        quantity: 1,\n      }],\n      mode: 'subscription',\n      success_url: successUrl,\n      cancel_url: cancelUrl,\n      metadata: { \n        userId,\n        planType,\n        proposalsPerMonth: proposalsPerMonth.toString(),\n      },\n    });\n  }\n\n  async createCustomerPortalSession(customerId: string, returnUrl: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.billingPortal.sessions.create({\n      customer: customerId,\n      return_url: returnUrl,\n    });\n  }\n\n  async getProduct(productId: string) {\n    const result = await db.execute(\n      sql`SELECT * FROM stripe.products WHERE id = ${productId}`\n    );\n    return result.rows[0] || null;\n  }\n\n  async listProducts(active = true, limit = 20, offset = 0) {\n    const result = await db.execute(\n      sql`SELECT * FROM stripe.products WHERE active = ${active} LIMIT ${limit} OFFSET ${offset}`\n    );\n    return result.rows;\n  }\n\n  async listProductsWithPrices(active = true, limit = 20, offset = 0) {\n    const result = await db.execute(\n      sql`\n        WITH paginated_products AS (\n          SELECT id, name, description, metadata, active\n          FROM stripe.products\n          WHERE active = ${active}\n          ORDER BY id\n          LIMIT ${limit} OFFSET ${offset}\n        )\n        SELECT \n          p.id as product_id,\n          p.name as product_name,\n          p.description as product_description,\n          p.active as product_active,\n          p.metadata as product_metadata,\n          pr.id as price_id,\n          pr.unit_amount,\n          pr.currency,\n          pr.recurring,\n          pr.active as price_active,\n          pr.metadata as price_metadata\n        FROM paginated_products p\n        LEFT JOIN stripe.prices pr ON pr.product = p.id AND pr.active = true\n        ORDER BY p.id, pr.unit_amount\n      `\n    );\n    return result.rows;\n  }\n\n  async getPrice(priceId: string) {\n    const result = await db.execute(\n      sql`SELECT * FROM stripe.prices WHERE id = ${priceId}`\n    );\n    return result.rows[0] || null;\n  }\n\n  async listPrices(active = true, limit = 20, offset = 0) {\n    const result = await db.execute(\n      sql`SELECT * FROM stripe.prices WHERE active = ${active} LIMIT ${limit} OFFSET ${offset}`\n    );\n    return result.rows;\n  }\n\n  async getPricesForProduct(productId: string) {\n    const result = await db.execute(\n      sql`SELECT * FROM stripe.prices WHERE product = ${productId} AND active = true`\n    );\n    return result.rows;\n  }\n\n  async getSubscription(subscriptionId: string) {\n    const result = await db.execute(\n      sql`SELECT * FROM stripe.subscriptions WHERE id = ${subscriptionId}`\n    );\n    return result.rows[0] || null;\n  }\n\n  async retrieveCheckoutSession(sessionId: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.checkout.sessions.retrieve(sessionId);\n  }\n\n  async createPaymentLink(\n    amountInCents: number,\n    proposalId: number,\n    clientName: string,\n    jobDescription: string,\n    successUrl: string,\n    userStripeSecretKey?: string | null\n  ) {\n    const stripe = userStripeSecretKey \n      ? createStripeClientWithKey(userStripeSecretKey)\n      : await getUncachableStripeClient();\n    \n    const paymentLink = await stripe.paymentLinks.create({\n      line_items: [{\n        price_data: {\n          currency: 'usd',\n          unit_amount: amountInCents,\n          product_data: {\n            name: `Deposit for ${jobDescription}`,\n            description: `Payment for ${clientName}`,\n          },\n        },\n        quantity: 1,\n      }],\n      after_completion: {\n        type: 'redirect',\n        redirect: {\n          url: successUrl,\n        },\n      },\n      metadata: {\n        proposalId: proposalId.toString(),\n        type: 'proposal_deposit',\n      },\n    });\n\n    return paymentLink;\n  }\n\n  async deactivatePaymentLink(paymentLinkId: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.paymentLinks.update(paymentLinkId, {\n      active: false,\n    });\n  }\n}\n\nexport const stripeService = new StripeService();\n","path":null,"size_bytes":8120,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5745,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/pages/home.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { CheckCircle2, ArrowRight, Clock, DollarSign, FileCheck, Loader2, Bath, ChefHat, Home as HomeIcon, Paintbrush, Plug, Wrench, Thermometer, TreePine, Calculator, Sparkles, Star, Users, TrendingUp, Quote, Zap, Target, FileText, Hammer } from \"lucide-react\";\nimport patternImage from \"@assets/generated_images/abstract_construction_blueprint_pattern.png\";\nimport contractorPhoto1 from \"@assets/stock_images/contractor_reviewing_c6dc431d.jpg\";\nimport contractorPhoto2 from \"@assets/stock_images/contractor_reviewing_1188ac4e.jpg\";\nimport bathroomPhoto from \"@assets/stock_images/bathroom_remodeling__cb6e4907.jpg\";\nimport roofingPhoto from \"@assets/stock_images/roofer_contractor_wo_9cfa1504.jpg\";\nimport { useLanguage } from \"@/hooks/useLanguage\";\n\nconst calculatorTrades = [\n  {\n    id: \"bathroom\",\n    name: \"Bathroom Remodel\",\n    icon: Bath,\n    jobTypes: [\n      { id: \"tub-to-shower\", name: \"Tub-to-Shower Conversion\", low: 8500, high: 12000 },\n      { id: \"full-gut\", name: \"Full Bathroom Remodel\", low: 18000, high: 28000 },\n      { id: \"half-bath\", name: \"Half Bath / Powder Room\", low: 6500, high: 9500 },\n      { id: \"vanity-refresh\", name: \"Vanity & Faucet Replacement\", low: 1800, high: 3500 },\n    ]\n  },\n  {\n    id: \"kitchen\",\n    name: \"Kitchen Remodel\",\n    icon: ChefHat,\n    jobTypes: [\n      { id: \"full-kitchen\", name: \"Full Kitchen Remodel\", low: 45000, high: 85000 },\n      { id: \"cabinet-refresh\", name: \"Cabinet & Countertop Refresh\", low: 8500, high: 15000 },\n      { id: \"appliance-upgrade\", name: \"Appliance Package Install\", low: 2500, high: 5000 },\n    ]\n  },\n  {\n    id: \"roofing\",\n    name: \"Roofing\",\n    icon: HomeIcon,\n    jobTypes: [\n      { id: \"full-roof\", name: \"Full Roof Replacement\", low: 12000, high: 25000 },\n      { id: \"roof-repair\", name: \"Roof Repair\", low: 500, high: 2500 },\n      { id: \"gutter-install\", name: \"Gutter Install/Replace\", low: 1200, high: 3000 },\n    ]\n  },\n  {\n    id: \"painting\",\n    name: \"Painting\",\n    icon: Paintbrush,\n    jobTypes: [\n      { id: \"single-room\", name: \"Single Room (Interior)\", low: 450, high: 850 },\n      { id: \"whole-house\", name: \"Whole House Interior\", low: 3500, high: 8000 },\n      { id: \"exterior\", name: \"Exterior House Painting\", low: 4000, high: 12000 },\n    ]\n  },\n  {\n    id: \"electrical\",\n    name: \"Electrical\",\n    icon: Plug,\n    jobTypes: [\n      { id: \"panel-upgrade\", name: \"Panel Upgrade\", low: 2500, high: 4500 },\n      { id: \"ev-charger\", name: \"EV Charger Installation\", low: 800, high: 2000 },\n      { id: \"rewiring\", name: \"Whole House Rewiring\", low: 8000, high: 15000 },\n    ]\n  },\n  {\n    id: \"plumbing\",\n    name: \"Plumbing\",\n    icon: Wrench,\n    jobTypes: [\n      { id: \"water-heater\", name: \"Water Heater Replacement\", low: 1800, high: 3500 },\n      { id: \"repipe\", name: \"Whole House Repipe\", low: 8000, high: 15000 },\n      { id: \"drain-cleaning\", name: \"Drain Cleaning\", low: 150, high: 500 },\n    ]\n  },\n  {\n    id: \"hvac\",\n    name: \"HVAC\",\n    icon: Thermometer,\n    jobTypes: [\n      { id: \"ac-install\", name: \"AC Unit Installation\", low: 4500, high: 12000 },\n      { id: \"furnace\", name: \"Furnace Replacement\", low: 3500, high: 8000 },\n      { id: \"maintenance\", name: \"Maintenance / Tune-Up\", low: 99, high: 299 },\n    ]\n  },\n  {\n    id: \"landscaping\",\n    name: \"Landscaping\",\n    icon: TreePine,\n    jobTypes: [\n      { id: \"lawn-install\", name: \"Lawn Installation\", low: 2000, high: 6000 },\n      { id: \"patio\", name: \"Patio / Walkway\", low: 4000, high: 15000 },\n      { id: \"tree-work\", name: \"Tree Removal / Trimming\", low: 400, high: 3500 },\n    ]\n  },\n];\n\nconst sizeMultipliers = {\n  small: { label: \"Small\", multiplier: 0.75, description: \"Basic scope\" },\n  medium: { label: \"Medium\", multiplier: 1.0, description: \"Standard scope\" },\n  large: { label: \"Large\", multiplier: 1.4, description: \"Premium scope\" },\n};\n\nfunction InstantPriceCalculator() {\n  const [selectedTrade, setSelectedTrade] = useState<string>(\"\");\n  const [selectedJobType, setSelectedJobType] = useState<string>(\"\");\n  const [selectedSize, setSelectedSize] = useState<string>(\"\");\n  const [isCalculating, setIsCalculating] = useState(false);\n  const [showPrice, setShowPrice] = useState(false);\n  const [animatedLow, setAnimatedLow] = useState(0);\n  const [animatedHigh, setAnimatedHigh] = useState(0);\n\n  const trade = calculatorTrades.find(t => t.id === selectedTrade);\n  const jobType = trade?.jobTypes.find(j => j.id === selectedJobType);\n  const size = sizeMultipliers[selectedSize as keyof typeof sizeMultipliers];\n\n  const canCalculate = selectedTrade && selectedJobType && selectedSize;\n\n  useEffect(() => {\n    if (canCalculate && jobType && size) {\n      setIsCalculating(true);\n      setShowPrice(false);\n      \n      console.log(\"[Price Calculator] User interaction:\", {\n        trade: selectedTrade,\n        jobType: selectedJobType,\n        size: selectedSize,\n        timestamp: new Date().toISOString()\n      });\n\n      const targetLow = Math.round(jobType.low * size.multiplier);\n      const targetHigh = Math.round(jobType.high * size.multiplier);\n      \n      setTimeout(() => {\n        setIsCalculating(false);\n        setShowPrice(true);\n        \n        let frame = 0;\n        const totalFrames = 20;\n        const interval = setInterval(() => {\n          frame++;\n          const progress = frame / totalFrames;\n          const easeOut = 1 - Math.pow(1 - progress, 3);\n          setAnimatedLow(Math.round(targetLow * easeOut));\n          setAnimatedHigh(Math.round(targetHigh * easeOut));\n          if (frame >= totalFrames) clearInterval(interval);\n        }, 30);\n      }, 600);\n    } else {\n      setShowPrice(false);\n    }\n  }, [selectedTrade, selectedJobType, selectedSize]);\n\n  const handleTradeChange = (value: string) => {\n    setSelectedTrade(value);\n    setSelectedJobType(\"\");\n    console.log(\"[Price Calculator] Trade selected:\", value);\n  };\n\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const TradeIcon = trade?.icon || Calculator;\n\n  return (\n    <div className=\"relative\">\n      <div className=\"absolute -inset-4 bg-gradient-to-br from-secondary/30 via-orange-400/20 to-amber-500/30 rounded-2xl blur-2xl -z-10\"></div>\n      <div className=\"bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden\">\n        <div className=\"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 p-4 flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-secondary rounded-lg flex items-center justify-center\">\n            <Calculator className=\"w-5 h-5 text-slate-900\" />\n          </div>\n          <div>\n            <h3 className=\"text-white font-bold text-lg\">Instant Price Estimate</h3>\n            <p className=\"text-slate-400 text-xs\">Get a ballpark estimate in seconds</p>\n          </div>\n        </div>\n\n        <div className=\"p-5 space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-slate-700 mb-1.5\">What type of project?</label>\n            <select\n              data-testid=\"select-trade\"\n              value={selectedTrade}\n              onChange={(e) => handleTradeChange(e.target.value)}\n              className=\"w-full h-11 px-3 rounded-lg border border-slate-300 bg-white text-slate-900 focus:ring-2 focus:ring-secondary focus:border-secondary transition-all\"\n            >\n              <option value=\"\">Select a trade...</option>\n              {calculatorTrades.map((trade) => (\n                <option key={trade.id} value={trade.id}>{trade.name}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-slate-700 mb-1.5\">Job type</label>\n            <select\n              data-testid=\"select-job-type\"\n              value={selectedJobType}\n              onChange={(e) => setSelectedJobType(e.target.value)}\n              disabled={!selectedTrade}\n              className=\"w-full h-11 px-3 rounded-lg border border-slate-300 bg-white text-slate-900 focus:ring-2 focus:ring-secondary focus:border-secondary transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <option value=\"\">Select job type...</option>\n              {trade?.jobTypes.map((job) => (\n                <option key={job.id} value={job.id}>{job.name}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-slate-700 mb-1.5\">Project size</label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              {Object.entries(sizeMultipliers).map(([key, value]) => (\n                <button\n                  key={key}\n                  data-testid={`button-size-${key}`}\n                  onClick={() => setSelectedSize(key)}\n                  disabled={!selectedJobType}\n                  className={`py-2.5 px-3 rounded-lg border-2 transition-all text-center disabled:opacity-50 disabled:cursor-not-allowed ${\n                    selectedSize === key\n                      ? \"border-secondary bg-secondary/10 text-slate-900 font-bold\"\n                      : \"border-slate-200 hover:border-slate-300 text-slate-600\"\n                  }`}\n                >\n                  <div className=\"font-medium text-sm\">{value.label}</div>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <div className={`mt-4 p-4 rounded-xl transition-all duration-500 ${\n            showPrice \n              ? \"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200\" \n              : isCalculating\n                ? \"bg-slate-50 border border-slate-200\"\n                : \"bg-slate-50 border border-dashed border-slate-300\"\n          }`}>\n            {isCalculating ? (\n              <div className=\"flex items-center justify-center gap-3 py-2\">\n                <Loader2 className=\"w-5 h-5 text-secondary animate-spin\" />\n                <span className=\"text-slate-600 font-medium\">Calculating estimate...</span>\n              </div>\n            ) : showPrice ? (\n              <div className=\"text-center animate-in fade-in zoom-in duration-500\">\n                <div className=\"flex items-center justify-center gap-2 mb-2\">\n                  <Sparkles className=\"w-4 h-4 text-secondary\" />\n                  <span className=\"text-sm font-medium text-green-700\">Estimated Price Range</span>\n                  <Sparkles className=\"w-4 h-4 text-secondary\" />\n                </div>\n                <div className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900\">\n                  {formatPrice(animatedLow)} â€“ {formatPrice(animatedHigh)}\n                </div>\n                <p className=\"text-xs text-slate-500 mt-1\">Based on {size?.description?.toLowerCase()} scope</p>\n              </div>\n            ) : (\n              <div className=\"text-center py-2\">\n                <div className=\"flex items-center justify-center gap-2 text-slate-400\">\n                  <TradeIcon className=\"w-5 h-5\" />\n                  <span className=\"text-sm\">Select options above to see estimate</span>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <Link \n            href=\"/app\"\n            data-testid=\"button-get-full-proposal\"\n            className={`block w-full text-center py-3 rounded-lg font-bold transition-all ${\n              showPrice\n                ? \"bg-secondary text-slate-900 hover:bg-secondary/90 shadow-lg hover:shadow-xl hover:scale-[1.02]\"\n                : \"bg-slate-200 text-slate-500 cursor-not-allowed pointer-events-none\"\n            }`}\n            onClick={() => {\n              if (showPrice) {\n                console.log(\"[Price Calculator] CTA clicked - Get Full Proposal\", {\n                  trade: selectedTrade,\n                  jobType: selectedJobType,\n                  size: selectedSize,\n                  estimatedRange: { low: animatedLow, high: animatedHigh }\n                });\n              }\n            }}\n          >\n            Get Full Proposal â†’\n          </Link>\n          \n          <p className=\"text-center text-xs text-slate-500\">\n            Free to create â€¢ No credit card required\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function Home() {\n  const { t } = useLanguage();\n  const [checkoutLoading, setCheckoutLoading] = useState<string | null>(null);\n\n  const handleCheckout = async (productType: 'starter' | 'pro' | 'crew') => {\n    setCheckoutLoading(productType);\n    try {\n      const response = await fetch('/api/stripe/checkout', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ productType }),\n      });\n      \n      const data = await response.json();\n      \n      if (data.url) {\n        window.location.href = data.url;\n      } else if (data.message) {\n        alert(data.message);\n      }\n    } catch (error) {\n      console.error('Checkout error:', error);\n      alert('Please log in first to purchase a plan.');\n    } finally {\n      setCheckoutLoading(null);\n    }\n  };\n\n  return (\n    <Layout>\n      {/* Hero Section */}\n      <section className=\"relative bg-slate-900 text-white overflow-hidden\">\n        <div className=\"absolute inset-0 z-0 opacity-20\">\n          <img \n            src={patternImage} \n            alt=\"Construction blueprint pattern background\" \n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n        \n        <div className=\"container mx-auto px-4 py-20 md:py-32 relative z-10 grid md:grid-cols-2 gap-12 items-center\">\n          <div className=\"space-y-6 animate-in slide-in-from-left duration-700\">\n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-heading font-bold leading-[1.1] tracking-tight\">\n              {t.home.heroTitle1} <br/>\n              <span className=\"text-secondary\">{t.home.heroTitle2}</span>\n            </h1>\n            \n            <p className=\"text-base sm:text-lg text-slate-300 max-w-lg leading-relaxed\">\n              {t.home.heroSubtitle}\n            </p>\n            \n            <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4\">\n              <Link \n                href=\"/app\" \n                data-testid=\"button-try-free-proposal\"\n                className=\"inline-flex items-center justify-center h-12 sm:h-14 px-6 sm:px-8 rounded-md bg-secondary text-slate-900 font-bold text-base sm:text-lg hover:bg-secondary/90 transition-all hover:scale-105 shadow-[0_0_20px_rgba(249,115,22,0.3)] whitespace-nowrap\"\n              >\n                Try a Free Proposal\n                <ArrowRight className=\"ml-2 w-5 h-5\" />\n              </Link>\n              <a \n                href=\"#demo\" \n                data-testid=\"button-view-sample-proposal\"\n                className=\"inline-flex items-center justify-center h-12 sm:h-14 px-6 sm:px-8 rounded-md border border-slate-700 bg-slate-800/50 text-white font-medium hover:bg-slate-800 transition-colors backdrop-blur-sm whitespace-nowrap\"\n              >\n                View Sample Proposal\n              </a>\n            </div>\n\n          </div>\n          \n          <div className=\"animate-in slide-in-from-right duration-1000 delay-200\">\n            <InstantPriceCalculator />\n          </div>\n        </div>\n      </section>\n\n      {/* Stats Bar - Social Proof */}\n      <section className=\"bg-slate-800 border-y border-slate-700\">\n        <div className=\"container mx-auto px-4 py-6\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6 sm:gap-10 max-w-5xl mx-auto\">\n            <div className=\"flex items-center justify-center gap-4 text-white\" data-testid=\"stat-proposals\">\n              <Users className=\"w-6 h-6 text-secondary flex-shrink-0\" />\n              <span className=\"font-bold text-xl\">500+</span>\n              <span className=\"text-slate-300 text-base\">Proposals Generated</span>\n            </div>\n            <div className=\"flex items-center justify-center gap-4 text-white\" data-testid=\"stat-rating\">\n              <Star className=\"w-6 h-6 text-secondary fill-secondary flex-shrink-0\" />\n              <span className=\"font-bold text-xl\">4.9â˜…</span>\n              <span className=\"text-slate-300 text-base\">Contractor Rating</span>\n            </div>\n            <div className=\"flex items-center justify-center gap-4 text-white\" data-testid=\"stat-won-jobs\">\n              <TrendingUp className=\"w-6 h-6 text-secondary flex-shrink-0\" />\n              <span className=\"font-bold text-xl\">$2.5M+</span>\n              <span className=\"text-slate-300 text-base\">in Won Jobs</span>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Pain Point Section - After Hero */}\n      <section className=\"py-20 sm:py-28 bg-white\" data-testid=\"section-pain-points\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-6xl mx-auto\">\n            <div className=\"grid md:grid-cols-2 gap-12 items-center mb-14\">\n              <div className=\"order-2 md:order-1\">\n                <h2 className=\"text-3xl sm:text-4xl md:text-5xl font-heading font-bold text-slate-900 mb-8\">\n                  Tired of writing proposals after a 10-hour day?\n                </h2>\n                <p className=\"text-xl sm:text-2xl text-slate-600 leading-relaxed\">\n                  ScopeGen lets remodelers, roofers, HVAC, plumbing, and electrical contractors build detailed proposals in about 60 seconds â€” no Word templates, no copy-paste, no guessing at scope.\n                </p>\n              </div>\n              <div className=\"order-1 md:order-2\">\n                <img \n                  src={contractorPhoto1} \n                  alt=\"Contractor reviewing blueprints and documents\" \n                  className=\"w-full rounded-xl shadow-lg\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"grid sm:grid-cols-3 gap-12 mb-14 text-left max-w-4xl mx-auto\">\n              <div data-testid=\"benefit-prebuilt-scopes\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <FileText className=\"w-6 h-6 text-slate-700\" />\n                  <h3 className=\"font-bold text-slate-900 text-lg\">Pre-built Scopes</h3>\n                </div>\n                <p className=\"text-slate-600 text-base leading-relaxed\">\n                  Ready-to-use scopes for bathrooms, kitchens, roofing, HVAC, electrical, landscaping, and more.\n                </p>\n              </div>\n              <div data-testid=\"benefit-clear-descriptions\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <Target className=\"w-6 h-6 text-slate-700\" />\n                  <h3 className=\"font-bold text-slate-900 text-lg\">Clear Line-Items</h3>\n                </div>\n                <p className=\"text-slate-600 text-base leading-relaxed\">\n                  Descriptions your homeowners actually understand â€” no confusing contractor jargon.\n                </p>\n              </div>\n              <div data-testid=\"benefit-consistent-pricing\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <DollarSign className=\"w-6 h-6 text-slate-700\" />\n                  <h3 className=\"font-bold text-slate-900 text-lg\">Consistent Pricing</h3>\n                </div>\n                <p className=\"text-slate-600 text-base leading-relaxed\">\n                  Structured pricing so you don't underbid jobs or leave money on the table.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"text-center\">\n              <Link \n                href=\"/app\" \n                data-testid=\"button-bathroom-proposal-cta\"\n                className=\"inline-flex items-center justify-center h-14 px-10 rounded-md bg-primary text-white font-bold text-lg hover:bg-primary/90 transition-all\"\n              >\n                Create your first proposal free\n                <ArrowRight className=\"ml-2 w-5 h-5\" />\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Testimonial Preview Cards */}\n      <section className=\"bg-slate-50 py-16 sm:py-20 border-t border-slate-100\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-10\">\n            <p className=\"text-base font-medium text-slate-500 uppercase tracking-wide\">Trusted by Contractors</p>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-10 max-w-5xl mx-auto\">\n            <div data-testid=\"testimonial-1\">\n              <div className=\"flex items-center gap-1 mb-4\">\n                {[...Array(5)].map((_, i) => (\n                  <Star key={i} className=\"w-5 h-5 text-amber-400 fill-amber-400\" />\n                ))}\n              </div>\n              <p className=\"text-slate-700 text-lg leading-relaxed mb-4\">\n                \"Game changer for my plumbing business. I used to spend hours on proposalsâ€”now it takes me 10 minutes.\"\n              </p>\n              <div className=\"text-base\">\n                <span className=\"font-medium text-slate-900\">Mike R.</span>\n                <span className=\"text-slate-400 ml-2\">Â· Plumbing Contractor, TX</span>\n              </div>\n            </div>\n            <div data-testid=\"testimonial-2\">\n              <div className=\"flex items-center gap-1 mb-4\">\n                {[...Array(5)].map((_, i) => (\n                  <Star key={i} className=\"w-5 h-5 text-amber-400 fill-amber-400\" />\n                ))}\n              </div>\n              <p className=\"text-slate-700 text-lg leading-relaxed mb-4\">\n                \"My close rate went up 30% since I started using ScopeGen. The proposals look so professional.\"\n              </p>\n              <div className=\"text-base\">\n                <span className=\"font-medium text-slate-900\">Sarah T.</span>\n                <span className=\"text-slate-400 ml-2\">Â· General Contractor, CA</span>\n              </div>\n            </div>\n            <div data-testid=\"testimonial-3\">\n              <div className=\"flex items-center gap-1 mb-4\">\n                {[...Array(5)].map((_, i) => (\n                  <Star key={i} className=\"w-5 h-5 text-amber-400 fill-amber-400\" />\n                ))}\n              </div>\n              <p className=\"text-slate-700 text-lg leading-relaxed mb-4\">\n                \"Finally, a tool built for contractors. The AI pricing suggestions are spot-on for my market.\"\n              </p>\n              <div className=\"text-base\">\n                <span className=\"font-medium text-slate-900\">James L.</span>\n                <span className=\"text-slate-400 ml-2\">Â· Roofing Contractor, FL</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* How ScopeGen Works - Enhanced */}\n      <section id=\"how-it-works\" className=\"py-20 sm:py-28 bg-primary\" data-testid=\"section-how-it-works\">\n        <div className=\"max-w-[95vw] xl:max-w-[90vw] 2xl:max-w-[85vw] mx-auto px-4 sm:px-8\">\n          <div className=\"text-center mb-12 sm:mb-20\">\n            <h2 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-heading font-bold text-white mb-4 sm:mb-6\">\n              How ScopeGen Works\n            </h2>\n            <p className=\"text-primary-foreground/70 text-lg sm:text-xl lg:text-2xl\">\n              Three simple steps to create proposals that win jobs\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8 lg:gap-16\">\n            <div className=\"text-center bg-white/10 backdrop-blur-sm rounded-2xl p-8 lg:p-12\" data-testid=\"step-1\">\n              <div className=\"text-6xl lg:text-8xl font-heading font-bold text-secondary mb-6\">1</div>\n              <h3 className=\"text-xl lg:text-2xl font-bold text-white mb-4\">Pick Your Trade</h3>\n              <p className=\"text-primary-foreground/70 text-base lg:text-lg leading-relaxed\">\n                Select your trade â€” bathroom, kitchen, roofing, HVAC, plumbing, electrical â€” and choose the job type.\n              </p>\n            </div>\n            <div className=\"text-center bg-white/10 backdrop-blur-sm rounded-2xl p-8 lg:p-12\" data-testid=\"step-2\">\n              <div className=\"text-6xl lg:text-8xl font-heading font-bold text-secondary mb-6\">2</div>\n              <h3 className=\"text-xl lg:text-2xl font-bold text-white mb-4\">Answer Quick Questions</h3>\n              <p className=\"text-primary-foreground/70 text-base lg:text-lg leading-relaxed\">\n                Project size, materials, and add-ons. Takes about 30 seconds.\n              </p>\n            </div>\n            <div className=\"text-center bg-white/10 backdrop-blur-sm rounded-2xl p-8 lg:p-12\" data-testid=\"step-3\">\n              <div className=\"text-6xl lg:text-8xl font-heading font-bold text-secondary mb-6\">3</div>\n              <h3 className=\"text-xl lg:text-2xl font-bold text-white mb-4\">Send Your Proposal</h3>\n              <p className=\"text-primary-foreground/70 text-base lg:text-lg leading-relaxed\">\n                Get a professional PDF or email it directly to your customer.\n              </p>\n            </div>\n          </div>\n\n          <div className=\"mt-12 sm:mt-16 flex flex-wrap justify-center gap-8 sm:gap-12 lg:gap-16 text-white/80\">\n            <div className=\"flex items-center gap-3\">\n              <Clock className=\"w-5 h-5 lg:w-6 lg:h-6 text-secondary\" />\n              <span className=\"text-base lg:text-lg\">{t.home.saveHours}</span>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <FileCheck className=\"w-5 h-5 lg:w-6 lg:h-6 text-secondary\" />\n              <span className=\"text-base lg:text-lg\">{t.home.lookLikePro}</span>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <DollarSign className=\"w-5 h-5 lg:w-6 lg:h-6 text-secondary\" />\n              <span className=\"text-base lg:text-lg\">{t.home.closeDealsFaster}</span>\n            </div>\n          </div>\n\n          <div className=\"text-center mt-12 lg:mt-16\">\n            <Link \n              href=\"/app\"\n              data-testid=\"button-create-first-proposal-how\"\n              className=\"inline-flex items-center justify-center h-14 lg:h-16 px-10 lg:px-14 rounded-md bg-secondary text-slate-900 font-bold text-lg lg:text-xl hover:bg-white transition-all\"\n            >\n              Create Your First Proposal\n              <ArrowRight className=\"ml-2 w-5 h-5 lg:w-6 lg:h-6\" />\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* See What Your Proposals Look Like - Sample Snippets */}\n      <section id=\"demo\" className=\"py-20 sm:py-28 bg-slate-50 border-t border-slate-100\" data-testid=\"section-proposal-samples\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center max-w-3xl mx-auto mb-12 sm:mb-16\">\n            <h2 className=\"text-3xl sm:text-4xl md:text-5xl font-heading font-bold text-slate-900 mb-4 sm:mb-6\">\n              See What Your Proposals Look Like\n            </h2>\n            <p className=\"text-muted-foreground text-lg sm:text-xl\">\n              Real scope-of-work examples your customers will see\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-12 max-w-5xl mx-auto mb-16\">\n            {/* Bathroom Sample */}\n            <div data-testid=\"sample-bathroom\">\n              <div className=\"rounded-lg overflow-hidden mb-6\">\n                <img \n                  src={bathroomPhoto} \n                  alt=\"Bathroom remodeling project in progress\" \n                  className=\"w-full h-48 object-cover\"\n                />\n              </div>\n              <h3 className=\"font-bold text-slate-900 text-xl mb-5 flex items-center gap-3\">\n                <Bath className=\"w-5 h-5 text-slate-400\" />\n                Bathroom Remodel\n                <span className=\"text-slate-400 font-normal text-base\">(Sample)</span>\n              </h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Demolish existing tub/shower, vanity, and flooring</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Install new acrylic tub/shower system with surround</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Install new vanity with quartz top and undermount sink</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Replace existing plumbing trim with brushed nickel fixtures</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Install waterproof LVP flooring and new baseboards</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Roofing Sample */}\n            <div data-testid=\"sample-roofing\">\n              <div className=\"rounded-lg overflow-hidden mb-6\">\n                <img \n                  src={roofingPhoto} \n                  alt=\"Roofer installing shingles on residential home\" \n                  className=\"w-full h-48 object-cover\"\n                />\n              </div>\n              <h3 className=\"font-bold text-slate-900 text-xl mb-5 flex items-center gap-3\">\n                <HomeIcon className=\"w-5 h-5 text-slate-400\" />\n                Roofing Replacement\n                <span className=\"text-slate-400 font-normal text-base\">(Sample)</span>\n              </h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Remove existing shingles and underlayment</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Inspect and repair damaged decking as needed</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Install new synthetic underlayment and ice/water shield</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Install new architectural shingles with 30-year warranty</span>\n                </div>\n                <div className=\"flex items-start gap-3 text-slate-600 text-base\">\n                  <CheckCircle2 className=\"w-5 h-5 text-slate-300 flex-shrink-0 mt-0.5\" />\n                  <span>Replace all flashing, vents, and ridge cap</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Full Sample Proposal Preview */}\n          <div className=\"max-w-4xl mx-auto bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden\">\n            <div className=\"bg-primary p-4 sm:p-6 text-white\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 sm:gap-0\">\n                <div>\n                  <h3 className=\"text-xl sm:text-2xl font-heading font-bold\">{t.home.bathroomRemodelProposal}</h3>\n                  <p className=\"text-primary-foreground/70 mt-1 text-sm sm:text-base\">{t.home.preparedFor} Sarah Johnson</p>\n                </div>\n                <div className=\"sm:text-right\">\n                  <div className=\"text-xs sm:text-sm text-primary-foreground/60\">{t.home.proposalDate}</div>\n                  <div className=\"font-medium text-sm sm:text-base\">December 6, 2025</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-4 sm:p-6 space-y-4 sm:space-y-6\">\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6\">\n                <div className=\"bg-slate-50 rounded-lg p-4\">\n                  <h4 className=\"font-bold text-slate-900 mb-2\">{t.home.projectLocation}</h4>\n                  <p className=\"text-slate-600\">124 Maple Avenue<br/>Springfield, IL 62701</p>\n                </div>\n                <div className=\"bg-slate-50 rounded-lg p-4\">\n                  <h4 className=\"font-bold text-slate-900 mb-2\">{t.home.projectType}</h4>\n                  <p className=\"text-slate-600\">{t.home.fullBathroomRemodel}<br/>{t.home.primaryBathroom}</p>\n                </div>\n              </div>\n\n              <div>\n                <h4 className=\"font-bold text-slate-900 mb-3 flex items-center gap-2\">\n                  <FileCheck className=\"w-5 h-5 text-secondary\" />\n                  {t.home.scopeOfWork}\n                </h4>\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2 text-slate-700\">\n                    <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                    <span>{t.home.scopeItem1}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-slate-700\">\n                    <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                    <span>{t.home.scopeItem2}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-slate-700\">\n                    <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                    <span>{t.home.scopeItem3}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-slate-700\">\n                    <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                    <span>{t.home.scopeItem4}</span>\n                  </div>\n                  <div className=\"text-slate-400 text-sm italic pl-6\">{t.home.moreLineItems}</div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-slate-200 pt-4 sm:pt-6\">\n                <div className=\"flex flex-col sm:flex-row justify-between gap-4 sm:items-end\">\n                  <div>\n                    <div className=\"text-xs sm:text-sm text-slate-500 mb-1\">{t.home.estimatedInvestment}</div>\n                    <div className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900\">$10,250</div>\n                  </div>\n                  <div className=\"sm:text-right\">\n                    <div className=\"text-xs sm:text-sm text-slate-500 mb-1\">{t.home.timeline}</div>\n                    <div className=\"font-medium text-slate-900\">5-7 {t.home.businessDays}</div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4 flex items-start sm:items-center gap-3\">\n                <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                  <CheckCircle2 className=\"w-4 h-4 sm:w-5 sm:h-5 text-green-600\" />\n                </div>\n                <div>\n                  <div className=\"font-bold text-green-800 text-sm sm:text-base\">{t.home.yearWarranty}</div>\n                  <div className=\"text-xs sm:text-sm text-green-700\">{t.home.warrantyDesc}</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-slate-50 border-t border-slate-200 p-4 sm:p-6 text-center\">\n              <Link \n                href=\"/app\" \n                data-testid=\"button-create-your-own\"\n                className=\"inline-flex items-center justify-center h-11 sm:h-12 px-6 sm:px-8 rounded-md bg-secondary text-slate-900 font-bold text-sm sm:text-base hover:bg-secondary/90 transition-all hover:scale-105\"\n              >\n                {t.home.createYourOwn}\n                <ArrowRight className=\"ml-2 w-4 h-4 sm:w-5 sm:h-5\" />\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n      \n      {/* Pricing Section */}\n      <section id=\"pricing\" className=\"py-20 sm:py-28 bg-slate-50\">\n        <div className=\"max-w-[95vw] xl:max-w-[90vw] 2xl:max-w-[85vw] mx-auto px-4 sm:px-8\">\n          <div className=\"text-center mb-12 sm:mb-20\">\n            <h2 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-heading font-bold text-slate-900 mb-4 sm:mb-6\">{t.home.simpleAffordablePricing}</h2>\n            <p className=\"text-muted-foreground text-lg sm:text-xl lg:text-2xl\">{t.home.pricingSubtitle}</p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 lg:gap-10\">\n            {/* Starter - Pay per proposal */}\n            <div className=\"bg-white p-8 sm:p-10 lg:p-12 rounded-2xl border border-slate-200 shadow-sm flex flex-col\">\n              <h3 className=\"text-2xl lg:text-3xl font-bold text-slate-900 mb-3\">{t.home.starterPlan}</h3>\n              <p className=\"text-muted-foreground text-base lg:text-lg mb-8\">{t.home.starterDesc}</p>\n              <div className=\"text-5xl lg:text-6xl font-heading font-bold text-slate-900 mb-2\">{t.home.starterPrice}</div>\n              <p className=\"text-muted-foreground text-base lg:text-lg mb-8\">{t.home.starterPriceLabel}</p>\n              <ul className=\"space-y-4 lg:space-y-5 mb-10 flex-grow\">\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-slate-600\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-green-500 flex-shrink-0\" /> {t.home.starterFeature1}\n                </li>\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-slate-600\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-green-500 flex-shrink-0\" /> {t.home.starterFeature2}\n                </li>\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-slate-600\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-green-500 flex-shrink-0\" /> {t.home.starterFeature3}\n                </li>\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-slate-600\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-green-500 flex-shrink-0\" /> {t.home.starterFeature4}\n                </li>\n              </ul>\n              <button \n                onClick={() => handleCheckout('starter')}\n                disabled={checkoutLoading === 'starter'}\n                className=\"block w-full text-center py-4 lg:py-5 border-2 border-slate-300 rounded-xl font-bold text-lg lg:text-xl hover:bg-slate-50 transition-colors disabled:opacity-50\"\n                data-testid=\"button-get-started\"\n              >\n                {checkoutLoading === 'starter' ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <Loader2 className=\"w-5 h-5 animate-spin\" /> {t.home.processing}\n                  </span>\n                ) : (\n                  t.home.getStarted\n                )}\n              </button>\n            </div>\n\n            {/* Pro - Most Popular */}\n            <div className=\"bg-primary p-8 sm:p-10 lg:p-12 rounded-2xl shadow-xl relative overflow-hidden flex flex-col\">\n              <div className=\"absolute top-5 right-5 lg:top-6 lg:right-6 bg-secondary text-sm lg:text-base font-bold px-3 py-1.5 lg:px-4 lg:py-2 rounded-lg text-slate-900\">{t.home.mostPopular}</div>\n              <h3 className=\"text-2xl lg:text-3xl font-bold text-white mb-3\">{t.home.proPlan}</h3>\n              <p className=\"text-primary-foreground/70 text-base lg:text-lg mb-8\">{t.home.proDesc}</p>\n              <div className=\"text-5xl lg:text-6xl font-heading font-bold text-white mb-2\">{t.home.proPrice}<span className=\"text-xl lg:text-2xl font-normal\">{t.home.proPriceLabel}</span></div>\n              <p className=\"text-primary-foreground/60 text-base lg:text-lg mb-8\">{t.home.proFeature2}</p>\n              <ul className=\"space-y-4 lg:space-y-5 mb-10 flex-grow\">\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-white\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-secondary flex-shrink-0\" /> {t.home.proFeature1}\n                </li>\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-white\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-secondary flex-shrink-0\" /> {t.home.proFeature3}\n                </li>\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-white\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-secondary flex-shrink-0\" /> {t.home.proFeature4}\n                </li>\n              </ul>\n              <button \n                onClick={() => handleCheckout('pro')}\n                disabled={checkoutLoading === 'pro'}\n                className=\"block w-full text-center py-4 lg:py-5 bg-secondary text-slate-900 rounded-xl font-bold text-lg lg:text-xl hover:bg-secondary/90 transition-colors disabled:opacity-50\"\n                data-testid=\"button-subscribe-pro\"\n              >\n                {checkoutLoading === 'pro' ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <Loader2 className=\"w-5 h-5 animate-spin\" /> {t.home.processing}\n                  </span>\n                ) : (\n                  t.home.subscribePro\n                )}\n              </button>\n            </div>\n\n            {/* Crew - For Teams */}\n            <div className=\"bg-white p-8 sm:p-10 lg:p-12 rounded-2xl border-2 border-primary shadow-sm relative flex flex-col\">\n              <div className=\"absolute top-5 right-5 lg:top-6 lg:right-6 bg-primary text-white text-sm lg:text-base font-bold px-3 py-1.5 lg:px-4 lg:py-2 rounded-lg\">{t.home.forTeams}</div>\n              <h3 className=\"text-2xl lg:text-3xl font-bold text-slate-900 mb-3\">{t.home.crewPlan}</h3>\n              <p className=\"text-muted-foreground text-base lg:text-lg mb-8\">{t.home.crewDesc}</p>\n              <div className=\"text-5xl lg:text-6xl font-heading font-bold text-slate-900 mb-2\">{t.home.crewPrice}<span className=\"text-xl lg:text-2xl font-normal text-muted-foreground\">{t.home.crewPriceLabel}</span></div>\n              <p className=\"text-muted-foreground text-base lg:text-lg mb-8\">{t.home.crewFeature1}</p>\n              <ul className=\"space-y-4 lg:space-y-5 mb-10 flex-grow\">\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-slate-600\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-green-500 flex-shrink-0\" /> {t.home.crewFeature2}\n                </li>\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-slate-600\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-green-500 flex-shrink-0\" /> {t.home.crewFeature3}\n                </li>\n                <li className=\"flex items-center gap-3 text-base lg:text-lg text-slate-600\">\n                  <CheckCircle2 className=\"w-5 h-5 lg:w-6 lg:h-6 text-green-500 flex-shrink-0\" /> {t.home.crewFeature4}\n                </li>\n              </ul>\n              <button \n                onClick={() => handleCheckout('crew')}\n                disabled={checkoutLoading === 'crew'}\n                className=\"block w-full text-center py-4 lg:py-5 bg-primary text-white rounded-xl font-bold text-lg lg:text-xl hover:bg-primary/90 transition-colors disabled:opacity-50\"\n                data-testid=\"button-subscribe-crew\"\n              >\n                {checkoutLoading === 'crew' ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <Loader2 className=\"w-5 h-5 animate-spin\" /> {t.home.processing}\n                  </span>\n                ) : (\n                  t.home.subscribeCrew\n                )}\n              </button>\n            </div>\n          </div>\n\n          <p className=\"text-center text-muted-foreground text-base lg:text-lg mt-10 lg:mt-14\">\n            {t.home.allPlansInclude}\n          </p>\n        </div>\n      </section>\n\n      {/* CTA Banner */}\n      <section className=\"bg-primary py-12 sm:py-20\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h2 className=\"text-2xl sm:text-3xl md:text-4xl font-heading font-bold text-white mb-4 sm:mb-6\">\n            {t.home.readyToLookLikePro}\n          </h2>\n          <Link \n            href=\"/app\" \n            data-testid=\"button-create-first-proposal-cta\"\n            className=\"inline-block bg-secondary text-slate-900 font-bold text-base sm:text-lg px-8 sm:px-10 py-3 sm:py-4 rounded-md hover:bg-white hover:text-primary transition-colors shadow-lg\"\n          >\n            {t.home.createFirstProposal}\n          </Link>\n          <p className=\"mt-3 sm:mt-4 text-primary-foreground/60 text-xs sm:text-sm\">{t.home.tryFreeThenUnlock}</p>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":45726,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":724,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\nimport { runMigrations } from 'stripe-replit-sync';\nimport { getStripeSync } from \"./stripeClient\";\nimport { WebhookHandlers } from \"./webhookHandlers\";\nimport rateLimit from \"express-rate-limit\";\nimport path from \"path\";\nimport fs from \"fs\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\n// Track Stripe initialization status\nlet stripeInitialized = false;\nlet stripeInitializing = false;\n\nasync function initStripe() {\n  // Prevent multiple simultaneous initializations\n  if (stripeInitialized || stripeInitializing) return;\n  stripeInitializing = true;\n\n  const databaseUrl = process.env.DATABASE_URL;\n\n  if (!databaseUrl) {\n    console.log('DATABASE_URL not found, skipping Stripe initialization');\n    stripeInitializing = false;\n    return;\n  }\n\n  try {\n    console.log('Initializing Stripe schema...');\n    await runMigrations({ \n      databaseUrl\n    });\n    console.log('Stripe schema ready');\n\n    const stripeSync = await getStripeSync();\n\n    console.log('Setting up managed webhook...');\n    const webhookBaseUrl = `https://${process.env.REPLIT_DOMAINS?.split(',')[0]}`;\n    const { webhook, uuid } = await stripeSync.findOrCreateManagedWebhook(\n      `${webhookBaseUrl}/api/stripe/webhook`,\n      {\n        enabled_events: ['*'],\n        description: 'Managed webhook for Stripe sync',\n      }\n    );\n    console.log(`Webhook configured: ${webhook.url} (UUID: ${uuid})`);\n\n    // Run backfill in background without blocking\n    console.log('Starting Stripe data sync in background...');\n    stripeSync.syncBackfill()\n      .then(() => {\n        console.log('Stripe data synced');\n      })\n      .catch((err: any) => {\n        console.error('Error syncing Stripe data:', err);\n      });\n\n    stripeInitialized = true;\n  } catch (error) {\n    console.error('Failed to initialize Stripe:', error);\n  } finally {\n    stripeInitializing = false;\n  }\n}\n\n// Health check endpoint - MUST be registered first and respond immediately\napp.get('/health', (_req, res) => {\n  res.status(200).json({ status: 'ok', timestamp: Date.now() });\n});\n\napp.get('/_health', (_req, res) => {\n  res.status(200).json({ status: 'ok', timestamp: Date.now() });\n});\n\napp.post(\n  '/api/stripe/webhook/:uuid',\n  express.raw({ type: 'application/json' }),\n  async (req, res) => {\n    const signature = req.headers['stripe-signature'];\n\n    if (!signature) {\n      return res.status(400).json({ error: 'Missing stripe-signature' });\n    }\n\n    try {\n      const sig = Array.isArray(signature) ? signature[0] : signature;\n\n      if (!Buffer.isBuffer(req.body)) {\n        console.error('STRIPE WEBHOOK ERROR: req.body is not a Buffer.');\n        return res.status(500).json({ error: 'Webhook processing error' });\n      }\n\n      const { uuid } = req.params;\n      await WebhookHandlers.processWebhook(req.body as Buffer, sig, uuid);\n\n      res.status(200).json({ received: true });\n    } catch (error: any) {\n      console.error('Webhook error:', error.message);\n      res.status(400).json({ error: 'Webhook processing error' });\n    }\n  }\n);\n\nconst apiLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  max: 2000,\n  message: { message: \"Too many requests, please try again later.\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n  skip: (req) => req.path.startsWith('/api/stripe/webhook'),\n});\n\napp.use('/api', apiLimiter);\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // Serve static landing page at root path before Vite middleware\n  const publicPath = path.resolve(process.cwd(), \"public\");\n  const landingPage = path.resolve(publicPath, \"index.html\");\n  \n  // Serve static files from public folder (favicon, robots.txt, etc.)\n  if (fs.existsSync(publicPath)) {\n    app.use(express.static(publicPath, { index: false }));\n  }\n  \n  // Route for static landing page at / only\n  app.get(\"/\", (_req, res, next) => {\n    if (fs.existsSync(landingPage)) {\n      res.sendFile(landingPage);\n    } else {\n      next();\n    }\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n      \n      // Initialize Stripe AFTER server is listening (lazy initialization)\n      // This ensures health checks pass quickly during deployment\n      setTimeout(() => {\n        initStripe().catch((err) => {\n          console.error('Stripe initialization error:', err);\n        });\n      }, 1000);\n    },\n  );\n})();\n","path":null,"size_bytes":6683,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from 'drizzle-orm';\nimport {\n  index,\n  jsonb,\n  pgTable,\n  timestamp,\n  varchar,\n  text,\n  integer,\n  boolean,\n} from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema, createSelectSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table (required for Replit Auth)\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table (required for Replit Auth)\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  isPro: boolean(\"is_pro\").notNull().default(false),\n  subscriptionPlan: varchar(\"subscription_plan\", { length: 20 }), // 'pro' | 'crew' | null\n  stripeCustomerId: varchar(\"stripe_customer_id\"),\n  stripeSubscriptionId: varchar(\"stripe_subscription_id\"),\n  proposalCredits: integer(\"proposal_credits\").notNull().default(0),\n  creditsExpireAt: timestamp(\"credits_expire_at\"),\n  processedSessions: text(\"processed_sessions\").array().default([]),\n  companyName: varchar(\"company_name\"),\n  companyAddress: text(\"company_address\"),\n  companyPhone: varchar(\"company_phone\"),\n  companyLogo: text(\"company_logo\"),\n  licenseNumber: varchar(\"license_number\"),\n  priceMultiplier: integer(\"price_multiplier\").notNull().default(100),\n  tradeMultipliers: jsonb(\"trade_multipliers\").default({}), // { \"bathroom\": 110, \"kitchen\": 100, etc. }\n  selectedTrades: text(\"selected_trades\").array().default([]),\n  // Onboarding data\n  onboardingCompleted: boolean(\"onboarding_completed\").notNull().default(false),\n  phone: varchar(\"phone\"),\n  businessSize: varchar(\"business_size\"), // solo, small_team, medium, large\n  referralSource: varchar(\"referral_source\"), // google, social, referral, other\n  primaryTrade: varchar(\"primary_trade\"),\n  yearsInBusiness: integer(\"years_in_business\"),\n  // User Stripe Connect settings for payment links\n  userStripeSecretKey: text(\"user_stripe_secret_key\"), // encrypted/stored Stripe secret key\n  userStripeEnabled: boolean(\"user_stripe_enabled\").notNull().default(false),\n  // Notification preferences\n  emailNotificationsEnabled: boolean(\"email_notifications_enabled\").notNull().default(true),\n  smsNotificationsEnabled: boolean(\"sms_notifications_enabled\").notNull().default(false),\n  // Market pricing lookups (freemium: 3 free, then requires Pro)\n  marketPricingLookups: integer(\"market_pricing_lookups\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\n// Proposals table\nexport const proposals = pgTable(\"proposals\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  clientName: varchar(\"client_name\").notNull(),\n  address: text(\"address\").notNull(),\n  tradeId: varchar(\"trade_id\").notNull(),\n  jobTypeId: varchar(\"job_type_id\").notNull(),\n  jobTypeName: varchar(\"job_type_name\").notNull(),\n  jobSize: integer(\"job_size\").notNull().default(2),\n  scope: text(\"scope\").array().notNull(),\n  options: jsonb(\"options\").notNull().default({}),\n  priceLow: integer(\"price_low\").notNull(),\n  priceHigh: integer(\"price_high\").notNull(),\n  status: varchar(\"status\", { length: 20 }).notNull().default(\"draft\"), // draft, sent, won, lost, accepted\n  isUnlocked: boolean(\"is_unlocked\").notNull().default(false),\n  publicToken: varchar(\"public_token\").unique(),\n  acceptedAt: timestamp(\"accepted_at\"),\n  acceptedByName: varchar(\"accepted_by_name\"),\n  acceptedByEmail: varchar(\"accepted_by_email\"),\n  signature: text(\"signature\"),\n  contractorSignature: text(\"contractor_signature\"),\n  contractorSignedAt: timestamp(\"contractor_signed_at\"),\n  // Payment fields\n  paymentLinkId: varchar(\"payment_link_id\"),\n  paymentLinkUrl: text(\"payment_link_url\"),\n  depositPercentage: integer(\"deposit_percentage\"), // e.g., 50 for 50%\n  depositAmount: integer(\"deposit_amount\"), // amount in cents\n  paymentStatus: varchar(\"payment_status\", { length: 20 }).default(\"none\"), // none, pending, partial, paid\n  paidAmount: integer(\"paid_amount\").default(0), // amount paid in cents\n  stripePaymentIntentId: varchar(\"stripe_payment_intent_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const proposalsRelations = relations(proposals, ({ one }) => ({\n  user: one(users, {\n    fields: [proposals.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const usersRelations = relations(users, ({ many }) => ({\n  proposals: many(proposals),\n}));\n\n// Companies (workspaces) table for Crew plan\nexport const companies = pgTable(\"companies\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  name: varchar(\"name\").notNull(),\n  ownerId: varchar(\"owner_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  stripeSubscriptionId: varchar(\"stripe_subscription_id\"),\n  seatLimit: integer(\"seat_limit\").notNull().default(3), // included seats\n  extraSeats: integer(\"extra_seats\").notNull().default(0), // purchased extra seats\n  address: text(\"address\"),\n  phone: varchar(\"phone\"),\n  logo: text(\"logo\"),\n  licenseNumber: varchar(\"license_number\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Company members table\nexport const companyMembers = pgTable(\"company_members\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  companyId: integer(\"company_id\").notNull().references(() => companies.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  role: varchar(\"role\", { length: 20 }).notNull().default(\"member\"), // owner, admin, member\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Invites table for pending team invitations\nexport const invites = pgTable(\"invites\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  companyId: integer(\"company_id\").notNull().references(() => companies.id, { onDelete: \"cascade\" }),\n  email: varchar(\"email\").notNull(),\n  role: varchar(\"role\", { length: 20 }).notNull().default(\"member\"),\n  token: varchar(\"token\").notNull().unique(),\n  invitedBy: varchar(\"invited_by\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  acceptedAt: timestamp(\"accepted_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Company relations\nexport const companiesRelations = relations(companies, ({ one, many }) => ({\n  owner: one(users, {\n    fields: [companies.ownerId],\n    references: [users.id],\n  }),\n  members: many(companyMembers),\n  invites: many(invites),\n}));\n\nexport const companyMembersRelations = relations(companyMembers, ({ one }) => ({\n  company: one(companies, {\n    fields: [companyMembers.companyId],\n    references: [companies.id],\n  }),\n  user: one(users, {\n    fields: [companyMembers.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const invitesRelations = relations(invites, ({ one }) => ({\n  company: one(companies, {\n    fields: [invites.companyId],\n    references: [companies.id],\n  }),\n  inviter: one(users, {\n    fields: [invites.invitedBy],\n    references: [users.id],\n  }),\n}));\n\n// Cancellation feedback table\nexport const cancellationFeedback = pgTable(\"cancellation_feedback\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  reason: varchar(\"reason\", { length: 100 }).notNull(),\n  details: text(\"details\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Proposal views tracking table\nexport const proposalViews = pgTable(\"proposal_views\", {\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\n  proposalId: integer(\"proposal_id\").notNull().references(() => proposals.id, { onDelete: \"cascade\" }),\n  viewerIp: varchar(\"viewer_ip\"),\n  userAgent: text(\"user_agent\"),\n  duration: integer(\"duration\"), // time spent viewing in seconds\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const proposalViewsRelations = relations(proposalViews, ({ one }) => ({\n  proposal: one(proposals, {\n    fields: [proposalViews.proposalId],\n    references: [proposals.id],\n  }),\n}));\n\n// Zod schemas\nexport const insertProposalSchema = createInsertSchema(proposals).omit({\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  scope: z.array(z.string()),\n  options: z.record(z.string(), z.boolean()).optional(),\n});\n\nexport const selectProposalSchema = createSelectSchema(proposals);\n\nexport const insertCancellationFeedbackSchema = z.object({\n  userId: z.string(),\n  reason: z.string().max(100),\n  details: z.string().optional(),\n});\n\nexport type InsertProposal = z.infer<typeof insertProposalSchema>;\nexport type Proposal = typeof proposals.$inferSelect;\nexport type InsertCancellationFeedback = z.infer<typeof insertCancellationFeedbackSchema>;\nexport type CancellationFeedback = typeof cancellationFeedback.$inferSelect;\n\n// Company schemas\nexport const insertCompanySchema = createInsertSchema(companies, {\n  name: z.string().min(1),\n  ownerId: z.string(),\n}).pick({\n  name: true,\n  ownerId: true,\n  stripeSubscriptionId: true,\n  seatLimit: true,\n  extraSeats: true,\n  address: true,\n  phone: true,\n  logo: true,\n  licenseNumber: true,\n});\n\nexport const insertCompanyMemberSchema = createInsertSchema(companyMembers, {\n  companyId: z.number(),\n  userId: z.string(),\n  role: z.string(),\n}).pick({\n  companyId: true,\n  userId: true,\n  role: true,\n});\n\nexport const insertInviteSchema = createInsertSchema(invites, {\n  companyId: z.number(),\n  email: z.string().email(),\n  token: z.string(),\n  invitedBy: z.string(),\n  expiresAt: z.date(),\n}).pick({\n  companyId: true,\n  email: true,\n  role: true,\n  token: true,\n  invitedBy: true,\n  expiresAt: true,\n});\n\nexport type InsertCompany = z.infer<typeof insertCompanySchema>;\nexport type Company = typeof companies.$inferSelect;\nexport type InsertCompanyMember = z.infer<typeof insertCompanyMemberSchema>;\nexport type CompanyMember = typeof companyMembers.$inferSelect;\nexport type InsertInvite = z.infer<typeof insertInviteSchema>;\nexport type Invite = typeof invites.$inferSelect;\n\n// Proposal views types\nexport type ProposalView = typeof proposalViews.$inferSelect;\nexport type InsertProposalView = typeof proposalViews.$inferInsert;\n","path":null,"size_bytes":10785,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10763,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3835,"size_tokens":null},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","path":null,"size_bytes":331,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1410,"size_tokens":null},"server/storage.ts":{"content":"import {\n  users,\n  proposals,\n  cancellationFeedback,\n  companies,\n  companyMembers,\n  invites,\n  proposalViews,\n  type User,\n  type UpsertUser,\n  type Proposal,\n  type InsertProposal,\n  type InsertCancellationFeedback,\n  type CancellationFeedback,\n  type Company,\n  type InsertCompany,\n  type CompanyMember,\n  type InsertCompanyMember,\n  type Invite,\n  type InsertInvite,\n  type ProposalView,\n  type InsertProposalView,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, and, sql, count, inArray } from \"drizzle-orm\";\n\n// Interface for storage operations\nexport interface IStorage {\n  // User operations (required for Replit Auth)\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  getUserByStripeCustomerId(customerId: string): Promise<User | undefined>;\n  updateUserStripeInfo(userId: string, stripeInfo: {\n    stripeCustomerId?: string;\n    stripeSubscriptionId?: string | null;\n    isPro?: boolean;\n    subscriptionPlan?: string | null;\n  }): Promise<User | undefined>;\n  updateCompanyProfile(userId: string, profile: {\n    companyName?: string;\n    companyAddress?: string;\n    companyPhone?: string;\n    companyLogo?: string;\n    licenseNumber?: string;\n    priceMultiplier?: number;\n    tradeMultipliers?: Record<string, number>;\n    selectedTrades?: string[];\n  }): Promise<User | undefined>;\n  completeOnboarding(userId: string, data: {\n    phone?: string;\n    companyName?: string;\n    businessSize?: string;\n    referralSource?: string;\n    primaryTrade?: string;\n    yearsInBusiness?: number;\n  }): Promise<User | undefined>;\n  addProposalCredits(userId: string, credits: number, expiresAt: Date | null, sessionId?: string): Promise<{ user: User | undefined; alreadyProcessed: boolean }>;\n  deductProposalCredit(userId: string): Promise<User | undefined>;\n  isSessionProcessed(userId: string, sessionId: string): Promise<boolean>;\n  \n  // Proposal operations\n  createProposal(proposal: InsertProposal): Promise<Proposal>;\n  getProposal(id: number): Promise<Proposal | undefined>;\n  getProposalByPublicToken(token: string): Promise<Proposal | undefined>;\n  getProposalsByUser(userId: string): Promise<Proposal[]>;\n  updateProposal(id: number, userId: string, updates: Partial<InsertProposal>): Promise<Proposal | undefined>;\n  deleteProposal(id: number, userId: string): Promise<boolean>;\n  unlockProposal(id: number, userId: string): Promise<Proposal | undefined>;\n  generatePublicToken(id: number, userId: string): Promise<Proposal | undefined>;\n  acceptProposal(token: string, acceptedByName: string, acceptedByEmail: string, signature: string): Promise<Proposal | undefined>;\n  countersignProposal(id: number, userId: string, signature: string): Promise<Proposal | undefined>;\n  getProposalByPaymentLinkId(paymentLinkId: string): Promise<Proposal | undefined>;\n  updateProposalPaymentStatus(id: number, updates: { paidAmount: number; paymentStatus: string; stripePaymentIntentId?: string }): Promise<Proposal | undefined>;\n  \n  // User Stripe settings\n  updateUserStripeSettings(userId: string, settings: {\n    userStripeSecretKey?: string | null;\n    userStripeEnabled?: boolean;\n  }): Promise<User | undefined>;\n  \n  // Notification preferences\n  updateNotificationPreferences(userId: string, preferences: {\n    emailNotificationsEnabled?: boolean;\n    smsNotificationsEnabled?: boolean;\n  }): Promise<User | undefined>;\n  \n  // Cancellation feedback\n  saveCancellationFeedback(feedback: InsertCancellationFeedback): Promise<CancellationFeedback>;\n  \n  // Company/Workspace operations\n  createCompany(company: InsertCompany): Promise<Company>;\n  getCompany(id: number): Promise<Company | undefined>;\n  getCompanyByOwner(ownerId: string): Promise<Company | undefined>;\n  updateCompany(id: number, ownerId: string, updates: Partial<InsertCompany>): Promise<Company | undefined>;\n  \n  // Company member operations\n  addCompanyMember(member: InsertCompanyMember): Promise<CompanyMember>;\n  getCompanyMembers(companyId: number): Promise<(CompanyMember & { user: User })[]>;\n  getCompanyMemberCount(companyId: number): Promise<number>;\n  getUserCompanyMembership(userId: string): Promise<(CompanyMember & { company: Company }) | undefined>;\n  updateMemberRole(companyId: number, userId: string, role: string): Promise<CompanyMember | undefined>;\n  removeMember(companyId: number, userId: string): Promise<boolean>;\n  \n  // Invite operations\n  createInvite(invite: InsertInvite): Promise<Invite>;\n  getInviteByToken(token: string): Promise<(Invite & { company: Company }) | undefined>;\n  getCompanyInvites(companyId: number): Promise<Invite[]>;\n  acceptInvite(token: string, userId: string): Promise<CompanyMember | undefined>;\n  deleteInvite(id: number, companyId: number): Promise<boolean>;\n  \n  // Analytics operations\n  getProposalAnalytics(userId: string): Promise<{\n    totalProposals: number;\n    acceptedCount: number;\n    acceptanceRate: number;\n    avgPriceLow: number;\n    avgPriceHigh: number;\n    statusBreakdown: Record<string, number>;\n    tradeBreakdown: Record<string, { count: number; avgPriceLow: number; avgPriceHigh: number }>;\n  }>;\n  \n  // Proposal view tracking\n  recordProposalView(proposalId: number, viewerIp?: string, userAgent?: string): Promise<ProposalView>;\n  getProposalViews(proposalId: number): Promise<ProposalView[]>;\n  getProposalViewStats(proposalId: number): Promise<{ viewCount: number; lastViewedAt: Date | null; uniqueViewers: number }>;\n  getProposalViewStatsBulk(proposalIds: number[]): Promise<Record<number, { viewCount: number; lastViewedAt: Date | null }>>;\n  \n  // Market pricing usage tracking\n  getMarketPricingLookups(userId: string): Promise<number>;\n  incrementMarketPricingLookups(userId: string): Promise<number>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  // Proposal operations\n  async createProposal(proposal: InsertProposal): Promise<Proposal> {\n    const { options, ...rest } = proposal;\n    const [newProposal] = await db\n      .insert(proposals)\n      .values({\n        ...rest,\n        options: options ?? {},\n      } as typeof proposals.$inferInsert)\n      .returning();\n    return newProposal;\n  }\n\n  async getProposal(id: number): Promise<Proposal | undefined> {\n    const [proposal] = await db\n      .select()\n      .from(proposals)\n      .where(eq(proposals.id, id));\n    return proposal;\n  }\n\n  async getProposalByPublicToken(token: string): Promise<Proposal | undefined> {\n    const [proposal] = await db\n      .select()\n      .from(proposals)\n      .where(eq(proposals.publicToken, token));\n    return proposal;\n  }\n\n  async generatePublicToken(id: number, userId: string): Promise<Proposal | undefined> {\n    const token = crypto.randomUUID();\n    const [updated] = await db\n      .update(proposals)\n      .set({ publicToken: token, updatedAt: new Date() })\n      .where(and(eq(proposals.id, id), eq(proposals.userId, userId)))\n      .returning();\n    return updated;\n  }\n\n  async getProposalsByUser(userId: string): Promise<Proposal[]> {\n    return await db\n      .select()\n      .from(proposals)\n      .where(eq(proposals.userId, userId))\n      .orderBy(desc(proposals.createdAt));\n  }\n\n  async updateProposal(\n    id: number,\n    userId: string,\n    updates: Partial<InsertProposal>\n  ): Promise<Proposal | undefined> {\n    const [updated] = await db\n      .update(proposals)\n      .set({ ...updates, updatedAt: new Date() })\n      .where(and(eq(proposals.id, id), eq(proposals.userId, userId)))\n      .returning();\n    return updated;\n  }\n\n  async deleteProposal(id: number, userId: string): Promise<boolean> {\n    const result = await db\n      .delete(proposals)\n      .where(and(eq(proposals.id, id), eq(proposals.userId, userId)))\n      .returning();\n    return result.length > 0;\n  }\n\n  async unlockProposal(id: number, userId: string): Promise<Proposal | undefined> {\n    const [updated] = await db\n      .update(proposals)\n      .set({ isUnlocked: true, updatedAt: new Date() })\n      .where(and(eq(proposals.id, id), eq(proposals.userId, userId)))\n      .returning();\n    return updated;\n  }\n\n  async updateUserStripeInfo(userId: string, stripeInfo: {\n    stripeCustomerId?: string;\n    stripeSubscriptionId?: string | null;\n    isPro?: boolean;\n    subscriptionPlan?: string | null;\n  }): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ ...stripeInfo, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async getSubscription(subscriptionId: string) {\n    const result = await db.execute(\n      sql`SELECT * FROM stripe.subscriptions WHERE id = ${subscriptionId}`\n    );\n    return result.rows[0] || null;\n  }\n\n  async getUserByStripeCustomerId(customerId: string): Promise<User | undefined> {\n    const [user] = await db\n      .select()\n      .from(users)\n      .where(eq(users.stripeCustomerId, customerId));\n    return user;\n  }\n\n  async updateCompanyProfile(userId: string, profile: {\n    companyName?: string;\n    companyAddress?: string;\n    companyPhone?: string;\n    companyLogo?: string;\n    licenseNumber?: string;\n    priceMultiplier?: number;\n    tradeMultipliers?: Record<string, number>;\n    selectedTrades?: string[];\n  }): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ ...profile, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async updateUserStripeSettings(userId: string, settings: {\n    userStripeSecretKey?: string | null;\n    userStripeEnabled?: boolean;\n  }): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ ...settings, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async updateNotificationPreferences(userId: string, preferences: {\n    emailNotificationsEnabled?: boolean;\n    smsNotificationsEnabled?: boolean;\n  }): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ ...preferences, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async completeOnboarding(userId: string, data: {\n    phone?: string;\n    companyName?: string;\n    businessSize?: string;\n    referralSource?: string;\n    primaryTrade?: string;\n    yearsInBusiness?: number;\n  }): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ \n        ...data, \n        onboardingCompleted: true,\n        updatedAt: new Date() \n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async addProposalCredits(userId: string, credits: number, expiresAt: Date | null, sessionId?: string): Promise<{ user: User | undefined; alreadyProcessed: boolean }> {\n    if (sessionId) {\n      const result = await db.execute(\n        sql`\n          UPDATE users \n          SET \n            proposal_credits = proposal_credits + ${credits},\n            credits_expire_at = CASE \n              WHEN ${expiresAt}::timestamp IS NOT NULL AND (credits_expire_at IS NULL OR ${expiresAt}::timestamp > credits_expire_at)\n              THEN ${expiresAt}::timestamp\n              ELSE credits_expire_at\n            END,\n            processed_sessions = array_append(COALESCE(processed_sessions, ARRAY[]::text[]), ${sessionId}),\n            updated_at = NOW()\n          WHERE id = ${userId}\n            AND (processed_sessions IS NULL OR NOT ${sessionId} = ANY(processed_sessions))\n          RETURNING *\n        `\n      );\n      \n      if (result.rows.length === 0) {\n        const existingUser = await this.getUser(userId);\n        if (existingUser?.processedSessions?.includes(sessionId)) {\n          return { user: existingUser, alreadyProcessed: true };\n        }\n        return { user: undefined, alreadyProcessed: false };\n      }\n      \n      return { user: result.rows[0] as User, alreadyProcessed: false };\n    }\n\n    const existingUser = await this.getUser(userId);\n    if (!existingUser) return { user: undefined, alreadyProcessed: false };\n\n    const newCredits = (existingUser.proposalCredits || 0) + credits;\n    \n    const updateData: any = {\n      proposalCredits: newCredits,\n      updatedAt: new Date(),\n    };\n\n    if (expiresAt) {\n      if (!existingUser.creditsExpireAt || expiresAt > existingUser.creditsExpireAt) {\n        updateData.creditsExpireAt = expiresAt;\n      }\n    }\n\n    const [user] = await db\n      .update(users)\n      .set(updateData)\n      .where(eq(users.id, userId))\n      .returning();\n    return { user, alreadyProcessed: false };\n  }\n\n  async isSessionProcessed(userId: string, sessionId: string): Promise<boolean> {\n    const user = await this.getUser(userId);\n    return user?.processedSessions?.includes(sessionId) || false;\n  }\n\n  async deductProposalCredit(userId: string): Promise<User | undefined> {\n    const existingUser = await this.getUser(userId);\n    if (!existingUser) return undefined;\n    \n    if (existingUser.creditsExpireAt && new Date() > existingUser.creditsExpireAt) {\n      return undefined;\n    }\n    \n    if ((existingUser.proposalCredits || 0) < 1) {\n      return undefined;\n    }\n\n    const [user] = await db\n      .update(users)\n      .set({ \n        proposalCredits: existingUser.proposalCredits - 1,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return user;\n  }\n\n  async saveCancellationFeedback(feedback: InsertCancellationFeedback): Promise<CancellationFeedback> {\n    const [saved] = await db\n      .insert(cancellationFeedback)\n      .values(feedback)\n      .returning();\n    return saved;\n  }\n\n  async acceptProposal(token: string, acceptedByName: string, acceptedByEmail: string, signature: string): Promise<Proposal | undefined> {\n    const [updated] = await db\n      .update(proposals)\n      .set({\n        status: 'accepted',\n        acceptedAt: new Date(),\n        acceptedByName,\n        acceptedByEmail,\n        signature,\n        updatedAt: new Date(),\n      })\n      .where(eq(proposals.publicToken, token))\n      .returning();\n    return updated;\n  }\n\n  async countersignProposal(id: number, userId: string, signature: string): Promise<Proposal | undefined> {\n    const [updated] = await db\n      .update(proposals)\n      .set({\n        contractorSignature: signature,\n        contractorSignedAt: new Date(),\n        updatedAt: new Date(),\n      })\n      .where(and(eq(proposals.id, id), eq(proposals.userId, userId), eq(proposals.status, 'accepted')))\n      .returning();\n    return updated;\n  }\n\n  async getProposalByPaymentLinkId(paymentLinkId: string): Promise<Proposal | undefined> {\n    const [proposal] = await db\n      .select()\n      .from(proposals)\n      .where(eq(proposals.paymentLinkId, paymentLinkId));\n    return proposal;\n  }\n\n  async updateProposalPaymentStatus(\n    id: number, \n    updates: { paidAmount: number; paymentStatus: string; stripePaymentIntentId?: string }\n  ): Promise<Proposal | undefined> {\n    const [updated] = await db\n      .update(proposals)\n      .set({\n        paidAmount: updates.paidAmount,\n        paymentStatus: updates.paymentStatus,\n        stripePaymentIntentId: updates.stripePaymentIntentId,\n        updatedAt: new Date(),\n      })\n      .where(eq(proposals.id, id))\n      .returning();\n    return updated;\n  }\n\n  // Company/Workspace operations\n  async createCompany(company: InsertCompany): Promise<Company> {\n    const [newCompany] = await db\n      .insert(companies)\n      .values(company)\n      .returning();\n    \n    // Add owner as a member with 'owner' role\n    await db.insert(companyMembers).values({\n      companyId: newCompany.id,\n      userId: company.ownerId,\n      role: 'owner',\n    });\n    \n    return newCompany;\n  }\n\n  async getCompany(id: number): Promise<Company | undefined> {\n    const [company] = await db\n      .select()\n      .from(companies)\n      .where(eq(companies.id, id));\n    return company;\n  }\n\n  async getCompanyByOwner(ownerId: string): Promise<Company | undefined> {\n    const [company] = await db\n      .select()\n      .from(companies)\n      .where(eq(companies.ownerId, ownerId));\n    return company;\n  }\n\n  async updateCompany(id: number, ownerId: string, updates: Partial<InsertCompany>): Promise<Company | undefined> {\n    const [updated] = await db\n      .update(companies)\n      .set({ ...updates, updatedAt: new Date() })\n      .where(and(eq(companies.id, id), eq(companies.ownerId, ownerId)))\n      .returning();\n    return updated;\n  }\n\n  // Company member operations\n  async addCompanyMember(member: InsertCompanyMember): Promise<CompanyMember> {\n    const [newMember] = await db\n      .insert(companyMembers)\n      .values(member)\n      .returning();\n    return newMember;\n  }\n\n  async getCompanyMembers(companyId: number): Promise<(CompanyMember & { user: User })[]> {\n    const members = await db\n      .select()\n      .from(companyMembers)\n      .innerJoin(users, eq(companyMembers.userId, users.id))\n      .where(eq(companyMembers.companyId, companyId))\n      .orderBy(companyMembers.createdAt);\n    \n    return members.map(row => ({\n      ...row.company_members,\n      user: row.users,\n    }));\n  }\n\n  async getCompanyMemberCount(companyId: number): Promise<number> {\n    const [result] = await db\n      .select({ count: count() })\n      .from(companyMembers)\n      .where(eq(companyMembers.companyId, companyId));\n    return result?.count || 0;\n  }\n\n  async getUserCompanyMembership(userId: string): Promise<(CompanyMember & { company: Company }) | undefined> {\n    const [membership] = await db\n      .select()\n      .from(companyMembers)\n      .innerJoin(companies, eq(companyMembers.companyId, companies.id))\n      .where(eq(companyMembers.userId, userId));\n    \n    if (!membership) return undefined;\n    \n    return {\n      ...membership.company_members,\n      company: membership.companies,\n    };\n  }\n\n  async updateMemberRole(companyId: number, userId: string, role: string): Promise<CompanyMember | undefined> {\n    const [updated] = await db\n      .update(companyMembers)\n      .set({ role })\n      .where(and(eq(companyMembers.companyId, companyId), eq(companyMembers.userId, userId)))\n      .returning();\n    return updated;\n  }\n\n  async removeMember(companyId: number, userId: string): Promise<boolean> {\n    const result = await db\n      .delete(companyMembers)\n      .where(and(eq(companyMembers.companyId, companyId), eq(companyMembers.userId, userId)))\n      .returning();\n    return result.length > 0;\n  }\n\n  // Invite operations\n  async createInvite(invite: InsertInvite): Promise<Invite> {\n    const [newInvite] = await db\n      .insert(invites)\n      .values(invite)\n      .returning();\n    return newInvite;\n  }\n\n  async getInviteByToken(token: string): Promise<(Invite & { company: Company }) | undefined> {\n    const [result] = await db\n      .select()\n      .from(invites)\n      .innerJoin(companies, eq(invites.companyId, companies.id))\n      .where(eq(invites.token, token));\n    \n    if (!result) return undefined;\n    \n    return {\n      ...result.invites,\n      company: result.companies,\n    };\n  }\n\n  async getCompanyInvites(companyId: number): Promise<Invite[]> {\n    return await db\n      .select()\n      .from(invites)\n      .where(and(eq(invites.companyId, companyId), sql`${invites.acceptedAt} IS NULL`))\n      .orderBy(desc(invites.createdAt));\n  }\n\n  async acceptInvite(token: string, userId: string): Promise<CompanyMember | undefined> {\n    const invite = await this.getInviteByToken(token);\n    if (!invite || invite.acceptedAt || new Date() > invite.expiresAt) {\n      return undefined;\n    }\n\n    // Mark invite as accepted\n    await db\n      .update(invites)\n      .set({ acceptedAt: new Date() })\n      .where(eq(invites.token, token));\n\n    // Add user as company member\n    const [member] = await db\n      .insert(companyMembers)\n      .values({\n        companyId: invite.companyId,\n        userId,\n        role: invite.role,\n      })\n      .returning();\n\n    return member;\n  }\n\n  async deleteInvite(id: number, companyId: number): Promise<boolean> {\n    const result = await db\n      .delete(invites)\n      .where(and(eq(invites.id, id), eq(invites.companyId, companyId)))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getProposalAnalytics(userId: string): Promise<{\n    totalProposals: number;\n    acceptedCount: number;\n    acceptanceRate: number;\n    avgPriceLow: number;\n    avgPriceHigh: number;\n    statusBreakdown: Record<string, number>;\n    tradeBreakdown: Record<string, { count: number; avgPriceLow: number; avgPriceHigh: number }>;\n  }> {\n    const userProposals = await db\n      .select()\n      .from(proposals)\n      .where(eq(proposals.userId, userId));\n\n    const totalProposals = userProposals.length;\n    const acceptedCount = userProposals.filter(p => p.status === 'accepted' || p.status === 'won').length;\n    const acceptanceRate = totalProposals > 0 ? (acceptedCount / totalProposals) * 100 : 0;\n\n    const avgPriceLow = totalProposals > 0 \n      ? userProposals.reduce((sum, p) => sum + p.priceLow, 0) / totalProposals \n      : 0;\n    const avgPriceHigh = totalProposals > 0 \n      ? userProposals.reduce((sum, p) => sum + p.priceHigh, 0) / totalProposals \n      : 0;\n\n    const statusBreakdown: Record<string, number> = {};\n    userProposals.forEach(p => {\n      statusBreakdown[p.status] = (statusBreakdown[p.status] || 0) + 1;\n    });\n\n    const tradeBreakdown: Record<string, { count: number; avgPriceLow: number; avgPriceHigh: number }> = {};\n    userProposals.forEach(p => {\n      if (!tradeBreakdown[p.tradeId]) {\n        tradeBreakdown[p.tradeId] = { count: 0, avgPriceLow: 0, avgPriceHigh: 0 };\n      }\n      tradeBreakdown[p.tradeId].count++;\n    });\n\n    Object.keys(tradeBreakdown).forEach(tradeId => {\n      const tradeProposals = userProposals.filter(p => p.tradeId === tradeId);\n      tradeBreakdown[tradeId].avgPriceLow = tradeProposals.reduce((sum, p) => sum + p.priceLow, 0) / tradeProposals.length;\n      tradeBreakdown[tradeId].avgPriceHigh = tradeProposals.reduce((sum, p) => sum + p.priceHigh, 0) / tradeProposals.length;\n    });\n\n    return {\n      totalProposals,\n      acceptedCount,\n      acceptanceRate,\n      avgPriceLow,\n      avgPriceHigh,\n      statusBreakdown,\n      tradeBreakdown,\n    };\n  }\n\n  // Proposal view tracking\n  async recordProposalView(proposalId: number, viewerIp?: string, userAgent?: string): Promise<ProposalView> {\n    const [view] = await db\n      .insert(proposalViews)\n      .values({\n        proposalId,\n        viewerIp: viewerIp || null,\n        userAgent: userAgent || null,\n      })\n      .returning();\n    return view;\n  }\n\n  async getProposalViews(proposalId: number): Promise<ProposalView[]> {\n    return await db\n      .select()\n      .from(proposalViews)\n      .where(eq(proposalViews.proposalId, proposalId))\n      .orderBy(desc(proposalViews.createdAt));\n  }\n\n  async getProposalViewStats(proposalId: number): Promise<{ viewCount: number; lastViewedAt: Date | null; uniqueViewers: number }> {\n    const views = await db\n      .select()\n      .from(proposalViews)\n      .where(eq(proposalViews.proposalId, proposalId))\n      .orderBy(desc(proposalViews.createdAt));\n    \n    const uniqueIps = new Set(views.filter(v => v.viewerIp).map(v => v.viewerIp));\n    \n    return {\n      viewCount: views.length,\n      lastViewedAt: views.length > 0 ? views[0].createdAt : null,\n      uniqueViewers: uniqueIps.size,\n    };\n  }\n\n  async getProposalViewStatsBulk(proposalIds: number[]): Promise<Record<number, { viewCount: number; lastViewedAt: Date | null }>> {\n    if (proposalIds.length === 0) return {};\n    \n    const views = await db\n      .select()\n      .from(proposalViews)\n      .where(inArray(proposalViews.proposalId, proposalIds));\n    \n    const result: Record<number, { viewCount: number; lastViewedAt: Date | null }> = {};\n    \n    proposalIds.forEach(id => {\n      const proposalViews = views.filter(v => v.proposalId === id);\n      const sorted = proposalViews.sort((a, b) => \n        (b.createdAt?.getTime() || 0) - (a.createdAt?.getTime() || 0)\n      );\n      result[id] = {\n        viewCount: proposalViews.length,\n        lastViewedAt: sorted.length > 0 ? sorted[0].createdAt : null,\n      };\n    });\n    \n    return result;\n  }\n  \n  // Market pricing usage tracking\n  async getMarketPricingLookups(userId: string): Promise<number> {\n    const [user] = await db.select({ marketPricingLookups: users.marketPricingLookups })\n      .from(users)\n      .where(eq(users.id, userId));\n    return user?.marketPricingLookups ?? 0;\n  }\n  \n  async incrementMarketPricingLookups(userId: string): Promise<number> {\n    const [user] = await db\n      .update(users)\n      .set({ \n        marketPricingLookups: sql`${users.marketPricingLookups} + 1`,\n        updatedAt: new Date() \n      })\n      .where(eq(users.id, userId))\n      .returning({ marketPricingLookups: users.marketPricingLookups });\n    return user?.marketPricingLookups ?? 0;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":25480,"size_tokens":null},"server/seed-products.ts":{"content":"import { getUncachableStripeClient } from './stripeClient';\n\nasync function createProducts() {\n  const stripe = await getUncachableStripeClient();\n\n  // Check if ScopeGen Pro exists\n  const existingPro = await stripe.products.search({ query: \"name:'ScopeGen Pro'\" });\n  if (existingPro.data.length > 0) {\n    console.log('ScopeGen Pro already exists:', existingPro.data[0].id);\n  } else {\n    const proProduct = await stripe.products.create({\n      name: 'ScopeGen Pro',\n      description: 'Unlimited proposals with full scope details, no blurred content, and premium features.',\n      metadata: {\n        app: 'scopegen',\n        tier: 'pro',\n      },\n    });\n    console.log('Created ScopeGen Pro:', proProduct.id);\n\n    const monthlyPrice = await stripe.prices.create({\n      product: proProduct.id,\n      unit_amount: 2900,\n      currency: 'usd',\n      recurring: { interval: 'month' },\n      metadata: { plan: 'monthly' },\n    });\n    console.log('Created monthly price:', monthlyPrice.id, '- $29/month');\n\n    const yearlyPrice = await stripe.prices.create({\n      product: proProduct.id,\n      unit_amount: 24900,\n      currency: 'usd',\n      recurring: { interval: 'year' },\n      metadata: { plan: 'yearly' },\n    });\n    console.log('Created yearly price:', yearlyPrice.id, '- $249/year');\n  }\n\n  // Check if Single Proposal exists\n  const existingSingle = await stripe.products.search({ query: \"name:'Single Proposal'\" });\n  if (existingSingle.data.length > 0) {\n    console.log('Single Proposal already exists:', existingSingle.data[0].id);\n  } else {\n    const singleProduct = await stripe.products.create({\n      name: 'Single Proposal',\n      description: 'Unlock one full proposal with complete scope of work details.',\n      metadata: {\n        app: 'scopegen',\n        type: 'credit',\n        credits: '1',\n      },\n    });\n    console.log('Created Single Proposal:', singleProduct.id);\n\n    const singlePrice = await stripe.prices.create({\n      product: singleProduct.id,\n      unit_amount: 1200,\n      currency: 'usd',\n      metadata: { type: 'single' },\n    });\n    console.log('Created single price:', singlePrice.id, '- $12');\n  }\n\n  // Check if 10 Credit Pack exists\n  const existingPack = await stripe.products.search({ query: \"name:'10 Credit Pack'\" });\n  if (existingPack.data.length > 0) {\n    console.log('10 Credit Pack already exists:', existingPack.data[0].id);\n  } else {\n    const packProduct = await stripe.products.create({\n      name: '10 Credit Pack',\n      description: 'Unlock 10 full proposals - best value! Save $81 compared to buying individually.',\n      metadata: {\n        app: 'scopegen',\n        type: 'credit',\n        credits: '10',\n      },\n    });\n    console.log('Created 10 Credit Pack:', packProduct.id);\n\n    const packPrice = await stripe.prices.create({\n      product: packProduct.id,\n      unit_amount: 3900,\n      currency: 'usd',\n      metadata: { type: 'pack' },\n    });\n    console.log('Created pack price:', packPrice.id, '- $39');\n  }\n}\n\ncreateProducts()\n  .then(() => {\n    console.log('Done!');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('Error:', error);\n    process.exit(1);\n  });\n","path":null,"size_bytes":3174,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1522,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":792,"size_tokens":null},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  // Keep track of registered strategies\n  const registeredStrategies = new Set<string>();\n\n  // Helper function to ensure strategy exists for a domain\n  const ensureStrategy = (domain: string) => {\n    const strategyName = `replitauth:${domain}`;\n    if (!registeredStrategies.has(strategyName)) {\n      const strategy = new Strategy(\n        {\n          name: strategyName,\n          config,\n          scope: \"openid email profile offline_access\",\n          callbackURL: `https://${domain}/api/callback`,\n        },\n        verify,\n      );\n      passport.use(strategy);\n      registeredStrategies.add(strategyName);\n    }\n  };\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","path":null,"size_bytes":4472,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5124,"size_tokens":null},"client/src/pages/about.tsx":{"content":"import Layout from \"@/components/layout\";\nimport { Building2, MapPin, Mail, Phone, Target, Users, Award } from \"lucide-react\";\n\nexport default function About() {\n  return (\n    <Layout>\n      {/* Hero Section */}\n      <section className=\"bg-primary py-16 md:py-24\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h1 className=\"text-4xl md:text-5xl font-heading font-bold text-white mb-4\">\n            About Lead Ledger Pro LLC\n          </h1>\n          <p className=\"text-xl text-primary-foreground/80 max-w-2xl mx-auto\">\n            Empowering contractors with professional tools to grow their business\n          </p>\n        </div>\n      </section>\n\n      {/* Company Info */}\n      <section className=\"py-16 md:py-24 bg-background\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"grid md:grid-cols-2 gap-12 items-center max-w-5xl mx-auto\">\n            <div>\n              <h2 className=\"text-3xl font-heading font-bold text-slate-900 mb-6\">Our Story</h2>\n              <p className=\"text-muted-foreground leading-relaxed mb-4\">\n                Lead Ledger Pro LLC was founded with a simple mission: to help hardworking contractors spend less time on paperwork and more time doing what they do bestâ€”building, remodeling, and transforming spaces.\n              </p>\n              <p className=\"text-muted-foreground leading-relaxed mb-4\">\n                Based in Houston, Texas, we understand the challenges that small contractors face. From late-night proposal writing to chasing down clients for signatures, we've seen it all. That's why we built ScopeGenâ€”a tool designed by people who get it.\n              </p>\n              <p className=\"text-muted-foreground leading-relaxed\">\n                Our team is dedicated to creating software that's simple, powerful, and tailored to the trades. No complicated setups, no steep learning curvesâ€”just tools that work as hard as you do.\n              </p>\n            </div>\n            \n            <div className=\"bg-slate-50 p-8 rounded-xl\">\n              <h3 className=\"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2\">\n                <Building2 className=\"w-5 h-5 text-secondary\" />\n                Company Information\n              </h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-start gap-3\">\n                  <MapPin className=\"w-5 h-5 text-primary mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-slate-900\">Location</p>\n                    <p className=\"text-muted-foreground\">Houston, Texas</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <Mail className=\"w-5 h-5 text-primary mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-slate-900\">Email</p>\n                    <p className=\"text-muted-foreground\">support@leadledgerpro.com</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <Phone className=\"w-5 h-5 text-primary mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-slate-900\">Business Hours</p>\n                    <p className=\"text-muted-foreground\">Monday - Friday, 9am - 5pm CST</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Values */}\n      <section className=\"py-16 md:py-24 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center max-w-2xl mx-auto mb-12\">\n            <h2 className=\"text-3xl font-heading font-bold text-slate-900 mb-4\">Our Values</h2>\n            <p className=\"text-muted-foreground\">The principles that guide everything we do</p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto\">\n            <div className=\"bg-white p-8 rounded-xl border border-slate-100 shadow-sm text-center\">\n              <div className=\"w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <Target className=\"w-7 h-7 text-primary\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-slate-900 mb-3\">Simplicity</h3>\n              <p className=\"text-muted-foreground\">\n                We believe powerful tools shouldn't be complicated. Everything we build is designed to be intuitive and easy to use.\n              </p>\n            </div>\n\n            <div className=\"bg-white p-8 rounded-xl border border-slate-100 shadow-sm text-center\">\n              <div className=\"w-14 h-14 bg-secondary/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <Users className=\"w-7 h-7 text-secondary\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-slate-900 mb-3\">Contractor-First</h3>\n              <p className=\"text-muted-foreground\">\n                Every feature we build starts with one question: \"Will this help contractors win more jobs and save time?\"\n              </p>\n            </div>\n\n            <div className=\"bg-white p-8 rounded-xl border border-slate-100 shadow-sm text-center\">\n              <div className=\"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <Award className=\"w-7 h-7 text-green-600\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-slate-900 mb-3\">Quality</h3>\n              <p className=\"text-muted-foreground\">\n                Just like you take pride in your craftsmanship, we take pride in building software that works flawlessly.\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* CTA */}\n      <section className=\"py-16 md:py-20 bg-primary\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h2 className=\"text-3xl font-heading font-bold text-white mb-6\">\n            Ready to streamline your proposals?\n          </h2>\n          <a \n            href=\"/app\" \n            className=\"inline-block bg-secondary text-slate-900 font-bold text-lg px-8 py-4 rounded-md hover:bg-white hover:text-primary transition-colors shadow-lg\"\n          >\n            Get Started Free\n          </a>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":6376,"size_tokens":null},"replit.md":{"content":"# ScopeGen - Professional Contractor Proposals\n\n## Overview\n\nScopeGen is a web application designed to help small contractors (bathroom remodelers, painters, HVAC specialists, etc.) generate professional proposals and scopes of work in seconds. The application streamlines the proposal creation process by providing pre-built templates with customizable options, eliminating the need for contractors to write detailed scopes manually. The platform includes a freemium model with basic preview functionality and a paid \"Pro\" tier for full access to proposals.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React with TypeScript using Vite as the build tool and development server.\n\n**Routing**: Wouter is used for client-side routing, providing a lightweight alternative to React Router.\n\n**UI Components**: The application uses shadcn/ui component library with Radix UI primitives, styled with Tailwind CSS. This provides a consistent, accessible, and customizable design system with the \"new-york\" style variant.\n\n**State Management**: TanStack Query (React Query) handles server state management, caching, and data fetching. Form state is managed using React Hook Form with Zod for validation.\n\n**Styling**: Tailwind CSS v4 with a custom industrial/professional color palette featuring navy primary colors and safety orange accents. Custom fonts include Inter for body text and Barlow Condensed for headings.\n\n**Key Pages**:\n- Home/Landing page with hero section and marketing content\n- Generator page with multi-step form for proposal creation\n- Dashboard for viewing and managing saved proposals\n\n### Backend Architecture\n\n**Runtime**: Node.js with Express.js framework handling HTTP requests.\n\n**Language**: TypeScript throughout the entire stack (shared types between client and server).\n\n**Authentication**: Replit Auth (OpenID Connect) with Passport.js strategy for user authentication. Sessions are managed using express-session with PostgreSQL session storage.\n\n**API Design**: RESTful API endpoints organized in a centralized routes file. The server uses conventional HTTP methods and returns JSON responses.\n\n**Data Validation**: Zod schemas are used for runtime validation of incoming requests and shared between client and server for type safety.\n\n**Build Process**: Custom build script using esbuild for server bundling and Vite for client bundling. The build process optimizes by bundling frequently-used dependencies to reduce cold start times.\n\n### Data Storage\n\n**Database**: PostgreSQL managed through Drizzle ORM with schema-first design.\n\n**Schema Design**:\n- `users` table: Stores user profiles with Replit Auth integration and Stripe customer information\n- `proposals` table: Stores generated proposals with client information, job details, pricing, and unlock status\n- `sessions` table: PostgreSQL-backed session storage for authentication\n\n**ORM Features**: Drizzle provides type-safe database queries and automatic schema migrations. The schema is defined in TypeScript and generates Zod validators for runtime validation.\n\n**Session Storage**: Uses connect-pg-simple to store Express sessions in PostgreSQL instead of in-memory storage, enabling persistence across server restarts.\n\n### Payment Processing\n\n**Stripe Integration**: Full Stripe integration using stripe-replit-sync for managed webhooks and automatic data synchronization.\n\n**Payment Features**:\n- Checkout Sessions for subscription purchases\n- Customer Portal for subscription management\n- Webhook handling for payment events (checkout completion, subscription updates/cancellations)\n- Product and price management synced to local database\n\n**Subscription Model**: Pro tier subscription with monthly ($29) and yearly ($249) pricing options. Free tier allows preview of proposals with blurred/limited content.\n\n**Data Sync**: Stripe data (products, prices, customers, subscriptions) is synchronized to a local `stripe` schema in PostgreSQL for efficient querying without constant API calls.\n\n### External Dependencies\n\n**Replit Platform Services**:\n- Replit Auth (OIDC) for authentication\n- Replit Connectors for Stripe credentials management\n- Replit-specific environment variables for deployment URLs and identity tokens\n\n**Third-Party APIs**:\n- Stripe API for payment processing and subscription management\n- Stripe webhook endpoints for event handling\n\n**Cloud Services**:\n- PostgreSQL database (expected to be provisioned via DATABASE_URL environment variable)\n\n**Development Tools**:\n- Replit Vite plugins for development experience (cartographer, dev banner, runtime error modal)\n- Custom Vite plugin for meta image URL updates based on deployment domain\n\n**PDF Generation**: Client-side PDF generation using html2canvas and jsPDF to convert proposal previews into downloadable documents.\n\n**Email Service**: Mailgun integration for sending proposal emails to clients. Uses `mailgun.js` library with the following features:\n- Send formatted HTML/text proposal emails to clients\n- Connection test endpoint (`GET /api/email/test`)\n- Send proposal endpoint (`POST /api/proposals/:id/email`)\n- Professional email templates with company branding\n- Required secrets: `MAILGUN_API_KEY` and `MAILGUN_DOMAIN`\n\n**1build Cost Data Integration**: Server-side integration with 1build.com API for real-time construction cost data. Uses GraphQL queries to fetch material costs, labor rates, and equipment pricing by location (county-level across 3,000+ US counties).\n- Service: `server/services/onebuild.ts` - GraphQL client for 1build external API\n- API Routes:\n  - `GET /api/costs/status` - Check if external API is configured\n  - `GET /api/costs/search` - Search costs by term, zipcode, and type (MATERIAL/LABOR/EQUIPMENT/ASSEMBLY)\n  - `GET /api/costs/material` - Get specific material cost by name and zipcode\n  - `GET /api/costs/labor` - Get labor rates by trade type and zipcode\n  - `GET /api/costs/trade` - Get combined materials + labor pricing for a trade\n- Frontend Hooks: `client/src/hooks/use-cost-data.ts` - React Query hooks for consuming cost data\n- Required secret: `ONEBUILD_EXTERNAL_KEY` (server-side external API key from 1build - contact help@1build.com for access)\n- Note: Different from `ONEBUILD_API_KEY` which is the embedded widget key with referrer restrictions\n\n**Asset Management**: Static assets served from attached_assets directory with Vite alias configuration.","path":null,"size_bytes":6478,"size_tokens":null},"client/src/components/email-proposal-modal.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Loader2, Mail, Send } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface EmailProposalModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  proposalId: number;\n  clientName: string;\n  onSuccess?: () => void;\n}\n\nexport default function EmailProposalModal({\n  isOpen,\n  onClose,\n  proposalId,\n  clientName,\n  onSuccess,\n}: EmailProposalModalProps) {\n  const [recipientEmail, setRecipientEmail] = useState(\"\");\n  const [recipientName, setRecipientName] = useState(clientName);\n  const [message, setMessage] = useState(\n    `Hi ${clientName},\\n\\nPlease find attached the proposal for your project. Let me know if you have any questions.\\n\\nBest regards`\n  );\n  const [sending, setSending] = useState(false);\n  const { toast } = useToast();\n\n  const handleSend = async () => {\n    if (!recipientEmail) {\n      toast({\n        title: \"Email required\",\n        description: \"Please enter the recipient's email address.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setSending(true);\n    try {\n      const res = await fetch(`/api/proposals/${proposalId}/email`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          recipientEmail,\n          recipientName,\n          message,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.message || \"Failed to send email\");\n      }\n\n      toast({\n        title: \"Proposal sent!\",\n        description: `The proposal has been sent to ${recipientEmail}`,\n      });\n      onSuccess?.();\n      onClose();\n    } catch (error: any) {\n      toast({\n        title: \"Error sending email\",\n        description: error.message || \"Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSending(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Mail className=\"w-5 h-5 text-primary\" />\n            Send Proposal via Email\n          </DialogTitle>\n          <DialogDescription>\n            Send this proposal directly to your client's inbox.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"recipient-email\">Recipient Email *</Label>\n            <Input\n              id=\"recipient-email\"\n              type=\"email\"\n              placeholder=\"client@example.com\"\n              value={recipientEmail}\n              onChange={(e) => setRecipientEmail(e.target.value)}\n              data-testid=\"input-recipient-email\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"recipient-name\">Recipient Name</Label>\n            <Input\n              id=\"recipient-name\"\n              placeholder=\"John Smith\"\n              value={recipientName}\n              onChange={(e) => setRecipientName(e.target.value)}\n              data-testid=\"input-recipient-name\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"message\">Personal Message</Label>\n            <Textarea\n              id=\"message\"\n              placeholder=\"Add a personal message...\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              rows={5}\n              data-testid=\"input-email-message\"\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={onClose} disabled={sending}>\n            Cancel\n          </Button>\n          <Button onClick={handleSend} disabled={sending} data-testid=\"button-send-email\">\n            {sending ? (\n              <>\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                Sending...\n              </>\n            ) : (\n              <>\n                <Send className=\"w-4 h-4 mr-2\" />\n                Send Proposal\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":4589,"size_tokens":null},"client/src/pages/settings.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport Layout from \"@/components/layout\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useLanguage } from \"@/hooks/useLanguage\";\nimport { Loader2, Upload, X, Settings as SettingsIcon, Building2, CheckCircle, DollarSign, Wrench, CreditCard, AlertTriangle, Key, ExternalLink, Eye, EyeOff, Bell, Mail, MessageSquare } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { templates } from \"@/lib/proposal-data\";\nimport CancelFeedbackModal from \"@/components/cancel-feedback-modal\";\n\nexport default function Settings() {\n  const { user, isLoading: authLoading, refetch } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const { t } = useLanguage();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [companyName, setCompanyName] = useState(\"\");\n  const [companyAddress, setCompanyAddress] = useState(\"\");\n  const [companyPhone, setCompanyPhone] = useState(\"\");\n  const [licenseNumber, setLicenseNumber] = useState(\"\");\n  const [companyLogo, setCompanyLogo] = useState<string | null>(null);\n  const [priceMultiplier, setPriceMultiplier] = useState(100);\n  const [tradeMultipliers, setTradeMultipliers] = useState<Record<string, number>>({});\n  const [selectedTrades, setSelectedTrades] = useState<string[]>([]);\n  const [saving, setSaving] = useState(false);\n  const [logoUploading, setLogoUploading] = useState(false);\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  const [canceledMessage, setCanceledMessage] = useState<string | null>(null);\n  const [userStripeSecretKey, setUserStripeSecretKey] = useState(\"\");\n  const [userStripeEnabled, setUserStripeEnabled] = useState(false);\n  const [showStripeKey, setShowStripeKey] = useState(false);\n  const [savingStripe, setSavingStripe] = useState(false);\n  const [emailNotificationsEnabled, setEmailNotificationsEnabled] = useState(true);\n  const [smsNotificationsEnabled, setSmsNotificationsEnabled] = useState(false);\n  const [savingNotifications, setSavingNotifications] = useState(false);\n\n  const allTradeIds = templates.map(t => t.id);\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get('canceled') === 'true') {\n      setCanceledMessage('Your subscription changes have been saved. Thank you for your feedback.');\n      window.history.replaceState({}, '', '/settings');\n    }\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      setCompanyName(user.companyName || \"\");\n      setCompanyAddress(user.companyAddress || \"\");\n      setCompanyPhone(user.companyPhone || \"\");\n      setLicenseNumber(user.licenseNumber || \"\");\n      setCompanyLogo(user.companyLogo || null);\n      setPriceMultiplier(user.priceMultiplier || 100);\n      setTradeMultipliers((user.tradeMultipliers as Record<string, number>) || {});\n      const userTrades = user.selectedTrades || [];\n      setSelectedTrades(userTrades);\n      setUserStripeSecretKey(\"\");\n      setUserStripeEnabled(user.userStripeEnabled || false);\n      setEmailNotificationsEnabled(user.emailNotificationsEnabled !== false);\n      setSmsNotificationsEnabled(user.smsNotificationsEnabled || false);\n    }\n  }, [user]);\n\n  const handleLogoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith(\"image/\")) {\n      toast({\n        title: t.settings.invalidFileType,\n        description: t.settings.uploadImageFile,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (file.size > 2 * 1024 * 1024) {\n      toast({\n        title: t.settings.fileTooLarge,\n        description: t.settings.uploadSmallerImage,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLogoUploading(true);\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      setCompanyLogo(event.target?.result as string);\n      setLogoUploading(false);\n    };\n    reader.onerror = () => {\n      toast({\n        title: t.settings.uploadFailed,\n        description: t.settings.couldNotReadFile,\n        variant: \"destructive\",\n      });\n      setLogoUploading(false);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleRemoveLogo = () => {\n    setCompanyLogo(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const res = await fetch(\"/api/profile/company\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          companyName: companyName || null,\n          companyAddress: companyAddress || null,\n          companyPhone: companyPhone || null,\n          licenseNumber: licenseNumber || null,\n          companyLogo: companyLogo || null,\n          priceMultiplier,\n          tradeMultipliers,\n          selectedTrades,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.message || \"Failed to save\");\n      }\n\n      await refetch();\n      toast({\n        title: t.settings.settingsSaved,\n        description: t.settings.profileUpdated,\n      });\n    } catch (error: any) {\n      toast({\n        title: t.settings.errorSavingSettings,\n        description: error.message || t.settings.pleaseTryAgain,\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveStripe = async () => {\n    setSavingStripe(true);\n    try {\n      const res = await fetch(\"/api/profile/stripe\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          userStripeSecretKey: userStripeSecretKey || null,\n          userStripeEnabled,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.message || \"Failed to save\");\n      }\n\n      await refetch();\n      toast({\n        title: t.settings.stripeSettingsSaved,\n        description: userStripeEnabled \n          ? t.settings.paymentLinksNowEnabled\n          : t.settings.stripeSettingsUpdated,\n      });\n    } catch (error: any) {\n      toast({\n        title: t.settings.errorSavingStripe,\n        description: error.message || t.settings.pleaseTryAgain,\n        variant: \"destructive\",\n      });\n    } finally {\n      setSavingStripe(false);\n    }\n  };\n\n  const handleSaveNotifications = async () => {\n    setSavingNotifications(true);\n    try {\n      const res = await fetch(\"/api/profile/notifications\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          emailNotificationsEnabled,\n          smsNotificationsEnabled,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.message || \"Failed to save\");\n      }\n\n      await refetch();\n      toast({\n        title: \"Notification preferences saved\",\n        description: \"Your notification settings have been updated.\",\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Error saving notification preferences\",\n        description: error.message || \"Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSavingNotifications(false);\n    }\n  };\n\n  if (authLoading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Layout>\n        <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center px-4\">\n          <h2 className=\"text-2xl font-bold mb-4\">{t.settings.signInRequired}</h2>\n          <p className=\"text-muted-foreground mb-6\">{t.settings.signInDesc}</p>\n          <a href=\"/api/login\" className=\"bg-primary text-white px-6 py-3 rounded-md font-semibold\">\n            {t.settings.signInWithReplit}\n          </a>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen pb-12\">\n        <div className=\"bg-white border-b border-slate-200\">\n          <div className=\"container mx-auto px-4 py-8\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 bg-primary/10 rounded-lg flex items-center justify-center\">\n                <SettingsIcon className=\"w-5 h-5 text-primary\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-heading font-bold text-slate-900\">{t.settings.title}</h1>\n                <p className=\"text-slate-500 text-sm\">{t.settings.subtitle}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"container mx-auto px-4 py-8 max-w-2xl\">\n          <Card className=\"border-none shadow-sm\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Building2 className=\"w-5 h-5\" />\n                {t.settings.companyProfile}\n              </CardTitle>\n              <CardDescription>\n                {t.settings.companyProfileDesc}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"company-logo\">{t.settings.companyLogo}</Label>\n                <div className=\"flex items-start gap-4\">\n                  {companyLogo ? (\n                    <div className=\"relative\">\n                      <img\n                        src={companyLogo}\n                        alt=\"Company logo\"\n                        className=\"w-24 h-24 object-contain border border-slate-200 rounded-lg bg-white p-2\"\n                        data-testid=\"img-company-logo\"\n                      />\n                      <button\n                        onClick={handleRemoveLogo}\n                        className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors\"\n                        data-testid=\"button-remove-logo\"\n                      >\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  ) : (\n                    <div\n                      onClick={() => fileInputRef.current?.click()}\n                      className=\"w-24 h-24 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-slate-50 transition-colors\"\n                      data-testid=\"button-upload-logo\"\n                    >\n                      {logoUploading ? (\n                        <Loader2 className=\"w-6 h-6 animate-spin text-slate-400\" />\n                      ) : (\n                        <>\n                          <Upload className=\"w-6 h-6 text-slate-400 mb-1\" />\n                          <span className=\"text-xs text-slate-500\">{t.settings.upload}</span>\n                        </>\n                      )}\n                    </div>\n                  )}\n                  <div className=\"flex-1\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleLogoUpload}\n                      className=\"hidden\"\n                      data-testid=\"input-logo-file\"\n                    />\n                    <p className=\"text-sm text-slate-500\">\n                      {t.settings.companyLogoDesc}\n                    </p>\n                    {!companyLogo && (\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"mt-2\"\n                        onClick={() => fileInputRef.current?.click()}\n                        disabled={logoUploading}\n                      >\n                        {t.settings.chooseFile}\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"company-name\">{t.settings.companyName}</Label>\n                <Input\n                  id=\"company-name\"\n                  placeholder={t.settings.companyNamePlaceholder}\n                  value={companyName}\n                  onChange={(e) => setCompanyName(e.target.value)}\n                  data-testid=\"input-company-name\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"company-address\">{t.settings.companyAddress}</Label>\n                <Textarea\n                  id=\"company-address\"\n                  placeholder={t.settings.companyAddressPlaceholder}\n                  value={companyAddress}\n                  onChange={(e) => setCompanyAddress(e.target.value)}\n                  rows={3}\n                  data-testid=\"input-company-address\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"company-phone\">{t.settings.companyPhone}</Label>\n                <Input\n                  id=\"company-phone\"\n                  type=\"tel\"\n                  placeholder={t.settings.companyPhonePlaceholder}\n                  value={companyPhone}\n                  onChange={(e) => setCompanyPhone(e.target.value)}\n                  data-testid=\"input-company-phone\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"license-number\">{t.settings.licenseNumber}</Label>\n                <Input\n                  id=\"license-number\"\n                  placeholder={t.settings.licenseNumberPlaceholder}\n                  value={licenseNumber}\n                  onChange={(e) => setLicenseNumber(e.target.value)}\n                  data-testid=\"input-license-number\"\n                />\n                <p className=\"text-xs text-slate-500\">\n                  {t.settings.licenseNumberDesc}\n                </p>\n              </div>\n\n              <div className=\"space-y-4 pt-6 border-t border-slate-200\">\n                <div className=\"flex items-center gap-2\">\n                  <Wrench className=\"w-5 h-5 text-primary\" />\n                  <Label className=\"text-base font-semibold\">{t.settings.servicesYouOffer}</Label>\n                </div>\n                <p className=\"text-sm text-slate-500\">\n                  {t.settings.servicesDesc}\n                </p>\n                <div className=\"flex gap-2 mb-3\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setSelectedTrades(allTradeIds)}\n                    data-testid=\"button-select-all-trades\"\n                  >\n                    {t.settings.selectAll}\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setSelectedTrades([])}\n                    data-testid=\"button-clear-trades\"\n                  >\n                    {t.settings.clearAll}\n                  </Button>\n                </div>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {templates.map((template) => (\n                    <div key={template.id} className=\"flex items-center space-x-2\">\n                      <Checkbox\n                        id={`trade-${template.id}`}\n                        checked={selectedTrades.includes(template.id)}\n                        onCheckedChange={(checked) => {\n                          if (checked) {\n                            setSelectedTrades([...selectedTrades, template.id]);\n                          } else {\n                            setSelectedTrades(selectedTrades.filter(t => t !== template.id));\n                          }\n                        }}\n                        data-testid={`checkbox-trade-${template.id}`}\n                      />\n                      <Label\n                        htmlFor={`trade-${template.id}`}\n                        className=\"text-sm font-normal cursor-pointer\"\n                      >\n                        {template.trade}\n                      </Label>\n                    </div>\n                  ))}\n                </div>\n                {selectedTrades.length === 0 && (\n                  <p className=\"text-sm text-orange-600\">\n                    Please select at least one trade to generate proposals.\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-4 pt-6 border-t border-slate-200\">\n                <div className=\"flex items-center gap-2\">\n                  <DollarSign className=\"w-5 h-5 text-primary\" />\n                  <Label className=\"text-base font-semibold\">Pricing Adjustment</Label>\n                </div>\n                <p className=\"text-sm text-slate-500\">\n                  Adjust your proposal prices up or down. This applies a percentage to all generated price estimates.\n                </p>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-slate-600\">Price Multiplier</span>\n                    <span className=\"text-lg font-semibold text-primary\" data-testid=\"text-price-multiplier\">\n                      {priceMultiplier}%\n                    </span>\n                  </div>\n                  <Slider\n                    value={[priceMultiplier]}\n                    onValueChange={(value) => setPriceMultiplier(value[0])}\n                    min={25}\n                    max={200}\n                    step={5}\n                    className=\"w-full\"\n                    data-testid=\"slider-price-multiplier\"\n                  />\n                  <div className=\"flex justify-between text-xs text-slate-400\">\n                    <span>25% (Lower)</span>\n                    <span>100% (Base)</span>\n                    <span>200% (Higher)</span>\n                  </div>\n                  <div className=\"bg-slate-50 rounded-lg p-3 mt-2\">\n                    <p className=\"text-sm text-slate-600\">\n                      <strong>Example:</strong> A base estimate of $1,000 will show as{\" \"}\n                      <span className=\"font-semibold text-primary\">\n                        ${((1000 * priceMultiplier) / 100).toLocaleString()}\n                      </span>{\" \"}\n                      on your proposals.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Per-Trade Multipliers */}\n              {selectedTrades.length > 0 && (\n                <div className=\"space-y-4 pt-6 border-t border-slate-200\">\n                  <div className=\"flex items-center gap-2\">\n                    <Wrench className=\"w-5 h-5 text-primary\" />\n                    <Label className=\"text-base font-semibold\">Per-Trade Pricing</Label>\n                  </div>\n                  <p className=\"text-sm text-slate-500\">\n                    Fine-tune pricing for each trade. These adjustments apply on top of your global multiplier.\n                  </p>\n                  <div className=\"space-y-4\">\n                    {selectedTrades.map((tradeId) => {\n                      const template = templates.find(t => t.id === tradeId);\n                      const multiplier = tradeMultipliers[tradeId] ?? 100;\n                      return (\n                        <div key={tradeId} className=\"bg-slate-50 rounded-lg p-4\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"text-sm font-medium text-slate-700\">{template?.trade || tradeId}</span>\n                            <span className=\"text-sm font-semibold text-primary\" data-testid={`text-trade-multiplier-${tradeId}`}>\n                              {multiplier}%\n                            </span>\n                          </div>\n                          <Slider\n                            value={[multiplier]}\n                            onValueChange={(value) => {\n                              setTradeMultipliers(prev => ({\n                                ...prev,\n                                [tradeId]: value[0]\n                              }));\n                            }}\n                            min={50}\n                            max={150}\n                            step={5}\n                            className=\"w-full\"\n                            data-testid={`slider-trade-multiplier-${tradeId}`}\n                          />\n                          <div className=\"flex justify-between text-xs text-slate-400 mt-1\">\n                            <span>50%</span>\n                            <span>100%</span>\n                            <span>150%</span>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                  <div className=\"bg-blue-50 rounded-lg p-3\">\n                    <p className=\"text-sm text-blue-700\">\n                      <strong>How it works:</strong> Your final price = Base Price Ã— Global Multiplier Ã— Trade Multiplier. \n                      For example, a $1,000 base with 110% global and 120% bathroom = ${((1000 * 1.1 * 1.2)).toLocaleString()}.\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"pt-4 border-t border-slate-200\">\n                <Button\n                  onClick={handleSave}\n                  disabled={saving}\n                  className=\"w-full sm:w-auto\"\n                  data-testid=\"button-save-settings\"\n                >\n                  {saving ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      {t.settings.saving}\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\n                      {t.settings.saveChanges}\n                    </>\n                  )}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Subscription Management Card */}\n          {user.stripeCustomerId && (\n            <Card className=\"border-none shadow-sm mt-6\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <CreditCard className=\"w-5 h-5\" />\n                  {t.settings.subscription}\n                </CardTitle>\n                <CardDescription>\n                  {t.settings.subscriptionDesc}\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {canceledMessage && (\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 flex gap-2\">\n                    <CheckCircle className=\"w-5 h-5 text-green-600 shrink-0 mt-0.5\" />\n                    <p className=\"text-sm text-green-800\">{canceledMessage}</p>\n                  </div>\n                )}\n\n                <div className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg\">\n                  <div>\n                    <p className=\"font-medium text-slate-900\">{t.settings.currentPlan}</p>\n                    <p className=\"text-sm text-slate-500\">\n                      {user.isPro ? t.settings.proPlan : t.settings.freePlan}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    {user.isPro && (\n                      <span className=\"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-medium\">\n                        {t.settings.active}\n                      </span>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row gap-3 pt-2\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={async () => {\n                      try {\n                        const res = await fetch(\"/api/stripe/portal\", {\n                          method: \"POST\",\n                          credentials: \"include\",\n                        });\n                        const data = await res.json();\n                        if (data.url) {\n                          window.location.href = data.url;\n                        }\n                      } catch (error) {\n                        toast({\n                          title: t.common.error,\n                          description: t.settings.couldNotOpenBilling,\n                          variant: \"destructive\",\n                        });\n                      }\n                    }}\n                    data-testid=\"button-manage-billing\"\n                  >\n                    {t.settings.manageBilling}\n                  </Button>\n\n                  <Button\n                    variant=\"ghost\"\n                    className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                    onClick={() => setShowCancelModal(true)}\n                    data-testid=\"button-cancel-subscription\"\n                  >\n                    <AlertTriangle className=\"w-4 h-4 mr-2\" />\n                    {t.settings.cancelSubscription}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Stripe Integration Card - Payment Links */}\n          <Card className=\"border-none shadow-sm mt-6\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Key className=\"w-5 h-5\" />\n                {t.settings.paymentLinks}\n              </CardTitle>\n              <CardDescription>\n                {t.settings.paymentLinksDesc}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <h4 className=\"font-medium text-blue-900 mb-2\">{t.settings.howItWorks}</h4>\n                <ul className=\"text-sm text-blue-800 space-y-1 list-disc list-inside\">\n                  <li>{t.settings.howItWorksItem1}</li>\n                  <li>{t.settings.howItWorksItem2}</li>\n                  <li>{t.settings.howItWorksItem3}</li>\n                </ul>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"stripe-key\">{t.settings.stripeLiveSecretKey}</Label>\n                  <div className=\"relative\">\n                    <Input\n                      id=\"stripe-key\"\n                      type={showStripeKey ? \"text\" : \"password\"}\n                      placeholder={t.settings.stripePlaceholder}\n                      value={userStripeSecretKey}\n                      onChange={(e) => setUserStripeSecretKey(e.target.value)}\n                      className=\"pr-10\"\n                      data-testid=\"input-stripe-key\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowStripeKey(!showStripeKey)}\n                      className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600\"\n                      data-testid=\"button-toggle-stripe-key\"\n                    >\n                      {showStripeKey ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                    </button>\n                  </div>\n                  <p className=\"text-xs text-slate-500\">\n                    {t.settings.findKeyInDashboard}{\" \"}\n                    <a \n                      href=\"https://dashboard.stripe.com/apikeys\" \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary hover:underline inline-flex items-center gap-1\"\n                    >\n                      {t.settings.stripeDashboard} <ExternalLink className=\"w-3 h-3\" />\n                    </a>\n                    . {t.settings.dontHaveStripe}{\" \"}\n                    <a \n                      href=\"https://dashboard.stripe.com/register\" \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary hover:underline inline-flex items-center gap-1\"\n                    >\n                      {t.settings.signUpFree} <ExternalLink className=\"w-3 h-3\" />\n                    </a>\n                  </p>\n                </div>\n\n                {user?.hasStripeKey && !userStripeSecretKey && (\n                  <div className=\"bg-slate-100 border border-slate-200 rounded-lg p-3 flex gap-2\">\n                    <CheckCircle className=\"w-5 h-5 text-slate-500 shrink-0 mt-0.5\" />\n                    <p className=\"text-sm text-slate-600\">\n                      {t.settings.stripeKeyConfigured}\n                    </p>\n                  </div>\n                )}\n\n                <div className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg\">\n                  <div>\n                    <Label htmlFor=\"stripe-enabled\" className=\"font-medium\">{t.settings.enablePaymentLinks}</Label>\n                    <p className=\"text-sm text-slate-500\">\n                      {t.settings.allowGeneratingLinks}\n                    </p>\n                  </div>\n                  <Switch\n                    id=\"stripe-enabled\"\n                    checked={userStripeEnabled}\n                    onCheckedChange={setUserStripeEnabled}\n                    disabled={!userStripeSecretKey && !user?.hasStripeKey}\n                    data-testid=\"switch-stripe-enabled\"\n                  />\n                </div>\n\n                {userStripeEnabled && (userStripeSecretKey || user?.hasStripeKey) && (\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 flex gap-2\">\n                    <CheckCircle className=\"w-5 h-5 text-green-600 shrink-0 mt-0.5\" />\n                    <p className=\"text-sm text-green-800\">\n                      {t.settings.paymentLinksEnabled}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"pt-4 border-t border-slate-200\">\n                <Button\n                  onClick={handleSaveStripe}\n                  disabled={savingStripe}\n                  className=\"w-full sm:w-auto\"\n                  data-testid=\"button-save-stripe\"\n                >\n                  {savingStripe ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      {t.settings.saving}\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\n                      {t.settings.saveStripeSettings}\n                    </>\n                  )}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Notification Preferences Card */}\n          <Card className=\"border-none shadow-sm mt-6\" data-testid=\"card-notification-preferences\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Bell className=\"w-5 h-5\" />\n                Notification Preferences\n              </CardTitle>\n              <CardDescription>\n                Control how you receive notifications about proposal activity.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg\">\n                  <div className=\"flex items-start gap-3\">\n                    <Mail className=\"w-5 h-5 text-slate-600 mt-0.5\" />\n                    <div>\n                      <Label htmlFor=\"email-notifications\" className=\"font-medium\">Email Notifications</Label>\n                      <p className=\"text-sm text-slate-500\">\n                        Receive email notifications when clients accept your proposals.\n                      </p>\n                    </div>\n                  </div>\n                  <Switch\n                    id=\"email-notifications\"\n                    checked={emailNotificationsEnabled}\n                    onCheckedChange={setEmailNotificationsEnabled}\n                    data-testid=\"switch-email-notifications\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg\">\n                  <div className=\"flex items-start gap-3\">\n                    <MessageSquare className=\"w-5 h-5 text-slate-600 mt-0.5\" />\n                    <div>\n                      <Label htmlFor=\"sms-notifications\" className=\"font-medium\">SMS Notifications</Label>\n                      <p className=\"text-sm text-slate-500\">\n                        Receive text message notifications for proposal updates.\n                      </p>\n                      <p className=\"text-xs text-orange-600 mt-1\">\n                        Requires phone number in your profile and Twilio configuration.\n                      </p>\n                    </div>\n                  </div>\n                  <Switch\n                    id=\"sms-notifications\"\n                    checked={smsNotificationsEnabled}\n                    onCheckedChange={setSmsNotificationsEnabled}\n                    data-testid=\"switch-sms-notifications\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"pt-4 border-t border-slate-200\">\n                <Button\n                  onClick={handleSaveNotifications}\n                  disabled={savingNotifications}\n                  className=\"w-full sm:w-auto\"\n                  data-testid=\"button-save-notifications\"\n                >\n                  {savingNotifications ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      Saving...\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\n                      Save Notification Settings\n                    </>\n                  )}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      <CancelFeedbackModal\n        isOpen={showCancelModal}\n        onClose={() => setShowCancelModal(false)}\n        onComplete={(portalUrl) => {\n          setShowCancelModal(false);\n          if (portalUrl) {\n            window.location.href = portalUrl;\n          }\n        }}\n      />\n    </Layout>\n  );\n}\n","path":null,"size_bytes":35469,"size_tokens":null},"server/emailService.ts":{"content":"// Email service using Resend integration\nimport { Resend } from 'resend';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY \n    ? 'repl ' + process.env.REPL_IDENTITY \n    : process.env.WEB_REPL_RENEWAL \n    ? 'depl ' + process.env.WEB_REPL_RENEWAL \n    : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\n  }\n\n  connectionSettings = await fetch(\n    'https://' + hostname + '/api/v2/connection?include_secrets=true&connector_names=resend',\n    {\n      headers: {\n        'Accept': 'application/json',\n        'X_REPLIT_TOKEN': xReplitToken\n      }\n    }\n  ).then(res => res.json()).then(data => data.items?.[0]);\n\n  if (!connectionSettings || (!connectionSettings.settings.api_key)) {\n    throw new Error('Resend not connected');\n  }\n  return {\n    apiKey: connectionSettings.settings.api_key, \n    fromEmail: connectionSettings.settings.from_email\n  };\n}\n\nasync function getResendClient() {\n  const { apiKey } = await getCredentials();\n  return {\n    client: new Resend(apiKey),\n    fromEmail: connectionSettings.settings.from_email\n  };\n}\n\ninterface EmailOptions {\n  to: string;\n  subject: string;\n  text: string;\n  html?: string;\n  from?: string;\n}\n\nexport async function sendEmail(options: EmailOptions): Promise<{ success: boolean; messageId?: string; error?: string }> {\n  try {\n    const { client, fromEmail } = await getResendClient();\n    const emailAddress = fromEmail || 'onboarding@resend.dev';\n    const defaultFrom = `ScopeGen <${emailAddress}>`;\n    \n    const result = await client.emails.send({\n      from: options.from || defaultFrom,\n      to: [options.to],\n      subject: options.subject,\n      text: options.text,\n      html: options.html,\n    });\n\n    if (result.error) {\n      return { success: false, error: result.error.message };\n    }\n\n    return { success: true, messageId: result.data?.id };\n  } catch (error: any) {\n    console.error('Resend error:', error);\n    return { success: false, error: error.message || 'Failed to send email' };\n  }\n}\n\nexport async function testConnection(): Promise<{ success: boolean; fromEmail?: string; error?: string }> {\n  try {\n    const { fromEmail } = await getCredentials();\n    return { \n      success: true, \n      fromEmail \n    };\n  } catch (error: any) {\n    console.error('Resend connection test failed:', error);\n    return { success: false, error: error.message || 'Connection test failed' };\n  }\n}\n\ninterface ProposalEmailData {\n  recipientEmail: string;\n  recipientName?: string;\n  proposalTitle: string;\n  clientName: string;\n  totalPrice: number;\n  senderName?: string;\n  senderCompany?: string;\n  customMessage?: string;\n  proposalUrl?: string;\n}\n\nexport async function sendProposalEmail(data: ProposalEmailData): Promise<{ success: boolean; messageId?: string; error?: string }> {\n  const formatCurrency = (amount: number) => new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    maximumFractionDigits: 0\n  }).format(amount);\n  \n  const formattedPrice = formatCurrency(data.totalPrice);\n\n  const subject = `Proposal: ${data.proposalTitle} for ${data.clientName}`;\n  \n  const text = `\nHi ${data.recipientName || 'there'},\n\n${data.senderCompany || data.senderName || 'We'} have prepared a proposal for you.\n\nProject: ${data.proposalTitle}\nTotal: ${formattedPrice}\n\n${data.customMessage ? `\\nMessage from ${data.senderName || 'the contractor'}:\\n${data.customMessage}\\n` : ''}\n\nBest regards,\n${data.senderName || 'The Team'}\n${data.senderCompany || ''}\n`.trim();\n\n  const html = `\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; }\n    .container { max-width: 600px; margin: 0 auto; }\n    .header { background: #1e3a5f; color: white; padding: 30px; text-align: center; }\n    .header h1 { margin: 0; font-size: 28px; }\n    .content { padding: 30px; background: #f9f9f9; }\n    .project-card { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n    .amount { font-size: 32px; color: #1e3a5f; font-weight: bold; margin: 15px 0; }\n    .label { color: #666; font-size: 14px; margin-bottom: 5px; }\n    .value { font-size: 18px; color: #333; font-weight: 500; }\n    .message { background: white; padding: 20px; border-left: 4px solid #f97316; margin: 20px 0; border-radius: 0 8px 8px 0; }\n    .button { display: inline-block; background: #f97316; color: white; padding: 14px 28px; text-decoration: none; border-radius: 6px; margin-top: 20px; font-weight: bold; }\n    .footer { text-align: center; padding: 30px; color: #666; font-size: 12px; background: #e5e5e5; }\n    .footer a { color: #1e3a5f; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>New Proposal</h1>\n    </div>\n    <div class=\"content\">\n      <p>Hi ${data.recipientName || 'there'},</p>\n      <p><strong>${data.senderCompany || data.senderName || 'We'}</strong> have prepared a proposal for your project.</p>\n      \n      <div class=\"project-card\">\n        <div class=\"label\">PROJECT</div>\n        <div class=\"value\" style=\"font-size: 22px; margin-bottom: 15px;\">${data.proposalTitle}</div>\n        \n        <div class=\"label\">CLIENT</div>\n        <div class=\"value\" style=\"margin-bottom: 15px;\">${data.clientName}</div>\n        \n        <div class=\"label\">TOTAL</div>\n        <div class=\"amount\">${formattedPrice}</div>\n      </div>\n      \n      ${data.customMessage ? `\n      <div class=\"message\">\n        <p style=\"margin: 0;\"><strong>Message from ${data.senderName || 'the contractor'}:</strong></p>\n        <p style=\"margin: 10px 0 0 0;\">${data.customMessage}</p>\n      </div>\n      ` : ''}\n      \n      ${data.proposalUrl ? `\n      <div style=\"text-align: center; margin-top: 30px;\">\n        <a href=\"${data.proposalUrl}\" class=\"button\" style=\"display: inline-block; background: #f97316; color: white; padding: 14px 28px; text-decoration: none; border-radius: 6px; font-weight: bold;\">\n          View & Download Proposal\n        </a>\n        <p style=\"margin-top: 15px; font-size: 12px; color: #666;\">\n          Click the button above to view the full proposal and download it as a PDF.\n        </p>\n      </div>\n      ` : ''}\n    </div>\n    <div class=\"footer\">\n      <p>This proposal was created with <a href=\"#\">ScopeGen</a></p>\n      <p>Professional proposals for contractors</p>\n    </div>\n  </div>\n</body>\n</html>\n`.trim();\n\n  try {\n    const { fromEmail } = await getCredentials();\n    const emailAddress = fromEmail || 'onboarding@resend.dev';\n    const fromAddress = data.senderName \n      ? `${data.senderName} via ScopeGen <${emailAddress}>` \n      : `ScopeGen <${emailAddress}>`;\n      \n    return sendEmail({\n      to: data.recipientEmail,\n      subject,\n      text,\n      html,\n      from: fromAddress\n    });\n  } catch (error: any) {\n    return { success: false, error: error.message };\n  }\n}\n\ninterface PurchaseNotificationData {\n  customerEmail: string;\n  customerName?: string;\n  planName: string;\n  amount: number;\n  subscriptionId: string;\n}\n\nexport async function sendPurchaseNotification(\n  adminEmail: string,\n  data: PurchaseNotificationData\n): Promise<{ success: boolean; messageId?: string; error?: string }> {\n  const formatCurrency = (amount: number) => new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    maximumFractionDigits: 2\n  }).format(amount / 100);\n\n  const formattedAmount = formatCurrency(data.amount);\n  const timestamp = new Date().toLocaleString('en-US', {\n    dateStyle: 'full',\n    timeStyle: 'short'\n  });\n\n  const subject = `New Pro Subscription: ${data.customerEmail}`;\n\n  const text = `\nNew Pro Subscription Purchase!\n\nCustomer: ${data.customerName || data.customerEmail}\nEmail: ${data.customerEmail}\nPlan: ${data.planName}\nAmount: ${formattedAmount}\nSubscription ID: ${data.subscriptionId}\nTime: ${timestamp}\n\nView in Stripe Dashboard: https://dashboard.stripe.com/subscriptions/${data.subscriptionId}\n`.trim();\n\n  const html = `\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background: #f4f4f4; }\n    .container { max-width: 500px; margin: 20px auto; }\n    .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }\n    .header { background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 25px; text-align: center; }\n    .header h1 { margin: 0; font-size: 24px; }\n    .header .emoji { font-size: 40px; margin-bottom: 10px; }\n    .content { padding: 25px; }\n    .row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }\n    .row:last-child { border-bottom: none; }\n    .label { color: #666; font-size: 14px; }\n    .value { font-weight: 600; color: #333; }\n    .amount { font-size: 28px; color: #22c55e; text-align: center; margin: 20px 0; }\n    .button { display: block; background: #1e3a5f; color: white; padding: 14px; text-align: center; text-decoration: none; border-radius: 8px; margin-top: 20px; font-weight: 600; }\n    .footer { text-align: center; padding: 15px; color: #999; font-size: 12px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"card\">\n      <div class=\"header\">\n        <div class=\"emoji\">ðŸŽ‰</div>\n        <h1>New Pro Subscription!</h1>\n      </div>\n      <div class=\"content\">\n        <div class=\"amount\">${formattedAmount}</div>\n        \n        <div class=\"row\">\n          <span class=\"label\">Customer</span>\n          <span class=\"value\">${data.customerName || 'N/A'}</span>\n        </div>\n        <div class=\"row\">\n          <span class=\"label\">Email</span>\n          <span class=\"value\">${data.customerEmail}</span>\n        </div>\n        <div class=\"row\">\n          <span class=\"label\">Plan</span>\n          <span class=\"value\">${data.planName}</span>\n        </div>\n        <div class=\"row\">\n          <span class=\"label\">Time</span>\n          <span class=\"value\">${timestamp}</span>\n        </div>\n        \n        <a href=\"https://dashboard.stripe.com/subscriptions/${data.subscriptionId}\" class=\"button\">\n          View in Stripe Dashboard â†’\n        </a>\n      </div>\n    </div>\n    <div class=\"footer\">\n      ScopeGen Purchase Notification\n    </div>\n  </div>\n</body>\n</html>\n`.trim();\n\n  return sendEmail({\n    to: adminEmail,\n    subject,\n    text,\n    html,\n  });\n}\n\ninterface ProposalAcceptedNotificationData {\n  contractorEmail: string;\n  contractorName?: string;\n  clientName: string;\n  clientEmail: string;\n  acceptedByName: string;\n  projectTitle: string;\n  projectAddress?: string;\n  totalPrice: number;\n  acceptedAt: Date;\n}\n\nexport async function sendProposalAcceptedNotification(\n  data: ProposalAcceptedNotificationData\n): Promise<{ success: boolean; messageId?: string; error?: string }> {\n  const formatCurrency = (amount: number) => new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    maximumFractionDigits: 0\n  }).format(amount);\n\n  const formattedPrice = formatCurrency(data.totalPrice);\n  const timestamp = new Date(data.acceptedAt).toLocaleString('en-US', {\n    dateStyle: 'full',\n    timeStyle: 'short'\n  });\n\n  const subject = `Proposal Accepted: ${data.projectTitle} - ${data.clientName}`;\n\n  const text = `\nGreat news! Your proposal has been accepted!\n\nClient: ${data.clientName}\nAccepted By: ${data.acceptedByName}\nEmail: ${data.clientEmail}\nProject: ${data.projectTitle}\n${data.projectAddress ? `Address: ${data.projectAddress}` : ''}\nAmount: ${formattedPrice}\nAccepted: ${timestamp}\n\nTime to get to work! You can reach out to ${data.acceptedByName} at ${data.clientEmail} to coordinate next steps.\n`.trim();\n\n  const html = `\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background: #f4f4f4; }\n    .container { max-width: 500px; margin: 20px auto; }\n    .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }\n    .header { background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 25px; text-align: center; }\n    .header h1 { margin: 0; font-size: 24px; }\n    .header .emoji { font-size: 40px; margin-bottom: 10px; }\n    .content { padding: 25px; }\n    .row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }\n    .row:last-child { border-bottom: none; }\n    .label { color: #666; font-size: 14px; }\n    .value { font-weight: 600; color: #333; text-align: right; }\n    .amount { font-size: 28px; color: #22c55e; text-align: center; margin: 20px 0; }\n    .cta { background: #f0fdf4; border: 1px solid #22c55e; border-radius: 8px; padding: 15px; margin-top: 20px; text-align: center; }\n    .cta p { margin: 5px 0; }\n    .cta a { color: #16a34a; font-weight: 600; }\n    .footer { text-align: center; padding: 15px; color: #999; font-size: 12px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"card\">\n      <div class=\"header\">\n        <div class=\"emoji\">âœ…</div>\n        <h1>Proposal Accepted!</h1>\n      </div>\n      <div class=\"content\">\n        <p>Hi${data.contractorName ? ` ${data.contractorName}` : ''},</p>\n        <p>Great news! Your proposal has been accepted and you're ready to start the project.</p>\n        \n        <div class=\"amount\">${formattedPrice}</div>\n        \n        <div class=\"row\">\n          <span class=\"label\">Client</span>\n          <span class=\"value\">${data.clientName}</span>\n        </div>\n        <div class=\"row\">\n          <span class=\"label\">Accepted By</span>\n          <span class=\"value\">${data.acceptedByName}</span>\n        </div>\n        <div class=\"row\">\n          <span class=\"label\">Contact Email</span>\n          <span class=\"value\">${data.clientEmail}</span>\n        </div>\n        <div class=\"row\">\n          <span class=\"label\">Project</span>\n          <span class=\"value\">${data.projectTitle}</span>\n        </div>\n        ${data.projectAddress ? `\n        <div class=\"row\">\n          <span class=\"label\">Address</span>\n          <span class=\"value\">${data.projectAddress}</span>\n        </div>\n        ` : ''}\n        <div class=\"row\">\n          <span class=\"label\">Accepted</span>\n          <span class=\"value\">${timestamp}</span>\n        </div>\n        \n        <div class=\"cta\">\n          <p><strong>Next Steps</strong></p>\n          <p>Reach out to ${data.acceptedByName} at <a href=\"mailto:${data.clientEmail}\">${data.clientEmail}</a> to coordinate the project.</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"footer\">\n      ScopeGen Proposal Notification\n    </div>\n  </div>\n</body>\n</html>\n`.trim();\n\n  return sendEmail({\n    to: data.contractorEmail,\n    subject,\n    text,\n    html,\n  });\n}\n\ninterface CompletedProposalEmailData {\n  clientEmail: string;\n  clientName: string;\n  contractorName?: string;\n  contractorCompany?: string;\n  projectTitle: string;\n  projectAddress?: string;\n  totalPrice: number;\n  acceptedAt: Date;\n  contractorSignedAt: Date;\n  proposalUrl?: string;\n}\n\nexport async function sendCompletedProposalToClient(\n  data: CompletedProposalEmailData\n): Promise<{ success: boolean; messageId?: string; error?: string }> {\n  const formatCurrency = (amount: number) => new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    maximumFractionDigits: 0\n  }).format(amount);\n\n  const formattedPrice = formatCurrency(data.totalPrice);\n  const acceptedDate = new Date(data.acceptedAt).toLocaleDateString('en-US', {\n    dateStyle: 'long'\n  });\n  const signedDate = new Date(data.contractorSignedAt).toLocaleDateString('en-US', {\n    dateStyle: 'long'\n  });\n\n  const subject = `Signed Proposal: ${data.projectTitle} - Ready to Begin`;\n\n  const text = `\nHi ${data.clientName},\n\nGreat news! Your proposal has been fully signed and the project is ready to begin.\n\nProject: ${data.projectTitle}\n${data.projectAddress ? `Address: ${data.projectAddress}` : ''}\nTotal: ${formattedPrice}\n\nYou signed: ${acceptedDate}\nContractor signed: ${signedDate}\n\n${data.proposalUrl ? `View your signed proposal: ${data.proposalUrl}` : ''}\n\n${data.contractorCompany || data.contractorName || 'Your contractor'} will be in touch soon to coordinate next steps.\n\nThank you for your business!\n\nBest regards,\n${data.contractorCompany || data.contractorName || 'Your Contractor'}\n`.trim();\n\n  const html = `\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background: #f4f4f4; }\n    .container { max-width: 500px; margin: 20px auto; }\n    .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }\n    .header { background: linear-gradient(135deg, #1e3a5f, #2d4a6f); color: white; padding: 25px; text-align: center; }\n    .header h1 { margin: 0; font-size: 22px; }\n    .header .emoji { font-size: 40px; margin-bottom: 10px; }\n    .content { padding: 25px; }\n    .row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }\n    .row:last-child { border-bottom: none; }\n    .label { color: #666; font-size: 14px; }\n    .value { font-weight: 600; color: #333; text-align: right; }\n    .amount { font-size: 28px; color: #1e3a5f; text-align: center; margin: 20px 0; }\n    .signed-badge { display: flex; align-items: center; justify-content: center; gap: 8px; background: #f0fdf4; border: 1px solid #22c55e; border-radius: 8px; padding: 12px; margin: 15px 0; color: #16a34a; font-weight: 600; }\n    .button { display: block; background: #f97316; color: white; padding: 14px; text-align: center; text-decoration: none; border-radius: 8px; margin-top: 20px; font-weight: 600; }\n    .footer { text-align: center; padding: 15px; color: #999; font-size: 12px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"card\">\n      <div class=\"header\">\n        <div class=\"emoji\">ðŸ“âœ…</div>\n        <h1>Proposal Fully Signed!</h1>\n      </div>\n      <div class=\"content\">\n        <p>Hi ${data.clientName},</p>\n        <p>Great news! Your proposal has been fully signed by both parties and the project is ready to begin.</p>\n        \n        <div class=\"signed-badge\">\n          <span>âœ“</span> Both signatures complete\n        </div>\n        \n        <div class=\"amount\">${formattedPrice}</div>\n        \n        <div class=\"row\">\n          <span class=\"label\">Project</span>\n          <span class=\"value\">${data.projectTitle}</span>\n        </div>\n        ${data.projectAddress ? `\n        <div class=\"row\">\n          <span class=\"label\">Address</span>\n          <span class=\"value\">${data.projectAddress}</span>\n        </div>\n        ` : ''}\n        <div class=\"row\">\n          <span class=\"label\">You signed</span>\n          <span class=\"value\">${acceptedDate}</span>\n        </div>\n        <div class=\"row\">\n          <span class=\"label\">Contractor signed</span>\n          <span class=\"value\">${signedDate}</span>\n        </div>\n        \n        ${data.proposalUrl ? `\n        <a href=\"${data.proposalUrl}\" class=\"button\">\n          View Signed Proposal\n        </a>\n        ` : ''}\n        \n        <p style=\"margin-top: 25px; font-size: 14px; color: #666;\">\n          ${data.contractorCompany || data.contractorName || 'Your contractor'} will be in touch soon to coordinate next steps.\n        </p>\n      </div>\n    </div>\n    <div class=\"footer\">\n      ScopeGen - Professional Proposals for Contractors\n    </div>\n  </div>\n</body>\n</html>\n`.trim();\n\n  try {\n    const { fromEmail } = await getCredentials();\n    const emailAddress = fromEmail || 'onboarding@resend.dev';\n    const fromAddress = data.contractorName \n      ? `${data.contractorName} via ScopeGen <${emailAddress}>` \n      : `ScopeGen <${emailAddress}>`;\n      \n    return sendEmail({\n      to: data.clientEmail,\n      subject,\n      text,\n      html,\n      from: fromAddress\n    });\n  } catch (error: any) {\n    return { success: false, error: error.message };\n  }\n}\n\nexport const emailService = {\n  sendEmail,\n  sendProposalEmail,\n  sendPurchaseNotification,\n  sendProposalAcceptedNotification,\n  sendCompletedProposalToClient,\n  testConnection,\n};\n","path":null,"size_bytes":20338,"size_tokens":null},"client/src/pages/public-proposal.tsx":{"content":"import { useRef, useState } from \"react\";\nimport { useParams } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport ProposalPreview from \"@/components/proposal-preview\";\nimport SignaturePad, { SignaturePadRef } from \"@/components/signature-pad\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Download, Loader2, FileWarning, CheckCircle2, FileSignature } from \"lucide-react\";\nimport html2canvas from \"html2canvas\";\nimport jsPDF from \"jspdf\";\n\ninterface PublicProposalResponse {\n  proposal: {\n    id: number;\n    clientName: string;\n    address: string;\n    jobTypeName: string;\n    scope: string[];\n    priceLow: number;\n    priceHigh: number;\n    options: Record<string, boolean>;\n    status?: string;\n    acceptedAt?: string;\n    acceptedByName?: string;\n    acceptedByEmail?: string;\n    signature?: string | null;\n  };\n  companyInfo: {\n    companyName?: string | null;\n    companyAddress?: string | null;\n    companyPhone?: string | null;\n    companyLogo?: string | null;\n  } | null;\n}\n\nexport default function PublicProposal() {\n  const params = useParams<{ token: string }>();\n  const previewRef = useRef<HTMLDivElement>(null);\n  const signaturePadRef = useRef<SignaturePadRef>(null);\n  const queryClient = useQueryClient();\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [showAcceptForm, setShowAcceptForm] = useState(false);\n  const [acceptName, setAcceptName] = useState(\"\");\n  const [acceptEmail, setAcceptEmail] = useState(\"\");\n  const [signature, setSignature] = useState<string | null>(null);\n\n  const { data, isLoading, error } = useQuery<PublicProposalResponse>({\n    queryKey: [\"/api/public/proposal\", params.token],\n    queryFn: async () => {\n      const res = await fetch(`/api/public/proposal/${params.token}`);\n      if (!res.ok) {\n        throw new Error(\"Proposal not found\");\n      }\n      return res.json();\n    },\n    enabled: !!params.token,\n  });\n\n  const acceptMutation = useMutation({\n    mutationFn: async ({ name, email, signature }: { name: string; email: string; signature: string }) => {\n      const res = await fetch(`/api/public/proposal/${params.token}/accept`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ name, email, signature }),\n      });\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.message || \"Failed to accept proposal\");\n      }\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/public/proposal\", params.token] });\n      setShowAcceptForm(false);\n      setSignature(null);\n    },\n  });\n\n  const handleDownloadPDF = async () => {\n    if (!previewRef.current || !data) return;\n\n    setIsDownloading(true);\n    try {\n      const canvas = await html2canvas(previewRef.current, {\n        scale: 2,\n        useCORS: true,\n        logging: false,\n        backgroundColor: \"#ffffff\",\n      });\n\n      const imgData = canvas.toDataURL(\"image/png\");\n      const pdf = new jsPDF({\n        orientation: \"portrait\",\n        unit: \"px\",\n        format: [canvas.width, canvas.height],\n      });\n\n      pdf.addImage(imgData, \"PNG\", 0, 0, canvas.width, canvas.height);\n      \n      const filename = `proposal-${data.proposal.clientName.replace(/\\s+/g, \"-\").toLowerCase()}.pdf`;\n      pdf.save(filename);\n    } catch (err) {\n      console.error(\"Error generating PDF:\", err);\n    } finally {\n      setIsDownloading(false);\n    }\n  };\n\n  const handleAcceptSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (acceptName.trim() && acceptEmail.trim() && signature) {\n      acceptMutation.mutate({ \n        name: acceptName.trim(), \n        email: acceptEmail.trim(),\n        signature \n      });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-slate-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin mx-auto text-primary\" />\n          <p className=\"mt-4 text-slate-600\">Loading proposal...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !data) {\n    return (\n      <div className=\"min-h-screen bg-slate-100 flex items-center justify-center\">\n        <div className=\"text-center max-w-md mx-auto p-8\">\n          <FileWarning className=\"w-16 h-16 mx-auto text-slate-400\" />\n          <h1 className=\"text-2xl font-bold mt-4 text-slate-900\">Proposal Not Found</h1>\n          <p className=\"mt-2 text-slate-600\">\n            This proposal link may have expired or is no longer available.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const isAccepted = data.proposal.status === 'accepted';\n\n  const proposalData = {\n    clientName: data.proposal.clientName,\n    address: data.proposal.address,\n    jobTypeName: data.proposal.jobTypeName,\n    scope: data.proposal.scope,\n    priceRange: {\n      low: data.proposal.priceLow,\n      high: data.proposal.priceHigh,\n    },\n    ...data.proposal.options,\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-100\">\n      <div className=\"sticky top-0 z-50 bg-white border-b shadow-sm\">\n        <div className=\"max-w-[900px] mx-auto px-4 py-4 flex items-center justify-between\">\n          <div>\n            <h1 className=\"font-heading font-bold text-lg text-slate-900\">\n              {data.companyInfo?.companyName || \"Proposal\"}\n            </h1>\n            <p className=\"text-sm text-slate-500\">\n              Proposal for {data.proposal.clientName}\n            </p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            {isAccepted ? (\n              <div className=\"flex items-center gap-2 text-green-600 bg-green-50 px-4 py-2 rounded-lg border border-green-200\">\n                <CheckCircle2 className=\"w-5 h-5\" />\n                <span className=\"font-medium\" data-testid=\"status-accepted\">Accepted</span>\n              </div>\n            ) : (\n              <Button\n                onClick={() => setShowAcceptForm(true)}\n                className=\"bg-green-600 hover:bg-green-700 text-white\"\n                data-testid=\"button-accept-proposal\"\n              >\n                <FileSignature className=\"w-4 h-4 mr-2\" />\n                Accept Proposal\n              </Button>\n            )}\n            <Button\n              onClick={handleDownloadPDF}\n              disabled={isDownloading}\n              variant=\"outline\"\n              data-testid=\"button-download-pdf\"\n            >\n              {isDownloading ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Generating...\n                </>\n              ) : (\n                <>\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Download PDF\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {showAcceptForm && !isAccepted && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto\">\n            <div className=\"text-center mb-6\">\n              <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                <FileSignature className=\"w-6 h-6 text-green-600\" />\n              </div>\n              <h2 className=\"text-xl font-bold text-slate-900\">Accept This Proposal</h2>\n              <p className=\"text-slate-600 mt-1\">\n                Please provide your information and signature to accept\n              </p>\n            </div>\n            \n            <form onSubmit={handleAcceptSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"accept-name\">Your Full Name</Label>\n                <Input\n                  id=\"accept-name\"\n                  type=\"text\"\n                  value={acceptName}\n                  onChange={(e) => setAcceptName(e.target.value)}\n                  placeholder=\"John Smith\"\n                  required\n                  data-testid=\"input-accept-name\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"accept-email\">Your Email Address</Label>\n                <Input\n                  id=\"accept-email\"\n                  type=\"email\"\n                  value={acceptEmail}\n                  onChange={(e) => setAcceptEmail(e.target.value)}\n                  placeholder=\"john@example.com\"\n                  required\n                  data-testid=\"input-accept-email\"\n                />\n              </div>\n              \n              <div>\n                <Label>Your Signature</Label>\n                <p className=\"text-xs text-slate-500 mb-2\">\n                  Draw your signature below using your mouse or finger\n                </p>\n                <SignaturePad\n                  ref={signaturePadRef}\n                  onSignatureChange={setSignature}\n                />\n                {!signature && (\n                  <p className=\"text-amber-600 text-sm mt-1\" data-testid=\"text-signature-required\">\n                    Please sign above to continue\n                  </p>\n                )}\n              </div>\n              \n              {acceptMutation.isError && (\n                <p className=\"text-red-600 text-sm\" data-testid=\"text-accept-error\">\n                  {acceptMutation.error?.message || \"Failed to accept proposal\"}\n                </p>\n              )}\n              \n              <div className=\"flex gap-3 pt-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => {\n                    setShowAcceptForm(false);\n                    setSignature(null);\n                  }}\n                  className=\"flex-1\"\n                  data-testid=\"button-cancel-accept\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={acceptMutation.isPending || !acceptName.trim() || !acceptEmail.trim() || !signature}\n                  className=\"flex-1 bg-green-600 hover:bg-green-700\"\n                  data-testid=\"button-confirm-accept\"\n                >\n                  {acceptMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      Accepting...\n                    </>\n                  ) : (\n                    \"Accept Proposal\"\n                  )}\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {isAccepted && data.proposal.acceptedAt && (\n        <div className=\"max-w-[900px] mx-auto px-4 pt-6\">\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <div className=\"flex items-start gap-3\">\n              <CheckCircle2 className=\"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <p className=\"font-medium text-green-800\">\n                  This proposal was accepted by {data.proposal.acceptedByName}\n                </p>\n                <p className=\"text-green-700 text-sm\">\n                  {new Date(data.proposal.acceptedAt).toLocaleString('en-US', {\n                    dateStyle: 'long',\n                    timeStyle: 'short'\n                  })}\n                </p>\n              </div>\n            </div>\n            {data.proposal.signature && (\n              <div className=\"mt-4 pt-4 border-t border-green-200\">\n                <p className=\"text-sm font-medium text-green-800 mb-2\">Signature:</p>\n                <div className=\"bg-white rounded-lg p-2 inline-block border border-green-200\">\n                  <img \n                    src={data.proposal.signature} \n                    alt=\"Client signature\" \n                    className=\"max-h-20\"\n                    data-testid=\"img-signature\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      <div className=\"py-8 px-4\">\n        <ProposalPreview\n          ref={previewRef}\n          data={proposalData}\n          blurred={false}\n          companyInfo={data.companyInfo || undefined}\n        />\n      </div>\n\n      <div className=\"text-center py-8 text-slate-500 text-sm\">\n        Powered by <span className=\"font-semibold\">ScopeGen</span>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":12576,"size_tokens":null},"client/src/lib/regional-pricing.ts":{"content":"export interface RegionalMultiplier {\n  state: string;\n  abbrev: string;\n  multiplier: number;\n  region: string;\n}\n\nexport const regionalMultipliers: RegionalMultiplier[] = [\n  { state: \"Alabama\", abbrev: \"AL\", multiplier: 0.85, region: \"Southeast\" },\n  { state: \"Alaska\", abbrev: \"AK\", multiplier: 1.25, region: \"Pacific\" },\n  { state: \"Arizona\", abbrev: \"AZ\", multiplier: 0.95, region: \"Southwest\" },\n  { state: \"Arkansas\", abbrev: \"AR\", multiplier: 0.82, region: \"South\" },\n  { state: \"California\", abbrev: \"CA\", multiplier: 1.35, region: \"Pacific\" },\n  { state: \"Colorado\", abbrev: \"CO\", multiplier: 1.05, region: \"Mountain\" },\n  { state: \"Connecticut\", abbrev: \"CT\", multiplier: 1.20, region: \"Northeast\" },\n  { state: \"Delaware\", abbrev: \"DE\", multiplier: 1.02, region: \"Mid-Atlantic\" },\n  { state: \"Florida\", abbrev: \"FL\", multiplier: 1.00, region: \"Southeast\" },\n  { state: \"Georgia\", abbrev: \"GA\", multiplier: 0.92, region: \"Southeast\" },\n  { state: \"Hawaii\", abbrev: \"HI\", multiplier: 1.45, region: \"Pacific\" },\n  { state: \"Idaho\", abbrev: \"ID\", multiplier: 0.90, region: \"Mountain\" },\n  { state: \"Illinois\", abbrev: \"IL\", multiplier: 1.00, region: \"Midwest\" },\n  { state: \"Indiana\", abbrev: \"IN\", multiplier: 0.88, region: \"Midwest\" },\n  { state: \"Iowa\", abbrev: \"IA\", multiplier: 0.85, region: \"Midwest\" },\n  { state: \"Kansas\", abbrev: \"KS\", multiplier: 0.85, region: \"Midwest\" },\n  { state: \"Kentucky\", abbrev: \"KY\", multiplier: 0.85, region: \"South\" },\n  { state: \"Louisiana\", abbrev: \"LA\", multiplier: 0.88, region: \"South\" },\n  { state: \"Maine\", abbrev: \"ME\", multiplier: 1.00, region: \"Northeast\" },\n  { state: \"Maryland\", abbrev: \"MD\", multiplier: 1.15, region: \"Mid-Atlantic\" },\n  { state: \"Massachusetts\", abbrev: \"MA\", multiplier: 1.30, region: \"Northeast\" },\n  { state: \"Michigan\", abbrev: \"MI\", multiplier: 0.90, region: \"Midwest\" },\n  { state: \"Minnesota\", abbrev: \"MN\", multiplier: 0.98, region: \"Midwest\" },\n  { state: \"Mississippi\", abbrev: \"MS\", multiplier: 0.80, region: \"South\" },\n  { state: \"Missouri\", abbrev: \"MO\", multiplier: 0.87, region: \"Midwest\" },\n  { state: \"Montana\", abbrev: \"MT\", multiplier: 0.92, region: \"Mountain\" },\n  { state: \"Nebraska\", abbrev: \"NE\", multiplier: 0.88, region: \"Midwest\" },\n  { state: \"Nevada\", abbrev: \"NV\", multiplier: 1.02, region: \"Mountain\" },\n  { state: \"New Hampshire\", abbrev: \"NH\", multiplier: 1.08, region: \"Northeast\" },\n  { state: \"New Jersey\", abbrev: \"NJ\", multiplier: 1.22, region: \"Mid-Atlantic\" },\n  { state: \"New Mexico\", abbrev: \"NM\", multiplier: 0.88, region: \"Southwest\" },\n  { state: \"New York\", abbrev: \"NY\", multiplier: 1.30, region: \"Northeast\" },\n  { state: \"North Carolina\", abbrev: \"NC\", multiplier: 0.92, region: \"Southeast\" },\n  { state: \"North Dakota\", abbrev: \"ND\", multiplier: 0.90, region: \"Midwest\" },\n  { state: \"Ohio\", abbrev: \"OH\", multiplier: 0.88, region: \"Midwest\" },\n  { state: \"Oklahoma\", abbrev: \"OK\", multiplier: 0.85, region: \"South\" },\n  { state: \"Oregon\", abbrev: \"OR\", multiplier: 1.08, region: \"Pacific\" },\n  { state: \"Pennsylvania\", abbrev: \"PA\", multiplier: 0.98, region: \"Mid-Atlantic\" },\n  { state: \"Rhode Island\", abbrev: \"RI\", multiplier: 1.10, region: \"Northeast\" },\n  { state: \"South Carolina\", abbrev: \"SC\", multiplier: 0.88, region: \"Southeast\" },\n  { state: \"South Dakota\", abbrev: \"SD\", multiplier: 0.85, region: \"Midwest\" },\n  { state: \"Tennessee\", abbrev: \"TN\", multiplier: 0.88, region: \"South\" },\n  { state: \"Texas\", abbrev: \"TX\", multiplier: 0.92, region: \"South\" },\n  { state: \"Utah\", abbrev: \"UT\", multiplier: 0.95, region: \"Mountain\" },\n  { state: \"Vermont\", abbrev: \"VT\", multiplier: 1.05, region: \"Northeast\" },\n  { state: \"Virginia\", abbrev: \"VA\", multiplier: 1.02, region: \"Mid-Atlantic\" },\n  { state: \"Washington\", abbrev: \"WA\", multiplier: 1.12, region: \"Pacific\" },\n  { state: \"West Virginia\", abbrev: \"WV\", multiplier: 0.82, region: \"South\" },\n  { state: \"Wisconsin\", abbrev: \"WI\", multiplier: 0.92, region: \"Midwest\" },\n  { state: \"Wyoming\", abbrev: \"WY\", multiplier: 0.92, region: \"Mountain\" },\n  { state: \"District of Columbia\", abbrev: \"DC\", multiplier: 1.40, region: \"Mid-Atlantic\" },\n];\n\nconst stateAbbreviations: Record<string, string> = {\n  \"alabama\": \"AL\", \"alaska\": \"AK\", \"arizona\": \"AZ\", \"arkansas\": \"AR\",\n  \"california\": \"CA\", \"colorado\": \"CO\", \"connecticut\": \"CT\", \"delaware\": \"DE\",\n  \"florida\": \"FL\", \"georgia\": \"GA\", \"hawaii\": \"HI\", \"idaho\": \"ID\",\n  \"illinois\": \"IL\", \"indiana\": \"IN\", \"iowa\": \"IA\", \"kansas\": \"KS\",\n  \"kentucky\": \"KY\", \"louisiana\": \"LA\", \"maine\": \"ME\", \"maryland\": \"MD\",\n  \"massachusetts\": \"MA\", \"michigan\": \"MI\", \"minnesota\": \"MN\", \"mississippi\": \"MS\",\n  \"missouri\": \"MO\", \"montana\": \"MT\", \"nebraska\": \"NE\", \"nevada\": \"NV\",\n  \"new hampshire\": \"NH\", \"new jersey\": \"NJ\", \"new mexico\": \"NM\", \"new york\": \"NY\",\n  \"north carolina\": \"NC\", \"north dakota\": \"ND\", \"ohio\": \"OH\", \"oklahoma\": \"OK\",\n  \"oregon\": \"OR\", \"pennsylvania\": \"PA\", \"rhode island\": \"RI\", \"south carolina\": \"SC\",\n  \"south dakota\": \"SD\", \"tennessee\": \"TN\", \"texas\": \"TX\", \"utah\": \"UT\",\n  \"vermont\": \"VT\", \"virginia\": \"VA\", \"washington\": \"WA\", \"west virginia\": \"WV\",\n  \"wisconsin\": \"WI\", \"wyoming\": \"WY\", \"district of columbia\": \"DC\", \"d.c.\": \"DC\",\n};\n\nexport function detectStateFromAddress(address: string): RegionalMultiplier | null {\n  if (!address) return null;\n  \n  const normalizedAddress = address.toLowerCase().trim();\n  \n  for (const region of regionalMultipliers) {\n    const abbrevPattern = new RegExp(`\\\\b${region.abbrev.toLowerCase()}\\\\b`);\n    if (abbrevPattern.test(normalizedAddress)) {\n      return region;\n    }\n  }\n  \n  for (const [stateName, abbrev] of Object.entries(stateAbbreviations)) {\n    if (normalizedAddress.includes(stateName)) {\n      return regionalMultipliers.find(r => r.abbrev === abbrev) || null;\n    }\n  }\n  \n  return null;\n}\n\nexport function getRegionalMultiplier(address: string): { multiplier: number; region: RegionalMultiplier | null } {\n  const region = detectStateFromAddress(address);\n  return {\n    multiplier: region?.multiplier ?? 1.0,\n    region\n  };\n}\n","path":null,"size_bytes":6036,"size_tokens":null},"client/src/components/language-switcher.tsx":{"content":"import { useLanguage } from \"@/hooks/useLanguage\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Globe } from \"lucide-react\";\n\nexport function LanguageSwitcher() {\n  const { language, setLanguage } = useLanguage();\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\" data-testid=\"button-language-switcher\">\n          <Globe className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">{language === \"en\" ? \"English\" : \"EspaÃ±ol\"}</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuItem \n          onClick={() => setLanguage(\"en\")}\n          className={language === \"en\" ? \"bg-accent\" : \"\"}\n          data-testid=\"menu-item-english\"\n        >\n          ðŸ‡ºðŸ‡¸ English\n        </DropdownMenuItem>\n        <DropdownMenuItem \n          onClick={() => setLanguage(\"es\")}\n          className={language === \"es\" ? \"bg-accent\" : \"\"}\n          data-testid=\"menu-item-spanish\"\n        >\n          ðŸ‡ªðŸ‡¸ EspaÃ±ol\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/lib/translations.ts":{"content":"export type Language = 'en' | 'es';\n\nexport const translations = {\n  en: {\n    nav: {\n      home: \"Home\",\n      generator: \"Generator\",\n      dashboard: \"Dashboard\",\n      settings: \"Settings\",\n      signIn: \"Sign In\",\n      signOut: \"Sign Out\",\n      howItWorks: \"How it Works\",\n      product: \"Product\",\n      company: \"Company\",\n    },\n    hero: {\n      title: \"Professional Proposals in Seconds\",\n      subtitle: \"Generate detailed scopes of work for your contracting jobs. Save time, win more bids.\",\n      cta: \"Start Generating\",\n      ctaSecondary: \"View Demo\",\n      pickYourTrade: \"Pick Your Trade\",\n      customizeDetails: \"Customize Details\",\n    },\n    generator: {\n      title: \"Proposal Generator\",\n      subtitle: \"Fill details to auto-generate scope.\",\n      tradeCategory: \"Trade Category\",\n      selectTrade: \"Select Trade\",\n      jobType: \"Job Type\",\n      selectJobType: \"Select Job Type\",\n      clientName: \"Client Name\",\n      clientNamePlaceholder: \"e.g. John Smith\",\n      jobAddress: \"Job Address\",\n      jobAddressPlaceholder: \"e.g. 123 Maple Ave\",\n      jobSize: \"Job Size/Complexity\",\n      small: \"Small\",\n      medium: \"Medium\",\n      large: \"Large\",\n      jobOptions: \"Job Options\",\n      generateProposal: \"Generate Proposal\",\n      generating: \"Generating...\",\n      livePreview: \"Live Preview\",\n      downloadPDF: \"Download PDF\",\n      downloadPreview: \"Download Full PDF\",\n      saveDraft: \"Save Draft\",\n      draftSaved: \"Draft saved to your dashboard\",\n      generatingPDF: \"Generating PDF...\",\n      enhanceWithAI: \"Enhance with AI\",\n      enhancing: \"Enhancing...\",\n      readyToStart: \"Ready to Start\",\n      readyToStartDesc: \"Select a trade and job type on the left to begin building your proposal.\",\n    },\n    dashboard: {\n      title: \"Your Proposals\",\n      subtitle: \"Manage and track all your generated proposals\",\n      dashboardTitle: \"Dashboard\",\n      welcomeBack: \"Welcome back\",\n      contractor: \"Contractor\",\n      manageTemplates: \"Manage Templates\",\n      newProposal: \"New Proposal\",\n      recentProposals: \"Recent Proposals\",\n      searchPlaceholder: \"Search client or address...\",\n      noProposals: \"No proposals yet\",\n      noProposalsDesc: \"Create your first proposal to get started\",\n      createNew: \"Create New Proposal\",\n      createProposal: \"Create Proposal\",\n      clientProject: \"Client / Project\",\n      jobType: \"Job Type\",\n      value: \"Value\",\n      date: \"Date\",\n      status: \"Status\",\n      actions: \"Actions\",\n      editProposal: \"Edit Proposal\",\n      downloadPdf: \"Download PDF\",\n      sendViaEmail: \"Send via Email\",\n      markStatus: \"Mark Status\",\n      markAsWon: \"Mark as Won\",\n      markAsLost: \"Mark as Lost\",\n      draft: \"Draft\",\n      sent: \"Sent\",\n      won: \"Won\",\n      lost: \"Lost\",\n      accepted: \"Accepted\",\n      declined: \"Declined\",\n      viewed: \"Viewed\",\n      listView: \"List View\",\n      pipelineView: \"Pipeline View\",\n      views: \"views\",\n      viewDetails: \"View Details\",\n      delete: \"Delete\",\n      sendEmail: \"Send Email\",\n      quickSend: \"Quick send email\",\n      credits: \"Credits\",\n      creditsRemaining: \"credits remaining\",\n      buyCredits: \"Buy Credits\",\n      proposalCredits: \"Proposal Credits\",\n      totalProposals: \"Total Proposals\",\n      revenueWon: \"Revenue Won\",\n      pending: \"Pending\",\n      awaitingResponse: \"Awaiting response\",\n      expires: \"Expires\",\n      availableToUse: \"Available to use\",\n      allTime: \"All time\",\n      fromWonProposals: \"From won proposals\",\n      unlockUnlimited: \"Unlock Unlimited Proposals\",\n      upgradeDescription: \"Upgrade to Pro for $29/mo to remove watermarks, save unlimited templates, and get priority support.\",\n      upgradeNow: \"Upgrade Now\",\n      today: \"Today\",\n      yesterday: \"Yesterday\",\n      paymentSuccessful: \"Payment successful!\",\n      paymentSuccessCredits: \"proposal credit(s) added to your account.\",\n      paymentReceived: \"Payment received! Please refresh to see your credits.\",\n      paymentCanceled: \"Payment was canceled. You can try again anytime.\",\n      requestPayment: \"Request Payment\",\n      adjustPrice: \"Adjust Price\",\n      countersign: \"Countersign\",\n    },\n    payment: {\n      requestPayment: \"Request Payment\",\n      createPaymentLinkFor: \"Create a payment link for {clientName} to collect a deposit or full payment.\",\n      depositAmount: \"Deposit Amount\",\n      selectDepositPercentage: \"Select deposit percentage\",\n      projectTotal: \"Project Total:\",\n      deposit: \"Deposit\",\n      paymentLinkCreated: \"Payment link created!\",\n      shareLink: \"Share this link with your client to collect\",\n      creating: \"Creating...\",\n      createPaymentLink: \"Create Payment Link\",\n      done: \"Done\",\n    },\n    proposal: {\n      scopeOfWork: \"Scope of Work\",\n      priceRange: \"Price Range\",\n      timeline: \"Estimated Timeline\",\n      days: \"days\",\n      warranty: \"Warranty\",\n      exclusions: \"Exclusions\",\n      preparedFor: \"Prepared For\",\n      projectAddress: \"Project Address\",\n      unlockFull: \"Unlock Full Proposal\",\n    },\n    pricing: {\n      title: \"Simple Pricing\",\n      subtitle: \"Get started with professional proposals\",\n      singleProposal: \"Single Proposal\",\n      proposalPack: \"Proposal Pack\",\n      perProposal: \"per proposal\",\n      proposals: \"proposals\",\n      bestValue: \"Best Value\",\n      buyNow: \"Buy Now\",\n    },\n    settings: {\n      title: \"Settings\",\n      subtitle: \"Manage your company profile and branding\",\n      companyProfile: \"Company Profile\",\n      companyProfileDesc: \"This information will appear on your proposals and help clients identify your business.\",\n      companyName: \"Company Name\",\n      companyNamePlaceholder: \"e.g., ABC Contracting LLC\",\n      companyAddress: \"Business Address\",\n      companyAddressPlaceholder: \"123 Main Street\\nHouston, TX 77001\",\n      companyPhone: \"Phone Number\",\n      companyPhonePlaceholder: \"(555) 123-4567\",\n      companyLogo: \"Company Logo\",\n      companyLogoDesc: \"Upload your company logo. PNG or JPG, max 2MB. Recommended size: 200x200px.\",\n      licenseNumber: \"Contractor License #\",\n      licenseNumberPlaceholder: \"e.g. CSLB #123456\",\n      licenseNumberDesc: \"Your contractor license number will appear on all proposals.\",\n      servicesYouOffer: \"Services You Offer\",\n      servicesDesc: \"Select the trades you offer. Only these will appear in your proposal generator.\",\n      selectAll: \"Select All\",\n      clearAll: \"Clear All\",\n      priceMultiplier: \"Price Multiplier\",\n      priceMultiplierDesc: \"Adjust your pricing relative to the base rates\",\n      saveChanges: \"Save Changes\",\n      saving: \"Saving...\",\n      upload: \"Upload\",\n      chooseFile: \"Choose File\",\n      signInRequired: \"Sign in to access settings\",\n      signInDesc: \"Manage your company profile and preferences.\",\n      signInWithReplit: \"Sign In with Replit\",\n      settingsSaved: \"Settings saved\",\n      profileUpdated: \"Your company profile has been updated.\",\n      subscription: \"Subscription\",\n      subscriptionDesc: \"Manage your subscription and billing settings.\",\n      currentPlan: \"Current Plan\",\n      proPlan: \"Pro Plan - Active\",\n      freePlan: \"Free Plan\",\n      active: \"Active\",\n      manageBilling: \"Manage Billing\",\n      cancelSubscription: \"Cancel Subscription\",\n      manageSubscription: \"Manage Subscription\",\n      upgradeToPro: \"Upgrade to Pro\",\n      priceExample: \"Example:\",\n      priceWillShowAs: \"A base estimate of $1,000 will show as\",\n      onYourProposals: \"on your proposals.\",\n      paymentLinks: \"Payment Links\",\n      paymentLinksDesc: \"Connect your own Stripe account to collect deposits and payments from clients directly through your proposals.\",\n      howItWorks: \"How it works\",\n      howItWorksItem1: \"Enter your Stripe secret key to enable payment links\",\n      howItWorksItem2: \"Payments go directly to your Stripe account\",\n      howItWorksItem3: \"Generate payment links for any accepted proposal\",\n      stripeLiveSecretKey: \"Stripe Live Secret Key\",\n      stripePlaceholder: \"sk_live_...\",\n      findKeyInDashboard: \"Find your live secret key in your\",\n      stripeDashboard: \"Stripe Dashboard\",\n      dontHaveStripe: \"Don't have a Stripe account?\",\n      signUpFree: \"Sign up for free\",\n      stripeKeyConfigured: \"You have a Stripe key configured. Enter a new key above to replace it.\",\n      enablePaymentLinks: \"Enable Payment Links\",\n      allowGeneratingLinks: \"Allow generating payment links for proposals\",\n      paymentLinksEnabled: \"Payment links are enabled. You can now generate payment links from your proposal dashboard.\",\n      saveStripeSettings: \"Save Stripe Settings\",\n      stripeSettingsSaved: \"Stripe settings saved\",\n      paymentLinksNowEnabled: \"Payment links are now enabled for your proposals.\",\n      stripeSettingsUpdated: \"Stripe settings have been updated.\",\n      errorSavingStripe: \"Error saving Stripe settings\",\n      invalidFileType: \"Invalid file type\",\n      uploadImageFile: \"Please upload an image file (PNG, JPG, etc.)\",\n      fileTooLarge: \"File too large\",\n      uploadSmallerImage: \"Please upload an image smaller than 2MB\",\n      uploadFailed: \"Upload failed\",\n      couldNotReadFile: \"Could not read the file. Please try again.\",\n      errorSavingSettings: \"Error saving settings\",\n      pleaseTryAgain: \"Please try again.\",\n      couldNotOpenBilling: \"Could not open billing portal\",\n    },\n    common: {\n      loading: \"Loading...\",\n      error: \"Error\",\n      success: \"Success\",\n      cancel: \"Cancel\",\n      confirm: \"Confirm\",\n      save: \"Save\",\n      edit: \"Edit\",\n      delete: \"Delete\",\n      back: \"Back\",\n      next: \"Next\",\n      submit: \"Submit\",\n      selectOption: \"Select option...\",\n    },\n    toast: {\n      proposalCreated: \"Proposal created successfully!\",\n      proposalUpdated: \"Proposal updated successfully!\",\n      proposalDeleted: \"Proposal deleted successfully!\",\n      proposalUnlocked: \"Proposal unlocked!\",\n      proposalSent: \"Proposal sent successfully!\",\n      downloadSuccess: \"Your proposal has been saved as a PDF.\",\n      downloadError: \"Failed to generate PDF. Please try again.\",\n      profileUpdated: \"Profile updated successfully!\",\n      profileError: \"Failed to update profile.\",\n      scopeEnhanced: \"Scope Enhanced!\",\n      scopeEnhancedDesc: \"AI has improved your scope of work.\",\n      scopeEnhanceError: \"Failed to enhance scope.\",\n      loginRequired: \"Please sign in to use this feature.\",\n    },\n    footer: {\n      copyright: \"All rights reserved.\",\n      builtFor: \"Built for contractors who value their time.\",\n    },\n    home: {\n      heroTitle1: \"Contractor Proposal Software\",\n      heroTitle2: \"for Remodelers & Trades.\",\n      heroSubtitle: \"Generate bathroom, kitchen, roofing, HVAC and plumbing proposals in about 60 seconds. Stop writing proposals at midnightâ€”win more jobs without the paperwork.\",\n      buildProposalFree: \"Build a Proposal Free\",\n      viewSample: \"View Sample\",\n      bathroomRemodel: \"Bathroom Remodel\",\n      approved: \"APPROVED\",\n      totalEstimate: \"Total Estimate\",\n      seeWhatClientsSee: \"See What Your Clients See\",\n      professionalProposal: \"A professional proposal that wins jobs and protects your profit\",\n      bathroomRemodelProposal: \"Bathroom Remodel Proposal\",\n      preparedFor: \"Prepared for:\",\n      proposalDate: \"Proposal Date\",\n      projectLocation: \"Project Location\",\n      projectType: \"Project Type\",\n      fullBathroomRemodel: \"Full Bathroom Remodel\",\n      primaryBathroom: \"Primary Bathroom - 80 sq ft\",\n      scopeOfWork: \"Scope of Work\",\n      scopeItem1: \"Remove existing fixtures including vanity, toilet, and tub/shower\",\n      scopeItem2: \"Install new tile flooring (ceramic or porcelain)\",\n      scopeItem3: \"Install new vanity with countertop and sink\",\n      scopeItem4: \"Install tub/shower surround with tile walls\",\n      moreLineItems: \"+ 8 more line items...\",\n      estimatedInvestment: \"Estimated Investment\",\n      timeline: \"Timeline\",\n      businessDays: \"Business Days\",\n      yearWarranty: \"1-Year Workmanship Warranty\",\n      warrantyDesc: \"All work guaranteed against defects in materials and labor\",\n      createYourOwn: \"Create Your Own Proposal\",\n      howItWorks: \"How It Works\",\n      howItWorksSubtitle: \"Professional proposals in 60 seconds flat\",\n      step1Title: \"Pick Your Trade\",\n      step1Desc: \"10+ trades: Bathroom, Kitchen, Electrical, Plumbing, Roofing & more\",\n      step2Title: \"Customize Details\",\n      step2Desc: \"Add client info, select options, watch scope & pricing update live\",\n      step3Title: \"Download & Win\",\n      step3Desc: \"Get a polished PDF with scope, pricing, warranty & signature lines\",\n      saveHours: \"Save 5+ hours weekly\",\n      lookLikePro: \"Look like a pro\",\n      closeDealsFaster: \"Close deals faster\",\n      simpleAffordablePricing: \"Pricing That Works for You\",\n      pricingSubtitle: \"Choose the plan that fits your workload. Cancel anytime.\",\n      starterPlan: \"Starter\",\n      starterDesc: \"For trying ScopeGen on real jobs\",\n      starterPrice: \"$9\",\n      starterPriceLabel: \"per proposal\",\n      starterFeature1: \"Perfect for 1-2 jobs/month\",\n      starterFeature2: \"Full proposal access\",\n      starterFeature3: \"PDF download included\",\n      starterFeature4: \"All trade templates\",\n      getStarted: \"Get Started\",\n      proPlan: \"Pro\",\n      proDesc: \"For contractors quoting weekly\",\n      proPrice: \"$29\",\n      proPriceLabel: \"/month\",\n      proFeature1: \"Up to 15 proposals/month\",\n      proFeature2: \"Less than $2 per proposal\",\n      proFeature3: \"Pays for itself with one extra job\",\n      proFeature4: \"Market Pricing Insights\",\n      subscribePro: \"Subscribe to Pro\",\n      crewPlan: \"Crew\",\n      crewDesc: \"For small teams\",\n      crewPrice: \"$79\",\n      crewPriceLabel: \"/month\",\n      crewFeature1: \"Up to 50 proposals/month\",\n      crewFeature2: \"Multiple team members\",\n      crewFeature3: \"Coordinator + 2-3 estimators\",\n      crewFeature4: \"Team dashboard\",\n      subscribeCrew: \"Subscribe to Crew\",\n      mostPopular: \"MOST POPULAR\",\n      forTeams: \"FOR TEAMS\",\n      readyToLookLikePro: \"Ready to look like a pro?\",\n      createFirstProposal: \"Create Your First Proposal\",\n      tryFreeThenUnlock: \"Try free, then upgrade to a plan that fits your business.\",\n      allPlansInclude: \"All plans include all trade templates and professional formatting.\",\n      processing: \"Processing...\",\n      free: \"FREE\",\n      bestValue: \"BEST VALUE\",\n    },\n  },\n  es: {\n    nav: {\n      home: \"Inicio\",\n      generator: \"Generador\",\n      dashboard: \"Panel\",\n      settings: \"ConfiguraciÃ³n\",\n      signIn: \"Iniciar SesiÃ³n\",\n      signOut: \"Cerrar SesiÃ³n\",\n      howItWorks: \"CÃ³mo Funciona\",\n      product: \"Producto\",\n      company: \"Empresa\",\n    },\n    hero: {\n      title: \"Propuestas Profesionales en Segundos\",\n      subtitle: \"Genere alcances de trabajo detallados para sus trabajos de contrataciÃ³n. Ahorre tiempo, gane mÃ¡s licitaciones.\",\n      cta: \"Comenzar a Generar\",\n      ctaSecondary: \"Ver Demo\",\n      pickYourTrade: \"Elija Su Oficio\",\n      customizeDetails: \"Personalice los Detalles\",\n    },\n    generator: {\n      title: \"Generador de Propuestas\",\n      subtitle: \"Complete los detalles para generar automÃ¡ticamente el alcance.\",\n      tradeCategory: \"CategorÃ­a de Oficio\",\n      selectTrade: \"Seleccionar Oficio\",\n      jobType: \"Tipo de Trabajo\",\n      selectJobType: \"Seleccionar Tipo de Trabajo\",\n      clientName: \"Nombre del Cliente\",\n      clientNamePlaceholder: \"ej. Juan GarcÃ­a\",\n      jobAddress: \"DirecciÃ³n del Trabajo\",\n      jobAddressPlaceholder: \"ej. Calle Principal 123\",\n      jobSize: \"TamaÃ±o/Complejidad del Trabajo\",\n      small: \"PequeÃ±o\",\n      medium: \"Mediano\",\n      large: \"Grande\",\n      jobOptions: \"Opciones del Trabajo\",\n      generateProposal: \"Generar Propuesta\",\n      generating: \"Generando...\",\n      livePreview: \"Vista Previa en Vivo\",\n      downloadPDF: \"Descargar PDF\",\n      downloadPreview: \"Descargar PDF Completo\",\n      saveDraft: \"Guardar Borrador\",\n      draftSaved: \"Borrador guardado en tu panel\",\n      generatingPDF: \"Generando PDF...\",\n      enhanceWithAI: \"Mejorar con IA\",\n      enhancing: \"Mejorando...\",\n      readyToStart: \"Listo para Comenzar\",\n      readyToStartDesc: \"Seleccione un oficio y tipo de trabajo a la izquierda para comenzar a crear su propuesta.\",\n    },\n    dashboard: {\n      title: \"Sus Propuestas\",\n      subtitle: \"Administre y siga todas sus propuestas generadas\",\n      dashboardTitle: \"Panel\",\n      welcomeBack: \"Bienvenido de nuevo\",\n      contractor: \"Contratista\",\n      manageTemplates: \"Administrar Plantillas\",\n      newProposal: \"Nueva Propuesta\",\n      recentProposals: \"Propuestas Recientes\",\n      searchPlaceholder: \"Buscar cliente o direcciÃ³n...\",\n      noProposals: \"Sin propuestas todavÃ­a\",\n      noProposalsDesc: \"Cree su primera propuesta para comenzar\",\n      createNew: \"Crear Nueva Propuesta\",\n      createProposal: \"Crear Propuesta\",\n      clientProject: \"Cliente / Proyecto\",\n      jobType: \"Tipo de Trabajo\",\n      value: \"Valor\",\n      date: \"Fecha\",\n      status: \"Estado\",\n      actions: \"Acciones\",\n      editProposal: \"Editar Propuesta\",\n      downloadPdf: \"Descargar PDF\",\n      sendViaEmail: \"Enviar por Correo\",\n      markStatus: \"Marcar Estado\",\n      markAsWon: \"Marcar como Ganado\",\n      markAsLost: \"Marcar como Perdido\",\n      draft: \"Borrador\",\n      sent: \"Enviado\",\n      won: \"Ganado\",\n      lost: \"Perdido\",\n      accepted: \"Aceptado\",\n      declined: \"Rechazado\",\n      viewed: \"Visto\",\n      listView: \"Vista de Lista\",\n      pipelineView: \"Vista de Pipeline\",\n      views: \"vistas\",\n      viewDetails: \"Ver Detalles\",\n      delete: \"Eliminar\",\n      sendEmail: \"Enviar Correo\",\n      quickSend: \"EnvÃ­o rÃ¡pido por correo\",\n      credits: \"CrÃ©ditos\",\n      creditsRemaining: \"crÃ©ditos restantes\",\n      buyCredits: \"Comprar CrÃ©ditos\",\n      proposalCredits: \"CrÃ©ditos de Propuestas\",\n      totalProposals: \"Total de Propuestas\",\n      revenueWon: \"Ingresos Ganados\",\n      pending: \"Pendiente\",\n      awaitingResponse: \"Esperando respuesta\",\n      expires: \"Expira\",\n      availableToUse: \"Disponible para usar\",\n      allTime: \"Todo el tiempo\",\n      fromWonProposals: \"De propuestas ganadas\",\n      unlockUnlimited: \"Desbloquee Propuestas Ilimitadas\",\n      upgradeDescription: \"Actualice a Pro por $29/mes para eliminar marcas de agua, guardar plantillas ilimitadas y obtener soporte prioritario.\",\n      upgradeNow: \"Actualizar Ahora\",\n      today: \"Hoy\",\n      yesterday: \"Ayer\",\n      paymentSuccessful: \"Â¡Pago exitoso!\",\n      paymentSuccessCredits: \"crÃ©dito(s) de propuesta aÃ±adido(s) a su cuenta.\",\n      paymentReceived: \"Â¡Pago recibido! Por favor actualice para ver sus crÃ©ditos.\",\n      paymentCanceled: \"El pago fue cancelado. Puede intentarlo de nuevo cuando quiera.\",\n      requestPayment: \"Solicitar Pago\",\n      adjustPrice: \"Ajustar Precio\",\n      countersign: \"Contrafirmar\",\n    },\n    payment: {\n      requestPayment: \"Solicitar Pago\",\n      createPaymentLinkFor: \"Crea un enlace de pago para {clientName} para cobrar un depÃ³sito o pago completo.\",\n      depositAmount: \"Monto del DepÃ³sito\",\n      selectDepositPercentage: \"Seleccione porcentaje de depÃ³sito\",\n      projectTotal: \"Total del Proyecto:\",\n      deposit: \"DepÃ³sito\",\n      paymentLinkCreated: \"Â¡Enlace de pago creado!\",\n      shareLink: \"Comparta este enlace con su cliente para cobrar\",\n      creating: \"Creando...\",\n      createPaymentLink: \"Crear Enlace de Pago\",\n      done: \"Listo\",\n    },\n    proposal: {\n      scopeOfWork: \"Alcance del Trabajo\",\n      priceRange: \"Rango de Precios\",\n      timeline: \"Tiempo Estimado\",\n      days: \"dÃ­as\",\n      warranty: \"GarantÃ­a\",\n      exclusions: \"Exclusiones\",\n      preparedFor: \"Preparado Para\",\n      projectAddress: \"DirecciÃ³n del Proyecto\",\n      unlockFull: \"Desbloquear Propuesta Completa\",\n    },\n    pricing: {\n      title: \"Precios Simples\",\n      subtitle: \"Comience con propuestas profesionales\",\n      singleProposal: \"Propuesta Individual\",\n      proposalPack: \"Paquete de Propuestas\",\n      perProposal: \"por propuesta\",\n      proposals: \"propuestas\",\n      bestValue: \"Mejor Valor\",\n      buyNow: \"Comprar Ahora\",\n    },\n    settings: {\n      title: \"ConfiguraciÃ³n\",\n      subtitle: \"Administre el perfil de su empresa y marca\",\n      companyProfile: \"Perfil de la Empresa\",\n      companyProfileDesc: \"Esta informaciÃ³n aparecerÃ¡ en sus propuestas y ayudarÃ¡ a los clientes a identificar su negocio.\",\n      companyName: \"Nombre de la Empresa\",\n      companyNamePlaceholder: \"ej., ABC Contrataciones LLC\",\n      companyAddress: \"DirecciÃ³n Comercial\",\n      companyAddressPlaceholder: \"Calle Principal 123\\nHouston, TX 77001\",\n      companyPhone: \"NÃºmero de TelÃ©fono\",\n      companyPhonePlaceholder: \"(555) 123-4567\",\n      companyLogo: \"Logo de la Empresa\",\n      companyLogoDesc: \"Suba el logo de su empresa. PNG o JPG, mÃ¡ximo 2MB. TamaÃ±o recomendado: 200x200px.\",\n      licenseNumber: \"Licencia de Contratista #\",\n      licenseNumberPlaceholder: \"ej. CSLB #123456\",\n      licenseNumberDesc: \"Su nÃºmero de licencia de contratista aparecerÃ¡ en todas las propuestas.\",\n      servicesYouOffer: \"Servicios que Ofrece\",\n      servicesDesc: \"Seleccione los oficios que ofrece. Solo estos aparecerÃ¡n en su generador de propuestas.\",\n      selectAll: \"Seleccionar Todo\",\n      clearAll: \"Borrar Todo\",\n      priceMultiplier: \"Multiplicador de Precios\",\n      priceMultiplierDesc: \"Ajuste sus precios en relaciÃ³n con las tarifas base\",\n      saveChanges: \"Guardar Cambios\",\n      saving: \"Guardando...\",\n      upload: \"Subir\",\n      chooseFile: \"Elegir Archivo\",\n      signInRequired: \"Inicie sesiÃ³n para acceder a la configuraciÃ³n\",\n      signInDesc: \"Administre el perfil de su empresa y preferencias.\",\n      signInWithReplit: \"Iniciar SesiÃ³n con Replit\",\n      settingsSaved: \"ConfiguraciÃ³n guardada\",\n      profileUpdated: \"El perfil de su empresa ha sido actualizado.\",\n      subscription: \"SuscripciÃ³n\",\n      subscriptionDesc: \"Administre su suscripciÃ³n y configuraciÃ³n de facturaciÃ³n.\",\n      currentPlan: \"Plan Actual\",\n      proPlan: \"Plan Pro - Activo\",\n      freePlan: \"Plan Gratuito\",\n      active: \"Activo\",\n      manageBilling: \"Administrar FacturaciÃ³n\",\n      cancelSubscription: \"Cancelar SuscripciÃ³n\",\n      manageSubscription: \"Administrar SuscripciÃ³n\",\n      upgradeToPro: \"Actualizar a Pro\",\n      priceExample: \"Ejemplo:\",\n      priceWillShowAs: \"Un presupuesto base de $1,000 se mostrarÃ¡ como\",\n      onYourProposals: \"en sus propuestas.\",\n      paymentLinks: \"Enlaces de Pago\",\n      paymentLinksDesc: \"Conecte su propia cuenta de Stripe para cobrar depÃ³sitos y pagos de clientes directamente a travÃ©s de sus propuestas.\",\n      howItWorks: \"CÃ³mo funciona\",\n      howItWorksItem1: \"Ingrese su clave secreta de Stripe para habilitar enlaces de pago\",\n      howItWorksItem2: \"Los pagos van directamente a su cuenta de Stripe\",\n      howItWorksItem3: \"Genere enlaces de pago para cualquier propuesta aceptada\",\n      stripeLiveSecretKey: \"Clave Secreta Live de Stripe\",\n      stripePlaceholder: \"sk_live_...\",\n      findKeyInDashboard: \"Encuentre su clave secreta live en su\",\n      stripeDashboard: \"Panel de Stripe\",\n      dontHaveStripe: \"Â¿No tiene una cuenta de Stripe?\",\n      signUpFree: \"RegÃ­strese gratis\",\n      stripeKeyConfigured: \"Tiene una clave de Stripe configurada. Ingrese una nueva clave arriba para reemplazarla.\",\n      enablePaymentLinks: \"Habilitar Enlaces de Pago\",\n      allowGeneratingLinks: \"Permitir generar enlaces de pago para propuestas\",\n      paymentLinksEnabled: \"Los enlaces de pago estÃ¡n habilitados. Ahora puede generar enlaces de pago desde su panel de propuestas.\",\n      saveStripeSettings: \"Guardar ConfiguraciÃ³n de Stripe\",\n      stripeSettingsSaved: \"ConfiguraciÃ³n de Stripe guardada\",\n      paymentLinksNowEnabled: \"Los enlaces de pago ahora estÃ¡n habilitados para sus propuestas.\",\n      stripeSettingsUpdated: \"La configuraciÃ³n de Stripe ha sido actualizada.\",\n      errorSavingStripe: \"Error al guardar configuraciÃ³n de Stripe\",\n      invalidFileType: \"Tipo de archivo invÃ¡lido\",\n      uploadImageFile: \"Por favor suba un archivo de imagen (PNG, JPG, etc.)\",\n      fileTooLarge: \"Archivo demasiado grande\",\n      uploadSmallerImage: \"Por favor suba una imagen menor de 2MB\",\n      uploadFailed: \"Error al subir\",\n      couldNotReadFile: \"No se pudo leer el archivo. Por favor intente de nuevo.\",\n      errorSavingSettings: \"Error al guardar configuraciÃ³n\",\n      pleaseTryAgain: \"Por favor intente de nuevo.\",\n      couldNotOpenBilling: \"No se pudo abrir el portal de facturaciÃ³n\",\n    },\n    common: {\n      loading: \"Cargando...\",\n      error: \"Error\",\n      success: \"Ã‰xito\",\n      cancel: \"Cancelar\",\n      confirm: \"Confirmar\",\n      save: \"Guardar\",\n      edit: \"Editar\",\n      delete: \"Eliminar\",\n      back: \"AtrÃ¡s\",\n      next: \"Siguiente\",\n      submit: \"Enviar\",\n      selectOption: \"Seleccionar opciÃ³n...\",\n    },\n    toast: {\n      proposalCreated: \"Â¡Propuesta creada exitosamente!\",\n      proposalUpdated: \"Â¡Propuesta actualizada exitosamente!\",\n      proposalDeleted: \"Â¡Propuesta eliminada exitosamente!\",\n      proposalUnlocked: \"Â¡Propuesta desbloqueada!\",\n      proposalSent: \"Â¡Propuesta enviada exitosamente!\",\n      downloadSuccess: \"Su propuesta ha sido guardada como PDF.\",\n      downloadError: \"Error al generar PDF. Por favor intente de nuevo.\",\n      profileUpdated: \"Â¡Perfil actualizado exitosamente!\",\n      profileError: \"Error al actualizar perfil.\",\n      scopeEnhanced: \"Â¡Alcance Mejorado!\",\n      scopeEnhancedDesc: \"La IA ha mejorado su alcance de trabajo.\",\n      scopeEnhanceError: \"Error al mejorar el alcance.\",\n      loginRequired: \"Por favor inicie sesiÃ³n para usar esta funciÃ³n.\",\n    },\n    footer: {\n      copyright: \"Todos los derechos reservados.\",\n      builtFor: \"Creado para contratistas que valoran su tiempo.\",\n    },\n    home: {\n      heroTitle1: \"Software de Propuestas\",\n      heroTitle2: \"para Remodeladores y Oficios.\",\n      heroSubtitle: \"Genere propuestas de baÃ±o, cocina, techo, HVAC y plomerÃ­a en unos 60 segundos. Deje de escribir propuestas a medianocheâ€”gane mÃ¡s trabajos sin el papeleo.\",\n      buildProposalFree: \"Crear una Propuesta Gratis\",\n      viewSample: \"Ver Ejemplo\",\n      bathroomRemodel: \"RemodelaciÃ³n de BaÃ±o\",\n      approved: \"APROBADO\",\n      totalEstimate: \"EstimaciÃ³n Total\",\n      seeWhatClientsSee: \"Vea Lo Que Ven Sus Clientes\",\n      professionalProposal: \"Una propuesta profesional que gana trabajos y protege su ganancia\",\n      bathroomRemodelProposal: \"Propuesta de RemodelaciÃ³n de BaÃ±o\",\n      preparedFor: \"Preparado para:\",\n      proposalDate: \"Fecha de Propuesta\",\n      projectLocation: \"UbicaciÃ³n del Proyecto\",\n      projectType: \"Tipo de Proyecto\",\n      fullBathroomRemodel: \"RemodelaciÃ³n Completa de BaÃ±o\",\n      primaryBathroom: \"BaÃ±o Principal - 80 pies cuadrados\",\n      scopeOfWork: \"Alcance del Trabajo\",\n      scopeItem1: \"Remover accesorios existentes incluyendo tocador, inodoro y tina/ducha\",\n      scopeItem2: \"Instalar nuevo piso de azulejo (cerÃ¡mica o porcelana)\",\n      scopeItem3: \"Instalar nuevo tocador con encimera y lavabo\",\n      scopeItem4: \"Instalar revestimiento de tina/ducha con paredes de azulejo\",\n      moreLineItems: \"+ 8 lÃ­neas mÃ¡s...\",\n      estimatedInvestment: \"InversiÃ³n Estimada\",\n      timeline: \"Tiempo\",\n      businessDays: \"DÃ­as HÃ¡biles\",\n      yearWarranty: \"GarantÃ­a de 1 AÃ±o por Mano de Obra\",\n      warrantyDesc: \"Todo el trabajo garantizado contra defectos en materiales y mano de obra\",\n      createYourOwn: \"Cree Su Propia Propuesta\",\n      howItWorks: \"CÃ³mo Funciona\",\n      howItWorksSubtitle: \"Propuestas profesionales en 60 segundos\",\n      step1Title: \"Elija Su Oficio\",\n      step1Desc: \"10+ oficios: BaÃ±o, Cocina, Electricidad, PlomerÃ­a, Techos y mÃ¡s\",\n      step2Title: \"Personalice los Detalles\",\n      step2Desc: \"Agregue info del cliente, seleccione opciones, vea el alcance y precios actualizarse en vivo\",\n      step3Title: \"Descargue y Gane\",\n      step3Desc: \"Obtenga un PDF pulido con alcance, precios, garantÃ­a y lÃ­neas de firma\",\n      saveHours: \"Ahorre 5+ horas semanales\",\n      lookLikePro: \"Luzca como un profesional\",\n      closeDealsFaster: \"Cierre tratos mÃ¡s rÃ¡pido\",\n      simpleAffordablePricing: \"Precios Que Funcionan Para Usted\",\n      pricingSubtitle: \"Elija el plan que se ajuste a su carga de trabajo. Cancele cuando quiera.\",\n      starterPlan: \"Inicial\",\n      starterDesc: \"Para probar ScopeGen en trabajos reales\",\n      starterPrice: \"$9\",\n      starterPriceLabel: \"por propuesta\",\n      starterFeature1: \"Perfecto para 1-2 trabajos/mes\",\n      starterFeature2: \"Acceso completo a la propuesta\",\n      starterFeature3: \"Descarga de PDF incluida\",\n      starterFeature4: \"Todas las plantillas de oficios\",\n      getStarted: \"Comenzar\",\n      proPlan: \"Pro\",\n      proDesc: \"Para contratistas que cotizan semanalmente\",\n      proPrice: \"$29\",\n      proPriceLabel: \"/mes\",\n      proFeature1: \"Hasta 15 propuestas/mes\",\n      proFeature2: \"Menos de $2 por propuesta\",\n      proFeature3: \"Se paga solo con un trabajo extra\",\n      proFeature4: \"InformaciÃ³n de Precios del Mercado\",\n      subscribePro: \"Suscribirse a Pro\",\n      crewPlan: \"Equipo\",\n      crewDesc: \"Para equipos pequeÃ±os\",\n      crewPrice: \"$79\",\n      crewPriceLabel: \"/mes\",\n      crewFeature1: \"Hasta 50 propuestas/mes\",\n      crewFeature2: \"MÃºltiples miembros del equipo\",\n      crewFeature3: \"Coordinador + 2-3 estimadores\",\n      crewFeature4: \"Panel de equipo\",\n      subscribeCrew: \"Suscribirse a Equipo\",\n      mostPopular: \"MÃS POPULAR\",\n      forTeams: \"PARA EQUIPOS\",\n      readyToLookLikePro: \"Â¿Listo para lucir como un profesional?\",\n      createFirstProposal: \"Cree Su Primera Propuesta\",\n      tryFreeThenUnlock: \"Pruebe gratis, luego actualice a un plan que se ajuste a su negocio.\",\n      allPlansInclude: \"Todos los planes incluyen todas las plantillas de oficios y formato profesional.\",\n      processing: \"Procesando...\",\n      free: \"GRATIS\",\n      bestValue: \"MEJOR VALOR\",\n    },\n  },\n} as const;\n\ntype DeepStringify<T> = {\n  [K in keyof T]: T[K] extends object ? DeepStringify<T[K]> : string;\n};\n\nexport type TranslationKeys = DeepStringify<typeof translations.en>;\n","path":null,"size_bytes":30388,"size_tokens":null},"server/aiService.ts":{"content":"import Anthropic from \"@anthropic-ai/sdk\";\n\nconst anthropic = new Anthropic({\n  apiKey: process.env.AI_INTEGRATIONS_ANTHROPIC_API_KEY,\n  baseURL: process.env.AI_INTEGRATIONS_ANTHROPIC_BASE_URL,\n});\n\ninterface EnhanceScopeParams {\n  jobTypeName: string;\n  baseScope: string[];\n  clientName?: string;\n  address?: string;\n  jobNotes?: string;\n}\n\nexport async function enhanceScope(params: EnhanceScopeParams): Promise<string[]> {\n  const { jobTypeName, baseScope, clientName, address, jobNotes } = params;\n\n  const prompt = `You are a senior estimator at a high-end contracting firm with 25+ years of experience writing winning proposals. Your proposals are known for being thorough, professional, and client-focused while protecting the contractor.\n\nTASK: Transform this scope of work into a premium, bid-winning proposal.\n\nPROJECT DETAILS:\n- Job Type: ${jobTypeName}\n${clientName ? `- Client: ${clientName}` : ''}\n${address ? `- Location: ${address}` : ''}\n${jobNotes ? `\\nCONTRACTOR'S NOTES FROM SITE VISIT:\\n${jobNotes}\\n\\nUse these notes to personalize and enhance the scope with specific details from the job site.` : ''}\n\nCURRENT SCOPE:\n${baseScope.map((item, i) => `${i + 1}. ${item}`).join('\\n')}\n\nENHANCEMENT REQUIREMENTS:\n\n1. PROFESSIONAL LANGUAGE\n   - Use industry-standard terminology (e.g., \"substrate preparation\" not \"clean surface\")\n   - Write in active voice with action verbs\n   - Avoid vague words like \"quality\" or \"professional\" - be specific\n\n2. TECHNICAL PRECISION\n   - Include specific measurements, tolerances, or standards where applicable\n   - Reference industry codes/standards when relevant (e.g., TCNA, NEC, IBC)\n   - Specify methods and techniques that demonstrate expertise\n\n3. CLIENT PROTECTION\n   - Clearly define what IS included to manage expectations\n   - Be specific about scope boundaries to prevent scope creep\n   - Include verification/inspection steps that build trust\n\n4. CONTRACTOR PROTECTION\n   - Include phrases that protect from hidden conditions\n   - Specify \"per plan\" or \"as selected by owner\" for variable items\n   - Include appropriate contingency language\n\n5. COMPLETENESS\n   - Ensure logical work sequence (demo â†’ prep â†’ install â†’ finish)\n   - Include often-forgotten items (cleanup, protection, disposal)\n   - Add value with items clients appreciate (walkthrough, documentation)\n\nFORMAT: Return ONLY a valid JSON array of scope line items. Each item should be 1-2 sentences max. Keep a similar number of items as the original scope (add a few if needed for completeness). No explanations, no markdown - just the raw JSON array.\n\nExample: [\"Line item 1.\", \"Line item 2.\", \"Line item 3.\"]`;\n\n  try {\n    const message = await anthropic.messages.create({\n      model: \"claude-opus-4-5\",\n      max_tokens: 4096,\n      messages: [\n        {\n          role: \"user\",\n          content: prompt,\n        },\n      ],\n    });\n\n    const content = message.content[0];\n    if (content.type === \"text\") {\n      const parsed = JSON.parse(content.text);\n      if (Array.isArray(parsed) && parsed.every(item => typeof item === 'string')) {\n        return parsed;\n      }\n    }\n    \n    return baseScope;\n  } catch (error: any) {\n    console.error(\"Error enhancing scope with AI:\", error);\n    return baseScope;\n  }\n}\n\nexport const aiService = {\n  enhanceScope,\n};\n","path":null,"size_bytes":3306,"size_tokens":null},"client/src/hooks/useLanguage.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport { translations, Language, TranslationKeys } from \"@/lib/translations\";\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: TranslationKeys;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nconst LANGUAGE_STORAGE_KEY = \"scopegen-language\";\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguageState] = useState<Language>(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(LANGUAGE_STORAGE_KEY);\n      if (saved === \"en\" || saved === \"es\") {\n        return saved;\n      }\n      const browserLang = navigator.language.toLowerCase();\n      if (browserLang.startsWith(\"es\")) {\n        return \"es\";\n      }\n    }\n    return \"en\";\n  });\n\n  const setLanguage = (lang: Language) => {\n    setLanguageState(lang);\n    localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);\n  };\n\n  useEffect(() => {\n    document.documentElement.lang = language;\n  }, [language]);\n\n  const t = translations[language];\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (context === undefined) {\n    throw new Error(\"useLanguage must be used within a LanguageProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1498,"size_tokens":null},"client/src/components/cancel-feedback-modal.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Label } from \"@/components/ui/label\";\nimport { Loader2, MessageSquare, AlertTriangle } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface CancelFeedbackModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onComplete: (portalUrl: string | null) => void;\n}\n\nconst CANCELLATION_REASONS = [\n  { value: \"too_expensive\", label: \"Too expensive for my needs\" },\n  { value: \"not_using\", label: \"Not using it enough\" },\n  { value: \"missing_features\", label: \"Missing features I need\" },\n  { value: \"found_alternative\", label: \"Found a better alternative\" },\n  { value: \"difficult_to_use\", label: \"Too difficult to use\" },\n  { value: \"temporary_pause\", label: \"Just need a temporary break\" },\n  { value: \"other\", label: \"Other reason\" },\n];\n\nexport default function CancelFeedbackModal({\n  isOpen,\n  onClose,\n  onComplete,\n}: CancelFeedbackModalProps) {\n  const [reason, setReason] = useState(\"\");\n  const [details, setDetails] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async () => {\n    if (!reason) {\n      toast({\n        title: \"Please select a reason\",\n        description: \"We'd love to know why you're leaving so we can improve.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setSubmitting(true);\n    try {\n      const response = await fetch(\"/api/cancellation-feedback\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          reason,\n          details: details.trim() || undefined,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to submit feedback\");\n      }\n\n      const data = await response.json();\n      \n      toast({\n        title: \"Thank you for your feedback\",\n        description: \"We appreciate you taking the time to let us know.\",\n      });\n\n      onComplete(data.portalUrl);\n    } catch (error) {\n      console.error(\"Error submitting feedback:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to submit feedback. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleSkip = async () => {\n    setSubmitting(true);\n    try {\n      const response = await fetch(\"/api/cancellation-feedback\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          reason: \"skipped\",\n          details: undefined,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to process\");\n      }\n\n      const data = await response.json();\n      onComplete(data.portalUrl);\n    } catch (error) {\n      console.error(\"Error:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Something went wrong. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <MessageSquare className=\"w-5 h-5 text-primary\" />\n            Before you go...\n          </DialogTitle>\n          <DialogDescription>\n            We're sorry to see you leave. Your feedback helps us improve ScopeGen for everyone.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 flex gap-2\">\n            <AlertTriangle className=\"w-5 h-5 text-amber-600 shrink-0 mt-0.5\" />\n            <p className=\"text-sm text-amber-800\">\n              After submitting feedback, you'll be redirected to manage your subscription.\n            </p>\n          </div>\n\n          <div className=\"space-y-3\">\n            <Label className=\"text-sm font-medium\">Why are you canceling?</Label>\n            <RadioGroup value={reason} onValueChange={setReason}>\n              {CANCELLATION_REASONS.map((item) => (\n                <div key={item.value} className=\"flex items-center space-x-2\">\n                  <RadioGroupItem \n                    value={item.value} \n                    id={item.value}\n                    data-testid={`radio-reason-${item.value}`}\n                  />\n                  <Label \n                    htmlFor={item.value} \n                    className=\"font-normal cursor-pointer\"\n                  >\n                    {item.label}\n                  </Label>\n                </div>\n              ))}\n            </RadioGroup>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"details\" className=\"text-sm font-medium\">\n              Any additional feedback? (optional)\n            </Label>\n            <Textarea\n              id=\"details\"\n              placeholder=\"Tell us more about your experience...\"\n              value={details}\n              onChange={(e) => setDetails(e.target.value)}\n              rows={3}\n              data-testid=\"input-cancel-details\"\n            />\n          </div>\n        </div>\n\n        <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n          <Button\n            variant=\"ghost\"\n            onClick={handleSkip}\n            disabled={submitting}\n            data-testid=\"button-skip-feedback\"\n          >\n            Skip & Continue\n          </Button>\n          <Button\n            onClick={handleSubmit}\n            disabled={submitting || !reason}\n            data-testid=\"button-submit-feedback\"\n          >\n            {submitting ? (\n              <>\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                Submitting...\n              </>\n            ) : (\n              \"Submit & Continue\"\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":6319,"size_tokens":null},"client/src/components/edit-price-modal.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Loader2, DollarSign } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface EditPriceModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  proposalId: number;\n  clientName: string;\n  currentPriceLow: number;\n  currentPriceHigh: number;\n  onUpdated: () => void;\n}\n\nexport default function EditPriceModal({\n  isOpen,\n  onClose,\n  proposalId,\n  clientName,\n  currentPriceLow,\n  currentPriceHigh,\n  onUpdated,\n}: EditPriceModalProps) {\n  const [priceLow, setPriceLow] = useState(currentPriceLow);\n  const [priceHigh, setPriceHigh] = useState(currentPriceHigh);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (priceLow > priceHigh) {\n      toast({\n        title: \"Invalid price range\",\n        description: \"Minimum price cannot be higher than maximum price.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(`/api/proposals/${proposalId}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({ priceLow, priceHigh }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to update price\");\n      }\n\n      toast({\n        title: \"Price updated\",\n        description: \"The proposal price has been updated successfully.\",\n      });\n      onUpdated();\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update the price. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[400px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <DollarSign className=\"w-5 h-5 text-primary\" />\n            Adjust Pricing\n          </DialogTitle>\n          <DialogDescription>\n            Update the price range for {clientName}'s proposal.\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit}>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"priceLow\">Minimum Price ($)</Label>\n              <Input\n                id=\"priceLow\"\n                type=\"number\"\n                value={priceLow}\n                onChange={(e) => setPriceLow(Number(e.target.value))}\n                min={0}\n                step={100}\n                data-testid=\"input-price-low\"\n              />\n            </div>\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"priceHigh\">Maximum Price ($)</Label>\n              <Input\n                id=\"priceHigh\"\n                type=\"number\"\n                value={priceHigh}\n                onChange={(e) => setPriceHigh(Number(e.target.value))}\n                min={0}\n                step={100}\n                data-testid=\"input-price-high\"\n              />\n            </div>\n            <div className=\"bg-slate-50 rounded-lg p-3 text-center\">\n              <div className=\"text-sm text-slate-500\">Displayed Price</div>\n              <div className=\"text-2xl font-bold text-primary\">\n                ${Math.round((priceLow + priceHigh) / 2).toLocaleString()}\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                (Average of min and max)\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isSubmitting} data-testid=\"button-save-price\">\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Saving...\n                </>\n              ) : (\n                \"Save Price\"\n              )}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":4490,"size_tokens":null},"client/src/components/signature-pad.tsx":{"content":"import { useRef, useEffect, useState, forwardRef, useImperativeHandle } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Eraser } from \"lucide-react\";\n\ninterface SignaturePadProps {\n  onSignatureChange?: (signature: string | null) => void;\n  width?: number;\n  height?: number;\n}\n\nexport interface SignaturePadRef {\n  clear: () => void;\n  getSignature: () => string | null;\n  isEmpty: () => boolean;\n}\n\nconst SignaturePad = forwardRef<SignaturePadRef, SignaturePadProps>(\n  ({ onSignatureChange, width = 400, height = 150 }, ref) => {\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const [isDrawing, setIsDrawing] = useState(false);\n    const [hasSignature, setHasSignature] = useState(false);\n\n    useEffect(() => {\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n\n      const ctx = canvas.getContext(\"2d\");\n      if (!ctx) return;\n\n      ctx.fillStyle = \"#ffffff\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.strokeStyle = \"#1e293b\";\n      ctx.lineWidth = 2;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n    }, []);\n\n    const getCoordinates = (e: React.MouseEvent | React.TouchEvent) => {\n      const canvas = canvasRef.current;\n      if (!canvas) return { x: 0, y: 0 };\n\n      const rect = canvas.getBoundingClientRect();\n      const scaleX = canvas.width / rect.width;\n      const scaleY = canvas.height / rect.height;\n\n      if (\"touches\" in e) {\n        const touch = e.touches[0];\n        return {\n          x: (touch.clientX - rect.left) * scaleX,\n          y: (touch.clientY - rect.top) * scaleY,\n        };\n      }\n\n      return {\n        x: (e.clientX - rect.left) * scaleX,\n        y: (e.clientY - rect.top) * scaleY,\n      };\n    };\n\n    const startDrawing = (e: React.MouseEvent | React.TouchEvent) => {\n      const canvas = canvasRef.current;\n      const ctx = canvas?.getContext(\"2d\");\n      if (!ctx) return;\n\n      const { x, y } = getCoordinates(e);\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      setIsDrawing(true);\n    };\n\n    const draw = (e: React.MouseEvent | React.TouchEvent) => {\n      if (!isDrawing) return;\n\n      const canvas = canvasRef.current;\n      const ctx = canvas?.getContext(\"2d\");\n      if (!ctx) return;\n\n      const { x, y } = getCoordinates(e);\n      ctx.lineTo(x, y);\n      ctx.stroke();\n      setHasSignature(true);\n    };\n\n    const stopDrawing = () => {\n      if (isDrawing && hasSignature) {\n        const signature = getSignature();\n        onSignatureChange?.(signature);\n      }\n      setIsDrawing(false);\n    };\n\n    const clear = () => {\n      const canvas = canvasRef.current;\n      const ctx = canvas?.getContext(\"2d\");\n      if (!ctx || !canvas) return;\n\n      ctx.fillStyle = \"#ffffff\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      setHasSignature(false);\n      onSignatureChange?.(null);\n    };\n\n    const getSignature = (): string | null => {\n      const canvas = canvasRef.current;\n      if (!canvas || !hasSignature) return null;\n      return canvas.toDataURL(\"image/png\");\n    };\n\n    const isEmpty = () => !hasSignature;\n\n    useImperativeHandle(ref, () => ({\n      clear,\n      getSignature,\n      isEmpty,\n    }));\n\n    return (\n      <div className=\"space-y-2\">\n        <div className=\"relative border-2 border-dashed border-slate-300 rounded-lg bg-white overflow-hidden\">\n          <canvas\n            ref={canvasRef}\n            width={width}\n            height={height}\n            className=\"w-full touch-none cursor-crosshair\"\n            style={{ maxWidth: `${width}px` }}\n            onMouseDown={startDrawing}\n            onMouseMove={draw}\n            onMouseUp={stopDrawing}\n            onMouseLeave={stopDrawing}\n            onTouchStart={startDrawing}\n            onTouchMove={draw}\n            onTouchEnd={stopDrawing}\n            data-testid=\"canvas-signature\"\n          />\n          {!hasSignature && (\n            <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n              <p className=\"text-slate-400 text-sm\">Sign here</p>\n            </div>\n          )}\n        </div>\n        <div className=\"flex justify-end\">\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={clear}\n            className=\"text-slate-500 hover:text-slate-700\"\n            data-testid=\"button-clear-signature\"\n          >\n            <Eraser className=\"w-4 h-4 mr-1\" />\n            Clear\n          </Button>\n        </div>\n      </div>\n    );\n  }\n);\n\nSignaturePad.displayName = \"SignaturePad\";\n\nexport default SignaturePad;\n","path":null,"size_bytes":4597,"size_tokens":null},"client/src/components/onboarding-modal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface OnboardingModalProps {\n  open: boolean;\n  userName?: string;\n}\n\nconst TRADES = [\n  { value: \"bathroom\", label: \"Bathroom Remodeling\" },\n  { value: \"kitchen\", label: \"Kitchen Renovation\" },\n  { value: \"plumbing\", label: \"Plumbing\" },\n  { value: \"electrical\", label: \"Electrical\" },\n  { value: \"roofing\", label: \"Roofing\" },\n  { value: \"hvac\", label: \"HVAC\" },\n  { value: \"painting\", label: \"Painting\" },\n  { value: \"flooring\", label: \"Flooring\" },\n  { value: \"general\", label: \"General Contracting\" },\n  { value: \"other\", label: \"Other\" },\n];\n\nconst BUSINESS_SIZES = [\n  { value: \"solo\", label: \"Just me (Solo)\" },\n  { value: \"small_team\", label: \"2-5 employees\" },\n  { value: \"medium\", label: \"6-20 employees\" },\n  { value: \"large\", label: \"20+ employees\" },\n];\n\nconst REFERRAL_SOURCES = [\n  { value: \"google\", label: \"Google Search\" },\n  { value: \"social\", label: \"Social Media\" },\n  { value: \"referral\", label: \"Friend/Colleague Referral\" },\n  { value: \"ad\", label: \"Online Ad\" },\n  { value: \"other\", label: \"Other\" },\n];\n\nexport function OnboardingModal({ open, userName }: OnboardingModalProps) {\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    phone: \"\",\n    companyName: \"\",\n    businessSize: \"\",\n    referralSource: \"\",\n    primaryTrade: \"\",\n    yearsInBusiness: \"\",\n  });\n\n  const onboardingMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const response = await fetch(\"/api/onboarding\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to complete onboarding\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onboardingMutation.mutate(formData);\n  };\n\n  const isFormValid = formData.companyName && formData.primaryTrade;\n\n  return (\n    <Dialog open={open}>\n      <DialogContent className=\"sm:max-w-lg\" onPointerDownOutside={(e) => e.preventDefault()}>\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-heading\">\n            Welcome{userName ? `, ${userName}` : \"\"}!\n          </DialogTitle>\n          <DialogDescription>\n            Let's set up your account so you can start creating professional proposals.\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"col-span-2\">\n              <Label htmlFor=\"companyName\">Company Name *</Label>\n              <Input\n                id=\"companyName\"\n                data-testid=\"input-company-name\"\n                placeholder=\"Your Business Name\"\n                value={formData.companyName}\n                onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"phone\">Phone Number</Label>\n              <Input\n                id=\"phone\"\n                data-testid=\"input-phone\"\n                type=\"tel\"\n                placeholder=\"(555) 123-4567\"\n                value={formData.phone}\n                onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"yearsInBusiness\">Years in Business</Label>\n              <Input\n                id=\"yearsInBusiness\"\n                data-testid=\"input-years\"\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                placeholder=\"5\"\n                value={formData.yearsInBusiness}\n                onChange={(e) => setFormData({ ...formData, yearsInBusiness: e.target.value })}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"primaryTrade\">Primary Trade *</Label>\n            <Select\n              value={formData.primaryTrade}\n              onValueChange={(value) => setFormData({ ...formData, primaryTrade: value })}\n            >\n              <SelectTrigger data-testid=\"select-trade\">\n                <SelectValue placeholder=\"Select your main trade\" />\n              </SelectTrigger>\n              <SelectContent>\n                {TRADES.map((trade) => (\n                  <SelectItem key={trade.value} value={trade.value}>\n                    {trade.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"businessSize\">Team Size</Label>\n            <Select\n              value={formData.businessSize}\n              onValueChange={(value) => setFormData({ ...formData, businessSize: value })}\n            >\n              <SelectTrigger data-testid=\"select-business-size\">\n                <SelectValue placeholder=\"How big is your team?\" />\n              </SelectTrigger>\n              <SelectContent>\n                {BUSINESS_SIZES.map((size) => (\n                  <SelectItem key={size.value} value={size.value}>\n                    {size.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"referralSource\">How did you hear about us?</Label>\n            <Select\n              value={formData.referralSource}\n              onValueChange={(value) => setFormData({ ...formData, referralSource: value })}\n            >\n              <SelectTrigger data-testid=\"select-referral\">\n                <SelectValue placeholder=\"Select an option\" />\n              </SelectTrigger>\n              <SelectContent>\n                {REFERRAL_SOURCES.map((source) => (\n                  <SelectItem key={source.value} value={source.value}>\n                    {source.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <Button\n            type=\"submit\"\n            data-testid=\"button-complete-onboarding\"\n            className=\"w-full bg-secondary text-slate-900 hover:bg-secondary/90\"\n            disabled={!isFormValid || onboardingMutation.isPending}\n          >\n            {onboardingMutation.isPending ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              \"Get Started\"\n            )}\n          </Button>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":7181,"size_tokens":null},"client/src/components/countersign-modal.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, Check, Pen, Eraser } from \"lucide-react\";\n\ninterface CountersignModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  proposalId: number;\n  clientName: string;\n  onSuccess: () => void;\n}\n\nexport default function CountersignModal({\n  isOpen,\n  onClose,\n  proposalId,\n  clientName,\n  onSuccess,\n}: CountersignModalProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [hasSignature, setHasSignature] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && canvasRef.current) {\n      const ctx = canvasRef.current.getContext('2d');\n      if (ctx) {\n        ctx.strokeStyle = '#1e3a5f';\n        ctx.lineWidth = 2;\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n      }\n    }\n  }, [isOpen]);\n\n  const getCoordinates = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return { x: 0, y: 0 };\n    \n    const rect = canvas.getBoundingClientRect();\n    if ('touches' in e) {\n      return {\n        x: e.touches[0].clientX - rect.left,\n        y: e.touches[0].clientY - rect.top\n      };\n    }\n    return {\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    };\n  };\n\n  const startDrawing = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    if (!ctx) return;\n    \n    setIsDrawing(true);\n    const { x, y } = getCoordinates(e);\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n  };\n\n  const draw = (e: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    if (!isDrawing) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    if (!ctx) return;\n    \n    const { x, y } = getCoordinates(e);\n    ctx.lineTo(x, y);\n    ctx.stroke();\n    setHasSignature(true);\n  };\n\n  const stopDrawing = () => {\n    setIsDrawing(false);\n  };\n\n  const clearSignature = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    if (!ctx || !canvas) return;\n    \n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    setHasSignature(false);\n  };\n\n  const handleSubmit = async () => {\n    const canvas = canvasRef.current;\n    if (!canvas || !hasSignature) {\n      setError(\"Please provide your signature\");\n      return;\n    }\n\n    const signature = canvas.toDataURL('image/png');\n    \n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`/api/proposals/${proposalId}/countersign`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ signature }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to countersign proposal');\n      }\n\n      onSuccess();\n      onClose();\n    } catch (err: any) {\n      setError(err.message || 'An error occurred');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Pen className=\"w-5 h-5 text-primary\" />\n            Countersign Proposal\n          </DialogTitle>\n          <DialogDescription>\n            Add your signature to complete the proposal for <strong>{clientName}</strong>.\n            Once signed, the client will receive an email with the completed proposal.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"text-sm font-medium text-slate-700 mb-2 block\">\n              Your Signature\n            </label>\n            <div className=\"border-2 border-dashed border-slate-300 rounded-lg p-2 bg-white\">\n              <canvas\n                ref={canvasRef}\n                width={350}\n                height={150}\n                className=\"w-full touch-none cursor-crosshair\"\n                style={{ backgroundColor: '#fff' }}\n                onMouseDown={startDrawing}\n                onMouseMove={draw}\n                onMouseUp={stopDrawing}\n                onMouseLeave={stopDrawing}\n                onTouchStart={startDrawing}\n                onTouchMove={draw}\n                onTouchEnd={stopDrawing}\n              />\n            </div>\n            <div className=\"flex justify-end mt-2\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={clearSignature}\n                className=\"text-slate-500\"\n              >\n                <Eraser className=\"w-4 h-4 mr-1\" />\n                Clear\n              </Button>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"text-sm text-red-600 bg-red-50 p-3 rounded-md\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"flex gap-3 justify-end\">\n            <Button\n              variant=\"outline\"\n              onClick={onClose}\n              disabled={isSubmitting}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSubmit}\n              disabled={isSubmitting || !hasSignature}\n              className=\"gap-2\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Signing...\n                </>\n              ) : (\n                <>\n                  <Check className=\"w-4 h-4\" />\n                  Sign & Send to Client\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":6221,"size_tokens":null},"client/src/components/payment-link-modal.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Loader2, Copy, Check, CreditCard, ExternalLink } from \"lucide-react\";\nimport { useLanguage } from \"@/hooks/useLanguage\";\n\ninterface PaymentLinkModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  proposalId: number;\n  clientName: string;\n  priceLow: number;\n  priceHigh: number;\n  existingPaymentLink?: string | null;\n  existingDepositPercentage?: number | null;\n  onSuccess: () => void;\n}\n\nexport default function PaymentLinkModal({\n  isOpen,\n  onClose,\n  proposalId,\n  clientName,\n  priceLow,\n  priceHigh,\n  existingPaymentLink,\n  existingDepositPercentage,\n  onSuccess,\n}: PaymentLinkModalProps) {\n  const { t } = useLanguage();\n  const [depositPercentage, setDepositPercentage] = useState<string>(\n    existingDepositPercentage?.toString() || \"50\"\n  );\n  const [isLoading, setIsLoading] = useState(false);\n  const [paymentLink, setPaymentLink] = useState<string | null>(existingPaymentLink || null);\n  const [copied, setCopied] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const avgPrice = Math.round((priceLow + priceHigh) / 2);\n  const depositAmount = Math.round(avgPrice * parseInt(depositPercentage) / 100);\n\n  const handleCreatePaymentLink = async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`/api/proposals/${proposalId}/payment-link`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({ depositPercentage: parseInt(depositPercentage) }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.message || \"Failed to create payment link\");\n      }\n\n      const data = await response.json();\n      setPaymentLink(data.paymentLinkUrl);\n      onSuccess();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCopyLink = async () => {\n    if (paymentLink) {\n      await navigator.clipboard.writeText(paymentLink);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"w-5 h-5 text-primary\" />\n            {t.payment.requestPayment}\n          </DialogTitle>\n          <DialogDescription>\n            {t.payment.createPaymentLinkFor.replace('{clientName}', clientName)}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {!paymentLink ? (\n            <>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"deposit\">{t.payment.depositAmount}</Label>\n                <Select\n                  value={depositPercentage}\n                  onValueChange={setDepositPercentage}\n                >\n                  <SelectTrigger data-testid=\"select-deposit-percentage\">\n                    <SelectValue placeholder={t.payment.selectDepositPercentage} />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"25\">25% - ${Math.round(avgPrice * 0.25).toLocaleString()}</SelectItem>\n                    <SelectItem value=\"50\">50% - ${Math.round(avgPrice * 0.5).toLocaleString()}</SelectItem>\n                    <SelectItem value=\"100\">100% - ${avgPrice.toLocaleString()}</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"bg-slate-50 p-4 rounded-lg space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-slate-600\">{t.payment.projectTotal}</span>\n                  <span className=\"font-medium\">${avgPrice.toLocaleString()}</span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-slate-600\">{t.payment.deposit} ({depositPercentage}%):</span>\n                  <span className=\"font-bold text-primary\">${depositAmount.toLocaleString()}</span>\n                </div>\n              </div>\n\n              {error && (\n                <p className=\"text-sm text-red-600 bg-red-50 p-2 rounded\">{error}</p>\n              )}\n            </>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"bg-green-50 border border-green-200 p-4 rounded-lg\">\n                <p className=\"text-sm text-green-700 font-medium mb-2\">\n                  {t.payment.paymentLinkCreated}\n                </p>\n                <p className=\"text-xs text-green-600\">\n                  {t.payment.shareLink} ${depositAmount.toLocaleString()} ({depositPercentage}% {t.payment.deposit.toLowerCase()}).\n                </p>\n              </div>\n\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={paymentLink}\n                  readOnly\n                  className=\"flex-1 px-3 py-2 text-sm bg-slate-100 border rounded-md truncate\"\n                  data-testid=\"input-payment-link\"\n                />\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={handleCopyLink}\n                  data-testid=\"button-copy-payment-link\"\n                >\n                  {copied ? <Check className=\"w-4 h-4 text-green-600\" /> : <Copy className=\"w-4 h-4\" />}\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={() => window.open(paymentLink, '_blank')}\n                  data-testid=\"button-open-payment-link\"\n                >\n                  <ExternalLink className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <DialogFooter>\n          {!paymentLink ? (\n            <>\n              <Button variant=\"outline\" onClick={onClose} data-testid=\"button-cancel-payment\">\n                {t.common.cancel}\n              </Button>\n              <Button\n                onClick={handleCreatePaymentLink}\n                disabled={isLoading}\n                data-testid=\"button-create-payment-link\"\n              >\n                {isLoading ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    {t.payment.creating}\n                  </>\n                ) : (\n                  t.payment.createPaymentLink\n                )}\n              </Button>\n            </>\n          ) : (\n            <Button onClick={onClose} data-testid=\"button-done-payment\">\n              {t.payment.done}\n            </Button>\n          )}\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":7221,"size_tokens":null},"client/src/pages/crew.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport Layout from \"@/components/layout\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Users, \n  UserPlus, \n  Building2, \n  Crown, \n  Shield, \n  User, \n  Loader2, \n  Copy, \n  Check,\n  Trash2,\n  Mail,\n  AlertCircle\n} from \"lucide-react\";\n\ninterface Company {\n  id: number;\n  name: string;\n  ownerId: string;\n  seatLimit: number;\n  extraSeats: number;\n  address?: string;\n  phone?: string;\n  logo?: string;\n  licenseNumber?: string;\n}\n\ninterface CompanyInfo {\n  company: Company;\n  role: string;\n  memberCount: number;\n  totalSeats: number;\n}\n\ninterface Member {\n  id: number;\n  role: string;\n  createdAt: string;\n  user: {\n    id: string;\n    email: string;\n    firstName?: string;\n    lastName?: string;\n    profileImageUrl?: string;\n  };\n}\n\ninterface Invite {\n  id: number;\n  email: string;\n  role: string;\n  token: string;\n  expiresAt: string;\n  createdAt: string;\n}\n\nexport default function Crew() {\n  const { user, isLoading: authLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n\n  const [companyInfo, setCompanyInfo] = useState<CompanyInfo | null>(null);\n  const [members, setMembers] = useState<Member[]>([]);\n  const [invites, setInvites] = useState<Invite[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [creating, setCreating] = useState(false);\n  const [inviting, setInviting] = useState(false);\n  \n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const [showInviteDialog, setShowInviteDialog] = useState(false);\n  const [companyName, setCompanyName] = useState(\"\");\n  const [inviteEmail, setInviteEmail] = useState(\"\");\n  const [inviteRole, setInviteRole] = useState(\"member\");\n  const [copiedLink, setCopiedLink] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!authLoading && !user) {\n      navigate(\"/\");\n    }\n  }, [user, authLoading, navigate]);\n\n  useEffect(() => {\n    if (user) {\n      fetchCompanyInfo();\n    }\n  }, [user]);\n\n  const fetchCompanyInfo = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/company\", { credentials: \"include\" });\n      const data = await res.json();\n      setCompanyInfo(data);\n      \n      if (data) {\n        await Promise.all([fetchMembers(), fetchInvites()]);\n      }\n    } catch (error) {\n      console.error(\"Error fetching company:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMembers = async () => {\n    try {\n      const res = await fetch(\"/api/company/members\", { credentials: \"include\" });\n      if (res.ok) {\n        const data = await res.json();\n        setMembers(data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching members:\", error);\n    }\n  };\n\n  const fetchInvites = async () => {\n    try {\n      const res = await fetch(\"/api/company/invites\", { credentials: \"include\" });\n      if (res.ok) {\n        const data = await res.json();\n        setInvites(data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching invites:\", error);\n    }\n  };\n\n  const handleCreateCompany = async () => {\n    if (!companyName.trim()) {\n      toast({\n        title: \"Company name required\",\n        description: \"Please enter a name for your company.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const res = await fetch(\"/api/company\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({ name: companyName.trim() }),\n      });\n\n      if (res.ok) {\n        const data = await res.json();\n        setCompanyInfo(data);\n        setShowCreateDialog(false);\n        setCompanyName(\"\");\n        toast({\n          title: \"Company created\",\n          description: \"Your workspace has been set up successfully.\",\n        });\n        await Promise.all([fetchMembers(), fetchInvites()]);\n      } else {\n        const error = await res.json();\n        toast({\n          title: \"Failed to create company\",\n          description: error.message,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create company. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const handleInvite = async () => {\n    if (!inviteEmail.trim() || !inviteEmail.includes(\"@\")) {\n      toast({\n        title: \"Valid email required\",\n        description: \"Please enter a valid email address.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setInviting(true);\n    try {\n      const res = await fetch(\"/api/company/invites\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({ email: inviteEmail.trim(), role: inviteRole }),\n      });\n\n      if (res.ok) {\n        const data = await res.json();\n        setShowInviteDialog(false);\n        setInviteEmail(\"\");\n        setInviteRole(\"member\");\n        toast({\n          title: \"Invitation sent\",\n          description: `Invite link created for ${inviteEmail}`,\n        });\n        await fetchInvites();\n        \n        if (data.inviteLink) {\n          navigator.clipboard.writeText(data.inviteLink);\n          toast({\n            title: \"Link copied\",\n            description: \"Invite link has been copied to your clipboard.\",\n          });\n        }\n      } else {\n        const error = await res.json();\n        toast({\n          title: \"Failed to send invite\",\n          description: error.message,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to send invite. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setInviting(false);\n    }\n  };\n\n  const handleRemoveMember = async (userId: string, userName: string) => {\n    if (!confirm(`Are you sure you want to remove ${userName} from the team?`)) {\n      return;\n    }\n\n    try {\n      const res = await fetch(`/api/company/members/${userId}`, {\n        method: \"DELETE\",\n        credentials: \"include\",\n      });\n\n      if (res.ok) {\n        toast({\n          title: \"Member removed\",\n          description: `${userName} has been removed from the team.`,\n        });\n        await fetchMembers();\n        await fetchCompanyInfo();\n      } else {\n        const error = await res.json();\n        toast({\n          title: \"Failed to remove member\",\n          description: error.message,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to remove member. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDeleteInvite = async (inviteId: number) => {\n    try {\n      const res = await fetch(`/api/company/invites/${inviteId}`, {\n        method: \"DELETE\",\n        credentials: \"include\",\n      });\n\n      if (res.ok) {\n        toast({\n          title: \"Invite deleted\",\n          description: \"The invitation has been revoked.\",\n        });\n        await fetchInvites();\n      } else {\n        const error = await res.json();\n        toast({\n          title: \"Failed to delete invite\",\n          description: error.message,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete invite. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const copyInviteLink = async (token: string) => {\n    const link = `${window.location.origin}/invite/${token}`;\n    await navigator.clipboard.writeText(link);\n    setCopiedLink(token);\n    setTimeout(() => setCopiedLink(null), 2000);\n    toast({\n      title: \"Link copied\",\n      description: \"Invite link has been copied to your clipboard.\",\n    });\n  };\n\n  const getRoleIcon = (role: string) => {\n    switch (role) {\n      case \"owner\":\n        return <Crown className=\"w-4 h-4 text-yellow-500\" />;\n      case \"admin\":\n        return <Shield className=\"w-4 h-4 text-blue-500\" />;\n      default:\n        return <User className=\"w-4 h-4 text-slate-500\" />;\n    }\n  };\n\n  const getRoleBadge = (role: string) => {\n    switch (role) {\n      case \"owner\":\n        return <Badge className=\"bg-yellow-100 text-yellow-800 hover:bg-yellow-100\">Owner</Badge>;\n      case \"admin\":\n        return <Badge className=\"bg-blue-100 text-blue-800 hover:bg-blue-100\">Admin</Badge>;\n      default:\n        return <Badge variant=\"secondary\">Member</Badge>;\n    }\n  };\n\n  const isOwnerOrAdmin = companyInfo?.role === \"owner\" || companyInfo?.role === \"admin\";\n  const isOwner = companyInfo?.role === \"owner\";\n\n  if (authLoading || loading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  if (!companyInfo) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-12 max-w-2xl\">\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4\">\n                <Building2 className=\"w-8 h-8 text-primary\" />\n              </div>\n              <CardTitle className=\"text-2xl\">Set Up Your Team Workspace</CardTitle>\n              <CardDescription className=\"text-base mt-2\">\n                Create a company workspace to invite team members and collaborate on proposals together.\n                The Crew plan includes 3 seats with options to add more.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Dialog open={showCreateDialog} onOpenChange={setShowCreateDialog}>\n                <DialogTrigger asChild>\n                  <Button size=\"lg\" className=\"gap-2\" data-testid=\"button-create-company\">\n                    <Building2 className=\"w-5 h-5\" />\n                    Create Company Workspace\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Create Your Company</DialogTitle>\n                    <DialogDescription>\n                      Enter your company name to get started. You can update company details later.\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"space-y-4 py-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"company-name\">Company Name</Label>\n                      <Input\n                        id=\"company-name\"\n                        placeholder=\"e.g., Smith Remodeling LLC\"\n                        value={companyName}\n                        onChange={(e) => setCompanyName(e.target.value)}\n                        data-testid=\"input-company-name\"\n                      />\n                    </div>\n                  </div>\n                  <DialogFooter>\n                    <Button variant=\"outline\" onClick={() => setShowCreateDialog(false)}>\n                      Cancel\n                    </Button>\n                    <Button onClick={handleCreateCompany} disabled={creating} data-testid=\"button-confirm-create\">\n                      {creating ? <Loader2 className=\"w-4 h-4 animate-spin mr-2\" /> : null}\n                      Create Company\n                    </Button>\n                  </DialogFooter>\n                </DialogContent>\n              </Dialog>\n            </CardContent>\n          </Card>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8\">\n          <div>\n            <h1 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 flex items-center gap-2\">\n              <Building2 className=\"w-7 h-7\" />\n              {companyInfo.company.name}\n            </h1>\n            <p className=\"text-muted-foreground mt-1\">Manage your team and workspace settings</p>\n          </div>\n          {isOwnerOrAdmin && (\n            <Dialog open={showInviteDialog} onOpenChange={setShowInviteDialog}>\n              <DialogTrigger asChild>\n                <Button className=\"gap-2\" data-testid=\"button-invite-member\">\n                  <UserPlus className=\"w-4 h-4\" />\n                  Invite Team Member\n                </Button>\n              </DialogTrigger>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>Invite Team Member</DialogTitle>\n                  <DialogDescription>\n                    Send an invitation to add a new member to your team.\n                  </DialogDescription>\n                </DialogHeader>\n                <div className=\"space-y-4 py-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"invite-email\">Email Address</Label>\n                    <Input\n                      id=\"invite-email\"\n                      type=\"email\"\n                      placeholder=\"teammate@company.com\"\n                      value={inviteEmail}\n                      onChange={(e) => setInviteEmail(e.target.value)}\n                      data-testid=\"input-invite-email\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"invite-role\">Role</Label>\n                    <Select value={inviteRole} onValueChange={setInviteRole}>\n                      <SelectTrigger data-testid=\"select-invite-role\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"member\">Member - Can create and send proposals</SelectItem>\n                        <SelectItem value=\"admin\">Admin - Can also invite and manage members</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n                <DialogFooter>\n                  <Button variant=\"outline\" onClick={() => setShowInviteDialog(false)}>\n                    Cancel\n                  </Button>\n                  <Button onClick={handleInvite} disabled={inviting} data-testid=\"button-send-invite\">\n                    {inviting ? <Loader2 className=\"w-4 h-4 animate-spin mr-2\" /> : null}\n                    Send Invite\n                  </Button>\n                </DialogFooter>\n              </DialogContent>\n            </Dialog>\n          )}\n        </div>\n\n        <div className=\"grid gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Users className=\"w-5 h-5\" />\n                Team Seats\n              </CardTitle>\n              <CardDescription>\n                Your plan includes {companyInfo.company.seatLimit} seats\n                {companyInfo.company.extraSeats > 0 && ` + ${companyInfo.company.extraSeats} extra`}\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex justify-between text-sm mb-2\">\n                    <span className=\"text-muted-foreground\">Seats used</span>\n                    <span className=\"font-medium\">{companyInfo.memberCount} / {companyInfo.totalSeats}</span>\n                  </div>\n                  <div className=\"h-3 bg-slate-100 rounded-full overflow-hidden\">\n                    <div \n                      className=\"h-full bg-primary transition-all\"\n                      style={{ width: `${(companyInfo.memberCount / companyInfo.totalSeats) * 100}%` }}\n                    />\n                  </div>\n                </div>\n                {companyInfo.memberCount >= companyInfo.totalSeats && (\n                  <div className=\"flex items-center gap-2 text-amber-600 text-sm\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    <span>All seats used</span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Users className=\"w-5 h-5\" />\n                Team Members ({members.length})\n              </CardTitle>\n              <CardDescription>\n                People with access to this workspace\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {members.map((member) => (\n                  <div \n                    key={member.id}\n                    className=\"flex items-center justify-between p-3 rounded-lg border bg-slate-50/50\"\n                    data-testid={`member-row-${member.user.id}`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                        {member.user.profileImageUrl ? (\n                          <img \n                            src={member.user.profileImageUrl} \n                            alt={`${member.user.firstName || 'Team member'} profile photo`}\n                            className=\"w-10 h-10 rounded-full object-cover\"\n                          />\n                        ) : (\n                          getRoleIcon(member.role)\n                        )}\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-slate-900\">\n                          {member.user.firstName && member.user.lastName \n                            ? `${member.user.firstName} ${member.user.lastName}`\n                            : member.user.email}\n                        </div>\n                        <div className=\"text-sm text-muted-foreground\">{member.user.email}</div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      {getRoleBadge(member.role)}\n                      {isOwner && member.role !== \"owner\" && member.user.id !== user?.id && (\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\n                          onClick={() => handleRemoveMember(\n                            member.user.id, \n                            member.user.firstName || member.user.email\n                          )}\n                          data-testid={`button-remove-member-${member.user.id}`}\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {invites.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Mail className=\"w-5 h-5\" />\n                  Pending Invitations ({invites.length})\n                </CardTitle>\n                <CardDescription>\n                  Invites that haven't been accepted yet\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {invites.map((invite) => (\n                    <div \n                      key={invite.id}\n                      className=\"flex items-center justify-between p-3 rounded-lg border border-dashed bg-slate-50/30\"\n                      data-testid={`invite-row-${invite.id}`}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center\">\n                          <Mail className=\"w-4 h-4 text-slate-400\" />\n                        </div>\n                        <div>\n                          <div className=\"font-medium text-slate-700\">{invite.email}</div>\n                          <div className=\"text-sm text-muted-foreground\">\n                            Expires {new Date(invite.expiresAt).toLocaleDateString()}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {getRoleBadge(invite.role)}\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          onClick={() => copyInviteLink(invite.token)}\n                          data-testid={`button-copy-invite-${invite.id}`}\n                        >\n                          {copiedLink === invite.token ? (\n                            <Check className=\"w-4 h-4 text-green-500\" />\n                          ) : (\n                            <Copy className=\"w-4 h-4\" />\n                          )}\n                        </Button>\n                        {isOwnerOrAdmin && (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\n                            onClick={() => handleDeleteInvite(invite.id)}\n                            data-testid={`button-delete-invite-${invite.id}`}\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Your Role</CardTitle>\n              <CardDescription>\n                Your permissions in this workspace\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center gap-3\">\n                {getRoleIcon(companyInfo.role)}\n                <div>\n                  <div className=\"font-medium capitalize\">{companyInfo.role}</div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    {companyInfo.role === \"owner\" && \"Full control over workspace, billing, and team management\"}\n                    {companyInfo.role === \"admin\" && \"Can invite members and manage the team\"}\n                    {companyInfo.role === \"member\" && \"Can create and send proposals\"}\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":23729,"size_tokens":null},"client/src/pages/invite.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useRoute, useLocation } from \"wouter\";\nimport Layout from \"@/components/layout\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Building2, \n  UserPlus, \n  Loader2, \n  CheckCircle2,\n  XCircle,\n  LogIn\n} from \"lucide-react\";\n\ninterface InviteInfo {\n  email: string;\n  role: string;\n  companyName: string;\n  expiresAt: string;\n}\n\nexport default function Invite() {\n  const [, params] = useRoute(\"/invite/:token\");\n  const token = params?.token;\n  const { user, isLoading: authLoading } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n\n  const [inviteInfo, setInviteInfo] = useState<InviteInfo | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [accepting, setAccepting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [accepted, setAccepted] = useState(false);\n\n  useEffect(() => {\n    if (token) {\n      fetchInviteInfo();\n    }\n  }, [token]);\n\n  const fetchInviteInfo = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(`/api/invite/${token}`);\n      if (res.ok) {\n        const data = await res.json();\n        setInviteInfo(data);\n      } else {\n        const errorData = await res.json();\n        setError(errorData.message || \"Invalid or expired invite link\");\n      }\n    } catch (err) {\n      setError(\"Failed to load invite information\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAcceptInvite = async () => {\n    if (!user) {\n      toast({\n        title: \"Login required\",\n        description: \"Please log in to accept this invitation.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setAccepting(true);\n    try {\n      const res = await fetch(`/api/invite/${token}/accept`, {\n        method: \"POST\",\n        credentials: \"include\",\n      });\n\n      if (res.ok) {\n        setAccepted(true);\n        toast({\n          title: \"Welcome to the team!\",\n          description: `You've joined ${inviteInfo?.companyName}`,\n        });\n        setTimeout(() => {\n          navigate(\"/crew\");\n        }, 2000);\n      } else {\n        const errorData = await res.json();\n        toast({\n          title: \"Failed to accept invite\",\n          description: errorData.message,\n          variant: \"destructive\",\n        });\n      }\n    } catch (err) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to accept invite. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setAccepting(false);\n    }\n  };\n\n  if (loading || authLoading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (error) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-12 max-w-md\">\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4\">\n                <XCircle className=\"w-8 h-8 text-red-500\" />\n              </div>\n              <CardTitle className=\"text-xl\">Invalid Invitation</CardTitle>\n              <CardDescription className=\"text-base mt-2\">\n                {error}\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Button onClick={() => navigate(\"/\")} data-testid=\"button-go-home\">\n                Go to Homepage\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </Layout>\n    );\n  }\n\n  if (accepted) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-12 max-w-md\">\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4\">\n                <CheckCircle2 className=\"w-8 h-8 text-green-500\" />\n              </div>\n              <CardTitle className=\"text-xl\">You're In!</CardTitle>\n              <CardDescription className=\"text-base mt-2\">\n                You've successfully joined {inviteInfo?.companyName}. Redirecting you to the team page...\n              </CardDescription>\n            </CardHeader>\n          </Card>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"container mx-auto px-4 py-12 max-w-md\">\n        <Card className=\"text-center\">\n          <CardHeader>\n            <div className=\"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4\">\n              <Building2 className=\"w-8 h-8 text-primary\" />\n            </div>\n            <CardTitle className=\"text-xl\">Team Invitation</CardTitle>\n            <CardDescription className=\"text-base mt-2\">\n              You've been invited to join <strong>{inviteInfo?.companyName}</strong> as a{\" \"}\n              <span className=\"capitalize\">{inviteInfo?.role}</span>.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {!user ? (\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-muted-foreground\">\n                  Please log in to accept this invitation.\n                </p>\n                <Button onClick={() => window.location.href = \"/api/login\"} className=\"gap-2\" data-testid=\"button-login-to-accept\">\n                  <LogIn className=\"w-4 h-4\" />\n                  Log In to Accept\n                </Button>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <div className=\"p-3 bg-slate-50 rounded-lg text-sm text-muted-foreground\">\n                  Accepting as <strong>{user.firstName || user.username}</strong>\n                </div>\n                <Button \n                  onClick={handleAcceptInvite} \n                  disabled={accepting} \n                  className=\"gap-2\"\n                  data-testid=\"button-accept-invite\"\n                >\n                  {accepting ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  ) : (\n                    <UserPlus className=\"w-4 h-4\" />\n                  )}\n                  Accept Invitation\n                </Button>\n              </div>\n            )}\n            <p className=\"text-xs text-muted-foreground\">\n              This invitation expires on{\" \"}\n              {inviteInfo?.expiresAt && new Date(inviteInfo.expiresAt).toLocaleDateString()}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":6859,"size_tokens":null},"server/benchmark-data.ts":{"content":"export interface BenchmarkJobType {\n  id: string;\n  name: string;\n  basePriceRange: { low: number; high: number };\n  estimatedDays?: { low: number; high: number };\n}\n\nexport interface BenchmarkTrade {\n  id: string;\n  name: string;\n  jobTypes: BenchmarkJobType[];\n}\n\nexport interface RegionalMultiplier {\n  state: string;\n  abbrev: string;\n  multiplier: number;\n  region: string;\n}\n\nexport const benchmarkTrades: BenchmarkTrade[] = [\n  {\n    id: \"bathroom\",\n    name: \"Bathroom Remodel\",\n    jobTypes: [\n      { id: \"tub-to-shower\", name: \"Tub-to-Shower Conversion\", basePriceRange: { low: 8500, high: 12000 }, estimatedDays: { low: 5, high: 8 } },\n      { id: \"full-gut\", name: \"Full Bathroom Gut & Remodel\", basePriceRange: { low: 18000, high: 28000 }, estimatedDays: { low: 10, high: 18 } },\n      { id: \"half-bath\", name: \"Half Bath / Powder Room Remodel\", basePriceRange: { low: 6500, high: 9500 }, estimatedDays: { low: 4, high: 6 } },\n      { id: \"ada-accessibility\", name: \"ADA/Accessibility Bathroom Remodel\", basePriceRange: { low: 12000, high: 22000 }, estimatedDays: { low: 7, high: 12 } },\n      { id: \"vanity-refresh\", name: \"Vanity & Faucet Replacement\", basePriceRange: { low: 1800, high: 3500 }, estimatedDays: { low: 1, high: 2 } },\n    ]\n  },\n  {\n    id: \"kitchen\",\n    name: \"Kitchen Remodel\",\n    jobTypes: [\n      { id: \"cabinet-refresh\", name: \"Cabinet Refresh & Countertops\", basePriceRange: { low: 8500, high: 15000 }, estimatedDays: { low: 5, high: 8 } },\n      { id: \"full-kitchen\", name: \"Full Kitchen Remodel\", basePriceRange: { low: 35000, high: 65000 }, estimatedDays: { low: 20, high: 35 } },\n      { id: \"appliance-upgrade\", name: \"Appliance Package Install\", basePriceRange: { low: 2500, high: 5000 }, estimatedDays: { low: 1, high: 2 } },\n    ]\n  },\n  {\n    id: \"flooring\",\n    name: \"Flooring\",\n    jobTypes: [\n      { id: \"hardwood\", name: \"Hardwood Floor Install\", basePriceRange: { low: 6000, high: 12000 }, estimatedDays: { low: 3, high: 6 } },\n      { id: \"tile-floor\", name: \"Tile Floor Install\", basePriceRange: { low: 4000, high: 8000 }, estimatedDays: { low: 2, high: 4 } },\n      { id: \"lvp\", name: \"LVP/Laminate Install\", basePriceRange: { low: 3000, high: 6000 }, estimatedDays: { low: 2, high: 3 } },\n      { id: \"carpet\", name: \"Carpet Install\", basePriceRange: { low: 2000, high: 4500 }, estimatedDays: { low: 1, high: 2 } },\n    ]\n  },\n  {\n    id: \"roofing\",\n    name: \"Roofing\",\n    jobTypes: [\n      { id: \"full-roof\", name: \"Full Roof Replacement\", basePriceRange: { low: 12000, high: 25000 }, estimatedDays: { low: 3, high: 7 } },\n      { id: \"roof-repair\", name: \"Roof Repair\", basePriceRange: { low: 500, high: 2500 }, estimatedDays: { low: 1, high: 2 } },\n      { id: \"gutter-install\", name: \"Gutter Install/Replace\", basePriceRange: { low: 1200, high: 3000 }, estimatedDays: { low: 1, high: 2 } },\n    ]\n  },\n  {\n    id: \"painting\",\n    name: \"Painting\",\n    jobTypes: [\n      { id: \"interior-whole\", name: \"Whole House Interior\", basePriceRange: { low: 4000, high: 8000 }, estimatedDays: { low: 4, high: 8 } },\n      { id: \"interior-room\", name: \"Single Room\", basePriceRange: { low: 400, high: 900 }, estimatedDays: { low: 1, high: 2 } },\n      { id: \"exterior\", name: \"Exterior House\", basePriceRange: { low: 5000, high: 12000 }, estimatedDays: { low: 4, high: 8 } },\n      { id: \"cabinet-painting\", name: \"Cabinet Painting\", basePriceRange: { low: 3000, high: 6000 }, estimatedDays: { low: 3, high: 6 } },\n    ]\n  },\n  {\n    id: \"plumbing\",\n    name: \"Plumbing\",\n    jobTypes: [\n      { id: \"water-heater\", name: \"Water Heater Replace\", basePriceRange: { low: 1500, high: 3500 }, estimatedDays: { low: 1, high: 1 } },\n      { id: \"repipe\", name: \"Whole House Repipe\", basePriceRange: { low: 8000, high: 15000 }, estimatedDays: { low: 3, high: 6 } },\n      { id: \"drain-repair\", name: \"Drain Line Repair\", basePriceRange: { low: 500, high: 2000 }, estimatedDays: { low: 1, high: 2 } },\n    ]\n  },\n  {\n    id: \"electrical\",\n    name: \"Electrical\",\n    jobTypes: [\n      { id: \"panel-upgrade\", name: \"Panel Upgrade\", basePriceRange: { low: 2000, high: 4500 }, estimatedDays: { low: 1, high: 2 } },\n      { id: \"rewire\", name: \"Whole House Rewire\", basePriceRange: { low: 10000, high: 20000 }, estimatedDays: { low: 4, high: 8 } },\n      { id: \"outlet-install\", name: \"Outlet/Switch Install\", basePriceRange: { low: 150, high: 400 }, estimatedDays: { low: 1, high: 1 } },\n    ]\n  },\n  {\n    id: \"hvac\",\n    name: \"HVAC\",\n    jobTypes: [\n      { id: \"ac-install\", name: \"AC Unit Install\", basePriceRange: { low: 5000, high: 12000 }, estimatedDays: { low: 1, high: 3 } },\n      { id: \"furnace\", name: \"Furnace Replace\", basePriceRange: { low: 3500, high: 8000 }, estimatedDays: { low: 1, high: 2 } },\n      { id: \"ductwork\", name: \"Ductwork Install/Repair\", basePriceRange: { low: 2000, high: 6000 }, estimatedDays: { low: 2, high: 4 } },\n    ]\n  },\n  {\n    id: \"landscaping\",\n    name: \"Landscaping\",\n    jobTypes: [\n      { id: \"sod-install\", name: \"Sod Installation\", basePriceRange: { low: 2000, high: 5000 }, estimatedDays: { low: 1, high: 3 } },\n      { id: \"irrigation\", name: \"Irrigation System\", basePriceRange: { low: 3000, high: 7000 }, estimatedDays: { low: 2, high: 4 } },\n      { id: \"hardscape\", name: \"Patio/Walkway\", basePriceRange: { low: 4000, high: 10000 }, estimatedDays: { low: 3, high: 7 } },\n    ]\n  },\n  {\n    id: \"fencing\",\n    name: \"Fencing\",\n    jobTypes: [\n      { id: \"wood-fence\", name: \"Wood Fence Install\", basePriceRange: { low: 3000, high: 8000 }, estimatedDays: { low: 2, high: 4 } },\n      { id: \"vinyl-fence\", name: \"Vinyl Fence Install\", basePriceRange: { low: 4000, high: 10000 }, estimatedDays: { low: 2, high: 4 } },\n      { id: \"chain-link\", name: \"Chain Link Fence\", basePriceRange: { low: 1500, high: 4000 }, estimatedDays: { low: 1, high: 3 } },\n    ]\n  },\n];\n\nexport const regionalMultipliers: RegionalMultiplier[] = [\n  { state: \"Alabama\", abbrev: \"AL\", multiplier: 0.85, region: \"Southeast\" },\n  { state: \"Alaska\", abbrev: \"AK\", multiplier: 1.25, region: \"Pacific\" },\n  { state: \"Arizona\", abbrev: \"AZ\", multiplier: 0.95, region: \"Southwest\" },\n  { state: \"Arkansas\", abbrev: \"AR\", multiplier: 0.82, region: \"South\" },\n  { state: \"California\", abbrev: \"CA\", multiplier: 1.35, region: \"Pacific\" },\n  { state: \"Colorado\", abbrev: \"CO\", multiplier: 1.05, region: \"Mountain\" },\n  { state: \"Connecticut\", abbrev: \"CT\", multiplier: 1.20, region: \"Northeast\" },\n  { state: \"Delaware\", abbrev: \"DE\", multiplier: 1.02, region: \"Mid-Atlantic\" },\n  { state: \"Florida\", abbrev: \"FL\", multiplier: 1.00, region: \"Southeast\" },\n  { state: \"Georgia\", abbrev: \"GA\", multiplier: 0.92, region: \"Southeast\" },\n  { state: \"Hawaii\", abbrev: \"HI\", multiplier: 1.45, region: \"Pacific\" },\n  { state: \"Idaho\", abbrev: \"ID\", multiplier: 0.90, region: \"Mountain\" },\n  { state: \"Illinois\", abbrev: \"IL\", multiplier: 1.00, region: \"Midwest\" },\n  { state: \"Indiana\", abbrev: \"IN\", multiplier: 0.88, region: \"Midwest\" },\n  { state: \"Iowa\", abbrev: \"IA\", multiplier: 0.85, region: \"Midwest\" },\n  { state: \"Kansas\", abbrev: \"KS\", multiplier: 0.85, region: \"Midwest\" },\n  { state: \"Kentucky\", abbrev: \"KY\", multiplier: 0.85, region: \"South\" },\n  { state: \"Louisiana\", abbrev: \"LA\", multiplier: 0.88, region: \"South\" },\n  { state: \"Maine\", abbrev: \"ME\", multiplier: 1.00, region: \"Northeast\" },\n  { state: \"Maryland\", abbrev: \"MD\", multiplier: 1.15, region: \"Mid-Atlantic\" },\n  { state: \"Massachusetts\", abbrev: \"MA\", multiplier: 1.30, region: \"Northeast\" },\n  { state: \"Michigan\", abbrev: \"MI\", multiplier: 0.90, region: \"Midwest\" },\n  { state: \"Minnesota\", abbrev: \"MN\", multiplier: 0.98, region: \"Midwest\" },\n  { state: \"Mississippi\", abbrev: \"MS\", multiplier: 0.80, region: \"South\" },\n  { state: \"Missouri\", abbrev: \"MO\", multiplier: 0.87, region: \"Midwest\" },\n  { state: \"Montana\", abbrev: \"MT\", multiplier: 0.92, region: \"Mountain\" },\n  { state: \"Nebraska\", abbrev: \"NE\", multiplier: 0.88, region: \"Midwest\" },\n  { state: \"Nevada\", abbrev: \"NV\", multiplier: 1.02, region: \"Mountain\" },\n  { state: \"New Hampshire\", abbrev: \"NH\", multiplier: 1.08, region: \"Northeast\" },\n  { state: \"New Jersey\", abbrev: \"NJ\", multiplier: 1.22, region: \"Mid-Atlantic\" },\n  { state: \"New Mexico\", abbrev: \"NM\", multiplier: 0.88, region: \"Southwest\" },\n  { state: \"New York\", abbrev: \"NY\", multiplier: 1.30, region: \"Northeast\" },\n  { state: \"North Carolina\", abbrev: \"NC\", multiplier: 0.92, region: \"Southeast\" },\n  { state: \"North Dakota\", abbrev: \"ND\", multiplier: 0.90, region: \"Midwest\" },\n  { state: \"Ohio\", abbrev: \"OH\", multiplier: 0.88, region: \"Midwest\" },\n  { state: \"Oklahoma\", abbrev: \"OK\", multiplier: 0.85, region: \"South\" },\n  { state: \"Oregon\", abbrev: \"OR\", multiplier: 1.08, region: \"Pacific\" },\n  { state: \"Pennsylvania\", abbrev: \"PA\", multiplier: 0.98, region: \"Mid-Atlantic\" },\n  { state: \"Rhode Island\", abbrev: \"RI\", multiplier: 1.10, region: \"Northeast\" },\n  { state: \"South Carolina\", abbrev: \"SC\", multiplier: 0.88, region: \"Southeast\" },\n  { state: \"South Dakota\", abbrev: \"SD\", multiplier: 0.85, region: \"Midwest\" },\n  { state: \"Tennessee\", abbrev: \"TN\", multiplier: 0.88, region: \"South\" },\n  { state: \"Texas\", abbrev: \"TX\", multiplier: 0.92, region: \"South\" },\n  { state: \"Utah\", abbrev: \"UT\", multiplier: 0.95, region: \"Mountain\" },\n  { state: \"Vermont\", abbrev: \"VT\", multiplier: 1.05, region: \"Northeast\" },\n  { state: \"Virginia\", abbrev: \"VA\", multiplier: 1.02, region: \"Mid-Atlantic\" },\n  { state: \"Washington\", abbrev: \"WA\", multiplier: 1.12, region: \"Pacific\" },\n  { state: \"West Virginia\", abbrev: \"WV\", multiplier: 0.82, region: \"South\" },\n  { state: \"Wisconsin\", abbrev: \"WI\", multiplier: 0.92, region: \"Midwest\" },\n  { state: \"Wyoming\", abbrev: \"WY\", multiplier: 0.92, region: \"Mountain\" },\n  { state: \"District of Columbia\", abbrev: \"DC\", multiplier: 1.40, region: \"Mid-Atlantic\" },\n];\n","path":null,"size_bytes":9885,"size_tokens":null},"client/src/pages/pricing-insights.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport Layout from \"@/components/layout\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Loader2, TrendingUp, MapPin, Calculator, Target, Lightbulb, DollarSign, BarChart3, ChevronRight, AlertCircle, CheckCircle2, Info } from \"lucide-react\";\nimport { templates } from \"@/lib/proposal-data\";\nimport { regionalMultipliers } from \"@/lib/regional-pricing\";\n\nconst areaMultipliers: Record<string, { label: string; multiplier: number }> = {\n  \"master-bathroom\": { label: \"Master Bathroom\", multiplier: 1.25 },\n  \"bathroom\": { label: \"Standard Bathroom\", multiplier: 1.0 },\n  \"guest-bathroom\": { label: \"Guest Bathroom\", multiplier: 0.95 },\n  \"half-bath\": { label: \"Half Bath\", multiplier: 0.7 },\n  \"kitchen\": { label: \"Kitchen\", multiplier: 1.0 },\n  \"kitchenette\": { label: \"Kitchenette\", multiplier: 0.6 },\n  \"outdoor-kitchen\": { label: \"Outdoor Kitchen\", multiplier: 1.4 },\n  \"living-room\": { label: \"Living Room\", multiplier: 1.0 },\n  \"dining-room\": { label: \"Dining Room\", multiplier: 0.85 },\n  \"bedroom\": { label: \"Bedroom\", multiplier: 0.9 },\n  \"master-bedroom\": { label: \"Master Bedroom\", multiplier: 1.15 },\n  \"hallway\": { label: \"Hallway\", multiplier: 0.5 },\n  \"basement\": { label: \"Basement\", multiplier: 1.5 },\n  \"whole-house\": { label: \"Whole House\", multiplier: 3.5 },\n  \"front-yard\": { label: \"Front Yard\", multiplier: 1.0 },\n  \"backyard\": { label: \"Backyard\", multiplier: 1.1 },\n  \"patio\": { label: \"Patio\", multiplier: 0.8 },\n  \"deck\": { label: \"Deck\", multiplier: 1.0 },\n  \"driveway\": { label: \"Driveway\", multiplier: 1.2 },\n  \"garage\": { label: \"Garage\", multiplier: 0.9 },\n  \"main-roof\": { label: \"Main Roof\", multiplier: 1.0 },\n  \"full-roof\": { label: \"Full Roof\", multiplier: 1.0 },\n};\n\ninterface PricingSummary {\n  totalProposals: number;\n  acceptedCount: number;\n  acceptanceRate: number;\n  avgPriceLow: number;\n  avgPriceHigh: number;\n  statusBreakdown: Record<string, number>;\n  tradeBreakdown: Record<string, {\n    count: number;\n    avgPriceLow: number;\n    avgPriceHigh: number;\n  }>;\n}\n\ninterface Benchmarks {\n  trades: Array<{\n    id: string;\n    name: string;\n    jobTypes: Array<{\n      id: string;\n      name: string;\n      basePriceRange: { low: number; high: number };\n      estimatedDays?: { low: number; high: number };\n    }>;\n  }>;\n  regions: Array<{\n    state: string;\n    abbrev: string;\n    multiplier: number;\n    region: string;\n  }>;\n}\n\nexport default function PricingInsights() {\n  const { user, isLoading: authLoading } = useAuth();\n  const [, navigate] = useLocation();\n  \n  const [exampleBasePrice, setExampleBasePrice] = useState(5000);\n  const [exampleJobSize, setExampleJobSize] = useState(1);\n  const [exampleArea, setExampleArea] = useState(\"bathroom\");\n  const [exampleState, setExampleState] = useState(\"FL\");\n  const [exampleMultiplier, setExampleMultiplier] = useState(100);\n\n  const { data: pricingSummary, isLoading: summaryLoading } = useQuery<PricingSummary>({\n    queryKey: [\"/api/analytics/pricing-summary\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/analytics/pricing-summary\", { credentials: \"include\" });\n      if (!res.ok) throw new Error(\"Failed to fetch pricing summary\");\n      return res.json();\n    },\n    enabled: !!user,\n  });\n\n  const { data: benchmarks, isLoading: benchmarksLoading } = useQuery<Benchmarks>({\n    queryKey: [\"/api/analytics/benchmarks\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/analytics/benchmarks\");\n      if (!res.ok) throw new Error(\"Failed to fetch benchmarks\");\n      return res.json();\n    },\n  });\n\n  const regions = [...new Set(regionalMultipliers.map(r => r.region))].sort();\n  const statesByRegion = regions.reduce((acc, region) => {\n    acc[region] = regionalMultipliers.filter(r => r.region === region).sort((a, b) => a.state.localeCompare(b.state));\n    return acc;\n  }, {} as Record<string, typeof regionalMultipliers>);\n\n  const selectedStateData = regionalMultipliers.find(r => r.abbrev === exampleState);\n  const areaData = areaMultipliers[exampleArea];\n  \n  const calculatedPrice = {\n    low: Math.round(exampleBasePrice * exampleJobSize * (areaData?.multiplier || 1) * (selectedStateData?.multiplier || 1) * (exampleMultiplier / 100)),\n    high: Math.round(exampleBasePrice * 1.4 * exampleJobSize * (areaData?.multiplier || 1) * (selectedStateData?.multiplier || 1) * (exampleMultiplier / 100)),\n  };\n\n  const getAcceptanceRateColor = (rate: number) => {\n    if (rate >= 70) return \"text-green-600\";\n    if (rate >= 50) return \"text-yellow-600\";\n    return \"text-red-600\";\n  };\n\n  const getAcceptanceRateBadge = (rate: number) => {\n    if (rate >= 70) return { variant: \"default\" as const, text: \"Excellent\" };\n    if (rate >= 50) return { variant: \"secondary\" as const, text: \"Good\" };\n    return { variant: \"destructive\" as const, text: \"Needs Improvement\" };\n  };\n\n  const generateRecommendations = () => {\n    const recommendations: Array<{ type: \"success\" | \"warning\" | \"info\"; message: string }> = [];\n    \n    if (!pricingSummary || pricingSummary.totalProposals === 0) {\n      recommendations.push({\n        type: \"info\",\n        message: \"Start creating proposals to get personalized pricing recommendations based on your performance.\"\n      });\n      return recommendations;\n    }\n\n    if (pricingSummary.acceptanceRate < 50) {\n      recommendations.push({\n        type: \"warning\",\n        message: \"Your acceptance rate is below 50%. Consider reviewing your pricing strategy or adjusting your price multiplier.\"\n      });\n    } else if (pricingSummary.acceptanceRate >= 70) {\n      recommendations.push({\n        type: \"success\",\n        message: \"Great job! Your acceptance rate is strong. You might have room to increase prices slightly.\"\n      });\n    }\n\n    if (user?.priceMultiplier === 100) {\n      recommendations.push({\n        type: \"info\",\n        message: \"You're using the default price multiplier. Consider adjusting it based on your experience, overhead costs, and local market conditions.\"\n      });\n    } else if (user?.priceMultiplier && user.priceMultiplier > 130) {\n      recommendations.push({\n        type: \"warning\",\n        message: \"Your price multiplier is set high. If you're seeing low acceptance rates, consider reducing it.\"\n      });\n    }\n\n    const avgBenchmark = 15000;\n    const userAvg = (pricingSummary.avgPriceLow + pricingSummary.avgPriceHigh) / 2;\n    \n    if (userAvg > avgBenchmark * 1.3) {\n      recommendations.push({\n        type: \"info\",\n        message: \"Your average proposal prices are above typical benchmarks. This is fine if targeting premium clients.\"\n      });\n    } else if (userAvg < avgBenchmark * 0.7) {\n      recommendations.push({\n        type: \"warning\",\n        message: \"Your average prices are below benchmarks. Ensure you're not undervaluing your work.\"\n      });\n    }\n\n    if (recommendations.length === 0) {\n      recommendations.push({\n        type: \"success\",\n        message: \"Your pricing strategy looks balanced. Keep monitoring your acceptance rate for optimization opportunities.\"\n      });\n    }\n\n    return recommendations;\n  };\n\n  if (authLoading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  const hasAccess = user?.subscriptionPlan === 'pro' || user?.subscriptionPlan === 'crew';\n\n  if (!hasAccess) {\n    return (\n      <Layout>\n        <div className=\"bg-slate-50 min-h-screen pb-12\">\n          <div className=\"container mx-auto px-4 py-16\">\n            <div className=\"max-w-md mx-auto text-center\">\n              <div className=\"h-16 w-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <TrendingUp className=\"w-8 h-8 text-primary\" />\n              </div>\n              <h1 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\" data-testid=\"text-access-denied\">\n                Pricing Insights is a Pro Feature\n              </h1>\n              <p className=\"text-slate-600 mb-8\">\n                Unlock powerful pricing analytics, industry benchmarks, and personalized recommendations to optimize your proposals and win more jobs.\n              </p>\n              <a\n                href=\"/#pricing\"\n                className=\"inline-block bg-primary text-white px-6 py-3 rounded-md font-semibold hover:bg-primary/90 transition-colors\"\n                data-testid=\"link-upgrade\"\n              >\n                Upgrade to Pro\n              </a>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen pb-12\">\n        <div className=\"bg-white border-b border-slate-200\">\n          <div className=\"container mx-auto px-4 py-8\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 bg-primary/10 rounded-lg flex items-center justify-center\">\n                <TrendingUp className=\"w-5 h-5 text-primary\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-heading font-bold text-slate-900\" data-testid=\"text-page-title\">Pricing Insights</h1>\n                <p className=\"text-slate-500 text-sm\">Understand how prices are calculated and optimize your proposals</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"container mx-auto px-4 py-8\">\n          <Tabs defaultValue=\"formula\" className=\"space-y-6\">\n            <TabsList className=\"grid w-full grid-cols-2 lg:grid-cols-5 gap-2 h-auto p-1\" data-testid=\"tabs-pricing-insights\">\n              <TabsTrigger value=\"formula\" className=\"flex items-center gap-2 py-2\" data-testid=\"tab-formula\">\n                <Calculator className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Formula</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"regional\" className=\"flex items-center gap-2 py-2\" data-testid=\"tab-regional\">\n                <MapPin className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Regional</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"benchmarks\" className=\"flex items-center gap-2 py-2\" data-testid=\"tab-benchmarks\">\n                <BarChart3 className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Benchmarks</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"performance\" className=\"flex items-center gap-2 py-2\" data-testid=\"tab-performance\">\n                <Target className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Performance</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"recommendations\" className=\"flex items-center gap-2 py-2\" data-testid=\"tab-recommendations\">\n                <Lightbulb className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Tips</span>\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"formula\" className=\"space-y-6\">\n              <Card className=\"border-none shadow-sm\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Calculator className=\"w-5 h-5\" />\n                    How Prices Are Calculated\n                  </CardTitle>\n                  <CardDescription>\n                    Every proposal price is calculated using this formula. Adjust the sliders to see how each factor affects the final price.\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-8\">\n                  <div className=\"bg-slate-100 rounded-lg p-6 text-center\">\n                    <div className=\"flex flex-wrap items-center justify-center gap-2 text-lg font-medium\">\n                      <span className=\"bg-blue-100 text-blue-700 px-3 py-1 rounded\">Base Price</span>\n                      <span className=\"text-slate-400\">Ã—</span>\n                      <span className=\"bg-green-100 text-green-700 px-3 py-1 rounded\">Job Size</span>\n                      <span className=\"text-slate-400\">Ã—</span>\n                      <span className=\"bg-purple-100 text-purple-700 px-3 py-1 rounded\">Area</span>\n                      <span className=\"text-slate-400\">Ã—</span>\n                      <span className=\"bg-orange-100 text-orange-700 px-3 py-1 rounded\">Region</span>\n                      <span className=\"text-slate-400\">Ã—</span>\n                      <span className=\"bg-pink-100 text-pink-700 px-3 py-1 rounded\">Your Multiplier</span>\n                    </div>\n                  </div>\n\n                  <div className=\"grid gap-6 md:grid-cols-2\">\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"text-sm font-medium text-slate-700\">Base Price: ${exampleBasePrice.toLocaleString()}</label>\n                        <Slider\n                          value={[exampleBasePrice]}\n                          onValueChange={(v) => setExampleBasePrice(v[0])}\n                          min={500}\n                          max={50000}\n                          step={500}\n                          className=\"mt-2\"\n                          data-testid=\"slider-base-price\"\n                        />\n                        <p className=\"text-xs text-slate-500 mt-1\">Starting price for the job type</p>\n                      </div>\n\n                      <div>\n                        <label className=\"text-sm font-medium text-slate-700\">Job Size: {exampleJobSize}x</label>\n                        <Slider\n                          value={[exampleJobSize]}\n                          onValueChange={(v) => setExampleJobSize(v[0])}\n                          min={1}\n                          max={5}\n                          step={1}\n                          className=\"mt-2\"\n                          data-testid=\"slider-job-size\"\n                        />\n                        <p className=\"text-xs text-slate-500 mt-1\">Complexity multiplier (1-5)</p>\n                      </div>\n\n                      <div>\n                        <label className=\"text-sm font-medium text-slate-700\">Area Type</label>\n                        <Select value={exampleArea} onValueChange={setExampleArea}>\n                          <SelectTrigger className=\"mt-2\" data-testid=\"select-area-type\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {Object.entries(areaMultipliers).slice(0, 15).map(([key, { label, multiplier }]) => (\n                              <SelectItem key={key} value={key}>\n                                {label} ({multiplier}x)\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <p className=\"text-xs text-slate-500 mt-1\">Different areas have different pricing</p>\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"text-sm font-medium text-slate-700\">State/Region</label>\n                        <Select value={exampleState} onValueChange={setExampleState}>\n                          <SelectTrigger className=\"mt-2\" data-testid=\"select-state\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {regionalMultipliers.map((r) => (\n                              <SelectItem key={r.abbrev} value={r.abbrev}>\n                                {r.state} ({r.multiplier}x)\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <p className=\"text-xs text-slate-500 mt-1\">Regional cost of living adjustment</p>\n                      </div>\n\n                      <div>\n                        <label className=\"text-sm font-medium text-slate-700\">Your Multiplier: {exampleMultiplier}%</label>\n                        <Slider\n                          value={[exampleMultiplier]}\n                          onValueChange={(v) => setExampleMultiplier(v[0])}\n                          min={25}\n                          max={200}\n                          step={5}\n                          className=\"mt-2\"\n                          data-testid=\"slider-your-multiplier\"\n                        />\n                        <p className=\"text-xs text-slate-500 mt-1\">Your custom adjustment (set in Settings)</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-primary/5 border border-primary/20 rounded-lg p-6 text-center\">\n                    <p className=\"text-sm text-slate-600 mb-2\">Estimated Price Range</p>\n                    <p className=\"text-3xl font-bold text-primary\" data-testid=\"text-calculated-price\">\n                      ${calculatedPrice.low.toLocaleString()} - ${calculatedPrice.high.toLocaleString()}\n                    </p>\n                    <p className=\"text-xs text-slate-500 mt-2\">\n                      ${exampleBasePrice.toLocaleString()} Ã— {exampleJobSize} Ã— {areaData?.multiplier || 1} Ã— {selectedStateData?.multiplier || 1} Ã— {exampleMultiplier/100}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"regional\" className=\"space-y-6\">\n              <Card className=\"border-none shadow-sm\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <MapPin className=\"w-5 h-5\" />\n                    Regional Pricing Multipliers\n                  </CardTitle>\n                  <CardDescription>\n                    Prices vary by region based on cost of living and local market conditions. These multipliers are automatically applied based on the project address.\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\n                    {regions.map((region) => (\n                      <div key={region} className=\"space-y-3\">\n                        <h3 className=\"font-semibold text-slate-900 border-b pb-2\">{region}</h3>\n                        <div className=\"space-y-2\">\n                          {statesByRegion[region].map((state) => (\n                            <div\n                              key={state.abbrev}\n                              className=\"flex items-center justify-between text-sm\"\n                              data-testid={`row-state-${state.abbrev}`}\n                            >\n                              <span className=\"text-slate-600\">{state.state}</span>\n                              <Badge\n                                variant={state.multiplier >= 1.1 ? \"default\" : state.multiplier <= 0.9 ? \"secondary\" : \"outline\"}\n                                className=\"font-mono\"\n                              >\n                                {state.multiplier.toFixed(2)}x\n                              </Badge>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"mt-8 bg-slate-50 rounded-lg p-4\">\n                    <h4 className=\"font-medium text-slate-900 mb-2\">Understanding Multipliers</h4>\n                    <div className=\"grid gap-2 text-sm text-slate-600\">\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"default\">1.10+</Badge>\n                        <span>Higher cost of living areas (CA, NY, MA, etc.)</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"outline\">0.91-1.09</Badge>\n                        <span>Average cost markets</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"secondary\">0.90 or less</Badge>\n                        <span>Lower cost of living areas</span>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"benchmarks\" className=\"space-y-6\">\n              <Card className=\"border-none shadow-sm\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <BarChart3 className=\"w-5 h-5\" />\n                    Industry Benchmarks\n                  </CardTitle>\n                  <CardDescription>\n                    Base price ranges for different trades and job types. These are starting points before applying multipliers.\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {benchmarksLoading ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                      <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n                    </div>\n                  ) : (\n                    <div className=\"space-y-6\">\n                      {templates.map((template) => (\n                        <div key={template.id} className=\"border rounded-lg p-4\" data-testid={`card-trade-${template.id}`}>\n                          <h3 className=\"font-semibold text-lg text-slate-900 mb-4 flex items-center gap-2\">\n                            <DollarSign className=\"w-5 h-5 text-primary\" />\n                            {template.trade}\n                          </h3>\n                          <div className=\"grid gap-3 sm:grid-cols-2 lg:grid-cols-3\">\n                            {template.jobTypes.map((jobType) => (\n                              <div\n                                key={jobType.id}\n                                className=\"bg-slate-50 rounded-lg p-3\"\n                                data-testid={`card-jobtype-${jobType.id}`}\n                              >\n                                <p className=\"font-medium text-sm text-slate-900\">{jobType.name}</p>\n                                <p className=\"text-lg font-semibold text-primary mt-1\">\n                                  ${jobType.basePriceRange.low.toLocaleString()} - ${jobType.basePriceRange.high.toLocaleString()}\n                                </p>\n                                {jobType.estimatedDays && (\n                                  <p className=\"text-xs text-slate-500 mt-1\">\n                                    {jobType.estimatedDays.low}-{jobType.estimatedDays.high} days typical\n                                  </p>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"performance\" className=\"space-y-6\">\n              {!user ? (\n                <Card className=\"border-none shadow-sm\">\n                  <CardContent className=\"py-12 text-center\">\n                    <Target className=\"w-12 h-12 text-slate-300 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">Sign In to View Your Performance</h3>\n                    <p className=\"text-slate-500 mb-6\">Track your proposal acceptance rates and compare your pricing to benchmarks.</p>\n                    <a href=\"/api/login\" className=\"bg-primary text-white px-6 py-3 rounded-md font-semibold\" data-testid=\"link-signin\">\n                      Sign In with Replit\n                    </a>\n                  </CardContent>\n                </Card>\n              ) : summaryLoading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n                </div>\n              ) : !pricingSummary || pricingSummary.totalProposals === 0 ? (\n                <Card className=\"border-none shadow-sm\">\n                  <CardContent className=\"py-12 text-center\">\n                    <BarChart3 className=\"w-12 h-12 text-slate-300 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">No Proposals Yet</h3>\n                    <p className=\"text-slate-500 mb-6\">Create your first proposal to start tracking your performance metrics.</p>\n                    <a href=\"/app\" className=\"bg-primary text-white px-6 py-3 rounded-md font-semibold\" data-testid=\"link-create-proposal\">\n                      Create a Proposal\n                    </a>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"grid gap-6 md:grid-cols-2\">\n                  <Card className=\"border-none shadow-sm\">\n                    <CardHeader>\n                      <CardTitle>Acceptance Rate</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-center\">\n                        <p className={`text-5xl font-bold ${getAcceptanceRateColor(pricingSummary.acceptanceRate)}`} data-testid=\"text-acceptance-rate\">\n                          {pricingSummary.acceptanceRate.toFixed(1)}%\n                        </p>\n                        <Badge className=\"mt-2\" variant={getAcceptanceRateBadge(pricingSummary.acceptanceRate).variant}>\n                          {getAcceptanceRateBadge(pricingSummary.acceptanceRate).text}\n                        </Badge>\n                        <Progress value={pricingSummary.acceptanceRate} className=\"mt-4\" />\n                        <p className=\"text-sm text-slate-500 mt-2\">\n                          {pricingSummary.acceptedCount} of {pricingSummary.totalProposals} proposals accepted\n                        </p>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"border-none shadow-sm\">\n                    <CardHeader>\n                      <CardTitle>Average Price Range</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-center\">\n                        <p className=\"text-3xl font-bold text-primary\" data-testid=\"text-avg-price\">\n                          ${pricingSummary.avgPriceLow.toLocaleString()} - ${pricingSummary.avgPriceHigh.toLocaleString()}\n                        </p>\n                        <p className=\"text-sm text-slate-500 mt-2\">\n                          Based on {pricingSummary.totalProposals} proposals\n                        </p>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"border-none shadow-sm\">\n                    <CardHeader>\n                      <CardTitle>Status Breakdown</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        {Object.entries(pricingSummary.statusBreakdown).map(([status, count]) => (\n                          <div key={status} className=\"flex items-center justify-between\">\n                            <span className=\"capitalize text-slate-600\">{status}</span>\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"w-32 bg-slate-100 rounded-full h-2\">\n                                <div\n                                  className=\"bg-primary h-2 rounded-full\"\n                                  style={{ width: `${(count / pricingSummary.totalProposals) * 100}%` }}\n                                />\n                              </div>\n                              <span className=\"font-medium w-8 text-right\">{count}</span>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"border-none shadow-sm\">\n                    <CardHeader>\n                      <CardTitle>Proposals by Trade</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-4\">\n                        {Object.entries(pricingSummary.tradeBreakdown)\n                          .sort((a, b) => b[1].count - a[1].count)\n                          .slice(0, 6)\n                          .map(([trade, data]) => (\n                            <div key={trade} className=\"space-y-1\">\n                              <div className=\"flex items-center justify-between\">\n                                <span className=\"text-slate-700 font-medium capitalize\">{trade.replace(/-/g, \" \")}</span>\n                                <Badge variant=\"secondary\">{data.count} proposals</Badge>\n                              </div>\n                              <div className=\"flex items-center justify-between text-sm text-slate-500\">\n                                <span>Avg. Price Range</span>\n                                <span>${Math.round(data.avgPriceLow).toLocaleString()} - ${Math.round(data.avgPriceHigh).toLocaleString()}</span>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n              )}\n            </TabsContent>\n\n            <TabsContent value=\"recommendations\" className=\"space-y-6\">\n              <Card className=\"border-none shadow-sm\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Lightbulb className=\"w-5 h-5\" />\n                    Pricing Recommendations\n                  </CardTitle>\n                  <CardDescription>\n                    Personalized tips based on your proposal history and settings.\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {generateRecommendations().map((rec, idx) => (\n                      <div\n                        key={idx}\n                        className={`flex items-start gap-3 p-4 rounded-lg ${\n                          rec.type === \"success\" ? \"bg-green-50 border border-green-200\" :\n                          rec.type === \"warning\" ? \"bg-yellow-50 border border-yellow-200\" :\n                          \"bg-blue-50 border border-blue-200\"\n                        }`}\n                        data-testid={`recommendation-${idx}`}\n                      >\n                        {rec.type === \"success\" ? (\n                          <CheckCircle2 className=\"w-5 h-5 text-green-600 shrink-0 mt-0.5\" />\n                        ) : rec.type === \"warning\" ? (\n                          <AlertCircle className=\"w-5 h-5 text-yellow-600 shrink-0 mt-0.5\" />\n                        ) : (\n                          <Info className=\"w-5 h-5 text-blue-600 shrink-0 mt-0.5\" />\n                        )}\n                        <p className={`text-sm ${\n                          rec.type === \"success\" ? \"text-green-800\" :\n                          rec.type === \"warning\" ? \"text-yellow-800\" :\n                          \"text-blue-800\"\n                        }`}>\n                          {rec.message}\n                        </p>\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"mt-8 border-t pt-6\">\n                    <h4 className=\"font-semibold text-slate-900 mb-4\">Quick Actions</h4>\n                    <div className=\"grid gap-3 sm:grid-cols-2\">\n                      <a\n                        href=\"/settings\"\n                        className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors\"\n                        data-testid=\"link-adjust-multiplier\"\n                      >\n                        <span className=\"font-medium\">Adjust Price Multiplier</span>\n                        <ChevronRight className=\"w-5 h-5 text-slate-400\" />\n                      </a>\n                      <a\n                        href=\"/app\"\n                        className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors\"\n                        data-testid=\"link-new-proposal\"\n                      >\n                        <span className=\"font-medium\">Create New Proposal</span>\n                        <ChevronRight className=\"w-5 h-5 text-slate-400\" />\n                      </a>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":33748,"size_tokens":null},"client/src/pages/search-console.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport Layout from \"@/components/layout\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Globe, \n  Search, \n  FileText, \n  TrendingUp, \n  MousePointerClick, \n  Eye, \n  BarChart3,\n  RefreshCw,\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  Loader2,\n  Link as LinkIcon\n} from \"lucide-react\";\n\ninterface Site {\n  siteUrl: string;\n  permissionLevel: string;\n}\n\ninterface AnalyticsRow {\n  keys: string[];\n  clicks: number;\n  impressions: number;\n  ctr: number;\n  position: number;\n}\n\ninterface Sitemap {\n  path: string;\n  lastSubmitted?: string;\n  isPending?: boolean;\n  isSitemapsIndex?: boolean;\n  lastDownloaded?: string;\n  warnings?: string;\n  errors?: string;\n}\n\nexport default function SearchConsolePage() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedSite, setSelectedSite] = useState<string>(\"\");\n  const [inspectUrl, setInspectUrl] = useState(\"\");\n  const [newSitemapUrl, setNewSitemapUrl] = useState(\"\");\n  const [dateRange, setDateRange] = useState(\"7\");\n\n  const { data: user, isLoading: userLoading } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/auth/user\");\n      if (!res.ok) return null;\n      return res.json();\n    },\n  });\n\n  const { data: connectionTest, isLoading: testLoading } = useQuery({\n    queryKey: [\"/api/search-console/test\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/search-console/test\");\n      if (!res.ok) throw new Error(\"Failed to test connection\");\n      return res.json();\n    },\n    enabled: user?.subscriptionPlan === 'crew',\n    retry: false,\n  });\n\n  const { data: sites, isLoading: sitesLoading } = useQuery<Site[]>({\n    queryKey: [\"/api/search-console/sites\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/search-console/sites\");\n      if (!res.ok) throw new Error(\"Failed to fetch sites\");\n      return res.json();\n    },\n    enabled: connectionTest?.success,\n  });\n\n  const getDateRange = () => {\n    const endDate = new Date();\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - parseInt(dateRange));\n    return {\n      startDate: startDate.toISOString().split('T')[0],\n      endDate: endDate.toISOString().split('T')[0],\n    };\n  };\n\n  const { data: analytics, isLoading: analyticsLoading, refetch: refetchAnalytics } = useQuery<{ rows: AnalyticsRow[] }>({\n    queryKey: [\"/api/search-console/analytics\", selectedSite, dateRange],\n    queryFn: async () => {\n      const { startDate, endDate } = getDateRange();\n      const params = new URLSearchParams({\n        siteUrl: selectedSite,\n        startDate,\n        endDate,\n        dimensions: 'query',\n        rowLimit: '50',\n      });\n      const res = await fetch(`/api/search-console/analytics?${params}`);\n      if (!res.ok) throw new Error(\"Failed to fetch analytics\");\n      return res.json();\n    },\n    enabled: !!selectedSite,\n  });\n\n  const { data: sitemaps, isLoading: sitemapsLoading, refetch: refetchSitemaps } = useQuery<Sitemap[]>({\n    queryKey: [\"/api/search-console/sitemaps\", selectedSite],\n    queryFn: async () => {\n      const params = new URLSearchParams({ siteUrl: selectedSite });\n      const res = await fetch(`/api/search-console/sitemaps?${params}`);\n      if (!res.ok) throw new Error(\"Failed to fetch sitemaps\");\n      return res.json();\n    },\n    enabled: !!selectedSite,\n  });\n\n  const inspectUrlMutation = useMutation({\n    mutationFn: async (url: string) => {\n      const res = await fetch(\"/api/search-console/inspect-url\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ siteUrl: selectedSite, inspectionUrl: url }),\n      });\n      if (!res.ok) throw new Error(\"Failed to inspect URL\");\n      return res.json();\n    },\n    onSuccess: (data) => {\n      const verdict = data.inspectionResult?.indexStatusResult?.verdict;\n      toast({\n        title: \"URL Inspection Complete\",\n        description: `Verdict: ${verdict || 'Unknown'}`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Inspection Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const submitSitemapMutation = useMutation({\n    mutationFn: async (feedpath: string) => {\n      const res = await fetch(\"/api/search-console/sitemaps\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ siteUrl: selectedSite, feedpath }),\n      });\n      if (!res.ok) throw new Error(\"Failed to submit sitemap\");\n      return res.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Sitemap submitted successfully\" });\n      setNewSitemapUrl(\"\");\n      refetchSitemaps();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to submit sitemap\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (userLoading) {\n    return (\n      <Layout>\n        <div className=\"flex items-center justify-center min-h-[60vh]\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-12\">\n          <Card>\n            <CardContent className=\"pt-6\">\n              <p className=\"text-center text-muted-foreground\">Please log in to access Search Console.</p>\n            </CardContent>\n          </Card>\n        </div>\n      </Layout>\n    );\n  }\n\n  if (user.subscriptionPlan !== 'crew') {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-12\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Crew Feature</CardTitle>\n              <CardDescription>\n                Search Console integration is available for Crew subscribers.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground mb-4\">\n                Upgrade to Crew to access Google Search Console data, including:\n              </p>\n              <ul className=\"list-disc list-inside space-y-2 text-muted-foreground\">\n                <li>Search analytics and keyword performance</li>\n                <li>Sitemap management</li>\n                <li>URL inspection tool</li>\n              </ul>\n            </CardContent>\n          </Card>\n        </div>\n      </Layout>\n    );\n  }\n\n  const totalClicks = analytics?.rows?.reduce((sum, row) => sum + row.clicks, 0) || 0;\n  const totalImpressions = analytics?.rows?.reduce((sum, row) => sum + row.impressions, 0) || 0;\n  const avgCtr = analytics?.rows?.length \n    ? (analytics.rows.reduce((sum, row) => sum + row.ctr, 0) / analytics.rows.length * 100).toFixed(2)\n    : \"0.00\";\n  const avgPosition = analytics?.rows?.length\n    ? (analytics.rows.reduce((sum, row) => sum + row.position, 0) / analytics.rows.length).toFixed(1)\n    : \"0.0\";\n\n  return (\n    <Layout>\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-heading font-bold text-primary mb-2\">Search Console</h1>\n          <p className=\"text-muted-foreground\">Monitor your site's search performance and indexing status.</p>\n        </div>\n\n        {testLoading ? (\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center gap-2\">\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n                <span>Testing connection...</span>\n              </div>\n            </CardContent>\n          </Card>\n        ) : !connectionTest?.success ? (\n          <Card className=\"border-destructive\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-destructive\">\n                <XCircle className=\"w-5 h-5\" />\n                Connection Error\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground\">{connectionTest?.error || \"Failed to connect to Search Console.\"}</p>\n            </CardContent>\n          </Card>\n        ) : (\n          <>\n            <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n              <div className=\"flex-1\">\n                <Select value={selectedSite} onValueChange={setSelectedSite}>\n                  <SelectTrigger data-testid=\"select-site\">\n                    <SelectValue placeholder=\"Select a property\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {sites?.map((site) => (\n                      <SelectItem key={site.siteUrl} value={site.siteUrl}>\n                        <div className=\"flex items-center gap-2\">\n                          <Globe className=\"w-4 h-4\" />\n                          {site.siteUrl}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <Select value={dateRange} onValueChange={setDateRange}>\n                <SelectTrigger className=\"w-[180px]\" data-testid=\"select-date-range\">\n                  <SelectValue placeholder=\"Date range\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"7\">Last 7 days</SelectItem>\n                  <SelectItem value=\"28\">Last 28 days</SelectItem>\n                  <SelectItem value=\"90\">Last 3 months</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {selectedSite && (\n              <Tabs defaultValue=\"analytics\" className=\"space-y-6\">\n                <TabsList>\n                  <TabsTrigger value=\"analytics\" data-testid=\"tab-analytics\">\n                    <BarChart3 className=\"w-4 h-4 mr-2\" />\n                    Analytics\n                  </TabsTrigger>\n                  <TabsTrigger value=\"sitemaps\" data-testid=\"tab-sitemaps\">\n                    <FileText className=\"w-4 h-4 mr-2\" />\n                    Sitemaps\n                  </TabsTrigger>\n                  <TabsTrigger value=\"inspect\" data-testid=\"tab-inspect\">\n                    <Search className=\"w-4 h-4 mr-2\" />\n                    URL Inspection\n                  </TabsTrigger>\n                </TabsList>\n\n                <TabsContent value=\"analytics\" className=\"space-y-6\">\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    <Card>\n                      <CardContent className=\"pt-6\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"text-sm text-muted-foreground\">Total Clicks</p>\n                            <p className=\"text-2xl font-bold\" data-testid=\"text-total-clicks\">{totalClicks.toLocaleString()}</p>\n                          </div>\n                          <MousePointerClick className=\"w-8 h-8 text-primary\" />\n                        </div>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardContent className=\"pt-6\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"text-sm text-muted-foreground\">Impressions</p>\n                            <p className=\"text-2xl font-bold\" data-testid=\"text-impressions\">{totalImpressions.toLocaleString()}</p>\n                          </div>\n                          <Eye className=\"w-8 h-8 text-blue-500\" />\n                        </div>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardContent className=\"pt-6\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"text-sm text-muted-foreground\">Avg CTR</p>\n                            <p className=\"text-2xl font-bold\" data-testid=\"text-avg-ctr\">{avgCtr}%</p>\n                          </div>\n                          <TrendingUp className=\"w-8 h-8 text-green-500\" />\n                        </div>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardContent className=\"pt-6\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"text-sm text-muted-foreground\">Avg Position</p>\n                            <p className=\"text-2xl font-bold\" data-testid=\"text-avg-position\">{avgPosition}</p>\n                          </div>\n                          <BarChart3 className=\"w-8 h-8 text-orange-500\" />\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </div>\n\n                  <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between\">\n                      <div>\n                        <CardTitle>Top Queries</CardTitle>\n                        <CardDescription>Search terms driving traffic to your site</CardDescription>\n                      </div>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => refetchAnalytics()}\n                        disabled={analyticsLoading}\n                        data-testid=\"button-refresh-analytics\"\n                      >\n                        <RefreshCw className={`w-4 h-4 mr-2 ${analyticsLoading ? 'animate-spin' : ''}`} />\n                        Refresh\n                      </Button>\n                    </CardHeader>\n                    <CardContent>\n                      {analyticsLoading ? (\n                        <div className=\"flex items-center justify-center py-8\">\n                          <Loader2 className=\"w-6 h-6 animate-spin\" />\n                        </div>\n                      ) : analytics?.rows?.length ? (\n                        <div className=\"overflow-x-auto\">\n                          <table className=\"w-full\">\n                            <thead>\n                              <tr className=\"border-b\">\n                                <th className=\"text-left py-3 px-2 font-medium\">Query</th>\n                                <th className=\"text-right py-3 px-2 font-medium\">Clicks</th>\n                                <th className=\"text-right py-3 px-2 font-medium\">Impressions</th>\n                                <th className=\"text-right py-3 px-2 font-medium\">CTR</th>\n                                <th className=\"text-right py-3 px-2 font-medium\">Position</th>\n                              </tr>\n                            </thead>\n                            <tbody>\n                              {analytics.rows.map((row, index) => (\n                                <tr key={index} className=\"border-b last:border-0 hover:bg-muted/50\" data-testid={`row-query-${index}`}>\n                                  <td className=\"py-3 px-2 font-medium\">{row.keys[0]}</td>\n                                  <td className=\"text-right py-3 px-2\">{row.clicks.toLocaleString()}</td>\n                                  <td className=\"text-right py-3 px-2\">{row.impressions.toLocaleString()}</td>\n                                  <td className=\"text-right py-3 px-2\">{(row.ctr * 100).toFixed(2)}%</td>\n                                  <td className=\"text-right py-3 px-2\">{row.position.toFixed(1)}</td>\n                                </tr>\n                              ))}\n                            </tbody>\n                          </table>\n                        </div>\n                      ) : (\n                        <p className=\"text-center text-muted-foreground py-8\">No search data available for this period.</p>\n                      )}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                <TabsContent value=\"sitemaps\" className=\"space-y-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>Submit New Sitemap</CardTitle>\n                      <CardDescription>Add a new sitemap to be indexed by Google</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <form \n                        onSubmit={(e) => {\n                          e.preventDefault();\n                          if (newSitemapUrl) submitSitemapMutation.mutate(newSitemapUrl);\n                        }}\n                        className=\"flex gap-2\"\n                      >\n                        <Input\n                          placeholder=\"https://example.com/sitemap.xml\"\n                          value={newSitemapUrl}\n                          onChange={(e) => setNewSitemapUrl(e.target.value)}\n                          className=\"flex-1\"\n                          data-testid=\"input-sitemap-url\"\n                        />\n                        <Button \n                          type=\"submit\" \n                          disabled={!newSitemapUrl || submitSitemapMutation.isPending}\n                          data-testid=\"button-submit-sitemap\"\n                        >\n                          {submitSitemapMutation.isPending ? (\n                            <Loader2 className=\"w-4 h-4 animate-spin\" />\n                          ) : (\n                            \"Submit\"\n                          )}\n                        </Button>\n                      </form>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between\">\n                      <div>\n                        <CardTitle>Submitted Sitemaps</CardTitle>\n                        <CardDescription>Your site's sitemaps and their status</CardDescription>\n                      </div>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => refetchSitemaps()}\n                        disabled={sitemapsLoading}\n                        data-testid=\"button-refresh-sitemaps\"\n                      >\n                        <RefreshCw className={`w-4 h-4 mr-2 ${sitemapsLoading ? 'animate-spin' : ''}`} />\n                        Refresh\n                      </Button>\n                    </CardHeader>\n                    <CardContent>\n                      {sitemapsLoading ? (\n                        <div className=\"flex items-center justify-center py-8\">\n                          <Loader2 className=\"w-6 h-6 animate-spin\" />\n                        </div>\n                      ) : sitemaps?.length ? (\n                        <div className=\"space-y-3\">\n                          {sitemaps.map((sitemap, index) => (\n                            <div \n                              key={sitemap.path} \n                              className=\"flex items-center justify-between p-3 border rounded-lg\"\n                              data-testid={`sitemap-item-${index}`}\n                            >\n                              <div className=\"flex items-center gap-3\">\n                                <FileText className=\"w-5 h-5 text-muted-foreground\" />\n                                <div>\n                                  <p className=\"font-medium text-sm\">{sitemap.path}</p>\n                                  {sitemap.lastSubmitted && (\n                                    <p className=\"text-xs text-muted-foreground\">\n                                      Last submitted: {new Date(sitemap.lastSubmitted).toLocaleDateString()}\n                                    </p>\n                                  )}\n                                </div>\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                {sitemap.isPending && (\n                                  <Badge variant=\"secondary\">Pending</Badge>\n                                )}\n                                {sitemap.errors && parseInt(sitemap.errors) > 0 && (\n                                  <Badge variant=\"destructive\">{sitemap.errors} errors</Badge>\n                                )}\n                                {sitemap.warnings && parseInt(sitemap.warnings) > 0 && (\n                                  <Badge variant=\"outline\" className=\"text-yellow-600\">{sitemap.warnings} warnings</Badge>\n                                )}\n                                {!sitemap.isPending && !sitemap.errors && (\n                                  <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <p className=\"text-center text-muted-foreground py-8\">No sitemaps submitted yet.</p>\n                      )}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                <TabsContent value=\"inspect\" className=\"space-y-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>URL Inspection</CardTitle>\n                      <CardDescription>Check the indexing status of any URL on your site</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <form \n                        onSubmit={(e) => {\n                          e.preventDefault();\n                          if (inspectUrl) inspectUrlMutation.mutate(inspectUrl);\n                        }}\n                        className=\"flex gap-2\"\n                      >\n                        <Input\n                          placeholder=\"https://example.com/page\"\n                          value={inspectUrl}\n                          onChange={(e) => setInspectUrl(e.target.value)}\n                          className=\"flex-1\"\n                          data-testid=\"input-inspect-url\"\n                        />\n                        <Button \n                          type=\"submit\" \n                          disabled={!inspectUrl || inspectUrlMutation.isPending}\n                          data-testid=\"button-inspect-url\"\n                        >\n                          {inspectUrlMutation.isPending ? (\n                            <Loader2 className=\"w-4 h-4 animate-spin\" />\n                          ) : (\n                            <>\n                              <Search className=\"w-4 h-4 mr-2\" />\n                              Inspect\n                            </>\n                          )}\n                        </Button>\n                      </form>\n                    </CardContent>\n                  </Card>\n\n                  {inspectUrlMutation.data && (\n                    <Card>\n                      <CardHeader>\n                        <CardTitle className=\"flex items-center gap-2\">\n                          <LinkIcon className=\"w-5 h-5\" />\n                          Inspection Results\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        {inspectUrlMutation.data.inspectionResult?.indexStatusResult && (\n                          <div className=\"space-y-3\">\n                            <h4 className=\"font-semibold\">Index Status</h4>\n                            <div className=\"grid grid-cols-2 gap-4\">\n                              <div className=\"p-3 border rounded-lg\">\n                                <p className=\"text-sm text-muted-foreground\">Verdict</p>\n                                <div className=\"flex items-center gap-2 mt-1\">\n                                  {inspectUrlMutation.data.inspectionResult.indexStatusResult.verdict === 'PASS' ? (\n                                    <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                                  ) : inspectUrlMutation.data.inspectionResult.indexStatusResult.verdict === 'FAIL' ? (\n                                    <XCircle className=\"w-4 h-4 text-destructive\" />\n                                  ) : (\n                                    <AlertTriangle className=\"w-4 h-4 text-yellow-500\" />\n                                  )}\n                                  <span className=\"font-medium\">\n                                    {inspectUrlMutation.data.inspectionResult.indexStatusResult.verdict || 'Unknown'}\n                                  </span>\n                                </div>\n                              </div>\n                              <div className=\"p-3 border rounded-lg\">\n                                <p className=\"text-sm text-muted-foreground\">Coverage</p>\n                                <p className=\"font-medium mt-1\">\n                                  {inspectUrlMutation.data.inspectionResult.indexStatusResult.coverageState || 'Unknown'}\n                                </p>\n                              </div>\n                              <div className=\"p-3 border rounded-lg\">\n                                <p className=\"text-sm text-muted-foreground\">Last Crawl</p>\n                                <p className=\"font-medium mt-1\">\n                                  {inspectUrlMutation.data.inspectionResult.indexStatusResult.lastCrawlTime\n                                    ? new Date(inspectUrlMutation.data.inspectionResult.indexStatusResult.lastCrawlTime).toLocaleDateString()\n                                    : 'Never'}\n                                </p>\n                              </div>\n                              <div className=\"p-3 border rounded-lg\">\n                                <p className=\"text-sm text-muted-foreground\">Crawled As</p>\n                                <p className=\"font-medium mt-1\">\n                                  {inspectUrlMutation.data.inspectionResult.indexStatusResult.crawledAs || 'Unknown'}\n                                </p>\n                              </div>\n                            </div>\n                          </div>\n                        )}\n\n                        {inspectUrlMutation.data.inspectionResult?.mobileUsabilityResult && (\n                          <div className=\"space-y-3\">\n                            <h4 className=\"font-semibold\">Mobile Usability</h4>\n                            <div className=\"flex items-center gap-2\">\n                              {inspectUrlMutation.data.inspectionResult.mobileUsabilityResult.verdict === 'PASS' ? (\n                                <Badge className=\"bg-green-500\">Mobile Friendly</Badge>\n                              ) : (\n                                <Badge variant=\"destructive\">Issues Found</Badge>\n                              )}\n                            </div>\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n                  )}\n                </TabsContent>\n              </Tabs>\n            )}\n          </>\n        )}\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":27684,"size_tokens":null},"server/services/searchConsole.ts":{"content":"import { google } from 'googleapis';\n\nfunction getAuth() {\n  if (!process.env.GOOGLE_SERVICE_ACCOUNT_JSON) {\n    throw new Error('GOOGLE_SERVICE_ACCOUNT_JSON environment variable is not set');\n  }\n  \n  const credentials = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n  \n  return new google.auth.JWT({\n    email: credentials.client_email,\n    key: credentials.private_key,\n    scopes: [\n      'https://www.googleapis.com/auth/webmasters',\n      'https://www.googleapis.com/auth/webmasters.readonly'\n    ]\n  });\n}\n\nexport interface SearchAnalyticsRow {\n  keys: string[];\n  clicks: number;\n  impressions: number;\n  ctr: number;\n  position: number;\n}\n\nexport interface SearchAnalyticsResponse {\n  rows: SearchAnalyticsRow[];\n  responseAggregationType?: string;\n}\n\nexport interface SitemapInfo {\n  path: string;\n  lastSubmitted?: string;\n  isPending?: boolean;\n  isSitemapsIndex?: boolean;\n  lastDownloaded?: string;\n  warnings?: string;\n  errors?: string;\n  contents?: Array<{\n    type: string;\n    submitted?: string;\n    indexed?: string;\n  }>;\n}\n\nexport interface UrlInspectionResult {\n  inspectionResult?: {\n    indexStatusResult?: {\n      verdict?: string;\n      coverageState?: string;\n      robotsTxtState?: string;\n      indexingState?: string;\n      lastCrawlTime?: string;\n      pageFetchState?: string;\n      googleCanonical?: string;\n      userCanonical?: string;\n      sitemap?: string[];\n      referringUrls?: string[];\n      crawledAs?: string;\n    };\n    mobileUsabilityResult?: {\n      verdict?: string;\n      issues?: Array<{\n        issueType?: string;\n        severity?: string;\n        message?: string;\n      }>;\n    };\n    richResultsResult?: {\n      verdict?: string;\n      detectedItems?: Array<{\n        richResultType?: string;\n        items?: Array<{\n          name?: string;\n          issues?: Array<{\n            issueMessage?: string;\n            severity?: string;\n          }>;\n        }>;\n      }>;\n    };\n  };\n}\n\nexport const searchConsoleService = {\n  async listSites(): Promise<Array<{ siteUrl: string; permissionLevel: string }>> {\n    const auth = getAuth();\n    const webmasters = google.webmasters({ version: 'v3', auth });\n    \n    const response = await webmasters.sites.list();\n    \n    return (response.data.siteEntry || []).map(site => ({\n      siteUrl: site.siteUrl || '',\n      permissionLevel: site.permissionLevel || 'unknown'\n    }));\n  },\n\n  async getSearchAnalytics(\n    siteUrl: string,\n    startDate: string,\n    endDate: string,\n    dimensions: string[] = ['query'],\n    rowLimit: number = 100\n  ): Promise<SearchAnalyticsResponse> {\n    const auth = getAuth();\n    const searchconsole = google.searchconsole({ version: 'v1', auth });\n    \n    const response = await searchconsole.searchanalytics.query({\n      siteUrl,\n      requestBody: {\n        startDate,\n        endDate,\n        dimensions,\n        rowLimit,\n        dataState: 'final'\n      }\n    });\n    \n    return {\n      rows: (response.data.rows || []).map(row => ({\n        keys: row.keys || [],\n        clicks: row.clicks || 0,\n        impressions: row.impressions || 0,\n        ctr: row.ctr || 0,\n        position: row.position || 0\n      })),\n      responseAggregationType: response.data.responseAggregationType ?? undefined\n    };\n  },\n\n  async listSitemaps(siteUrl: string): Promise<SitemapInfo[]> {\n    const auth = getAuth();\n    const webmasters = google.webmasters({ version: 'v3', auth });\n    \n    const response = await webmasters.sitemaps.list({ siteUrl });\n    \n    return (response.data.sitemap || []).map(sitemap => ({\n      path: sitemap.path || '',\n      lastSubmitted: sitemap.lastSubmitted ?? undefined,\n      isPending: sitemap.isPending ?? undefined,\n      isSitemapsIndex: sitemap.isSitemapsIndex ?? undefined,\n      lastDownloaded: sitemap.lastDownloaded ?? undefined,\n      warnings: sitemap.warnings?.toString(),\n      errors: sitemap.errors?.toString(),\n      contents: sitemap.contents?.map(content => ({\n        type: content.type || '',\n        submitted: content.submitted?.toString(),\n        indexed: content.indexed?.toString()\n      }))\n    }));\n  },\n\n  async submitSitemap(siteUrl: string, feedpath: string): Promise<void> {\n    const auth = getAuth();\n    const webmasters = google.webmasters({ version: 'v3', auth });\n    \n    await webmasters.sitemaps.submit({\n      siteUrl,\n      feedpath\n    });\n  },\n\n  async deleteSitemap(siteUrl: string, feedpath: string): Promise<void> {\n    const auth = getAuth();\n    const webmasters = google.webmasters({ version: 'v3', auth });\n    \n    await webmasters.sitemaps.delete({\n      siteUrl,\n      feedpath\n    });\n  },\n\n  async inspectUrl(siteUrl: string, inspectionUrl: string): Promise<UrlInspectionResult> {\n    const auth = getAuth();\n    const searchconsole = google.searchconsole({ version: 'v1', auth });\n    \n    const response = await searchconsole.urlInspection.index.inspect({\n      requestBody: {\n        siteUrl,\n        inspectionUrl,\n        languageCode: 'en-US'\n      }\n    });\n    \n    const inspectionResult = response.data.inspectionResult;\n    if (!inspectionResult) {\n      return {};\n    }\n\n    return {\n      inspectionResult: {\n        indexStatusResult: inspectionResult.indexStatusResult ? {\n          verdict: inspectionResult.indexStatusResult.verdict ?? undefined,\n          coverageState: inspectionResult.indexStatusResult.coverageState ?? undefined,\n          robotsTxtState: inspectionResult.indexStatusResult.robotsTxtState ?? undefined,\n          indexingState: inspectionResult.indexStatusResult.indexingState ?? undefined,\n          lastCrawlTime: inspectionResult.indexStatusResult.lastCrawlTime ?? undefined,\n          pageFetchState: inspectionResult.indexStatusResult.pageFetchState ?? undefined,\n          googleCanonical: inspectionResult.indexStatusResult.googleCanonical ?? undefined,\n          userCanonical: inspectionResult.indexStatusResult.userCanonical ?? undefined,\n          sitemap: inspectionResult.indexStatusResult.sitemap ?? undefined,\n          referringUrls: inspectionResult.indexStatusResult.referringUrls ?? undefined,\n          crawledAs: inspectionResult.indexStatusResult.crawledAs ?? undefined,\n        } : undefined,\n        mobileUsabilityResult: inspectionResult.mobileUsabilityResult ? {\n          verdict: inspectionResult.mobileUsabilityResult.verdict ?? undefined,\n          issues: inspectionResult.mobileUsabilityResult.issues?.map(issue => ({\n            issueType: issue.issueType ?? undefined,\n            severity: issue.severity ?? undefined,\n            message: issue.message ?? undefined,\n          })),\n        } : undefined,\n        richResultsResult: inspectionResult.richResultsResult ? {\n          verdict: inspectionResult.richResultsResult.verdict ?? undefined,\n          detectedItems: inspectionResult.richResultsResult.detectedItems?.map(item => ({\n            richResultType: item.richResultType ?? undefined,\n            items: item.items?.map(subItem => ({\n              name: subItem.name ?? undefined,\n              issues: subItem.issues?.map(issue => ({\n                issueMessage: issue.issueMessage ?? undefined,\n                severity: issue.severity ?? undefined,\n              })),\n            })),\n          })),\n        } : undefined,\n      }\n    };\n  },\n\n  async testConnection(): Promise<{ success: boolean; sites: number; error?: string }> {\n    try {\n      const sites = await this.listSites();\n      return { success: true, sites: sites.length };\n    } catch (error: any) {\n      return { \n        success: false, \n        sites: 0, \n        error: error.message || 'Unknown error' \n      };\n    }\n  }\n};\n","path":null,"size_bytes":7627,"size_tokens":null},"client/src/pages/trade-landing.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, CheckCircle2, Clock, DollarSign, FileCheck, Shield, Star, MapPin, HelpCircle, BookOpen, Lightbulb, ChevronDown } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useLanguage } from \"@/hooks/useLanguage\";\n\ninterface FAQ {\n  question: string;\n  answer: string;\n}\n\ninterface TradeData {\n  slug: string;\n  name: string;\n  title: string;\n  metaDescription: string;\n  heroTitle: string;\n  heroSubtitle: string;\n  benefits: string[];\n  features: string[];\n  testimonialQuote: string;\n  testimonialAuthor: string;\n  testimonialBusiness: string;\n  priceRange: string;\n  commonProjects: string[];\n  faqs: FAQ[];\n  seoContent: {\n    writeProposalTitle: string;\n    writeProposalContent: string;\n    estimateTitle: string;\n    estimateContent: string;\n    whyChooseTitle: string;\n    whyChooseContent: string;\n  };\n}\n\ninterface CityData {\n  name: string;\n  state: string;\n  tagline: string;\n  population: string;\n}\n\nexport const cityData: Record<string, CityData> = {\n  \"houston\": {\n    name: \"Houston\",\n    state: \"TX\",\n    tagline: \"Serving the Greater Houston Metro Area\",\n    population: \"2.3M+\"\n  },\n  \"dallas\": {\n    name: \"Dallas\",\n    state: \"TX\",\n    tagline: \"Serving Dallas-Fort Worth Metroplex\",\n    population: \"1.3M+\"\n  },\n  \"austin\": {\n    name: \"Austin\",\n    state: \"TX\",\n    tagline: \"Serving Austin and Central Texas\",\n    population: \"1M+\"\n  },\n  \"san-antonio\": {\n    name: \"San Antonio\",\n    state: \"TX\",\n    tagline: \"Serving San Antonio and South Texas\",\n    population: \"1.5M+\"\n  },\n  \"fort-worth\": {\n    name: \"Fort Worth\",\n    state: \"TX\",\n    tagline: \"Serving Fort Worth and Tarrant County\",\n    population: \"930K+\"\n  }\n};\n\nexport const tradeCityRoutes = [\"bathroom-remodeling\", \"kitchen-remodeling\", \"roofing\"];\nexport const cityKeys = Object.keys(cityData);\n\nconst tradeData: Record<string, TradeData> = {\n  \"bathroom-remodeling-proposal\": {\n    slug: \"bathroom\",\n    name: \"Bathroom Remodeling\",\n    title: \"Bathroom Remodeling Proposal Software | Free Construction Templates | ScopeGen\",\n    metaDescription: \"Best contractor proposal software for bathroom remodeling. Create professional contractor estimates with free construction proposal templates. E-signature included.\",\n    heroTitle: \"Contractor Proposal Software for Bathroom Remodeling\",\n    heroSubtitle: \"Generate professional contractor estimates for tub-to-shower conversions, full bathroom remodels, and accessibility upgrades. Free construction proposal templates with e-signature.\",\n    benefits: [\n      \"Free construction proposal templates for 5+ bathroom project types\",\n      \"Professional contractor estimates with labor and materials breakdown\",\n      \"Construction proposal with e-signature built in\",\n      \"Best proposal software for small contractors starting out\"\n    ],\n    features: [\n      \"Tub-to-Shower Conversion Proposals\",\n      \"Full Bathroom Gut & Remodel Scopes\",\n      \"Half Bath / Powder Room Templates\",\n      \"ADA Accessibility Bathroom Upgrades\",\n      \"Vanity & Faucet Replacement Proposals\"\n    ],\n    testimonialQuote: \"ScopeGen cut my proposal time from 2 hours to 10 minutes. My bathroom remodel quotes look more professional than contractors twice my size.\",\n    testimonialAuthor: \"Mike Rodriguez\",\n    testimonialBusiness: \"Rodriguez Bath & Tile\",\n    priceRange: \"$1,800 - $28,000+\",\n    commonProjects: [\"Tub-to-shower conversion\", \"Master bath remodel\", \"Guest bathroom update\", \"ADA accessibility retrofit\"],\n    faqs: [\n      {\n        question: \"How do I write a professional contractor proposal for bathroom remodeling?\",\n        answer: \"A professional bathroom remodeling proposal should include a detailed scope of work, itemized pricing for labor and materials, project timeline, payment terms, warranty information, and exclusions. Using contractor proposal software like ScopeGen helps you create comprehensive proposals that cover all these elements in minutes instead of hours.\"\n      },\n      {\n        question: \"What should be included in a bathroom remodeling estimate?\",\n        answer: \"A complete bathroom remodeling estimate should include demolition costs, plumbing work, electrical upgrades, fixtures (toilet, vanity, shower/tub), tile and flooring, paint, ventilation, and labor costs. Professional contractor estimates also account for permits, disposal fees, and a contingency for unexpected issues.\"\n      },\n      {\n        question: \"How much does contractor proposal software cost?\",\n        answer: \"Contractor proposal software ranges from free basic plans to $50+/month for premium features. ScopeGen offers a free tier with proposal previews, making it the best proposal software for small contractors who want to try before committing. Paid plans unlock unlimited proposals and e-signature capabilities.\"\n      },\n      {\n        question: \"Can I get a free construction proposal template for bathroom remodeling?\",\n        answer: \"Yes! ScopeGen provides free construction proposal templates specifically designed for bathroom remodeling contractors. You can preview your proposal for free before upgrading to send it to clients with professional e-signature functionality.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Bathroom Remodeling Proposal\",\n      writeProposalContent: \"Writing a contractor proposal for bathroom remodeling requires attention to detail. Start by conducting a thorough site visit to assess the existing conditions. Document the current layout, plumbing locations, electrical setup, and any potential issues like water damage or mold. Your construction proposal templates should include separate line items for demolition, rough-in plumbing, electrical work, waterproofing, tile installation, fixtures, and finishing touches. Professional contractor estimates also specify material brands and model numbers when possible.\",\n      estimateTitle: \"What Makes a Professional Contractor Estimate Stand Out\",\n      estimateContent: \"The best contractor estimates are clear, detailed, and easy for homeowners to understand. Use contractor estimate software to create itemized breakdowns that show exactly where their money is going. Include photos from the site visit, reference similar completed projects, and explain your process step-by-step. Construction bid software helps you maintain consistency across all your proposals while saving hours of administrative work.\",\n      whyChooseTitle: \"Why Contractors Choose ScopeGen Proposal Software\",\n      whyChooseContent: \"Small contractors need proposal software for contractors that's easy to use and doesn't break the bank. ScopeGen offers free construction proposal templates that look professional and can be customized for any bathroom project. Our construction proposal with e-signature feature lets clients approve and sign digitally, speeding up your sales cycle. Whether you're writing your first contractor proposal or your hundredth, our contractor proposal software makes the process simple.\"\n    }\n  },\n  \"kitchen-remodeling-proposal\": {\n    slug: \"kitchen\",\n    name: \"Kitchen Remodeling\",\n    title: \"Kitchen Remodeling Proposal Software | Construction Bid Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for kitchen remodeling. Free construction proposal templates with professional contractor estimates. Construction bid software with e-signature.\",\n    heroTitle: \"Construction Proposal Software for Kitchen Remodeling\",\n    heroSubtitle: \"Create professional contractor estimates for cabinet installation, countertop replacement, and complete kitchen renovations. Construction bid software with free templates.\",\n    benefits: [\n      \"Free construction proposal templates for kitchen projects\",\n      \"Professional contractor estimates with detailed breakdowns\",\n      \"Construction bid software for accurate pricing\",\n      \"Proposal software for contractors with e-signature\"\n    ],\n    features: [\n      \"Full Kitchen Gut & Replace Proposals\",\n      \"Cabinet Refacing & Painting Scopes\",\n      \"Countertop Replacement Templates\",\n      \"Backsplash Installation Proposals\",\n      \"Island Addition & Layout Changes\"\n    ],\n    testimonialQuote: \"My kitchen remodel proposals used to take forever to write. Now I can send professional quotes same-day and close more deals.\",\n    testimonialAuthor: \"Sarah Chen\",\n    testimonialBusiness: \"Premier Kitchen & Bath\",\n    priceRange: \"$8,000 - $85,000+\",\n    commonProjects: [\"Cabinet refacing\", \"Countertop replacement\", \"Full kitchen remodel\", \"Island installation\"],\n    faqs: [\n      {\n        question: \"How do I write a professional contractor proposal for kitchen remodeling?\",\n        answer: \"A professional kitchen remodeling proposal should detail every aspect of the project: demolition, cabinet installation, countertop fabrication and installation, electrical work, plumbing, appliance installation, backsplash, flooring, and painting. Include material specifications, allowances, timeline, and payment milestones. Contractor proposal software helps you organize all these details professionally.\"\n      },\n      {\n        question: \"What should be included in a kitchen remodeling estimate?\",\n        answer: \"A comprehensive kitchen estimate includes cabinets (stock, semi-custom, or custom), countertops (material and linear footage), appliances, plumbing fixtures, electrical upgrades, flooring, backsplash, paint, hardware, and labor for each trade. Professional contractor estimates also factor in permits, disposal, and project management.\"\n      },\n      {\n        question: \"How much does kitchen remodeling proposal software cost?\",\n        answer: \"Kitchen remodeling proposal software typically costs $0-50/month depending on features. ScopeGen offers free construction proposal templates you can preview before committing, making it the best proposal software for small contractors who want professional results without upfront costs.\"\n      },\n      {\n        question: \"Can I use construction bid software for kitchen renovation estimates?\",\n        answer: \"Absolutely! Construction bid software like ScopeGen streamlines the entire proposal process. Create professional contractor estimates quickly, send construction proposals with e-signature, and track client responses all in one place.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Winning Kitchen Remodeling Proposal\",\n      writeProposalContent: \"Learning how to write a contractor proposal for kitchen remodeling can transform your business. Start with a detailed site assessment, measuring every cabinet, appliance space, and outlet location. Your construction proposal templates should break down costs by category: demolition, cabinetry, countertops, plumbing, electrical, flooring, and finishing. Professional contractor estimates include material specifications with brands, model numbers, and color selections when possible.\",\n      estimateTitle: \"Creating Accurate Kitchen Remodeling Estimates\",\n      estimateContent: \"Contractor estimate software helps you build accurate quotes for kitchen projects of any size. Account for hidden costs like outdated wiring, plumbing modifications, or structural issues behind walls. The best construction bid software allows you to create tiered proposals with good-better-best options, helping clients choose the right scope for their budget.\",\n      whyChooseTitle: \"Best Proposal Software for Kitchen Contractors\",\n      whyChooseContent: \"Kitchen contractors need proposal software that handles complex projects with multiple phases and trades. ScopeGen provides construction proposal templates designed specifically for kitchen remodeling, with built-in line items for every common task. Our construction proposal with e-signature feature means clients can approve your proposal from their phone, getting projects started faster.\"\n    }\n  },\n  \"roofing-proposal\": {\n    slug: \"roofing\",\n    name: \"Roofing\",\n    title: \"Roofing Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Best roofing contractor proposal software with free construction proposal templates. Create professional contractor estimates for shingle, metal, and flat roofs. E-signature included.\",\n    heroTitle: \"Contractor Proposal Software for Roofing Professionals\",\n    heroSubtitle: \"Generate professional contractor estimates for shingle replacement, metal roofing, and flat roof systems. Free construction proposal templates with accurate material calculations.\",\n    benefits: [\n      \"Free construction proposal templates for all roof types\",\n      \"Professional contractor estimates with square footage pricing\",\n      \"Construction bid software for accurate material takeoffs\",\n      \"Construction proposal with e-signature for faster approvals\"\n    ],\n    features: [\n      \"Asphalt Shingle Replacement Proposals\",\n      \"Metal Roofing Installation Scopes\",\n      \"Flat Roof / TPO / EPDM Templates\",\n      \"Roof Repair & Patch Estimates\",\n      \"Gutter & Downspout Proposals\"\n    ],\n    testimonialQuote: \"I was writing roofing estimates by hand for years. ScopeGen makes me look like a much bigger operation.\",\n    testimonialAuthor: \"Dave Thompson\",\n    testimonialBusiness: \"Thompson Roofing Co.\",\n    priceRange: \"$3,500 - $25,000+\",\n    commonProjects: [\"Full roof replacement\", \"Storm damage repair\", \"Gutter installation\", \"Flat roof coating\"],\n    faqs: [\n      {\n        question: \"How do I write a professional roofing contractor proposal?\",\n        answer: \"A professional roofing proposal includes roof measurements (squares), material specifications (shingle type, brand, color), tear-off and disposal, underlayment and ice/water shield, flashing and ventilation details, timeline, warranty information, and payment terms. Contractor proposal software helps ensure you don't miss any critical details.\"\n      },\n      {\n        question: \"What should be included in a roofing estimate?\",\n        answer: \"A complete roofing estimate covers materials (shingles, underlayment, flashing, vents), labor for tear-off and installation, disposal fees, permit costs, and any structural repairs. Professional contractor estimates also include drip edge, ridge caps, and pipe boots as separate line items for transparency.\"\n      },\n      {\n        question: \"How much does roofing proposal software cost?\",\n        answer: \"Roofing proposal software ranges from free to $60/month. ScopeGen offers free construction proposal templates with preview capability, making it ideal for small roofing contractors who want professional proposals without monthly fees upfront.\"\n      },\n      {\n        question: \"What's the best way to price a roofing job?\",\n        answer: \"Price roofing jobs by measuring total squares, factoring in roof pitch complexity, number of layers to remove, and accessibility. Construction bid software can help you maintain consistent pricing while accounting for market rates in your area.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Roofing Proposal That Wins Jobs\",\n      writeProposalContent: \"Knowing how to write a contractor proposal for roofing sets you apart from competitors. Start with accurate measurements using drone imagery or on-roof inspection. Your construction proposal templates should detail every component: starter strips, field shingles, ridge caps, underlayment type, ice and water shield locations, flashing at walls and valleys, and ventilation requirements. Professional contractor estimates show homeowners exactly what they're paying for.\",\n      estimateTitle: \"Creating Professional Roofing Estimates\",\n      estimateContent: \"Contractor estimate software helps you build accurate roofing quotes quickly. Calculate material needs based on waste factors (typically 10-15% for basic roofs, more for complex designs). Include labor rates for different roof pitches and account for extras like chimney flashing, skylight sealing, or gutter re-attachment. Construction bid software keeps your pricing consistent across all jobs.\",\n      whyChooseTitle: \"Why Roofing Contractors Choose ScopeGen\",\n      whyChooseContent: \"Roofing contractors need proposal software for contractors that handles the unique aspects of roof work. ScopeGen's free construction proposal templates include pre-built line items for shingles, underlayment, flashing, and more. Our construction proposal with e-signature feature lets homeowners approve storm damage repairs quickly, helping you secure jobs faster in competitive markets.\"\n    }\n  },\n  \"painting-proposal\": {\n    slug: \"painting\",\n    name: \"Painting\",\n    title: \"Painting Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for painting professionals. Free construction proposal templates for interior and exterior painting. Create professional contractor estimates fast.\",\n    heroTitle: \"Proposal Software for Painting Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for interior painting, exterior house painting, and specialty finishes. Free construction proposal templates with room-by-room breakdowns.\",\n    benefits: [\n      \"Free construction proposal templates for all painting projects\",\n      \"Professional contractor estimates with detailed prep work\",\n      \"Best proposal software for small contractors\",\n      \"Construction proposal with e-signature included\"\n    ],\n    features: [\n      \"Interior Room Painting Proposals\",\n      \"Exterior House Painting Scopes\",\n      \"Cabinet Painting & Refinishing\",\n      \"Deck & Fence Staining Templates\",\n      \"Commercial Painting Estimates\"\n    ],\n    testimonialQuote: \"My painting proposals look so professional now. Clients take me seriously and I win more bids.\",\n    testimonialAuthor: \"James Wilson\",\n    testimonialBusiness: \"Wilson Pro Painters\",\n    priceRange: \"$800 - $15,000+\",\n    commonProjects: [\"Interior repaint\", \"Exterior house painting\", \"Cabinet refinishing\", \"Deck staining\"],\n    faqs: [\n      {\n        question: \"How do I write a professional painting contractor proposal?\",\n        answer: \"A professional painting proposal includes a detailed scope covering prep work (patching, sanding, priming), number of coats, paint brand and color selections, surface areas, and timeline. Using contractor proposal software ensures you include all critical details and present them professionally to potential clients.\"\n      },\n      {\n        question: \"What should be included in a painting estimate?\",\n        answer: \"A complete painting estimate covers labor, materials (paint, primer, caulk, tape), surface preparation, number of coats, and any specialty finishes. Professional contractor estimates also detail what's excluded, such as wallpaper removal or major drywall repairs, to set clear expectations.\"\n      },\n      {\n        question: \"How much does painting proposal software cost?\",\n        answer: \"Painting proposal software ranges from free to $40/month. ScopeGen provides free construction proposal templates that painting contractors can use to create professional estimates without upfront costsâ€”perfect for the best proposal software for small contractors.\"\n      },\n      {\n        question: \"How do painting contractors calculate square footage?\",\n        answer: \"Calculate paintable square footage by measuring wall height times perimeter, then subtracting windows and doors. Contractor estimate software can help you standardize these calculations and ensure consistent, accurate pricing across all your painting proposals.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Painting Proposal\",\n      writeProposalContent: \"Learning how to write a contractor proposal for painting jobs is essential for growing your business. Start by conducting a thorough walkthrough, noting surface conditions, existing paint problems, and areas requiring extra prep. Your construction proposal templates should itemize prep work, primer coats, finish coats, and any specialty applications like texture or accent walls. Professional contractor estimates specify paint brands, sheens, and estimated coverage.\",\n      estimateTitle: \"Creating Accurate Painting Estimates\",\n      estimateContent: \"Contractor estimate software helps painting professionals build accurate quotes. Calculate labor based on production rates (typically 200-400 sq ft per hour for interior walls) and factor in ceiling heights, trim detail, and surface condition. Construction bid software helps you maintain consistent pricing while adjusting for job-specific variables.\",\n      whyChooseTitle: \"Best Proposal Software for Painting Contractors\",\n      whyChooseContent: \"Painting contractors need proposal software for contractors that's quick and easy to use between job sites. ScopeGen's free construction proposal templates are designed for painters, with room-by-room breakdowns and prep work already built in. Our construction proposal with e-signature feature lets clients approve on the spot, helping you win more jobs.\"\n    }\n  },\n  \"landscaping-proposal\": {\n    slug: \"landscaping\",\n    name: \"Landscaping\",\n    title: \"Landscaping Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for landscaping professionals. Create professional contractor estimates with free construction proposal templates. Hardscape and irrigation templates included.\",\n    heroTitle: \"Proposal Software for Landscaping Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for lawn installation, hardscaping, irrigation systems, and outdoor living spaces. Free construction proposal templates designed for landscapers.\",\n    benefits: [\n      \"Free construction proposal templates for landscape projects\",\n      \"Professional contractor estimates with plant specifications\",\n      \"Construction bid software for hardscape pricing\",\n      \"Best proposal software for small contractors\"\n    ],\n    features: [\n      \"Lawn Installation & Sod Proposals\",\n      \"Patio & Walkway Hardscape Scopes\",\n      \"Retaining Wall Construction\",\n      \"Irrigation System Installation\",\n      \"Tree & Shrub Planting Templates\"\n    ],\n    testimonialQuote: \"ScopeGen helped me present landscaping proposals that match my vision. My close rate went up 40%.\",\n    testimonialAuthor: \"Maria Santos\",\n    testimonialBusiness: \"Santos Landscaping Design\",\n    priceRange: \"$1,500 - $50,000+\",\n    commonProjects: [\"Backyard redesign\", \"Patio installation\", \"Irrigation system\", \"Front yard curb appeal\"],\n    faqs: [\n      {\n        question: \"How do I write a professional landscaping contractor proposal?\",\n        answer: \"A professional landscaping proposal should include detailed plant lists with quantities and sizes, hardscape materials and dimensions, irrigation specifications, installation timeline, and maintenance recommendations. Contractor proposal software helps you organize complex landscape designs into clear, professional proposals.\"\n      },\n      {\n        question: \"What should be included in a landscaping estimate?\",\n        answer: \"A complete landscaping estimate covers plants and materials, soil amendments, mulch, edging, irrigation components, hardscape materials, labor, equipment rental, and disposal. Professional contractor estimates also include site preparation, grading, and any required permits.\"\n      },\n      {\n        question: \"How much does landscaping proposal software cost?\",\n        answer: \"Landscaping proposal software typically costs $0-50/month. ScopeGen offers free construction proposal templates for landscapers, making it the best proposal software for small contractors who want to create professional estimates without subscription fees.\"\n      },\n      {\n        question: \"How do I price landscaping jobs accurately?\",\n        answer: \"Price landscaping jobs by measuring areas precisely, calculating material quantities with waste factors, and estimating labor hours for each phase. Construction bid software helps maintain consistent pricing across similar projects while accounting for site-specific variables.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Landscaping Proposal\",\n      writeProposalContent: \"Knowing how to write a contractor proposal for landscaping projects helps you win larger jobs. Start with a site analysis noting soil conditions, drainage, sun exposure, and existing vegetation. Your construction proposal templates should include detailed plant schedules with botanical names, sizes at planting, and spacing. Professional contractor estimates show hardscape dimensions with material specifications and installation methods.\",\n      estimateTitle: \"Creating Accurate Landscaping Estimates\",\n      estimateContent: \"Contractor estimate software helps landscapers build profitable quotes. Calculate material quantities accuratelyâ€”including 10-15% waste for plants and 15-20% for hardscape materials. Factor in equipment costs for excavation, grading, and installation. Construction bid software keeps your pricing consistent while helping you track profitability across different project types.\",\n      whyChooseTitle: \"Why Landscaping Contractors Choose ScopeGen\",\n      whyChooseContent: \"Landscaping contractors need proposal software for contractors that handles both softscape and hardscape elements. ScopeGen's free construction proposal templates include pre-built sections for planting, irrigation, pavers, and retaining walls. Our construction proposal with e-signature feature lets clients approve designs faster, helping you start projects sooner and manage your seasonal workflow.\"\n    }\n  },\n  \"hvac-proposal\": {\n    slug: \"hvac\",\n    name: \"HVAC\",\n    title: \"HVAC Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for HVAC professionals. Create professional contractor estimates for AC, heating, and ductwork. Free construction proposal templates with e-signature.\",\n    heroTitle: \"Proposal Software for HVAC Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for AC installation, furnace replacement, and ductwork. Free construction proposal templates with equipment specifications and SEER ratings.\",\n    benefits: [\n      \"Free construction proposal templates for HVAC projects\",\n      \"Professional contractor estimates with load calculations\",\n      \"Construction bid software for accurate equipment pricing\",\n      \"Construction proposal with e-signature for quick approvals\"\n    ],\n    features: [\n      \"Central AC Installation Proposals\",\n      \"Furnace Replacement Scopes\",\n      \"Mini-Split System Templates\",\n      \"Ductwork Installation & Repair\",\n      \"Heat Pump Conversion Estimates\"\n    ],\n    testimonialQuote: \"HVAC proposals need to be detailed and technical. ScopeGen handles all of that automatically.\",\n    testimonialAuthor: \"Robert Kim\",\n    testimonialBusiness: \"Kim's Heating & Cooling\",\n    priceRange: \"$3,000 - $20,000+\",\n    commonProjects: [\"AC replacement\", \"Furnace installation\", \"Mini-split install\", \"Duct cleaning\"],\n    faqs: [\n      {\n        question: \"How do I write a professional HVAC contractor proposal?\",\n        answer: \"A professional HVAC proposal includes equipment specifications (model, SEER/AFUE ratings, tonnage), installation scope, ductwork modifications, electrical requirements, thermostat options, warranty details, and maintenance recommendations. Contractor proposal software ensures you include all technical details homeowners need.\"\n      },\n      {\n        question: \"What should be included in an HVAC estimate?\",\n        answer: \"A complete HVAC estimate covers equipment costs, installation labor, ductwork materials and fabrication, refrigerant line set, electrical connections, permit fees, and removal/disposal of old equipment. Professional contractor estimates also detail efficiency ratings and expected energy savings.\"\n      },\n      {\n        question: \"How much does HVAC proposal software cost?\",\n        answer: \"HVAC proposal software ranges from free to $75/month for premium features. ScopeGen offers free construction proposal templates that HVAC contractors can use to create professional estimates, making it the best proposal software for small contractors starting out.\"\n      },\n      {\n        question: \"What equipment details should an HVAC proposal include?\",\n        answer: \"Include manufacturer, model number, SEER rating (for AC), AFUE rating (for furnaces), BTU capacity, warranty terms, and expected lifespan. Construction bid software helps you maintain accurate equipment databases for consistent pricing.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional HVAC Proposal\",\n      writeProposalContent: \"Learning how to write a contractor proposal for HVAC work requires technical precision. Start with a Manual J load calculation to properly size equipment. Your construction proposal templates should specify equipment models, efficiency ratings, and capacity. Professional contractor estimates include detailed scope for ductwork modifications, electrical requirements, and refrigerant line routing. Always include warranty terms for both equipment and labor.\",\n      estimateTitle: \"Creating Accurate HVAC Estimates\",\n      estimateContent: \"Contractor estimate software helps HVAC professionals build accurate quotes. Factor in equipment costs, installation complexity (attic, basement, closet), ductwork requirements, and any electrical upgrades needed. Construction bid software helps you maintain current pricing for popular equipment brands and models.\",\n      whyChooseTitle: \"Why HVAC Contractors Choose ScopeGen\",\n      whyChooseContent: \"HVAC contractors need proposal software for contractors that handles technical specifications accurately. ScopeGen's free construction proposal templates include equipment specification fields, efficiency ratings, and warranty documentation. Our construction proposal with e-signature feature helps close deals faster, especially during peak season when homeowners need quick responses.\"\n    }\n  },\n  \"plumbing-proposal\": {\n    slug: \"plumbing\",\n    name: \"Plumbing\",\n    title: \"Plumbing Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for plumbing professionals. Create professional contractor estimates for water heaters, pipe repair, and plumbing. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Plumbing Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for water heater installation, pipe replacement, and fixture installation. Free construction proposal templates with detailed scopes.\",\n    benefits: [\n      \"Free construction proposal templates for plumbing work\",\n      \"Professional contractor estimates with fixture specs\",\n      \"Construction bid software for accurate pricing\",\n      \"Best proposal software for small contractors\"\n    ],\n    features: [\n      \"Water Heater Installation Proposals\",\n      \"Whole-House Repipe Scopes\",\n      \"Bathroom Plumbing Rough-In\",\n      \"Drain Cleaning & Sewer Repair\",\n      \"Gas Line Installation Templates\"\n    ],\n    testimonialQuote: \"I used to dread writing plumbing estimates. Now I create professional proposals in minutes.\",\n    testimonialAuthor: \"Tom Anderson\",\n    testimonialBusiness: \"Anderson Plumbing Services\",\n    priceRange: \"$500 - $15,000+\",\n    commonProjects: [\"Water heater replacement\", \"Pipe repair\", \"Bathroom addition\", \"Sewer line repair\"],\n    faqs: [\n      {\n        question: \"How do I write a professional plumbing contractor proposal?\",\n        answer: \"A professional plumbing proposal includes detailed scope of work, fixture specifications, material types (copper, PEX, PVC), permit requirements, timeline, warranty information, and payment terms. Contractor proposal software helps you create comprehensive proposals that build trust with homeowners.\"\n      },\n      {\n        question: \"What should be included in a plumbing estimate?\",\n        answer: \"A complete plumbing estimate covers labor, materials (pipes, fittings, fixtures), permit fees, equipment rental if needed, and any restoration work. Professional contractor estimates also specify fixture brands and models so clients know exactly what they're getting.\"\n      },\n      {\n        question: \"How much does plumbing proposal software cost?\",\n        answer: \"Plumbing proposal software ranges from free to $50/month. ScopeGen offers free construction proposal templates for plumbers, making it ideal for small plumbing contractors who want professional-looking estimates without monthly fees.\"\n      },\n      {\n        question: \"Should plumbing proposals include warranty information?\",\n        answer: \"Yes! Professional contractor estimates always include warranty details for both materials and workmanship. Clearly stating your warranty builds trust and differentiates you from competitors who don't offer guarantees.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Plumbing Proposal\",\n      writeProposalContent: \"Understanding how to write a contractor proposal for plumbing work sets you apart from competitors. Start by inspecting the existing system and documenting current conditions. Your construction proposal templates should detail materials (pipe type, fixture brands), labor for each task, and any required permits. Professional contractor estimates include clear timelines and explain potential complications homeowners should be aware of.\",\n      estimateTitle: \"Creating Accurate Plumbing Estimates\",\n      estimateContent: \"Contractor estimate software helps plumbers build accurate, profitable quotes. Factor in material costs, labor rates, permit fees, and equipment rental. Account for potential surprises like corroded fittings or unexpected pipe conditions. Construction bid software helps you maintain consistent pricing while building in appropriate contingencies.\",\n      whyChooseTitle: \"Why Plumbing Contractors Choose ScopeGen\",\n      whyChooseContent: \"Plumbing contractors need proposal software for contractors that's fast and mobile-friendly. ScopeGen's free construction proposal templates are designed for on-site use, letting you create estimates immediately after inspection. Our construction proposal with e-signature feature means clients can approve work on the spot for emergency repairs.\"\n    }\n  },\n  \"electrical-proposal\": {\n    slug: \"electrical\",\n    name: \"Electrical\",\n    title: \"Electrical Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for electricians. Create professional contractor estimates for panel upgrades, rewiring, and lighting. Free construction proposal templates included.\",\n    heroTitle: \"Proposal Software for Electrical Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for panel upgrades, rewiring, and electrical installations. Free construction proposal templates with code compliance language.\",\n    benefits: [\n      \"Free construction proposal templates for electrical work\",\n      \"Professional contractor estimates with circuit specs\",\n      \"Construction bid software for permit-ready proposals\",\n      \"Construction proposal with e-signature for approvals\"\n    ],\n    features: [\n      \"Electrical Panel Upgrade Proposals\",\n      \"Whole-House Rewiring Scopes\",\n      \"Lighting Installation Templates\",\n      \"EV Charger Installation Estimates\",\n      \"Generator Installation Proposals\"\n    ],\n    testimonialQuote: \"My electrical proposals are now as professional as the big companies. Clients trust me more.\",\n    testimonialAuthor: \"Chris Martinez\",\n    testimonialBusiness: \"Martinez Electric LLC\",\n    priceRange: \"$300 - $12,000+\",\n    commonProjects: [\"Panel upgrade\", \"Outlet installation\", \"Lighting upgrade\", \"EV charger install\"],\n    faqs: [\n      {\n        question: \"How do I write a professional electrical contractor proposal?\",\n        answer: \"A professional electrical proposal includes scope of work, circuit specifications, material lists, permit requirements, code compliance statements, and warranty information. Using contractor proposal software ensures your proposals meet industry standards and build homeowner confidence.\"\n      },\n      {\n        question: \"What should be included in an electrical estimate?\",\n        answer: \"A complete electrical estimate covers labor, materials (wire, breakers, fixtures), permit fees, inspection costs, and any structural work needed for access. Professional contractor estimates also specify wire gauge, circuit capacity, and fixture specifications.\"\n      },\n      {\n        question: \"How much does electrical proposal software cost?\",\n        answer: \"Electrical proposal software ranges from free to $60/month. ScopeGen provides free construction proposal templates for electricians, making it the best proposal software for small contractors who want professional results without high costs.\"\n      },\n      {\n        question: \"Should electrical proposals include permit information?\",\n        answer: \"Yes! Professional contractor estimates always detail permit requirements and associated fees. This transparency builds trust and ensures clients understand the full scope of compliant electrical work.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Electrical Proposal\",\n      writeProposalContent: \"Learning how to write a contractor proposal for electrical work requires attention to code compliance. Document existing panel capacity, current wiring type, and any safety concerns during inspection. Your construction proposal templates should specify wire gauge, circuit breaker sizes, and fixture wattages. Professional contractor estimates include permit costs and explain the inspection process to homeowners.\",\n      estimateTitle: \"Creating Accurate Electrical Estimates\",\n      estimateContent: \"Contractor estimate software helps electricians build code-compliant quotes. Calculate material needs based on wire runs, fixture counts, and device boxes required. Factor in permit fees, inspection scheduling, and any required structural work. Construction bid software helps maintain consistent pricing while ensuring nothing is overlooked.\",\n      whyChooseTitle: \"Why Electrical Contractors Choose ScopeGen\",\n      whyChooseContent: \"Electrical contractors need proposal software for contractors that handles technical specifications and code requirements. ScopeGen's free construction proposal templates include pre-built sections for panel upgrades, circuit additions, and specialty installations. Our construction proposal with e-signature feature helps close deals quickly, especially for EV charger installations where homeowners want to act fast.\"\n    }\n  },\n  \"flooring-proposal\": {\n    slug: \"flooring\",\n    name: \"Flooring\",\n    title: \"Flooring Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for flooring professionals. Create professional contractor estimates for hardwood, tile, and LVP. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Flooring Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for hardwood, tile, luxury vinyl, and carpet installation. Free construction proposal templates with material calculations.\",\n    benefits: [\n      \"Free construction proposal templates for all floor types\",\n      \"Professional contractor estimates with square footage\",\n      \"Construction bid software for accurate material takeoffs\",\n      \"Best proposal software for small contractors\"\n    ],\n    features: [\n      \"Hardwood Flooring Installation\",\n      \"Tile Floor Installation Scopes\",\n      \"Luxury Vinyl Plank (LVP) Templates\",\n      \"Carpet Installation & Removal\",\n      \"Epoxy Floor Coating Proposals\"\n    ],\n    testimonialQuote: \"Flooring estimates used to take me hours. Now I send professional proposals the same day I measure.\",\n    testimonialAuthor: \"Lisa Park\",\n    testimonialBusiness: \"Park Flooring Solutions\",\n    priceRange: \"$2,000 - $20,000+\",\n    commonProjects: [\"Hardwood installation\", \"Tile flooring\", \"LVP installation\", \"Carpet replacement\"],\n    faqs: [\n      {\n        question: \"How do I write a professional flooring contractor proposal?\",\n        answer: \"A professional flooring proposal includes detailed measurements, material specifications (type, brand, color), subfloor preparation scope, transition details, and installation timeline. Contractor proposal software helps you create comprehensive proposals that cover all aspects of the flooring project.\"\n      },\n      {\n        question: \"What should be included in a flooring estimate?\",\n        answer: \"A complete flooring estimate covers materials, underlayment, transitions and trim, removal of existing flooring, subfloor prep, and installation labor. Professional contractor estimates include a waste factor (typically 10-15%) to ensure adequate material is ordered.\"\n      },\n      {\n        question: \"How much does flooring proposal software cost?\",\n        answer: \"Flooring proposal software ranges from free to $45/month. ScopeGen offers free construction proposal templates for flooring contractors, making it the best proposal software for small contractors who want professional estimates without upfront costs.\"\n      },\n      {\n        question: \"How do flooring contractors calculate material needs?\",\n        answer: \"Calculate total square footage plus 10-15% waste factor depending on room layout and pattern. Construction bid software helps maintain accurate calculations and ensures consistent pricing across similar projects.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Flooring Proposal\",\n      writeProposalContent: \"Understanding how to write a contractor proposal for flooring projects helps win larger jobs. Measure every room precisely, noting closets, transitions, and direction of installation. Your construction proposal templates should itemize materials, underlayment, transitions, and any required subfloor work. Professional contractor estimates specify the flooring product by name, color code, and warranty details.\",\n      estimateTitle: \"Creating Accurate Flooring Estimates\",\n      estimateContent: \"Contractor estimate software helps flooring professionals build profitable quotes. Calculate material needs based on room dimensions plus appropriate waste factors. Factor in transition strips, quarter-round, and any subfloor repairs. Construction bid software helps you maintain consistent pricing across different flooring types and installation methods.\",\n      whyChooseTitle: \"Why Flooring Contractors Choose ScopeGen\",\n      whyChooseContent: \"Flooring contractors need proposal software for contractors that handles multiple flooring types efficiently. ScopeGen's free construction proposal templates include pre-built sections for hardwood, tile, LVP, and carpet. Our construction proposal with e-signature feature helps close deals on-site after measuring, reducing callbacks and winning more jobs.\"\n    }\n  },\n  \"siding-proposal\": {\n    slug: \"siding\",\n    name: \"Siding\",\n    title: \"Siding Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for siding professionals. Create professional contractor estimates for vinyl, fiber cement, and wood siding. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Siding Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for vinyl, fiber cement, and wood siding installation. Free construction proposal templates with material calculations.\",\n    benefits: [\n      \"Free construction proposal templates for all siding types\",\n      \"Professional contractor estimates with square footage\",\n      \"Construction bid software for accurate takeoffs\",\n      \"Construction proposal with e-signature included\"\n    ],\n    features: [\n      \"Vinyl Siding Installation Proposals\",\n      \"Fiber Cement (Hardie) Siding Scopes\",\n      \"Wood Siding Installation Templates\",\n      \"Siding Repair & Replacement Estimates\",\n      \"Soffit & Fascia Installation Proposals\"\n    ],\n    testimonialQuote: \"ScopeGen makes my siding proposals look professional. Clients can see exactly what they're getting.\",\n    testimonialAuthor: \"Carlos Hernandez\",\n    testimonialBusiness: \"Hernandez Exteriors\",\n    priceRange: \"$5,000 - $25,000+\",\n    commonProjects: [\"Full siding replacement\", \"Partial siding repair\", \"Soffit & fascia\", \"Accent siding\"],\n    faqs: [\n      {\n        question: \"How do I write a professional siding contractor proposal?\",\n        answer: \"A professional siding proposal includes material specifications (type, brand, color), square footage calculations, tear-off and disposal scope, weather barrier details, and trim specifications. Contractor proposal software helps ensure all exterior details are covered comprehensively.\"\n      },\n      {\n        question: \"What should be included in a siding estimate?\",\n        answer: \"A complete siding estimate covers materials, labor for removal and installation, weather barrier, J-channel and trim, soffit and fascia if included, and disposal. Professional contractor estimates also detail flashing around windows and doors.\"\n      },\n      {\n        question: \"How much does siding proposal software cost?\",\n        answer: \"Siding proposal software ranges from free to $55/month. ScopeGen provides free construction proposal templates for siding contractors, offering the best proposal software for small contractors who want professional results.\"\n      },\n      {\n        question: \"What details should siding proposals include?\",\n        answer: \"Include material type and brand, color selections, square footage, linear feet of trim, number of squares to remove, and warranty information. Construction bid software helps standardize these details across all your proposals.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Siding Proposal\",\n      writeProposalContent: \"Knowing how to write a contractor proposal for siding projects wins bigger jobs. Measure all walls, gables, and soffits carefully. Your construction proposal templates should itemize siding squares, J-channel, starter strips, corners, and all trim pieces. Professional contractor estimates specify the siding product by manufacturer and color name, plus warranty details.\",\n      estimateTitle: \"Creating Accurate Siding Estimates\",\n      estimateContent: \"Contractor estimate software helps siding professionals build accurate quotes. Calculate material needs based on wall measurements plus 10-15% waste. Factor in complexity for gables, dormers, and multi-story work. Construction bid software helps maintain consistent pricing while adjusting for job-specific challenges.\",\n      whyChooseTitle: \"Why Siding Contractors Choose ScopeGen\",\n      whyChooseContent: \"Siding contractors need proposal software for contractors that handles exterior projects completely. ScopeGen's free construction proposal templates include all siding types plus soffit, fascia, and trim. Our construction proposal with e-signature feature lets homeowners approve quickly, especially after storm damage when timing matters.\"\n    }\n  },\n  \"drywall-proposal\": {\n    slug: \"drywall\",\n    name: \"Drywall\",\n    title: \"Drywall Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for drywall professionals. Create professional contractor estimates for installation, repair, and texturing. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Drywall Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for drywall installation, repair, and texturing. Free construction proposal templates with material calculations.\",\n    benefits: [\n      \"Free construction proposal templates for drywall work\",\n      \"Professional contractor estimates with board footage\",\n      \"Construction bid software for finishing levels\",\n      \"Best proposal software for small contractors\"\n    ],\n    features: [\n      \"New Drywall Installation Proposals\",\n      \"Drywall Repair & Patching Scopes\",\n      \"Texture Application Templates\",\n      \"Ceiling Drywall Installation\",\n      \"Soundproofing Drywall Proposals\"\n    ],\n    testimonialQuote: \"Drywall estimates are tricky to get right. ScopeGen helps me price jobs accurately every time.\",\n    testimonialAuthor: \"Steve Miller\",\n    testimonialBusiness: \"Miller Drywall Services\",\n    priceRange: \"$800 - $12,000+\",\n    commonProjects: [\"Basement finishing\", \"Drywall repair\", \"Garage drywall\", \"Ceiling texture\"],\n    faqs: [\n      {\n        question: \"How do I write a professional drywall contractor proposal?\",\n        answer: \"A professional drywall proposal includes board footage calculations, finishing level specifications (levels 0-5), texture type, primer requirements, and timeline. Contractor proposal software helps you create detailed proposals that clearly communicate scope to homeowners.\"\n      },\n      {\n        question: \"What should be included in a drywall estimate?\",\n        answer: \"A complete drywall estimate covers drywall sheets, joint compound, tape, screws/nails, corner bead, labor for hanging and finishing, and any texturing. Professional contractor estimates also specify finishing level and texture matching for repairs.\"\n      },\n      {\n        question: \"How much does drywall proposal software cost?\",\n        answer: \"Drywall proposal software ranges from free to $40/month. ScopeGen offers free construction proposal templates for drywall contractors, making it the best proposal software for small contractors who want professional estimates.\"\n      },\n      {\n        question: \"What are drywall finishing levels and why do they matter?\",\n        answer: \"Finishing levels (0-5) specify the quality of finish from basic fire taping to smooth walls ready for high-gloss paint. Professional contractor estimates always specify finishing level so clients understand the quality they're paying for.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Drywall Proposal\",\n      writeProposalContent: \"Learning how to write a contractor proposal for drywall work ensures profitable projects. Calculate board footage by measuring wall and ceiling areas. Your construction proposal templates should specify drywall thickness, finishing level, and texture type. Professional contractor estimates include separate line items for hanging, taping, finishing, and texturing.\",\n      estimateTitle: \"Creating Accurate Drywall Estimates\",\n      estimateContent: \"Contractor estimate software helps drywall professionals build accurate quotes. Factor in material waste (typically 5-10%), corner bead linear footage, and complexity of the space. Construction bid software helps maintain consistent pricing for different finishing levels and texture applications.\",\n      whyChooseTitle: \"Why Drywall Contractors Choose ScopeGen\",\n      whyChooseContent: \"Drywall contractors need proposal software for contractors that handles finishing specifications accurately. ScopeGen's free construction proposal templates include finishing level options and texture matching. Our construction proposal with e-signature feature helps close deals faster, especially for repair work where homeowners want quick turnaround.\"\n    }\n  },\n  \"window-installation-proposal\": {\n    slug: \"windows\",\n    name: \"Window Installation\",\n    title: \"Window Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for window installers. Create professional contractor estimates for replacement and new windows. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Window Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for replacement windows and new construction. Free construction proposal templates with per-window pricing.\",\n    benefits: [\n      \"Free construction proposal templates for window projects\",\n      \"Professional contractor estimates with per-window pricing\",\n      \"Construction bid software for accurate quotes\",\n      \"Construction proposal with e-signature\"\n    ],\n    features: [\n      \"Replacement Window Proposals\",\n      \"New Construction Window Scopes\",\n      \"Energy-Efficient Upgrade Templates\",\n      \"Bay & Bow Window Installation\",\n      \"Egress Window Proposals\"\n    ],\n    testimonialQuote: \"Window quotes used to be a pain. Now I send professional proposals that help me win more jobs.\",\n    testimonialAuthor: \"Jennifer Walsh\",\n    testimonialBusiness: \"Walsh Windows & Doors\",\n    priceRange: \"$3,000 - $20,000+\",\n    commonProjects: [\"Whole-house window replacement\", \"Single window replacement\", \"Energy upgrade\", \"Egress window\"],\n    faqs: [\n      {\n        question: \"How do I write a professional window installation proposal?\",\n        answer: \"A professional window proposal includes window specifications (brand, series, size, style), energy ratings, trim and casing details, installation method, warranty information, and timeline. Contractor proposal software helps you present all these details professionally.\"\n      },\n      {\n        question: \"What should be included in a window replacement estimate?\",\n        answer: \"A complete window estimate covers window units, installation labor, exterior trim/capping, interior trim, disposal of old windows, and any required structural modifications. Professional contractor estimates include energy ratings and expected efficiency improvements.\"\n      },\n      {\n        question: \"How much does window installation proposal software cost?\",\n        answer: \"Window installation proposal software ranges from free to $50/month. ScopeGen offers free construction proposal templates for window contractors, making it the best proposal software for small contractors looking to grow.\"\n      },\n      {\n        question: \"Should window proposals include energy efficiency information?\",\n        answer: \"Yes! Professional contractor estimates include U-factor and SGHC ratings to help homeowners understand energy savings. This information can help justify premium window options and differentiate you from competitors.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Window Installation Proposal\",\n      writeProposalContent: \"Knowing how to write a contractor proposal for window installation wins larger whole-house jobs. Measure each window opening precisely and note any structural concerns. Your construction proposal templates should specify window brand, series, energy ratings, and glass options. Professional contractor estimates include both interior and exterior trim details.\",\n      estimateTitle: \"Creating Accurate Window Installation Estimates\",\n      estimateContent: \"Contractor estimate software helps window professionals build accurate quotes. Price each window based on size, type (double-hung, casement, etc.), and features. Factor in trim materials, any structural work, and removal/disposal. Construction bid software helps maintain consistent per-window pricing.\",\n      whyChooseTitle: \"Why Window Contractors Choose ScopeGen\",\n      whyChooseContent: \"Window contractors need proposal software for contractors that handles multiple window types and options. ScopeGen's free construction proposal templates include per-window breakdowns and energy specifications. Our construction proposal with e-signature feature helps close deals on-site after the initial consultation.\"\n    }\n  },\n  \"deck-building-proposal\": {\n    slug: \"deck\",\n    name: \"Deck Building\",\n    title: \"Deck Builder Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for deck builders. Create professional contractor estimates for wood and composite decks. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Deck Builders\",\n    heroSubtitle: \"Generate professional contractor estimates for new deck construction, repairs, and refinishing. Free construction proposal templates with material options.\",\n    benefits: [\n      \"Free construction proposal templates for deck projects\",\n      \"Professional contractor estimates with material options\",\n      \"Construction bid software for square footage pricing\",\n      \"Construction proposal with e-signature included\"\n    ],\n    features: [\n      \"New Deck Construction Proposals\",\n      \"Composite Decking Installation\",\n      \"Deck Repair & Board Replacement\",\n      \"Deck Staining & Sealing Scopes\",\n      \"Pergola & Cover Addition Templates\"\n    ],\n    testimonialQuote: \"My deck proposals are now detailed and professional. Clients trust me more and I close faster.\",\n    testimonialAuthor: \"Brian Foster\",\n    testimonialBusiness: \"Foster Deck & Patio\",\n    priceRange: \"$4,000 - $35,000+\",\n    commonProjects: [\"New deck build\", \"Deck replacement\", \"Deck staining\", \"Railing replacement\"],\n    faqs: [\n      {\n        question: \"How do I write a professional deck building proposal?\",\n        answer: \"A professional deck proposal includes material specifications (wood or composite), dimensions, railing details, stair count, footing requirements, permit information, and timeline. Contractor proposal software helps present all options clearly so clients can make informed decisions.\"\n      },\n      {\n        question: \"What should be included in a deck building estimate?\",\n        answer: \"A complete deck estimate covers decking materials, framing lumber, hardware, railings, stairs, footings/concrete, labor, permits, and any site preparation. Professional contractor estimates also include maintenance recommendations for the chosen materials.\"\n      },\n      {\n        question: \"How much does deck proposal software cost?\",\n        answer: \"Deck proposal software ranges from free to $50/month. ScopeGen offers free construction proposal templates for deck builders, making it the best proposal software for small contractors growing their business.\"\n      },\n      {\n        question: \"Should I offer wood and composite options in my proposals?\",\n        answer: \"Yes! Professional contractor estimates often include both wood and composite options with pricing so clients can choose based on budget and maintenance preferences. Construction bid software makes it easy to create comparison proposals.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Deck Building Proposal\",\n      writeProposalContent: \"Understanding how to write a contractor proposal for deck projects helps win larger outdoor living jobs. Measure the deck area, note elevation changes, and assess soil conditions for footings. Your construction proposal templates should detail decking type, joist spacing, railing style, and stair specifications. Professional contractor estimates include material grades and expected lifespan.\",\n      estimateTitle: \"Creating Accurate Deck Building Estimates\",\n      estimateContent: \"Contractor estimate software helps deck builders create profitable quotes. Calculate board feet for framing, square footage for decking, and linear feet for railings. Factor in footing depth based on frost line and local codes. Construction bid software helps maintain consistent pricing across similar deck designs.\",\n      whyChooseTitle: \"Why Deck Builders Choose ScopeGen\",\n      whyChooseContent: \"Deck builders need proposal software for contractors that presents material options clearly. ScopeGen's free construction proposal templates include wood and composite comparisons with accurate pricing. Our construction proposal with e-signature feature helps close deals quickly during the busy spring and summer seasons.\"\n    }\n  },\n  \"fence-installation-proposal\": {\n    slug: \"fence\",\n    name: \"Fence Installation\",\n    title: \"Fence Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for fence installers. Create professional contractor estimates for wood, vinyl, and chain link fences. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Fence Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for wood, vinyl, and chain link fencing. Free construction proposal templates with linear footage pricing.\",\n    benefits: [\n      \"Free construction proposal templates for fencing\",\n      \"Professional contractor estimates with linear footage\",\n      \"Construction bid software for gate pricing\",\n      \"Best proposal software for small contractors\"\n    ],\n    features: [\n      \"Wood Privacy Fence Proposals\",\n      \"Vinyl Fence Installation Scopes\",\n      \"Chain Link Fence Templates\",\n      \"Gate Installation & Repair\",\n      \"Fence Repair & Replacement Estimates\"\n    ],\n    testimonialQuote: \"Fence estimates are straightforward with ScopeGen. I can quote jobs on-site and send proposals immediately.\",\n    testimonialAuthor: \"Tony Russo\",\n    testimonialBusiness: \"Russo Fence Co.\",\n    priceRange: \"$1,500 - $15,000+\",\n    commonProjects: [\"Privacy fence\", \"Chain link fence\", \"Gate installation\", \"Fence repair\"],\n    faqs: [\n      {\n        question: \"How do I write a professional fence installation proposal?\",\n        answer: \"A professional fence proposal includes linear footage, fence height, post spacing and depth, material specifications, gate details, and timeline. Contractor proposal software helps you create clear proposals that show exactly what clients are getting.\"\n      },\n      {\n        question: \"What should be included in a fence installation estimate?\",\n        answer: \"A complete fence estimate covers materials (posts, rails, pickets/panels), concrete for posts, hardware, gates, labor, removal of old fence if applicable, and permits. Professional contractor estimates break down per-linear-foot pricing for transparency.\"\n      },\n      {\n        question: \"How much does fence proposal software cost?\",\n        answer: \"Fence proposal software ranges from free to $40/month. ScopeGen offers free construction proposal templates for fence contractors, making it the best proposal software for small contractors who want quick, professional estimates.\"\n      },\n      {\n        question: \"How do fence contractors price jobs?\",\n        answer: \"Price fence jobs by linear footage, factoring in material type, fence height, number of gates, terrain difficulty, and post hole conditions. Construction bid software helps maintain consistent per-foot pricing across similar projects.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Fence Installation Proposal\",\n      writeProposalContent: \"Learning how to write a contractor proposal for fence installation helps win more residential and commercial jobs. Measure the property line accurately and note any terrain challenges. Your construction proposal templates should detail fence type, height, post spacing, and gate specifications. Professional contractor estimates include utility locate requirements and any HOA restrictions.\",\n      estimateTitle: \"Creating Accurate Fence Installation Estimates\",\n      estimateContent: \"Contractor estimate software helps fence professionals build profitable quotes. Calculate materials based on linear footage and standard post spacing. Factor in corner posts, end posts, gate posts, and terrain difficulty. Construction bid software helps maintain consistent pricing while adjusting for job-specific conditions.\",\n      whyChooseTitle: \"Why Fence Contractors Choose ScopeGen\",\n      whyChooseContent: \"Fence contractors need proposal software for contractors that works quickly on-site. ScopeGen's free construction proposal templates let you measure a property and send a proposal within minutes. Our construction proposal with e-signature feature helps close deals immediately while you're still on location.\"\n    }\n  },\n  \"concrete-proposal\": {\n    slug: \"concrete\",\n    name: \"Concrete\",\n    title: \"Concrete Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for concrete professionals. Create professional contractor estimates for driveways, patios, and foundations. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Concrete Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for driveways, patios, sidewalks, and foundations. Free construction proposal templates with accurate material calculations.\",\n    benefits: [\n      \"Free construction proposal templates for concrete work\",\n      \"Professional contractor estimates with PSI specs\",\n      \"Construction bid software for accurate yardage\",\n      \"Construction proposal with e-signature\"\n    ],\n    features: [\n      \"Driveway Installation Proposals\",\n      \"Patio & Sidewalk Scopes\",\n      \"Foundation Repair Templates\",\n      \"Stamped Concrete Estimates\",\n      \"Concrete Removal & Replacement\"\n    ],\n    testimonialQuote: \"Concrete work requires detailed estimates. ScopeGen helps me include everything so there are no surprises.\",\n    testimonialAuthor: \"Mark Johnson\",\n    testimonialBusiness: \"Johnson Concrete Services\",\n    priceRange: \"$2,000 - $25,000+\",\n    commonProjects: [\"Driveway replacement\", \"Patio installation\", \"Sidewalk repair\", \"Foundation work\"],\n    faqs: [\n      {\n        question: \"How do I write a professional concrete contractor proposal?\",\n        answer: \"A professional concrete proposal includes dimensions, thickness, PSI specifications, reinforcement details, finishing type, and timeline. Contractor proposal software helps present technical details in a way homeowners understand while ensuring nothing is overlooked.\"\n      },\n      {\n        question: \"What should be included in a concrete estimate?\",\n        answer: \"A complete concrete estimate covers site preparation, forms, reinforcement (rebar/mesh), concrete materials, finishing (broom, stamped, exposed aggregate), curing, and sealing. Professional contractor estimates also include removal of existing concrete if applicable.\"\n      },\n      {\n        question: \"How much does concrete proposal software cost?\",\n        answer: \"Concrete proposal software ranges from free to $50/month. ScopeGen offers free construction proposal templates for concrete contractors, making it the best proposal software for small contractors who need professional-looking estimates.\"\n      },\n      {\n        question: \"How do concrete contractors calculate material needs?\",\n        answer: \"Calculate cubic yards by measuring length x width x depth, adding 5-10% for waste. Construction bid software helps maintain accurate calculations for different slab thicknesses and accounts for overdig and form waste.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Concrete Proposal\",\n      writeProposalContent: \"Knowing how to write a contractor proposal for concrete work builds trust and wins jobs. Assess the site conditions including drainage and soil type. Your construction proposal templates should specify concrete thickness, PSI rating, reinforcement type, and finish style. Professional contractor estimates include curing time requirements and explain any limitations on use during the curing period.\",\n      estimateTitle: \"Creating Accurate Concrete Estimates\",\n      estimateContent: \"Contractor estimate software helps concrete professionals build accurate quotes. Calculate yardage based on dimensions and add appropriate waste factors. Factor in form lumber, reinforcement, finishing labor, and any required removal work. Construction bid software helps maintain consistent square-footage pricing for similar project types.\",\n      whyChooseTitle: \"Why Concrete Contractors Choose ScopeGen\",\n      whyChooseContent: \"Concrete contractors need proposal software for contractors that handles technical specifications accurately. ScopeGen's free construction proposal templates include concrete PSI specs, finishing options, and reinforcement details. Our construction proposal with e-signature feature helps lock in jobs quickly, especially important during good weather windows.\"\n    }\n  },\n  \"tile-installation-proposal\": {\n    slug: \"tile\",\n    name: \"Tile Installation\",\n    title: \"Tile Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for tile installers. Create professional contractor estimates for floor, backsplash, and shower tile. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Tile Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for floor tile, backsplash, and shower installations. Free construction proposal templates with pattern options.\",\n    benefits: [\n      \"Free construction proposal templates for tile work\",\n      \"Professional contractor estimates with square footage\",\n      \"Construction bid software for accurate pricing\",\n      \"Best proposal software for small contractors\"\n    ],\n    features: [\n      \"Floor Tile Installation Proposals\",\n      \"Backsplash Installation Scopes\",\n      \"Shower & Tub Surround Templates\",\n      \"Outdoor Tile Installation\",\n      \"Tile Repair & Replacement Estimates\"\n    ],\n    testimonialQuote: \"Tile jobs have lots of details. ScopeGen helps me capture everything and present it professionally.\",\n    testimonialAuthor: \"Angela Martinez\",\n    testimonialBusiness: \"Martinez Tile & Stone\",\n    priceRange: \"$1,500 - $18,000+\",\n    commonProjects: [\"Kitchen backsplash\", \"Bathroom floor tile\", \"Shower tile\", \"Outdoor patio tile\"],\n    faqs: [\n      {\n        question: \"How do I write a professional tile installation proposal?\",\n        answer: \"A professional tile proposal includes square footage, tile specifications, pattern layout, substrate preparation, grout color, and timeline. Contractor proposal software helps ensure all details are captured and presented clearly to clients.\"\n      },\n      {\n        question: \"What should be included in a tile installation estimate?\",\n        answer: \"A complete tile estimate covers tile materials, thinset, grout, backer board, waterproofing for wet areas, trim pieces, and labor. Professional contractor estimates include waste factor (typically 10-15%) and specify grout color and sealer requirements.\"\n      },\n      {\n        question: \"How much does tile proposal software cost?\",\n        answer: \"Tile proposal software ranges from free to $45/month. ScopeGen offers free construction proposal templates for tile contractors, making it the best proposal software for small contractors who want professional estimates.\"\n      },\n      {\n        question: \"What waste factor should tile estimates include?\",\n        answer: \"Standard tile waste factor is 10-15%, increasing to 15-20% for diagonal patterns or complex layouts. Construction bid software helps calculate accurate material quantities including appropriate waste factors.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Tile Installation Proposal\",\n      writeProposalContent: \"Understanding how to write a contractor proposal for tile work wins more bathroom and kitchen projects. Assess substrate conditions and note any prep work needed. Your construction proposal templates should specify tile size, pattern, layout direction, and grout color. Professional contractor estimates include waterproofing details for shower and wet area installations.\",\n      estimateTitle: \"Creating Accurate Tile Installation Estimates\",\n      estimateContent: \"Contractor estimate software helps tile professionals build profitable quotes. Calculate square footage and add appropriate waste for pattern complexity. Factor in substrate prep, waterproofing, and trim pieces like bullnose and Schluter strips. Construction bid software helps maintain consistent pricing across different tile sizes and patterns.\",\n      whyChooseTitle: \"Why Tile Contractors Choose ScopeGen\",\n      whyChooseContent: \"Tile contractors need proposal software for contractors that handles complex material calculations. ScopeGen's free construction proposal templates include waste factors and pattern options. Our construction proposal with e-signature feature helps close deals during the selection process while clients are excited about their new tile.\"\n    }\n  },\n  \"cabinet-installation-proposal\": {\n    slug: \"cabinet\",\n    name: \"Cabinet Installation\",\n    title: \"Cabinet Contractor Proposal Software | Free Estimate Templates | ScopeGen\",\n    metaDescription: \"Contractor proposal software for cabinet installers. Create professional contractor estimates for kitchen cabinets and vanities. Free construction proposal templates.\",\n    heroTitle: \"Proposal Software for Cabinet Contractors\",\n    heroSubtitle: \"Generate professional contractor estimates for kitchen cabinets, bathroom vanities, and custom cabinetry. Free construction proposal templates with detailed specs.\",\n    benefits: [\n      \"Free construction proposal templates for cabinet work\",\n      \"Professional contractor estimates with cabinet counts\",\n      \"Construction bid software for accurate pricing\",\n      \"Construction proposal with e-signature\"\n    ],\n    features: [\n      \"Kitchen Cabinet Installation Proposals\",\n      \"Bathroom Vanity Installation Scopes\",\n      \"Cabinet Refacing Templates\",\n      \"Custom Cabinet Estimates\",\n      \"Cabinet Hardware Replacement\"\n    ],\n    testimonialQuote: \"Cabinet proposals need to be detailed. ScopeGen makes it easy to show clients exactly what they're getting.\",\n    testimonialAuthor: \"David Lee\",\n    testimonialBusiness: \"Lee Cabinet Installers\",\n    priceRange: \"$3,000 - $30,000+\",\n    commonProjects: [\"Kitchen cabinet install\", \"Bathroom vanity\", \"Cabinet refacing\", \"Pantry cabinets\"],\n    faqs: [\n      {\n        question: \"How do I write a professional cabinet installation proposal?\",\n        answer: \"A professional cabinet proposal includes cabinet count and sizes, door style and finish, hardware specifications, countertop coordination, demolition scope, and installation timeline. Contractor proposal software ensures all details are organized and presented professionally.\"\n      },\n      {\n        question: \"What should be included in a cabinet installation estimate?\",\n        answer: \"A complete cabinet estimate covers cabinet units, hardware, installation labor, demolition and disposal of old cabinets, countertop coordination, and any required plumbing/electrical modifications. Professional contractor estimates include cabinet specifications and warranty information.\"\n      },\n      {\n        question: \"How much does cabinet installation proposal software cost?\",\n        answer: \"Cabinet installation proposal software ranges from free to $55/month. ScopeGen offers free construction proposal templates for cabinet contractors, making it the best proposal software for small contractors who want professional estimates.\"\n      },\n      {\n        question: \"How should cabinet proposals handle countertop coordination?\",\n        answer: \"Professional contractor estimates clearly state whether countertops are included or separate. If coordinating with a countertop fabricator, include templating timelines and explain the installation sequence to set proper expectations.\"\n      }\n    ],\n    seoContent: {\n      writeProposalTitle: \"How to Write a Professional Cabinet Installation Proposal\",\n      writeProposalContent: \"Knowing how to write a contractor proposal for cabinet installation wins larger kitchen and bath projects. Document existing cabinet dimensions and note any structural concerns. Your construction proposal templates should specify cabinet brand, door style, finish color, and hardware selections. Professional contractor estimates include demolition scope and explain any required modifications to plumbing or electrical.\",\n      estimateTitle: \"Creating Accurate Cabinet Installation Estimates\",\n      estimateContent: \"Contractor estimate software helps cabinet professionals build accurate quotes. Calculate based on cabinet count, size categories (base, wall, tall), and complexity of installation. Factor in hardware, demolition, disposal, and any modifications to existing utilities. Construction bid software helps maintain consistent pricing across cabinet lines and grades.\",\n      whyChooseTitle: \"Why Cabinet Contractors Choose ScopeGen\",\n      whyChooseContent: \"Cabinet contractors need proposal software for contractors that handles complex specifications and options. ScopeGen's free construction proposal templates include cabinet counts, hardware selections, and countertop coordination. Our construction proposal with e-signature feature helps close deals during showroom visits while clients are excited about their selections.\"\n    }\n  }\n};\n\ninterface TradeLandingPageProps {\n  tradeSlug: string;\n  citySlug?: string;\n}\n\nexport default function TradeLandingPage({ tradeSlug, citySlug }: TradeLandingPageProps) {\n  const { t } = useLanguage();\n  const trade = tradeData[tradeSlug];\n  const city = citySlug ? cityData[citySlug] : null;\n\n  useEffect(() => {\n    const originalTitle = document.title;\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    const originalDescription = metaDesc?.getAttribute(\"content\") || \"\";\n    \n    if (trade) {\n      const cityPrefix = city ? `${city.name}, ${city.state} ` : \"\";\n      const title = city \n        ? `${trade.name} Proposals in ${city.name}, ${city.state} | ScopeGen`\n        : trade.title;\n      const description = city\n        ? `Create professional ${trade.name.toLowerCase()} proposals for ${city.name}, ${city.state} contractors. ${trade.metaDescription.split('. ').slice(1).join('. ')}`\n        : trade.metaDescription;\n      \n      document.title = title;\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", description);\n      }\n    }\n    \n    return () => {\n      document.title = originalTitle;\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", originalDescription);\n      }\n    };\n  }, [trade, city]);\n\n  if (!trade) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-20 text-center\">\n          <h1 className=\"text-3xl font-bold text-slate-900 mb-4\">Trade Not Found</h1>\n          <p className=\"text-muted-foreground mb-8\">The trade category you're looking for doesn't exist.</p>\n          <Link href=\"/\" className=\"text-primary hover:underline\">Return to Home</Link>\n        </div>\n      </Layout>\n    );\n  }\n\n  const heroTitle = city \n    ? `${trade.name} Proposals in ${city.name}`\n    : trade.heroTitle;\n  \n  const heroSubtitle = city\n    ? `${city.tagline}. ${trade.heroSubtitle}`\n    : trade.heroSubtitle;\n\n  const badgeText = city \n    ? `${trade.name} Contractors in ${city.name}, ${city.state}`\n    : `${trade.name} Contractors`;\n\n  return (\n    <Layout>\n      {/* Hero Section */}\n      <section className=\"relative bg-slate-900 text-white overflow-hidden\">\n        <div className=\"absolute inset-0 z-0 opacity-10\">\n          <div className=\"w-full h-full bg-gradient-to-br from-secondary/30 to-primary/30\"></div>\n        </div>\n        \n        <div className=\"container mx-auto px-4 py-16 md:py-24 relative z-10\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <div className=\"inline-flex items-center gap-2 bg-secondary/20 text-secondary px-4 py-1.5 rounded-full text-sm font-medium mb-6\">\n              {city && <MapPin className=\"w-4 h-4\" />}\n              {badgeText}\n            </div>\n            \n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-heading font-bold leading-tight mb-6\" data-testid=\"heading-trade-title\">\n              {heroTitle}\n            </h1>\n            \n            <p className=\"text-lg text-slate-300 max-w-2xl mx-auto mb-8 leading-relaxed\">\n              {heroSubtitle}\n            </p>\n            \n            {city && (\n              <div className=\"flex items-center justify-center gap-4 text-sm text-slate-400 mb-8\">\n                <span className=\"flex items-center gap-1\">\n                  <MapPin className=\"w-4 h-4\" />\n                  {city.name}, {city.state}\n                </span>\n                <span>|</span>\n                <span>Population: {city.population}</span>\n              </div>\n            )}\n            \n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link \n                href={`/app?trade=${trade.slug}${city ? `&city=${citySlug}` : ''}`}\n                className=\"inline-flex items-center justify-center h-14 px-8 rounded-md bg-secondary text-slate-900 font-bold text-lg hover:bg-secondary/90 transition-all hover:scale-105 shadow-[0_0_20px_rgba(249,115,22,0.3)]\"\n                data-testid=\"button-create-proposal\"\n              >\n                Create {trade.name} Proposal\n                <ArrowRight className=\"ml-2 w-5 h-5\" />\n              </Link>\n              <a \n                href=\"#features\" \n                className=\"inline-flex items-center justify-center h-14 px-8 rounded-md border border-slate-700 bg-slate-800/50 text-white font-medium hover:bg-slate-800 transition-colors\"\n                data-testid=\"link-view-features\"\n              >\n                See What's Included\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Benefits Section */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Why Use ScopeGen for {trade.name} Proposals{city ? ` in ${city.name}` : ''}?\n            </h2>\n            <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n              Stop spending hours writing proposals by hand. Our {trade.name.toLowerCase()} templates include everything you need{city ? ` to serve ${city.name} homeowners` : ''}.\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto\">\n            {trade.benefits.map((benefit, index) => (\n              <div key={index} className=\"bg-slate-50 rounded-lg p-6 border border-slate-100\">\n                <CheckCircle2 className=\"w-8 h-8 text-green-500 mb-4\" />\n                <p className=\"text-slate-700 font-medium\">{benefit}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Features Section */}\n      <section id=\"features\" className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"grid md:grid-cols-2 gap-12 items-center max-w-5xl mx-auto\">\n            <div>\n              <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-6\">\n                {trade.name} Proposal Templates{city ? ` for ${city.name}` : ''}\n              </h2>\n              <p className=\"text-muted-foreground mb-8\">\n                Our {trade.name.toLowerCase()} proposal generator includes pre-built templates for the most common project types. Just select your options and get a professional scope of work instantly.\n              </p>\n              \n              <ul className=\"space-y-4\">\n                {trade.features.map((feature, index) => (\n                  <li key={index} className=\"flex items-start gap-3\">\n                    <FileCheck className=\"w-5 h-5 text-secondary mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-slate-700\">{feature}</span>\n                  </li>\n                ))}\n              </ul>\n              \n              <div className=\"mt-8\">\n                <Link \n                  href={`/app?trade=${trade.slug}${city ? `&city=${citySlug}` : ''}`}\n                  className=\"inline-flex items-center justify-center h-12 px-6 rounded-md bg-primary text-white font-bold hover:bg-primary/90 transition-colors\"\n                  data-testid=\"button-try-templates\"\n                >\n                  Try These Templates Free\n                  <ArrowRight className=\"ml-2 w-4 h-4\" />\n                </Link>\n              </div>\n            </div>\n            \n            <div className=\"bg-white rounded-xl border border-slate-200 shadow-lg p-6\">\n              <div className=\"text-sm text-muted-foreground mb-2\">Typical Project Range{city ? ` in ${city.name}` : ''}</div>\n              <div className=\"text-3xl font-heading font-bold text-slate-900 mb-6\">{trade.priceRange}</div>\n              \n              <div className=\"text-sm font-medium text-slate-700 mb-3\">Common Projects:</div>\n              <div className=\"flex flex-wrap gap-2\">\n                {trade.commonProjects.map((project, index) => (\n                  <span key={index} className=\"bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-sm\">\n                    {project}\n                  </span>\n                ))}\n              </div>\n              \n              <div className=\"mt-6 pt-6 border-t border-slate-200\">\n                <div className=\"flex items-center gap-4 text-sm text-slate-600\">\n                  <div className=\"flex items-center gap-2\">\n                    <Clock className=\"w-4 h-4 text-primary\" />\n                    <span>2 min to create</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Shield className=\"w-4 h-4 text-primary\" />\n                    <span>Warranty included</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Testimonial Section */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <div className=\"flex justify-center gap-1 mb-6\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <Star key={star} className=\"w-6 h-6 fill-secondary text-secondary\" />\n              ))}\n            </div>\n            \n            <blockquote className=\"text-xl sm:text-2xl text-slate-900 font-medium mb-6 leading-relaxed\">\n              \"{trade.testimonialQuote}\"\n            </blockquote>\n            \n            <div>\n              <div className=\"font-bold text-slate-900\">{trade.testimonialAuthor}</div>\n              <div className=\"text-muted-foreground\">{trade.testimonialBusiness}</div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* How It Works */}\n      <section className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Create Your {trade.name} Proposal in 3 Steps\n            </h2>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto\">\n            {[\n              { step: \"1\", title: \"Select Project Type\", desc: `Choose from our ${trade.name.toLowerCase()} templates and customize options` },\n              { step: \"2\", title: \"Add Client Details\", desc: \"Enter your client's name, address, and project specifics\" },\n              { step: \"3\", title: \"Send Professional Proposal\", desc: \"Download, email, or share your proposal with a link\" }\n            ].map((item, i) => (\n              <div key={i} className=\"text-center\">\n                <div className=\"w-14 h-14 bg-secondary rounded-full flex items-center justify-center text-2xl font-heading font-bold text-slate-900 shadow-lg mx-auto mb-4 border-4 border-white\">\n                  {item.step}\n                </div>\n                <h3 className=\"text-lg font-bold text-slate-900 mb-2\">{item.title}</h3>\n                <p className=\"text-muted-foreground text-sm\">{item.desc}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* SEO Content Sections */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto space-y-12\">\n            <div className=\"grid md:grid-cols-2 gap-8\">\n              <div className=\"bg-slate-50 rounded-xl p-8 border border-slate-100\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <BookOpen className=\"w-6 h-6 text-primary\" />\n                  <h2 className=\"text-xl font-heading font-bold text-slate-900\">\n                    {trade.seoContent.writeProposalTitle}\n                  </h2>\n                </div>\n                <p className=\"text-muted-foreground leading-relaxed\">\n                  {trade.seoContent.writeProposalContent}\n                </p>\n              </div>\n              \n              <div className=\"bg-slate-50 rounded-xl p-8 border border-slate-100\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <DollarSign className=\"w-6 h-6 text-primary\" />\n                  <h2 className=\"text-xl font-heading font-bold text-slate-900\">\n                    {trade.seoContent.estimateTitle}\n                  </h2>\n                </div>\n                <p className=\"text-muted-foreground leading-relaxed\">\n                  {trade.seoContent.estimateContent}\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"bg-primary/5 rounded-xl p-8 border border-primary/10\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <Lightbulb className=\"w-6 h-6 text-secondary\" />\n                <h2 className=\"text-xl font-heading font-bold text-slate-900\">\n                  {trade.seoContent.whyChooseTitle}\n                </h2>\n              </div>\n              <p className=\"text-muted-foreground leading-relaxed mb-6\">\n                {trade.seoContent.whyChooseContent}\n              </p>\n              <Link \n                href={`/app?trade=${trade.slug}${city ? `&city=${citySlug}` : ''}`}\n                className=\"inline-flex items-center text-primary font-semibold hover:underline\"\n                data-testid=\"link-try-scopegen\"\n              >\n                Try ScopeGen Free Today\n                <ArrowRight className=\"ml-2 w-4 h-4\" />\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* FAQ Section */}\n      <section id=\"faq\" className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-3xl mx-auto\">\n            <div className=\"text-center mb-12\">\n              <div className=\"inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-1.5 rounded-full text-sm font-medium mb-4\">\n                <HelpCircle className=\"w-4 h-4\" />\n                Frequently Asked Questions\n              </div>\n              <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n                Common Questions About {trade.name} Proposals\n              </h2>\n              <p className=\"text-muted-foreground\">\n                Get answers to the questions contractors ask most about creating professional proposals.\n              </p>\n            </div>\n            \n            <div className=\"space-y-4\" itemScope itemType=\"https://schema.org/FAQPage\">\n              {trade.faqs.map((faq, index) => (\n                <div \n                  key={index}\n                  className=\"bg-white rounded-lg border border-slate-200 overflow-hidden\"\n                  itemScope\n                  itemProp=\"mainEntity\"\n                  itemType=\"https://schema.org/Question\"\n                >\n                  <details className=\"group\">\n                    <summary className=\"flex items-center justify-between cursor-pointer p-6 hover:bg-slate-50 transition-colors list-none\">\n                      <h3 className=\"font-semibold text-slate-900 text-left pr-4\" itemProp=\"name\">\n                        {faq.question}\n                      </h3>\n                      <ChevronDown className=\"w-5 h-5 text-slate-500 flex-shrink-0 transition-transform group-open:rotate-180\" />\n                    </summary>\n                    <div \n                      className=\"px-6 pb-6 text-muted-foreground leading-relaxed\"\n                      itemScope\n                      itemProp=\"acceptedAnswer\"\n                      itemType=\"https://schema.org/Answer\"\n                    >\n                      <p itemProp=\"text\">{faq.answer}</p>\n                    </div>\n                  </details>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* City-specific section for other cities */}\n      {city && (\n        <section className=\"py-16 bg-white\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">\n                {trade.name} Services in Other Texas Cities\n              </h2>\n            </div>\n            <div className=\"flex flex-wrap justify-center gap-3 max-w-3xl mx-auto\">\n              {Object.entries(cityData)\n                .filter(([slug]) => slug !== citySlug)\n                .map(([slug, cityInfo]) => {\n                  const tradeName = tradeSlug.replace('-proposal', '');\n                  return (\n                    <Link\n                      key={slug}\n                      href={`/${tradeName}-${slug}`}\n                      className=\"inline-flex items-center gap-1 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-full text-sm text-slate-700 transition-colors\"\n                    >\n                      <MapPin className=\"w-3 h-3\" />\n                      {cityInfo.name}\n                    </Link>\n                  );\n                })}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* CTA Section */}\n      <section className=\"bg-primary py-16\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-white mb-4\">\n            Ready to Create Your First {trade.name} Proposal{city ? ` in ${city.name}` : ''}?\n          </h2>\n          <p className=\"text-primary-foreground/70 mb-8 max-w-lg mx-auto\">\n            Join thousands of contractors who save hours every week with professional proposals.\n          </p>\n          <Link \n            href={`/app?trade=${trade.slug}${city ? `&city=${citySlug}` : ''}`}\n            className=\"inline-block bg-secondary text-slate-900 font-bold text-lg px-10 py-4 rounded-md hover:bg-white hover:text-primary transition-colors shadow-lg\"\n            data-testid=\"button-start-now\"\n          >\n            Start Now â€” It's Free to Preview\n          </Link>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":95554,"size_tokens":null},"client/src/pages/location-landing.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, CheckCircle2, Clock, DollarSign, FileCheck, MapPin, Shield, Star } from \"lucide-react\";\n\ninterface CityData {\n  name: string;\n  slug: string;\n  state: string;\n  region: \"northern\" | \"southern\";\n  marketContext: string;\n  population: string;\n  constructionGrowth: string;\n}\n\ninterface TradeData {\n  slug: string;\n  name: string;\n  displayName: string;\n  benefits: string[];\n  features: string[];\n  priceRange: string;\n  commonProjects: string[];\n}\n\nconst cities: Record<string, CityData> = {\n  \"new-york\": {\n    name: \"New York\",\n    slug: \"new-york\",\n    state: \"NY\",\n    region: \"northern\",\n    marketContext: \"Serving the tri-state area's competitive construction market with millions of residential and commercial properties\",\n    population: \"8.3 million\",\n    constructionGrowth: \"Strong demand for renovations in brownstones, co-ops, and high-rises\"\n  },\n  \"chicago\": {\n    name: \"Chicago\",\n    slug: \"chicago\",\n    state: \"IL\",\n    region: \"northern\",\n    marketContext: \"Supporting the Midwest's largest metropolitan construction market with diverse residential needs\",\n    population: \"2.7 million\",\n    constructionGrowth: \"Growing demand for vintage home updates and new construction\"\n  },\n  \"boston\": {\n    name: \"Boston\",\n    slug: \"boston\",\n    state: \"MA\",\n    region: \"northern\",\n    marketContext: \"Serving New England's historic properties and modern developments across the Greater Boston area\",\n    population: \"675,000\",\n    constructionGrowth: \"High demand for historic home renovations and energy-efficient upgrades\"\n  },\n  \"philadelphia\": {\n    name: \"Philadelphia\",\n    slug: \"philadelphia\",\n    state: \"PA\",\n    region: \"northern\",\n    marketContext: \"Supporting Philadelphia's mix of historic rowhouses and modern developments\",\n    population: \"1.6 million\",\n    constructionGrowth: \"Strong market for rowhome renovations and neighborhood revitalization\"\n  },\n  \"detroit\": {\n    name: \"Detroit\",\n    slug: \"detroit\",\n    state: \"MI\",\n    region: \"northern\",\n    marketContext: \"Serving Detroit's resurgent construction market with renewed investment in residential properties\",\n    population: \"639,000\",\n    constructionGrowth: \"Rapid growth in home renovations and new residential developments\"\n  },\n  \"houston\": {\n    name: \"Houston\",\n    slug: \"houston\",\n    state: \"TX\",\n    region: \"southern\",\n    marketContext: \"Serving the nation's fourth-largest city with year-round construction opportunities\",\n    population: \"2.3 million\",\n    constructionGrowth: \"Booming residential market with strong new construction and renovation demand\"\n  },\n  \"dallas\": {\n    name: \"Dallas\",\n    slug: \"dallas\",\n    state: \"TX\",\n    region: \"southern\",\n    marketContext: \"Supporting the Dallas-Fort Worth metroplex's explosive growth in residential construction\",\n    population: \"1.3 million\",\n    constructionGrowth: \"One of America's fastest-growing markets for residential contractors\"\n  },\n  \"atlanta\": {\n    name: \"Atlanta\",\n    slug: \"atlanta\",\n    state: \"GA\",\n    region: \"southern\",\n    marketContext: \"Serving the Southeast's largest metropolitan area with diverse construction needs\",\n    population: \"498,000\",\n    constructionGrowth: \"Strong demand for home renovations and new residential developments\"\n  },\n  \"miami\": {\n    name: \"Miami\",\n    slug: \"miami\",\n    state: \"FL\",\n    region: \"southern\",\n    marketContext: \"Serving South Florida's dynamic real estate market with unique coastal construction requirements\",\n    population: \"442,000\",\n    constructionGrowth: \"High demand for luxury renovations and hurricane-resistant upgrades\"\n  },\n  \"phoenix\": {\n    name: \"Phoenix\",\n    slug: \"phoenix\",\n    state: \"AZ\",\n    region: \"southern\",\n    marketContext: \"Supporting one of America's fastest-growing cities with year-round construction activity\",\n    population: \"1.6 million\",\n    constructionGrowth: \"Explosive growth in residential construction and home improvement projects\"\n  }\n};\n\nconst trades: Record<string, TradeData> = {\n  \"bathroom\": {\n    slug: \"bathroom\",\n    name: \"Bathroom Remodeling\",\n    displayName: \"Bathroom Remodel\",\n    benefits: [\n      \"Pre-built scope templates for 5+ bathroom project types\",\n      \"Itemized pricing with labor and materials breakdown\",\n      \"Include fixtures, tile, plumbing, and electrical work\",\n      \"Professional warranty and exclusions language\"\n    ],\n    features: [\n      \"Tub-to-Shower Conversion Proposals\",\n      \"Full Bathroom Gut & Remodel Scopes\",\n      \"Half Bath / Powder Room Templates\",\n      \"ADA Accessibility Bathroom Upgrades\",\n      \"Vanity & Faucet Replacement Proposals\"\n    ],\n    priceRange: \"$1,800 - $28,000+\",\n    commonProjects: [\"Tub-to-shower conversion\", \"Master bath remodel\", \"Guest bathroom update\", \"ADA accessibility retrofit\"]\n  },\n  \"kitchen\": {\n    slug: \"kitchen\",\n    name: \"Kitchen Remodeling\",\n    displayName: \"Kitchen Remodel\",\n    benefits: [\n      \"Detailed cabinet and countertop specifications\",\n      \"Appliance installation scope included\",\n      \"Electrical and plumbing work templates\",\n      \"Material allowances and upgrade options\"\n    ],\n    features: [\n      \"Full Kitchen Gut & Replace Proposals\",\n      \"Cabinet Refacing & Painting Scopes\",\n      \"Countertop Replacement Templates\",\n      \"Backsplash Installation Proposals\",\n      \"Island Addition & Layout Changes\"\n    ],\n    priceRange: \"$8,000 - $85,000+\",\n    commonProjects: [\"Cabinet refacing\", \"Countertop replacement\", \"Full kitchen remodel\", \"Island installation\"]\n  },\n  \"roofing\": {\n    slug: \"roofing\",\n    name: \"Roofing\",\n    displayName: \"Roofing\",\n    benefits: [\n      \"Square footage-based pricing calculations\",\n      \"Material specifications for all roof types\",\n      \"Tear-off and disposal scope included\",\n      \"Weather and warranty provisions\"\n    ],\n    features: [\n      \"Asphalt Shingle Replacement Proposals\",\n      \"Metal Roofing Installation Scopes\",\n      \"Flat Roof / TPO / EPDM Templates\",\n      \"Roof Repair & Patch Estimates\",\n      \"Gutter & Downspout Proposals\"\n    ],\n    priceRange: \"$3,500 - $25,000+\",\n    commonProjects: [\"Full roof replacement\", \"Storm damage repair\", \"Gutter installation\", \"Flat roof coating\"]\n  },\n  \"painting\": {\n    slug: \"painting\",\n    name: \"Painting\",\n    displayName: \"Painting\",\n    benefits: [\n      \"Room-by-room scope breakdowns\",\n      \"Prep work and surface repair included\",\n      \"Paint brand and finish specifications\",\n      \"Color selection and coat specifications\"\n    ],\n    features: [\n      \"Interior Room Painting Proposals\",\n      \"Exterior House Painting Scopes\",\n      \"Cabinet Painting & Refinishing\",\n      \"Deck & Fence Staining Templates\",\n      \"Commercial Painting Estimates\"\n    ],\n    priceRange: \"$800 - $15,000+\",\n    commonProjects: [\"Interior repaint\", \"Exterior house painting\", \"Cabinet refinishing\", \"Deck staining\"]\n  },\n  \"landscaping\": {\n    slug: \"landscaping\",\n    name: \"Landscaping\",\n    displayName: \"Landscaping\",\n    benefits: [\n      \"Plant and material specifications\",\n      \"Hardscape measurement calculations\",\n      \"Irrigation system design scope\",\n      \"Maintenance plans and warranties\"\n    ],\n    features: [\n      \"Lawn Installation & Sod Proposals\",\n      \"Patio & Walkway Hardscape Scopes\",\n      \"Retaining Wall Construction\",\n      \"Irrigation System Installation\",\n      \"Tree & Shrub Planting Templates\"\n    ],\n    priceRange: \"$1,500 - $50,000+\",\n    commonProjects: [\"Backyard redesign\", \"Patio installation\", \"Irrigation system\", \"Front yard curb appeal\"]\n  },\n  \"hvac\": {\n    slug: \"hvac\",\n    name: \"HVAC\",\n    displayName: \"HVAC\",\n    benefits: [\n      \"Equipment specifications and SEER ratings\",\n      \"Load calculation documentation\",\n      \"Ductwork and refrigerant line scope\",\n      \"Warranty and maintenance terms\"\n    ],\n    features: [\n      \"Central AC Installation Proposals\",\n      \"Furnace Replacement Scopes\",\n      \"Mini-Split System Templates\",\n      \"Ductwork Installation & Repair\",\n      \"Heat Pump Conversion Estimates\"\n    ],\n    priceRange: \"$3,000 - $20,000+\",\n    commonProjects: [\"AC replacement\", \"Furnace installation\", \"Mini-split install\", \"Duct cleaning\"]\n  },\n  \"plumbing\": {\n    slug: \"plumbing\",\n    name: \"Plumbing\",\n    displayName: \"Plumbing\",\n    benefits: [\n      \"Fixture and material specifications\",\n      \"Permit and code compliance language\",\n      \"Warranty and guarantee terms\",\n      \"Emergency service provisions\"\n    ],\n    features: [\n      \"Water Heater Installation Proposals\",\n      \"Whole-House Repipe Scopes\",\n      \"Bathroom Plumbing Rough-In\",\n      \"Drain Cleaning & Sewer Repair\",\n      \"Gas Line Installation Templates\"\n    ],\n    priceRange: \"$500 - $15,000+\",\n    commonProjects: [\"Water heater replacement\", \"Pipe repair\", \"Bathroom addition\", \"Sewer line repair\"]\n  },\n  \"electrical\": {\n    slug: \"electrical\",\n    name: \"Electrical\",\n    displayName: \"Electrical\",\n    benefits: [\n      \"Code compliance and permit language\",\n      \"Circuit and amperage specifications\",\n      \"Material and fixture lists\",\n      \"Safety and warranty provisions\"\n    ],\n    features: [\n      \"Electrical Panel Upgrade Proposals\",\n      \"Whole-House Rewiring Scopes\",\n      \"Lighting Installation Templates\",\n      \"EV Charger Installation Estimates\",\n      \"Generator Installation Proposals\"\n    ],\n    priceRange: \"$300 - $12,000+\",\n    commonProjects: [\"Panel upgrade\", \"Outlet installation\", \"Lighting upgrade\", \"EV charger install\"]\n  },\n  \"flooring\": {\n    slug: \"flooring\",\n    name: \"Flooring\",\n    displayName: \"Flooring\",\n    benefits: [\n      \"Square footage calculations included\",\n      \"Subfloor prep and leveling scope\",\n      \"Transition and trim specifications\",\n      \"Material waste factor included\"\n    ],\n    features: [\n      \"Hardwood Flooring Installation\",\n      \"Tile Floor Installation Scopes\",\n      \"Luxury Vinyl Plank (LVP) Templates\",\n      \"Carpet Installation & Removal\",\n      \"Epoxy Floor Coating Proposals\"\n    ],\n    priceRange: \"$2,000 - $20,000+\",\n    commonProjects: [\"Hardwood installation\", \"Tile flooring\", \"LVP installation\", \"Carpet replacement\"]\n  }\n};\n\nconst testimonials: Record<string, { quote: string; author: string; business: string }> = {\n  \"bathroom\": {\n    quote: \"ScopeGen cut my proposal time from 2 hours to 10 minutes. My bathroom remodel quotes look more professional than contractors twice my size.\",\n    author: \"Mike Rodriguez\",\n    business: \"Rodriguez Bath & Tile\"\n  },\n  \"kitchen\": {\n    quote: \"My kitchen remodel proposals used to take forever to write. Now I can send professional quotes same-day and close more deals.\",\n    author: \"Sarah Chen\",\n    business: \"Premier Kitchen & Bath\"\n  },\n  \"roofing\": {\n    quote: \"I was writing roofing estimates by hand for years. ScopeGen makes me look like a much bigger operation.\",\n    author: \"Dave Thompson\",\n    business: \"Thompson Roofing Co.\"\n  },\n  \"painting\": {\n    quote: \"My painting proposals look so professional now. Clients take me seriously and I win more bids.\",\n    author: \"James Wilson\",\n    business: \"Wilson Pro Painters\"\n  },\n  \"landscaping\": {\n    quote: \"ScopeGen helped me present landscaping proposals that match my vision. My close rate went up 40%.\",\n    author: \"Maria Santos\",\n    business: \"Santos Landscaping Design\"\n  },\n  \"hvac\": {\n    quote: \"HVAC proposals need to be detailed and technical. ScopeGen handles all of that automatically.\",\n    author: \"Robert Kim\",\n    business: \"Kim's Heating & Cooling\"\n  },\n  \"plumbing\": {\n    quote: \"I used to dread writing plumbing estimates. Now I create professional proposals in minutes.\",\n    author: \"Tom Anderson\",\n    business: \"Anderson Plumbing Services\"\n  },\n  \"electrical\": {\n    quote: \"My electrical proposals are now as professional as the big companies. Clients trust me more.\",\n    author: \"Chris Martinez\",\n    business: \"Martinez Electric LLC\"\n  },\n  \"flooring\": {\n    quote: \"Flooring estimates used to take me hours. Now I send professional proposals the same day I measure.\",\n    author: \"Lisa Park\",\n    business: \"Park Flooring Solutions\"\n  }\n};\n\ninterface LocationLandingPageProps {\n  citySlug: string;\n  tradeSlug: string;\n}\n\nexport default function LocationLandingPage({ citySlug, tradeSlug }: LocationLandingPageProps) {\n  const city = cities[citySlug];\n  const trade = trades[tradeSlug];\n  const testimonial = testimonials[tradeSlug];\n\n  useEffect(() => {\n    const originalTitle = document.title;\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    const originalDescription = metaDesc?.getAttribute(\"content\") || \"\";\n    \n    if (city && trade) {\n      document.title = `${trade.displayName} Proposals for ${city.name} Contractors | ScopeGen`;\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", `Create professional ${trade.name.toLowerCase()} proposals for ${city.name}, ${city.state} contractors. Generate quotes in 60 seconds. Free preview.`);\n      }\n    }\n    \n    return () => {\n      document.title = originalTitle;\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", originalDescription);\n      }\n    };\n  }, [city, trade]);\n\n  if (!city || !trade) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-20 text-center\">\n          <h1 className=\"text-3xl font-bold text-slate-900 mb-4\">Page Not Found</h1>\n          <p className=\"text-muted-foreground mb-8\">The location or trade you're looking for doesn't exist.</p>\n          <Link href=\"/\" className=\"text-primary hover:underline\">Return to Home</Link>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      {/* Hero Section */}\n      <section className=\"relative bg-slate-900 text-white overflow-hidden\">\n        <div className=\"absolute inset-0 z-0 opacity-10\">\n          <div className=\"w-full h-full bg-gradient-to-br from-secondary/30 to-primary/30\"></div>\n        </div>\n        \n        <div className=\"container mx-auto px-4 py-16 md:py-24 relative z-10\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <div className=\"inline-flex items-center gap-2 bg-secondary/20 text-secondary px-4 py-1.5 rounded-full text-sm font-medium mb-6\">\n              <MapPin className=\"w-4 h-4\" />\n              {city.name}, {city.state} â€¢ {trade.name} Contractors\n            </div>\n            \n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-heading font-bold leading-tight mb-6\" data-testid=\"heading-location-title\">\n              Professional {trade.name} Proposals for {city.name} Contractors\n            </h1>\n            \n            <p className=\"text-lg text-slate-300 max-w-2xl mx-auto mb-8 leading-relaxed\">\n              Generate detailed {trade.name.toLowerCase()} scopes of work tailored for the {city.name} market. {city.marketContext}.\n            </p>\n            \n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link \n                href={`/app?trade=${trade.slug}`}\n                className=\"inline-flex items-center justify-center h-14 px-8 rounded-md bg-secondary text-slate-900 font-bold text-lg hover:bg-secondary/90 transition-all hover:scale-105 shadow-[0_0_20px_rgba(249,115,22,0.3)]\"\n                data-testid=\"button-create-proposal\"\n              >\n                Create {trade.displayName} Proposal\n                <ArrowRight className=\"ml-2 w-5 h-5\" />\n              </Link>\n              <a \n                href=\"#features\" \n                className=\"inline-flex items-center justify-center h-14 px-8 rounded-md border border-slate-700 bg-slate-800/50 text-white font-medium hover:bg-slate-800 transition-colors\"\n                data-testid=\"link-view-features\"\n              >\n                See What's Included\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Local Market Context */}\n      <section className=\"py-12 bg-primary/5 border-b border-primary/10\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <div className=\"flex items-center justify-center gap-2 text-primary font-medium mb-3\">\n              <MapPin className=\"w-5 h-5\" />\n              Serving {city.name}'s Construction Market\n            </div>\n            <p className=\"text-slate-700\">\n              {city.constructionGrowth}. With a population of {city.population}, {city.name} contractors need professional proposals to stand out in this competitive market.\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Benefits Section */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Why {city.name} Contractors Choose ScopeGen for {trade.name} Proposals\n            </h2>\n            <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n              Stop spending hours writing proposals by hand. Our {trade.name.toLowerCase()} templates include everything {city.name} contractors need.\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto\">\n            {trade.benefits.map((benefit, index) => (\n              <div key={index} className=\"bg-slate-50 rounded-lg p-6 border border-slate-100\">\n                <CheckCircle2 className=\"w-8 h-8 text-green-500 mb-4\" />\n                <p className=\"text-slate-700 font-medium\">{benefit}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Features Section */}\n      <section id=\"features\" className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"grid md:grid-cols-2 gap-12 items-center max-w-5xl mx-auto\">\n            <div>\n              <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-6\">\n                {trade.name} Proposal Templates for {city.name}\n              </h2>\n              <p className=\"text-muted-foreground mb-8\">\n                Our {trade.name.toLowerCase()} proposal generator includes pre-built templates optimized for {city.name}, {city.state} contractors. Just select your options and get a professional scope of work instantly.\n              </p>\n              \n              <ul className=\"space-y-4\">\n                {trade.features.map((feature, index) => (\n                  <li key={index} className=\"flex items-start gap-3\">\n                    <FileCheck className=\"w-5 h-5 text-secondary mt-0.5 flex-shrink-0\" />\n                    <span className=\"text-slate-700\">{feature}</span>\n                  </li>\n                ))}\n              </ul>\n              \n              <div className=\"mt-8\">\n                <Link \n                  href={`/app?trade=${trade.slug}`}\n                  className=\"inline-flex items-center justify-center h-12 px-6 rounded-md bg-primary text-white font-bold hover:bg-primary/90 transition-colors\"\n                  data-testid=\"button-try-templates\"\n                >\n                  Try These Templates Free\n                  <ArrowRight className=\"ml-2 w-4 h-4\" />\n                </Link>\n              </div>\n            </div>\n            \n            <div className=\"bg-white rounded-xl border border-slate-200 shadow-lg p-6\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-2\">\n                <MapPin className=\"w-4 h-4\" />\n                {city.name}, {city.state} Market\n              </div>\n              <div className=\"text-sm text-muted-foreground mb-2\">Typical Project Range</div>\n              <div className=\"text-3xl font-heading font-bold text-slate-900 mb-6\">{trade.priceRange}</div>\n              \n              <div className=\"text-sm font-medium text-slate-700 mb-3\">Common Projects in {city.name}:</div>\n              <div className=\"flex flex-wrap gap-2\">\n                {trade.commonProjects.map((project, index) => (\n                  <span key={index} className=\"bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-sm\">\n                    {project}\n                  </span>\n                ))}\n              </div>\n              \n              <div className=\"mt-6 pt-6 border-t border-slate-200\">\n                <div className=\"flex items-center gap-4 text-sm text-slate-600\">\n                  <div className=\"flex items-center gap-2\">\n                    <Clock className=\"w-4 h-4 text-primary\" />\n                    <span>2 min to create</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Shield className=\"w-4 h-4 text-primary\" />\n                    <span>Warranty included</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Testimonial Section */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <div className=\"flex justify-center gap-1 mb-6\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <Star key={star} className=\"w-6 h-6 fill-secondary text-secondary\" />\n              ))}\n            </div>\n            \n            <blockquote className=\"text-xl sm:text-2xl text-slate-900 font-medium mb-6 leading-relaxed\">\n              \"{testimonial.quote}\"\n            </blockquote>\n            \n            <div>\n              <div className=\"font-bold text-slate-900\">{testimonial.author}</div>\n              <div className=\"text-muted-foreground\">{testimonial.business}</div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* How It Works */}\n      <section className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Create Your {city.name} {trade.name} Proposal in 3 Steps\n            </h2>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto\">\n            {[\n              { step: \"1\", title: \"Select Project Type\", desc: `Choose from our ${trade.name.toLowerCase()} templates and customize for ${city.name} clients` },\n              { step: \"2\", title: \"Add Client Details\", desc: `Enter your ${city.name} client's name, address, and project specifics` },\n              { step: \"3\", title: \"Send Professional Proposal\", desc: \"Download, email, or share your proposal with a link\" }\n            ].map((item, i) => (\n              <div key={i} className=\"text-center\">\n                <div className=\"w-14 h-14 bg-secondary rounded-full flex items-center justify-center text-2xl font-heading font-bold text-slate-900 shadow-lg mx-auto mb-4 border-4 border-white\">\n                  {item.step}\n                </div>\n                <h3 className=\"text-lg font-bold text-slate-900 mb-2\">{item.title}</h3>\n                <p className=\"text-muted-foreground text-sm\">{item.desc}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"bg-primary py-16\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-white mb-4\">\n            Ready to Create Your First {city.name} {trade.name} Proposal?\n          </h2>\n          <p className=\"text-primary-foreground/70 mb-8 max-w-lg mx-auto\">\n            Join thousands of {city.name} contractors who save hours every week with professional proposals.\n          </p>\n          <Link \n            href={`/app?trade=${trade.slug}`}\n            className=\"inline-block bg-secondary text-slate-900 font-bold text-lg px-10 py-4 rounded-md hover:bg-white hover:text-primary transition-colors shadow-lg\"\n            data-testid=\"button-start-now\"\n          >\n            Start Now â€” It's Free to Preview\n          </Link>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n\nexport { cities, trades };\n","path":null,"size_bytes":24269,"size_tokens":null},"client/src/pages/spanish-location-landing.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, CheckCircle2, Clock, DollarSign, FileCheck, MapPin, Shield, Star, Phone, Users } from \"lucide-react\";\n\ninterface CityData {\n  name: string;\n  nameEs: string;\n  slug: string;\n  state: string;\n  stateEs: string;\n  marketContext: string;\n  population: string;\n  constructionGrowth: string;\n  hispanicPercent: string;\n}\n\ninterface TradeData {\n  slug: string;\n  name: string;\n  nameEs: string;\n  displayName: string;\n  displayNameEs: string;\n  benefits: string[];\n  features: string[];\n  priceRange: string;\n  commonProjects: string[];\n}\n\nconst spanishCities: Record<string, CityData> = {\n  \"houston\": {\n    name: \"Houston\",\n    nameEs: \"Houston\",\n    slug: \"houston\",\n    state: \"TX\",\n    stateEs: \"Texas\",\n    marketContext: \"Sirviendo al cuarto mercado de construcciÃ³n mÃ¡s grande del paÃ­s con oportunidades durante todo el aÃ±o\",\n    population: \"2.3 millones\",\n    constructionGrowth: \"Mercado residencial en auge con fuerte demanda de construcciÃ³n nueva y remodelaciones\",\n    hispanicPercent: \"45%\"\n  },\n  \"miami\": {\n    name: \"Miami\",\n    nameEs: \"Miami\",\n    slug: \"miami\",\n    state: \"FL\",\n    stateEs: \"Florida\",\n    marketContext: \"Sirviendo al dinÃ¡mico mercado inmobiliario del sur de Florida con requisitos Ãºnicos de construcciÃ³n costera\",\n    population: \"442,000\",\n    constructionGrowth: \"Alta demanda de renovaciones de lujo y mejoras resistentes a huracanes\",\n    hispanicPercent: \"72%\"\n  },\n  \"dallas\": {\n    name: \"Dallas\",\n    nameEs: \"Dallas\",\n    slug: \"dallas\",\n    state: \"TX\",\n    stateEs: \"Texas\",\n    marketContext: \"Apoyando el crecimiento explosivo del Ã¡rea metropolitana Dallas-Fort Worth en construcciÃ³n residencial\",\n    population: \"1.3 millones\",\n    constructionGrowth: \"Uno de los mercados de mÃ¡s rÃ¡pido crecimiento para contratistas residenciales en Estados Unidos\",\n    hispanicPercent: \"42%\"\n  },\n  \"phoenix\": {\n    name: \"Phoenix\",\n    nameEs: \"Phoenix\",\n    slug: \"phoenix\",\n    state: \"AZ\",\n    stateEs: \"Arizona\",\n    marketContext: \"Apoyando una de las ciudades de mÃ¡s rÃ¡pido crecimiento de Estados Unidos con actividad de construcciÃ³n durante todo el aÃ±o\",\n    population: \"1.6 millones\",\n    constructionGrowth: \"Crecimiento explosivo en construcciÃ³n residencial y proyectos de mejoras del hogar\",\n    hispanicPercent: \"43%\"\n  },\n  \"los-angeles\": {\n    name: \"Los Angeles\",\n    nameEs: \"Los Ãngeles\",\n    slug: \"los-angeles\",\n    state: \"CA\",\n    stateEs: \"California\",\n    marketContext: \"Sirviendo al mercado de construcciÃ³n mÃ¡s grande de la costa oeste con diversas necesidades residenciales y comerciales\",\n    population: \"3.9 millones\",\n    constructionGrowth: \"Demanda constante de remodelaciones, ADUs y mejoras sÃ­smicas\",\n    hispanicPercent: \"48%\"\n  },\n  \"san-antonio\": {\n    name: \"San Antonio\",\n    nameEs: \"San Antonio\",\n    slug: \"san-antonio\",\n    state: \"TX\",\n    stateEs: \"Texas\",\n    marketContext: \"Sirviendo al segundo mercado mÃ¡s grande de Texas con fuerte herencia hispana y crecimiento constante\",\n    population: \"1.5 millones\",\n    constructionGrowth: \"Mercado en expansiÃ³n con alta demanda de construcciÃ³n residencial y remodelaciones\",\n    hispanicPercent: \"63%\"\n  },\n  \"san-diego\": {\n    name: \"San Diego\",\n    nameEs: \"San Diego\",\n    slug: \"san-diego\",\n    state: \"CA\",\n    stateEs: \"California\",\n    marketContext: \"Sirviendo al mercado fronterizo de California con necesidades Ãºnicas de construcciÃ³n costera\",\n    population: \"1.4 millones\",\n    constructionGrowth: \"Alta demanda de renovaciones residenciales y mejoras de eficiencia energÃ©tica\",\n    hispanicPercent: \"30%\"\n  },\n  \"chicago\": {\n    name: \"Chicago\",\n    nameEs: \"Chicago\",\n    slug: \"chicago\",\n    state: \"IL\",\n    stateEs: \"Illinois\",\n    marketContext: \"Sirviendo a la comunidad hispana mÃ¡s grande del Medio Oeste con diversas necesidades de construcciÃ³n\",\n    population: \"2.7 millones\",\n    constructionGrowth: \"Mercado estable con fuerte demanda de remodelaciones y renovaciones histÃ³ricas\",\n    hispanicPercent: \"29%\"\n  },\n  \"las-vegas\": {\n    name: \"Las Vegas\",\n    nameEs: \"Las Vegas\",\n    slug: \"las-vegas\",\n    state: \"NV\",\n    stateEs: \"Nevada\",\n    marketContext: \"Sirviendo a uno de los mercados de mÃ¡s rÃ¡pido crecimiento del suroeste con construcciÃ³n durante todo el aÃ±o\",\n    population: \"641,000\",\n    constructionGrowth: \"Crecimiento explosivo en construcciÃ³n residencial y desarrollos nuevos\",\n    hispanicPercent: \"33%\"\n  },\n  \"san-jose\": {\n    name: \"San Jose\",\n    nameEs: \"San JosÃ©\",\n    slug: \"san-jose\",\n    state: \"CA\",\n    stateEs: \"California\",\n    marketContext: \"Sirviendo al corazÃ³n de Silicon Valley con proyectos de alta gama y tecnologÃ­a inteligente\",\n    population: \"1.0 millones\",\n    constructionGrowth: \"Alta demanda de remodelaciones de lujo, ADUs y mejoras de hogar inteligente\",\n    hispanicPercent: \"33%\"\n  }\n};\n\nconst spanishTrades: Record<string, TradeData> = {\n  \"bathroom\": {\n    slug: \"bathroom\",\n    name: \"Bathroom Remodeling\",\n    nameEs: \"RemodelaciÃ³n de BaÃ±os\",\n    displayName: \"Bathroom Remodel\",\n    displayNameEs: \"RemodelaciÃ³n de BaÃ±o\",\n    benefits: [\n      \"Plantillas pre-construidas para 5+ tipos de proyectos de baÃ±o\",\n      \"Precios detallados con desglose de mano de obra y materiales\",\n      \"Incluye accesorios, azulejos, plomerÃ­a y trabajo elÃ©ctrico\",\n      \"Lenguaje profesional de garantÃ­as y exclusiones\"\n    ],\n    features: [\n      \"Propuestas de ConversiÃ³n de Tina a Ducha\",\n      \"Alcances de RemodelaciÃ³n Completa de BaÃ±o\",\n      \"Plantillas para Medio BaÃ±o / Tocador\",\n      \"Mejoras de Accesibilidad ADA para BaÃ±os\",\n      \"Propuestas de Reemplazo de Lavabo y GriferÃ­a\"\n    ],\n    priceRange: \"$1,800 - $28,000+\",\n    commonProjects: [\"ConversiÃ³n tina a ducha\", \"RemodelaciÃ³n de baÃ±o principal\", \"ActualizaciÃ³n de baÃ±o de visitas\", \"Retrofit de accesibilidad ADA\"]\n  },\n  \"kitchen\": {\n    slug: \"kitchen\",\n    name: \"Kitchen Remodeling\",\n    nameEs: \"RemodelaciÃ³n de Cocinas\",\n    displayName: \"Kitchen Remodel\",\n    displayNameEs: \"RemodelaciÃ³n de Cocina\",\n    benefits: [\n      \"Especificaciones detalladas de gabinetes y encimeras\",\n      \"Alcance de instalaciÃ³n de electrodomÃ©sticos incluido\",\n      \"Plantillas de trabajo elÃ©ctrico y de plomerÃ­a\",\n      \"Asignaciones de materiales y opciones de mejora\"\n    ],\n    features: [\n      \"Propuestas de RemodelaciÃ³n Completa de Cocina\",\n      \"Alcances de Repintado y Refacing de Gabinetes\",\n      \"Plantillas de Reemplazo de Encimeras\",\n      \"Propuestas de InstalaciÃ³n de Backsplash\",\n      \"AdiciÃ³n de Isla y Cambios de DiseÃ±o\"\n    ],\n    priceRange: \"$8,000 - $85,000+\",\n    commonProjects: [\"Refacing de gabinetes\", \"Reemplazo de encimeras\", \"RemodelaciÃ³n completa de cocina\", \"InstalaciÃ³n de isla\"]\n  },\n  \"roofing\": {\n    slug: \"roofing\",\n    name: \"Roofing\",\n    nameEs: \"Techado\",\n    displayName: \"Roofing\",\n    displayNameEs: \"Techado\",\n    benefits: [\n      \"CÃ¡lculos de precios basados en pies cuadrados\",\n      \"Especificaciones de materiales para todos los tipos de techo\",\n      \"Alcance de remociÃ³n y disposiciÃ³n incluido\",\n      \"Provisiones de clima y garantÃ­a\"\n    ],\n    features: [\n      \"Propuestas de Reemplazo de Tejas AsfÃ¡lticas\",\n      \"Alcances de InstalaciÃ³n de Techo MetÃ¡lico\",\n      \"Plantillas de Techo Plano / TPO / EPDM\",\n      \"Estimados de ReparaciÃ³n y Parche de Techo\",\n      \"Propuestas de Canaletas y Bajantes\"\n    ],\n    priceRange: \"$3,500 - $25,000+\",\n    commonProjects: [\"Reemplazo completo de techo\", \"ReparaciÃ³n por tormenta\", \"InstalaciÃ³n de canaletas\", \"Recubrimiento de techo plano\"]\n  },\n  \"painting\": {\n    slug: \"painting\",\n    name: \"Painting\",\n    nameEs: \"Pintura\",\n    displayName: \"Painting\",\n    displayNameEs: \"Pintura\",\n    benefits: [\n      \"Desgloses de alcance habitaciÃ³n por habitaciÃ³n\",\n      \"Trabajo de preparaciÃ³n y reparaciÃ³n de superficies incluido\",\n      \"Especificaciones de marca y acabado de pintura\",\n      \"SelecciÃ³n de colores y especificaciones de capas\"\n    ],\n    features: [\n      \"Propuestas de Pintura Interior de Habitaciones\",\n      \"Alcances de Pintura Exterior de Casa\",\n      \"Pintura y Refinishing de Gabinetes\",\n      \"Plantillas de TeÃ±ido de Deck y Cerca\",\n      \"Estimados de Pintura Comercial\"\n    ],\n    priceRange: \"$800 - $15,000+\",\n    commonProjects: [\"Repintado interior\", \"Pintura exterior de casa\", \"Refinishing de gabinetes\", \"TeÃ±ido de deck\"]\n  },\n  \"landscaping\": {\n    slug: \"landscaping\",\n    name: \"Landscaping\",\n    nameEs: \"Paisajismo\",\n    displayName: \"Landscaping\",\n    displayNameEs: \"Paisajismo\",\n    benefits: [\n      \"Especificaciones de plantas y materiales\",\n      \"CÃ¡lculos de mediciÃ³n de hardscape\",\n      \"Alcance de diseÃ±o de sistema de riego\",\n      \"Planes de mantenimiento y garantÃ­as\"\n    ],\n    features: [\n      \"Propuestas de InstalaciÃ³n de CÃ©sped y Pasto\",\n      \"Alcances de Patio y Pasarelas de Hardscape\",\n      \"ConstrucciÃ³n de Muros de RetenciÃ³n\",\n      \"InstalaciÃ³n de Sistema de Riego\",\n      \"Plantillas de PlantaciÃ³n de Ãrboles y Arbustos\"\n    ],\n    priceRange: \"$1,500 - $50,000+\",\n    commonProjects: [\"RediseÃ±o de patio trasero\", \"InstalaciÃ³n de patio\", \"Sistema de riego\", \"Mejora de jardÃ­n frontal\"]\n  },\n  \"hvac\": {\n    slug: \"hvac\",\n    name: \"HVAC\",\n    nameEs: \"Aire Acondicionado y CalefacciÃ³n\",\n    displayName: \"HVAC\",\n    displayNameEs: \"HVAC\",\n    benefits: [\n      \"Especificaciones de equipo y clasificaciones SEER\",\n      \"DocumentaciÃ³n de cÃ¡lculo de carga\",\n      \"Alcance de ductos y lÃ­neas de refrigerante\",\n      \"TÃ©rminos de garantÃ­a y mantenimiento\"\n    ],\n    features: [\n      \"Propuestas de InstalaciÃ³n de AC Central\",\n      \"Alcances de Reemplazo de Horno\",\n      \"Plantillas de Sistema Mini-Split\",\n      \"InstalaciÃ³n y ReparaciÃ³n de Ductos\",\n      \"Estimados de ConversiÃ³n a Bomba de Calor\"\n    ],\n    priceRange: \"$3,000 - $20,000+\",\n    commonProjects: [\"Reemplazo de AC\", \"InstalaciÃ³n de horno\", \"InstalaciÃ³n de mini-split\", \"Limpieza de ductos\"]\n  },\n  \"plumbing\": {\n    slug: \"plumbing\",\n    name: \"Plumbing\",\n    nameEs: \"PlomerÃ­a\",\n    displayName: \"Plumbing\",\n    displayNameEs: \"PlomerÃ­a\",\n    benefits: [\n      \"Especificaciones de accesorios y materiales\",\n      \"Lenguaje de permisos y cumplimiento de cÃ³digos\",\n      \"TÃ©rminos de garantÃ­a\",\n      \"Provisiones de servicio de emergencia\"\n    ],\n    features: [\n      \"Propuestas de InstalaciÃ³n de Calentador de Agua\",\n      \"Alcances de Retubing de Toda la Casa\",\n      \"Rough-In de PlomerÃ­a de BaÃ±o\",\n      \"Limpieza de Drenaje y ReparaciÃ³n de Alcantarillado\",\n      \"Plantillas de InstalaciÃ³n de LÃ­nea de Gas\"\n    ],\n    priceRange: \"$500 - $15,000+\",\n    commonProjects: [\"Reemplazo de calentador de agua\", \"ReparaciÃ³n de tuberÃ­as\", \"AdiciÃ³n de baÃ±o\", \"ReparaciÃ³n de lÃ­nea de alcantarillado\"]\n  },\n  \"electrical\": {\n    slug: \"electrical\",\n    name: \"Electrical\",\n    nameEs: \"Electricidad\",\n    displayName: \"Electrical\",\n    displayNameEs: \"Electricidad\",\n    benefits: [\n      \"Lenguaje de cumplimiento de cÃ³digo y permisos\",\n      \"Especificaciones de circuito y amperaje\",\n      \"Listas de materiales y accesorios\",\n      \"Provisiones de seguridad y garantÃ­a\"\n    ],\n    features: [\n      \"Propuestas de ActualizaciÃ³n de Panel ElÃ©ctrico\",\n      \"Alcances de Recableado de Toda la Casa\",\n      \"Plantillas de InstalaciÃ³n de IluminaciÃ³n\",\n      \"Estimados de InstalaciÃ³n de Cargador EV\",\n      \"Propuestas de InstalaciÃ³n de Generador\"\n    ],\n    priceRange: \"$300 - $12,000+\",\n    commonProjects: [\"ActualizaciÃ³n de panel\", \"InstalaciÃ³n de tomacorrientes\", \"Mejora de iluminaciÃ³n\", \"InstalaciÃ³n de cargador EV\"]\n  },\n  \"flooring\": {\n    slug: \"flooring\",\n    name: \"Flooring\",\n    nameEs: \"Pisos\",\n    displayName: \"Flooring\",\n    displayNameEs: \"Pisos\",\n    benefits: [\n      \"CÃ¡lculos de pies cuadrados incluidos\",\n      \"Alcance de preparaciÃ³n y nivelaciÃ³n de subpiso\",\n      \"Especificaciones de transiciones y molduras\",\n      \"Factor de desperdicio de material incluido\"\n    ],\n    features: [\n      \"InstalaciÃ³n de Pisos de Madera Dura\",\n      \"Alcances de InstalaciÃ³n de Piso de Azulejo\",\n      \"Plantillas de Vinyl de Lujo (LVP)\",\n      \"InstalaciÃ³n y RemociÃ³n de Alfombra\",\n      \"Propuestas de Recubrimiento de Piso EpÃ³xico\"\n    ],\n    priceRange: \"$2,000 - $20,000+\",\n    commonProjects: [\"InstalaciÃ³n de madera dura\", \"Piso de azulejo\", \"InstalaciÃ³n de LVP\", \"Reemplazo de alfombra\"]\n  }\n};\n\nconst spanishTestimonials: Record<string, { quote: string; author: string; business: string }> = {\n  \"bathroom\": {\n    quote: \"ScopeGen redujo mi tiempo de propuestas de 2 horas a 10 minutos. Mis cotizaciones de remodelaciÃ³n de baÃ±o lucen mÃ¡s profesionales que contratistas del doble de mi tamaÃ±o.\",\n    author: \"Miguel RodrÃ­guez\",\n    business: \"RodrÃ­guez BaÃ±os y Azulejos\"\n  },\n  \"kitchen\": {\n    quote: \"Mis propuestas de remodelaciÃ³n de cocina solÃ­an tomar una eternidad. Ahora puedo enviar cotizaciones profesionales el mismo dÃ­a y cerrar mÃ¡s tratos.\",\n    author: \"MarÃ­a Elena GarcÃ­a\",\n    business: \"GarcÃ­a Cocinas Premium\"\n  },\n  \"roofing\": {\n    quote: \"EscribÃ­a estimados de techado a mano por aÃ±os. ScopeGen me hace ver como una operaciÃ³n mucho mÃ¡s grande.\",\n    author: \"Carlos HernÃ¡ndez\",\n    business: \"HernÃ¡ndez Techados\"\n  },\n  \"painting\": {\n    quote: \"Mis propuestas de pintura lucen tan profesionales ahora. Los clientes me toman en serio y gano mÃ¡s licitaciones.\",\n    author: \"JosÃ© Luis MartÃ­nez\",\n    business: \"MartÃ­nez Pintores Profesionales\"\n  },\n  \"landscaping\": {\n    quote: \"ScopeGen me ayudÃ³ a presentar propuestas de paisajismo que coinciden con mi visiÃ³n. Mi tasa de cierre subiÃ³ 40%.\",\n    author: \"Rosa FernÃ¡ndez\",\n    business: \"FernÃ¡ndez DiseÃ±o de Paisajes\"\n  },\n  \"hvac\": {\n    quote: \"Las propuestas de HVAC necesitan ser detalladas y tÃ©cnicas. ScopeGen maneja todo eso automÃ¡ticamente.\",\n    author: \"Roberto SÃ¡nchez\",\n    business: \"SÃ¡nchez Aire y CalefacciÃ³n\"\n  },\n  \"plumbing\": {\n    quote: \"SolÃ­a temer escribir estimados de plomerÃ­a. Ahora creo propuestas profesionales en minutos.\",\n    author: \"Antonio LÃ³pez\",\n    business: \"LÃ³pez Servicios de PlomerÃ­a\"\n  },\n  \"electrical\": {\n    quote: \"Mis propuestas elÃ©ctricas ahora son tan profesionales como las de las grandes empresas. Los clientes confÃ­an mÃ¡s en mÃ­.\",\n    author: \"Francisco RamÃ­rez\",\n    business: \"RamÃ­rez Electric LLC\"\n  },\n  \"flooring\": {\n    quote: \"Los estimados de pisos me tomaban horas. Ahora envÃ­o propuestas profesionales el mismo dÃ­a que mido.\",\n    author: \"Ana MarÃ­a Torres\",\n    business: \"Torres Soluciones de Pisos\"\n  }\n};\n\ninterface SpanishLocationLandingPageProps {\n  citySlug: string;\n}\n\nexport default function SpanishLocationLandingPage({ citySlug }: SpanishLocationLandingPageProps) {\n  const city = spanishCities[citySlug];\n\n  useEffect(() => {\n    const originalTitle = document.title;\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    const originalDescription = metaDesc?.getAttribute(\"content\") || \"\";\n    \n    if (city) {\n      document.title = `Propuestas Profesionales para Contratistas en ${city.nameEs} | ScopeGen`;\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", `Propuestas profesionales para contratistas en ${city.nameEs}, ${city.stateEs}. Genera cotizaciones en 60 segundos. Vista previa gratis.`);\n      }\n    }\n    \n    return () => {\n      document.title = originalTitle;\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", originalDescription);\n      }\n    };\n  }, [city]);\n\n  if (!city) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-20 text-center\">\n          <h1 className=\"text-3xl font-bold text-slate-900 mb-4\">PÃ¡gina No Encontrada</h1>\n          <p className=\"text-muted-foreground mb-8\">La ubicaciÃ³n que busca no existe.</p>\n          <Link href=\"/\" className=\"text-primary hover:underline\">Regresar al Inicio</Link>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      {/* Hero Section */}\n      <section className=\"relative bg-slate-900 text-white overflow-hidden\">\n        <div className=\"absolute inset-0 z-0 opacity-10\">\n          <div className=\"w-full h-full bg-gradient-to-br from-secondary/30 to-primary/30\"></div>\n        </div>\n        \n        <div className=\"container mx-auto px-4 py-16 md:py-24 relative z-10\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <div className=\"inline-flex items-center gap-2 bg-green-500/20 text-green-400 px-4 py-1.5 rounded-full text-sm font-medium mb-4\">\n              <span className=\"text-lg\">ðŸ‡²ðŸ‡½</span>\n              Completamente en EspaÃ±ol\n            </div>\n            \n            <div className=\"inline-flex items-center gap-2 bg-secondary/20 text-secondary px-4 py-1.5 rounded-full text-sm font-medium mb-6 ml-2\">\n              <MapPin className=\"w-4 h-4\" />\n              {city.nameEs}, {city.stateEs} â€¢ {city.hispanicPercent} PoblaciÃ³n Hispana\n            </div>\n            \n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-heading font-bold leading-tight mb-6\" data-testid=\"heading-spanish-title\">\n              Propuestas Profesionales para Contratistas en {city.nameEs}\n            </h1>\n            \n            <p className=\"text-lg text-slate-300 max-w-2xl mx-auto mb-8 leading-relaxed\">\n              Genera propuestas profesionales y alcances de trabajo en minutos, no horas. {city.marketContext}. \n              <strong className=\"text-white\"> Todo en espaÃ±ol.</strong>\n            </p>\n            \n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link \n                href=\"/app?lang=es\"\n                className=\"inline-flex items-center justify-center h-14 px-8 rounded-md bg-secondary text-slate-900 font-bold text-lg hover:bg-secondary/90 transition-all hover:scale-105 shadow-[0_0_20px_rgba(249,115,22,0.3)]\"\n                data-testid=\"button-crear-propuesta\"\n              >\n                Crear Mi Propuesta Gratis\n                <ArrowRight className=\"ml-2 w-5 h-5\" />\n              </Link>\n              <a \n                href=\"#oficios\" \n                className=\"inline-flex items-center justify-center h-14 px-8 rounded-md border border-slate-700 bg-slate-800/50 text-white font-medium hover:bg-slate-800 transition-colors\"\n                data-testid=\"link-ver-oficios\"\n              >\n                Ver Todos los Oficios\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Local Market Context */}\n      <section className=\"py-12 bg-primary/5 border-b border-primary/10\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"grid md:grid-cols-3 gap-6 text-center\">\n              <div className=\"bg-white rounded-lg p-6 border border-slate-200\">\n                <Users className=\"w-8 h-8 text-primary mx-auto mb-3\" />\n                <div className=\"text-2xl font-bold text-slate-900\">{city.hispanicPercent}</div>\n                <div className=\"text-sm text-muted-foreground\">PoblaciÃ³n Hispana en {city.nameEs}</div>\n              </div>\n              <div className=\"bg-white rounded-lg p-6 border border-slate-200\">\n                <MapPin className=\"w-8 h-8 text-secondary mx-auto mb-3\" />\n                <div className=\"text-2xl font-bold text-slate-900\">{city.population}</div>\n                <div className=\"text-sm text-muted-foreground\">Residentes en el Ãrea</div>\n              </div>\n              <div className=\"bg-white rounded-lg p-6 border border-slate-200\">\n                <Phone className=\"w-8 h-8 text-green-500 mx-auto mb-3\" />\n                <div className=\"text-2xl font-bold text-slate-900\">100%</div>\n                <div className=\"text-sm text-muted-foreground\">Soporte en EspaÃ±ol</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Why Spanish Matters */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Â¿Por QuÃ© los Contratistas de {city.nameEs} Eligen ScopeGen?\n            </h2>\n            <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n              Deja de perder horas escribiendo propuestas a mano. Nuestras plantillas incluyen todo lo que necesitan los contratistas de {city.nameEs}.\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto\">\n            {[\n              { title: \"Completamente en EspaÃ±ol\", desc: \"Toda la aplicaciÃ³n, plantillas y propuestas en espaÃ±ol profesional\" },\n              { title: \"Ahorra Tiempo\", desc: \"Crea propuestas profesionales en 2 minutos, no 2 horas\" },\n              { title: \"Gana MÃ¡s Trabajos\", desc: \"Propuestas profesionales que impresionan a los clientes\" },\n              { title: \"Precios del Mercado Local\", desc: \"Rangos de precios actualizados para el mercado de \" + city.nameEs }\n            ].map((item, index) => (\n              <div key={index} className=\"bg-slate-50 rounded-lg p-6 border border-slate-100\">\n                <CheckCircle2 className=\"w-8 h-8 text-green-500 mb-4\" />\n                <h3 className=\"font-bold text-slate-900 mb-2\">{item.title}</h3>\n                <p className=\"text-sm text-muted-foreground\">{item.desc}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Trades Section */}\n      <section id=\"oficios\" className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Plantillas de Propuestas para Todos los Oficios\n            </h2>\n            <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n              Selecciona tu oficio y genera propuestas profesionales al instante\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto\">\n            {Object.values(spanishTrades).map((trade) => (\n              <div key={trade.slug} className=\"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow\">\n                <h3 className=\"text-lg font-bold text-slate-900 mb-2\">{trade.nameEs}</h3>\n                <p className=\"text-sm text-muted-foreground mb-4\">Rango tÃ­pico: {trade.priceRange}</p>\n                \n                <ul className=\"space-y-2 mb-6\">\n                  {trade.features.slice(0, 3).map((feature, i) => (\n                    <li key={i} className=\"flex items-start gap-2 text-sm\">\n                      <CheckCircle2 className=\"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                      <span className=\"text-slate-700\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n                \n                <Link \n                  href={`/app?trade=${trade.slug}&lang=es`}\n                  className=\"inline-flex items-center text-primary font-medium hover:text-primary/80 text-sm\"\n                  data-testid={`link-trade-${trade.slug}`}\n                >\n                  Crear Propuesta de {trade.displayNameEs}\n                  <ArrowRight className=\"ml-1 w-4 h-4\" />\n                </Link>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Testimonials */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Lo Que Dicen los Contratistas Hispanos\n            </h2>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto\">\n            {Object.entries(spanishTestimonials).slice(0, 3).map(([key, testimonial]) => (\n              <div key={key} className=\"bg-slate-50 rounded-xl p-6 border border-slate-100\">\n                <div className=\"flex gap-1 mb-4\">\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <Star key={star} className=\"w-5 h-5 fill-secondary text-secondary\" />\n                  ))}\n                </div>\n                <blockquote className=\"text-slate-700 mb-4 text-sm leading-relaxed\">\n                  \"{testimonial.quote}\"\n                </blockquote>\n                <div>\n                  <div className=\"font-bold text-slate-900 text-sm\">{testimonial.author}</div>\n                  <div className=\"text-muted-foreground text-xs\">{testimonial.business}</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* How It Works */}\n      <section className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n              Crea Tu Propuesta en 3 Pasos Simples\n            </h2>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto\">\n            {[\n              { step: \"1\", title: \"Selecciona Tu Oficio\", desc: \"Elige entre mÃ¡s de 9 tipos de proyectos con plantillas listas para usar\" },\n              { step: \"2\", title: \"Agrega Detalles\", desc: \"Ingresa el nombre de tu cliente, direcciÃ³n y especificaciones del proyecto\" },\n              { step: \"3\", title: \"EnvÃ­a Tu Propuesta\", desc: \"Descarga en PDF, envÃ­a por correo o comparte con un enlace\" }\n            ].map((item, i) => (\n              <div key={i} className=\"text-center\">\n                <div className=\"w-14 h-14 bg-secondary rounded-full flex items-center justify-center text-2xl font-heading font-bold text-slate-900 shadow-lg mx-auto mb-4 border-4 border-white\">\n                  {item.step}\n                </div>\n                <h3 className=\"font-bold text-slate-900 mb-2\">{item.title}</h3>\n                <p className=\"text-sm text-muted-foreground\">{item.desc}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"py-20 bg-slate-900 text-white\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <div className=\"inline-flex items-center gap-2 bg-green-500/20 text-green-400 px-4 py-1.5 rounded-full text-sm font-medium mb-6\">\n            <span className=\"text-lg\">ðŸ‡²ðŸ‡½</span>\n            100% en EspaÃ±ol\n          </div>\n          \n          <h2 className=\"text-2xl sm:text-3xl font-heading font-bold mb-4\">\n            Â¿Listo para Crear Propuestas Profesionales?\n          </h2>\n          <p className=\"text-slate-300 max-w-xl mx-auto mb-8\">\n            Ãšnete a miles de contratistas hispanos que ya usan ScopeGen para ganar mÃ¡s trabajos en {city.nameEs}.\n          </p>\n          \n          <Link \n            href=\"/app?lang=es\"\n            className=\"inline-flex items-center justify-center h-14 px-10 rounded-md bg-secondary text-slate-900 font-bold text-lg hover:bg-secondary/90 transition-all hover:scale-105 shadow-[0_0_30px_rgba(249,115,22,0.4)]\"\n            data-testid=\"button-comenzar-gratis\"\n          >\n            Comenzar Gratis\n            <ArrowRight className=\"ml-2 w-5 h-5\" />\n          </Link>\n          \n          <p className=\"text-slate-500 text-sm mt-4\">\n            Vista previa gratis â€¢ No se requiere tarjeta de crÃ©dito\n          </p>\n        </div>\n      </section>\n\n      {/* Other Cities */}\n      <section className=\"py-12 bg-white border-t border-slate-200\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-8\">\n            <h3 className=\"text-lg font-bold text-slate-900 mb-2\">Otras Ciudades con Alta PoblaciÃ³n Hispana</h3>\n          </div>\n          \n          <div className=\"flex flex-wrap justify-center gap-4\">\n            {Object.values(spanishCities).filter(c => c.slug !== citySlug).map((otherCity) => (\n              <Link \n                key={otherCity.slug}\n                href={`/es/${otherCity.slug}`}\n                className=\"bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-full text-sm transition-colors\"\n              >\n                {otherCity.nameEs}, {otherCity.state}\n              </Link>\n            ))}\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n\nexport { spanishCities, spanishTrades };\n","path":null,"size_bytes":28811,"size_tokens":null},"client/src/pages/compare.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, Check, X, Star, Clock, DollarSign, Zap, Shield, Users } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface CompetitorData {\n  slug: string;\n  name: string;\n  title: string;\n  metaDescription: string;\n  heroTitle: string;\n  heroSubtitle: string;\n  competitorDescription: string;\n  targetAudience: string;\n  pricing: string;\n  limitations: string[];\n  scopegenAdvantages: string[];\n  featureComparison: {\n    feature: string;\n    scopegen: boolean | string;\n    competitor: boolean | string;\n  }[];\n}\n\nexport const competitors: Record<string, CompetitorData> = {\n  \"jobnimbus\": {\n    slug: \"jobnimbus\",\n    name: \"JobNimbus\",\n    title: \"ScopeGen vs JobNimbus | Better Proposal Software for Contractors\",\n    metaDescription: \"Compare ScopeGen vs JobNimbus for contractor proposals. See why contractors choose ScopeGen for faster, more professional scope of work generation.\",\n    heroTitle: \"ScopeGen vs JobNimbus\",\n    heroSubtitle: \"Looking for a JobNimbus alternative? See how ScopeGen delivers faster proposals with less complexity.\",\n    competitorDescription: \"JobNimbus is a full CRM and project management platform designed primarily for roofing contractors.\",\n    targetAudience: \"Roofing contractors needing full CRM\",\n    pricing: \"$200+/month\",\n    limitations: [\n      \"Complex setup requires significant training\",\n      \"Proposal templates are basic and generic\",\n      \"Overkill for contractors who just need proposals\",\n      \"Expensive monthly subscription\",\n      \"Steep learning curve for new users\"\n    ],\n    scopegenAdvantages: [\n      \"Create professional proposals in under 5 minutes\",\n      \"Trade-specific templates with detailed scope language\",\n      \"No complex setup or training required\",\n      \"Affordable pricing for small contractors\",\n      \"Focus on what matters: winning more jobs\"\n    ],\n    featureComparison: [\n      { feature: \"Professional Proposals\", scopegen: true, competitor: true },\n      { feature: \"Trade-Specific Templates\", scopegen: true, competitor: false },\n      { feature: \"Scope of Work Generation\", scopegen: \"Instant AI-powered\", competitor: \"Manual entry\" },\n      { feature: \"Setup Time\", scopegen: \"5 minutes\", competitor: \"Days/Weeks\" },\n      { feature: \"Learning Curve\", scopegen: \"None\", competitor: \"Steep\" },\n      { feature: \"Mobile Friendly\", scopegen: true, competitor: true },\n      { feature: \"Free Preview\", scopegen: true, competitor: false },\n      { feature: \"Starting Price\", scopegen: \"$29/mo\", competitor: \"$200+/mo\" }\n    ]\n  },\n  \"buildbook\": {\n    slug: \"buildbook\",\n    name: \"Buildbook\",\n    title: \"ScopeGen vs Buildbook | Faster Contractor Proposal Software\",\n    metaDescription: \"Compare ScopeGen vs Buildbook for contractor proposals. ScopeGen offers faster proposal generation with trade-specific templates and simpler pricing.\",\n    heroTitle: \"ScopeGen vs Buildbook\",\n    heroSubtitle: \"Need an alternative to Buildbook? ScopeGen gets you from estimate to proposal in minutes, not hours.\",\n    competitorDescription: \"Buildbook is a project management and client communication platform for residential contractors and remodelers.\",\n    targetAudience: \"Residential remodelers and builders\",\n    pricing: \"$99-299/month\",\n    limitations: [\n      \"Focuses on project management over proposals\",\n      \"Generic proposal templates\",\n      \"Monthly cost adds up for small operations\",\n      \"Requires time to set up properly\",\n      \"Better suited for larger teams\"\n    ],\n    scopegenAdvantages: [\n      \"Purpose-built for proposal generation\",\n      \"Pre-written scope language for 9+ trades\",\n      \"No project management complexity\",\n      \"Simple, transparent pricing\",\n      \"Perfect for solo contractors and small teams\"\n    ],\n    featureComparison: [\n      { feature: \"Professional Proposals\", scopegen: true, competitor: true },\n      { feature: \"Trade-Specific Templates\", scopegen: true, competitor: false },\n      { feature: \"Scope of Work Generation\", scopegen: \"Instant\", competitor: \"Manual\" },\n      { feature: \"Client Portal\", scopegen: true, competitor: true },\n      { feature: \"Setup Time\", scopegen: \"5 minutes\", competitor: \"Hours\" },\n      { feature: \"Free Preview\", scopegen: true, competitor: false },\n      { feature: \"Starting Price\", scopegen: \"$29/mo\", competitor: \"$99/mo\" }\n    ]\n  },\n  \"joist\": {\n    slug: \"joist\",\n    name: \"Joist\",\n    title: \"ScopeGen vs Joist | Professional Proposal Generator for Contractors\",\n    metaDescription: \"Compare ScopeGen vs Joist for contractor estimates and proposals. See why ScopeGen's trade-specific templates win more jobs.\",\n    heroTitle: \"ScopeGen vs Joist\",\n    heroSubtitle: \"Considering Joist alternatives? ScopeGen offers more professional proposals with detailed scope of work included.\",\n    competitorDescription: \"Joist is an estimating and invoicing app popular with contractors for quick estimates and payments.\",\n    targetAudience: \"General contractors needing estimates\",\n    pricing: \"$19.99-49.99/month\",\n    limitations: [\n      \"Estimates are basic line items only\",\n      \"No detailed scope of work language\",\n      \"Proposals look generic\",\n      \"Limited customization options\",\n      \"No trade-specific templates\"\n    ],\n    scopegenAdvantages: [\n      \"Full scope of work with professional language\",\n      \"Pre-built templates for 9 contractor trades\",\n      \"Proposals that impress clients\",\n      \"Include warranties, exclusions, and terms\",\n      \"Stand out from competitors\"\n    ],\n    featureComparison: [\n      { feature: \"Line Item Estimates\", scopegen: true, competitor: true },\n      { feature: \"Detailed Scope of Work\", scopegen: true, competitor: false },\n      { feature: \"Trade-Specific Templates\", scopegen: true, competitor: false },\n      { feature: \"Professional Formatting\", scopegen: \"Premium\", competitor: \"Basic\" },\n      { feature: \"Warranty Language\", scopegen: true, competitor: false },\n      { feature: \"Mobile App\", scopegen: \"Web-based\", competitor: true },\n      { feature: \"Free Preview\", scopegen: true, competitor: false },\n      { feature: \"Starting Price\", scopegen: \"$29/mo\", competitor: \"$19.99/mo\" }\n    ]\n  },\n  \"houzz-pro\": {\n    slug: \"houzz-pro\",\n    name: \"Houzz Pro\",\n    title: \"ScopeGen vs Houzz Pro | Better Proposal Software for Contractors\",\n    metaDescription: \"Compare ScopeGen vs Houzz Pro for contractor proposals. Get faster proposals without the lead generation fees.\",\n    heroTitle: \"ScopeGen vs Houzz Pro\",\n    heroSubtitle: \"Looking for a Houzz Pro alternative for proposals? ScopeGen focuses on what you need: professional proposals, fast.\",\n    competitorDescription: \"Houzz Pro is a marketing and business management platform that includes lead generation and proposal tools.\",\n    targetAudience: \"Home improvement professionals\",\n    pricing: \"$65-999/month\",\n    limitations: [\n      \"Expensive monthly fees plus lead costs\",\n      \"Proposal tools are secondary feature\",\n      \"Tied to Houzz lead generation ecosystem\",\n      \"Generic templates across trades\",\n      \"Complex platform with many unused features\"\n    ],\n    scopegenAdvantages: [\n      \"Proposal-focused with no lead generation fees\",\n      \"Trade-specific scope templates\",\n      \"Use your own leads, your own clients\",\n      \"Simple pricing, no hidden costs\",\n      \"Get proposals done in minutes\"\n    ],\n    featureComparison: [\n      { feature: \"Professional Proposals\", scopegen: true, competitor: true },\n      { feature: \"Trade-Specific Templates\", scopegen: true, competitor: false },\n      { feature: \"Lead Generation\", scopegen: \"Not included\", competitor: \"Paid extra\" },\n      { feature: \"Scope of Work\", scopegen: \"Detailed\", competitor: \"Basic\" },\n      { feature: \"Setup Time\", scopegen: \"5 minutes\", competitor: \"Hours\" },\n      { feature: \"Free Preview\", scopegen: true, competitor: false },\n      { feature: \"Starting Price\", scopegen: \"$29/mo\", competitor: \"$65/mo\" }\n    ]\n  },\n  \"companycam\": {\n    slug: \"companycam\",\n    name: \"CompanyCam\",\n    title: \"ScopeGen vs CompanyCam | Proposal Software Comparison\",\n    metaDescription: \"Compare ScopeGen vs CompanyCam for contractor proposals. While CompanyCam excels at photos, ScopeGen wins at professional proposals.\",\n    heroTitle: \"ScopeGen vs CompanyCam\",\n    heroSubtitle: \"CompanyCam is great for photos, but you need professional proposals. That's where ScopeGen comes in.\",\n    competitorDescription: \"CompanyCam is a photo documentation and communication app designed for contractors to capture and share job site photos.\",\n    targetAudience: \"Contractors needing photo documentation\",\n    pricing: \"$19-49/user/month\",\n    limitations: [\n      \"Photo-focused, not proposal-focused\",\n      \"No scope of work generation\",\n      \"Proposals require separate tool\",\n      \"Per-user pricing adds up\",\n      \"Doesn't replace proposal software\"\n    ],\n    scopegenAdvantages: [\n      \"Purpose-built for proposals\",\n      \"Complete scope of work included\",\n      \"Trade-specific professional templates\",\n      \"Works alongside your photo tools\",\n      \"Simple flat-rate pricing\"\n    ],\n    featureComparison: [\n      { feature: \"Photo Documentation\", scopegen: false, competitor: true },\n      { feature: \"Professional Proposals\", scopegen: true, competitor: false },\n      { feature: \"Scope of Work\", scopegen: true, competitor: false },\n      { feature: \"Trade-Specific Templates\", scopegen: true, competitor: false },\n      { feature: \"Team Communication\", scopegen: false, competitor: true },\n      { feature: \"Free Preview\", scopegen: true, competitor: false },\n      { feature: \"Starting Price\", scopegen: \"$29/mo\", competitor: \"$19/user/mo\" }\n    ]\n  },\n  \"housecall-pro\": {\n    slug: \"housecall-pro\",\n    name: \"Housecall Pro\",\n    title: \"ScopeGen vs Housecall Pro | Contractor Proposal Comparison\",\n    metaDescription: \"Compare ScopeGen vs Housecall Pro for contractor proposals. See why ScopeGen's focused approach wins for proposal generation.\",\n    heroTitle: \"ScopeGen vs Housecall Pro\",\n    heroSubtitle: \"Need proposals without the full field service management suite? ScopeGen delivers professional proposals without the complexity.\",\n    competitorDescription: \"Housecall Pro is a field service management platform with scheduling, dispatching, invoicing, and basic proposal features.\",\n    targetAudience: \"Service contractors (HVAC, plumbing, electrical)\",\n    pricing: \"$65-169/month\",\n    limitations: [\n      \"Proposal feature is basic add-on\",\n      \"Generic templates across all trades\",\n      \"Complex system for simple needs\",\n      \"Expensive for proposal-only use\",\n      \"No detailed scope language\"\n    ],\n    scopegenAdvantages: [\n      \"Proposals are the main feature\",\n      \"Trade-specific detailed scopes\",\n      \"No scheduling/dispatching overhead\",\n      \"Affordable standalone pricing\",\n      \"Professional results in minutes\"\n    ],\n    featureComparison: [\n      { feature: \"Professional Proposals\", scopegen: true, competitor: true },\n      { feature: \"Trade-Specific Templates\", scopegen: true, competitor: false },\n      { feature: \"Detailed Scope of Work\", scopegen: true, competitor: false },\n      { feature: \"Scheduling/Dispatch\", scopegen: false, competitor: true },\n      { feature: \"Setup Time\", scopegen: \"5 minutes\", competitor: \"Days\" },\n      { feature: \"Free Preview\", scopegen: true, competitor: false },\n      { feature: \"Starting Price\", scopegen: \"$29/mo\", competitor: \"$65/mo\" }\n    ]\n  }\n};\n\nexport const competitorSlugs = Object.keys(competitors);\n\ninterface ComparePageProps {\n  competitorSlug: string;\n}\n\nexport default function ComparePage({ competitorSlug }: ComparePageProps) {\n  const data = competitors[competitorSlug];\n\n  useEffect(() => {\n    if (data) {\n      document.title = data.title;\n      const metaDesc = document.querySelector('meta[name=\"description\"]');\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", data.metaDescription);\n      }\n    }\n  }, [data]);\n\n  if (!data) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-16 text-center\">\n          <h1 className=\"text-2xl font-bold\">Comparison not found</h1>\n          <Link href=\"/\">\n            <Button className=\"mt-4\">Go Home</Button>\n          </Link>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <section className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white py-16 md:py-24\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <div className=\"inline-flex items-center gap-2 bg-orange-500/10 border border-orange-500/30 text-orange-400 px-4 py-2 rounded-full text-sm mb-6\">\n              <Star className=\"h-4 w-4\" />\n              Comparison Guide\n            </div>\n            <h1 className=\"text-4xl md:text-5xl font-display font-bold mb-6\" data-testid=\"compare-hero-title\">\n              {data.heroTitle}\n            </h1>\n            <p className=\"text-xl text-slate-300 mb-8\" data-testid=\"compare-hero-subtitle\">\n              {data.heroSubtitle}\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link href=\"/app\">\n                <Button size=\"lg\" className=\"bg-orange-500 hover:bg-orange-600 text-white gap-2\" data-testid=\"compare-cta-try\">\n                  Try ScopeGen Free <ArrowRight className=\"h-5 w-5\" />\n                </Button>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-5xl mx-auto\">\n            <div className=\"grid md:grid-cols-2 gap-8 mb-16\">\n              <div className=\"bg-slate-50 rounded-xl p-8 border border-slate-200\">\n                <h3 className=\"text-xl font-bold text-slate-900 mb-4\">{data.name}</h3>\n                <p className=\"text-slate-600 mb-4\">{data.competitorDescription}</p>\n                <div className=\"space-y-2 text-sm\">\n                  <p><span className=\"font-semibold\">Target:</span> {data.targetAudience}</p>\n                  <p><span className=\"font-semibold\">Pricing:</span> {data.pricing}</p>\n                </div>\n              </div>\n              <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-8 border-2 border-orange-300\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <Zap className=\"h-5 w-5 text-orange-500\" />\n                  <h3 className=\"text-xl font-bold text-slate-900\">ScopeGen</h3>\n                </div>\n                <p className=\"text-slate-600 mb-4\">Purpose-built proposal generator for contractors. Create professional scopes of work in minutes, not hours.</p>\n                <div className=\"space-y-2 text-sm\">\n                  <p><span className=\"font-semibold\">Target:</span> All contractor trades</p>\n                  <p><span className=\"font-semibold\">Pricing:</span> Free preview, $29/mo Pro</p>\n                </div>\n              </div>\n            </div>\n\n            <h2 className=\"text-3xl font-display font-bold text-center mb-8\">Feature Comparison</h2>\n            <div className=\"bg-white rounded-xl border border-slate-200 overflow-hidden mb-16\">\n              <table className=\"w-full\" data-testid=\"compare-feature-table\">\n                <thead className=\"bg-slate-100\">\n                  <tr>\n                    <th className=\"text-left py-4 px-6 font-semibold text-slate-900\">Feature</th>\n                    <th className=\"text-center py-4 px-6 font-semibold text-orange-600\">ScopeGen</th>\n                    <th className=\"text-center py-4 px-6 font-semibold text-slate-600\">{data.name}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {data.featureComparison.map((row, i) => (\n                    <tr key={i} className=\"border-t border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">{row.feature}</td>\n                      <td className=\"py-4 px-6 text-center\">\n                        {typeof row.scopegen === \"boolean\" ? (\n                          row.scopegen ? (\n                            <Check className=\"h-5 w-5 text-green-500 mx-auto\" />\n                          ) : (\n                            <X className=\"h-5 w-5 text-slate-300 mx-auto\" />\n                          )\n                        ) : (\n                          <span className=\"text-orange-600 font-medium\">{row.scopegen}</span>\n                        )}\n                      </td>\n                      <td className=\"py-4 px-6 text-center\">\n                        {typeof row.competitor === \"boolean\" ? (\n                          row.competitor ? (\n                            <Check className=\"h-5 w-5 text-green-500 mx-auto\" />\n                          ) : (\n                            <X className=\"h-5 w-5 text-slate-300 mx-auto\" />\n                          )\n                        ) : (\n                          <span className=\"text-slate-600\">{row.competitor}</span>\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 gap-8 mb-16\">\n              <div>\n                <h3 className=\"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2\">\n                  <X className=\"h-5 w-5 text-red-500\" />\n                  {data.name} Limitations\n                </h3>\n                <ul className=\"space-y-3\">\n                  {data.limitations.map((item, i) => (\n                    <li key={i} className=\"flex items-start gap-3 text-slate-600\">\n                      <X className=\"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5\" />\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n              <div>\n                <h3 className=\"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2\">\n                  <Check className=\"h-5 w-5 text-green-500\" />\n                  Why Contractors Choose ScopeGen\n                </h3>\n                <ul className=\"space-y-3\">\n                  {data.scopegenAdvantages.map((item, i) => (\n                    <li key={i} className=\"flex items-start gap-3 text-slate-600\">\n                      <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <h2 className=\"text-3xl font-display font-bold mb-4\">Ready to try ScopeGen?</h2>\n            <p className=\"text-lg text-slate-600 mb-8\">\n              See the difference for yourself. Create your first professional proposal in under 5 minutes.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link href=\"/app\">\n                <Button size=\"lg\" className=\"bg-orange-500 hover:bg-orange-600 text-white gap-2\" data-testid=\"compare-bottom-cta\">\n                  Create Free Proposal <ArrowRight className=\"h-5 w-5\" />\n                </Button>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-12 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h3 className=\"text-xl font-bold text-slate-900 mb-6 text-center\">Compare ScopeGen to Other Tools</h3>\n            <div className=\"flex flex-wrap justify-center gap-3\">\n              {competitorSlugs.filter(s => s !== competitorSlug).map(slug => (\n                <Link key={slug} href={`/compare/${slug}`}>\n                  <Button variant=\"outline\" size=\"sm\" data-testid={`compare-link-${slug}`}>\n                    vs {competitors[slug].name}\n                  </Button>\n                </Link>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":20387,"size_tokens":null},"client/src/lib/analytics.ts":{"content":"declare global {\n  interface Window {\n    gtag: (...args: unknown[]) => void;\n    dataLayer: unknown[];\n  }\n}\n\nconst GA_MEASUREMENT_ID = import.meta.env.VITE_GA_MEASUREMENT_ID;\n\nexport const initGA = () => {\n  if (!GA_MEASUREMENT_ID) {\n    console.warn('Google Analytics Measurement ID not found');\n    return;\n  }\n\n  const script = document.createElement('script');\n  script.async = true;\n  script.src = `https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`;\n  document.head.appendChild(script);\n\n  window.dataLayer = window.dataLayer || [];\n  window.gtag = function gtag(...args: unknown[]) {\n    window.dataLayer.push(args);\n  };\n  window.gtag('js', new Date());\n  window.gtag('config', GA_MEASUREMENT_ID);\n};\n\nexport const trackPageView = (url: string) => {\n  if (!GA_MEASUREMENT_ID || !window.gtag) return;\n  window.gtag('config', GA_MEASUREMENT_ID, { page_path: url });\n};\n\nexport const trackEvent = (action: string, category: string, label?: string, value?: number) => {\n  if (!GA_MEASUREMENT_ID || !window.gtag) return;\n  window.gtag('event', action, {\n    event_category: category,\n    event_label: label,\n    value: value,\n  });\n};\n","path":null,"size_bytes":1155,"size_tokens":null},"client/src/hooks/use-analytics.tsx":{"content":"import { useEffect } from 'react';\nimport { useLocation } from 'wouter';\nimport { trackPageView } from '@/lib/analytics';\n\nexport const usePageTracking = () => {\n  const [location] = useLocation();\n\n  useEffect(() => {\n    trackPageView(location);\n  }, [location]);\n};\n","path":null,"size_bytes":269,"size_tokens":null},"client/src/pages/blog-post.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowLeft, ArrowRight, Calendar, Clock, Zap } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { blogPosts, blogSlugs } from \"./blog\";\n\ninterface BlogPostPageProps {\n  slug: string;\n}\n\nfunction InlineCTA() {\n  return (\n    <div className=\"my-8 p-6 bg-gradient-to-r from-primary/10 to-secondary/10 border-l-4 border-secondary rounded-r-lg\">\n      <div className=\"flex items-start gap-4\">\n        <div className=\"bg-secondary p-2 rounded-full flex-shrink-0\">\n          <Zap className=\"h-5 w-5 text-primary\" />\n        </div>\n        <div>\n          <p className=\"font-bold text-slate-900 mb-1\">Skip the writing. Generate this proposal automatically.</p>\n          <p className=\"text-slate-600 text-sm mb-3\">ScopeGen creates professional contractor proposals in about 60 seconds.</p>\n          <Link href=\"/app\">\n            <Button size=\"sm\" className=\"bg-secondary text-slate-900 hover:bg-secondary/90\" data-testid=\"inline-cta\">\n              Try It Free <ArrowRight className=\"h-4 w-4 ml-1\" />\n            </Button>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction getRelatedPosts(currentSlug: string, currentCategory: string) {\n  const allPosts = Object.values(blogPosts);\n  \n  const sameCategoryPosts = allPosts.filter(\n    p => p.slug !== currentSlug && p.category === currentCategory\n  );\n  \n  const otherPosts = allPosts.filter(\n    p => p.slug !== currentSlug && p.category !== currentCategory\n  );\n  \n  const related = [...sameCategoryPosts, ...otherPosts].slice(0, 3);\n  return related;\n}\n\nexport default function BlogPostPage({ slug }: BlogPostPageProps) {\n  const post = blogPosts[slug];\n\n  useEffect(() => {\n    if (post) {\n      document.title = post.metaTitle;\n      const metaDesc = document.querySelector('meta[name=\"description\"]');\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", post.metaDescription);\n      }\n    }\n  }, [post]);\n\n  if (!post) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-16 text-center\">\n          <h1 className=\"text-2xl font-bold\">Article not found</h1>\n          <Link href=\"/blog\">\n            <Button className=\"mt-4\">Back to Blog</Button>\n          </Link>\n        </div>\n      </Layout>\n    );\n  }\n\n  const relatedPosts = getRelatedPosts(slug, post.category);\n  const inlineCTAIndex = Math.floor(post.content.length * 0.4);\n\n  return (\n    <Layout>\n      <article>\n        <header className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white py-16\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-3xl mx-auto\">\n              <Link href=\"/blog\">\n                <Button variant=\"ghost\" className=\"text-slate-300 hover:text-white mb-6 -ml-4\" data-testid=\"blog-back\">\n                  <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                  Back to Blog\n                </Button>\n              </Link>\n              <div className=\"flex items-center gap-4 text-sm text-slate-400 mb-4\">\n                <span className=\"bg-orange-500/20 text-orange-300 px-3 py-1 rounded-full\">\n                  {post.category}\n                </span>\n                <span className=\"flex items-center gap-1\">\n                  <Calendar className=\"h-4 w-4\" />\n                  {post.date}\n                </span>\n                <span className=\"flex items-center gap-1\">\n                  <Clock className=\"h-4 w-4\" />\n                  {post.readTime}\n                </span>\n              </div>\n              <h1 className=\"text-3xl md:text-4xl font-display font-bold mb-4\" data-testid=\"blog-post-title\">\n                {post.title}\n              </h1>\n              <p className=\"text-lg text-slate-300\">{post.excerpt}</p>\n            </div>\n          </div>\n        </header>\n\n        <div className=\"py-12 bg-white\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-3xl mx-auto prose prose-lg prose-slate prose-headings:font-display prose-headings:font-bold prose-h2:text-2xl prose-h3:text-xl prose-a:text-orange-600\" data-testid=\"blog-post-content\">\n              {post.content.map((block, i) => {\n                const elements = [];\n                \n                if (i === inlineCTAIndex) {\n                  elements.push(<InlineCTA key={`cta-${i}`} />);\n                }\n                \n                if (block.startsWith(\"## \")) {\n                  elements.push(<h2 key={i}>{block.replace(\"## \", \"\")}</h2>);\n                } else if (block.startsWith(\"### \")) {\n                  elements.push(<h3 key={i}>{block.replace(\"### \", \"\")}</h3>);\n                } else if (block.startsWith(\"- \")) {\n                  elements.push(\n                    <ul key={i}>\n                      {block.split(\"\\n\").filter(line => line.startsWith(\"- \")).map((line, j) => (\n                        <li key={j}>{line.replace(\"- \", \"\").replace(/\\*\\*(.*?)\\*\\*/g, (_, text) => text)}</li>\n                      ))}\n                    </ul>\n                  );\n                } else if (block === \"---\") {\n                  elements.push(<hr key={i} />);\n                } else {\n                  elements.push(\n                    <p key={i} dangerouslySetInnerHTML={{ \n                      __html: block\n                        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n                        .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\">$1</a>')\n                    }} />\n                  );\n                }\n                \n                return elements;\n              })}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"py-12 bg-slate-50\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-3xl mx-auto\">\n              <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-8 text-white text-center\">\n                <h2 className=\"text-2xl font-bold mb-3\">Create Professional Proposals in Minutes</h2>\n                <p className=\"text-orange-100 mb-6\">\n                  Stop spending hours writing proposals. ScopeGen has trade-specific templates ready to go.\n                </p>\n                <Link href=\"/app\">\n                  <Button size=\"lg\" className=\"bg-white text-orange-600 hover:bg-orange-50\" data-testid=\"blog-post-cta\">\n                    Try ScopeGen Free <ArrowRight className=\"h-5 w-5 ml-2\" />\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {relatedPosts.length > 0 && (\n          <div className=\"py-12 bg-white border-t\">\n            <div className=\"container mx-auto px-4\">\n              <div className=\"max-w-3xl mx-auto\">\n                <h3 className=\"text-xl font-bold text-slate-900 mb-6\">Related Articles</h3>\n                <div className=\"grid gap-4\">\n                  {relatedPosts.map((relatedPost) => (\n                    <Link key={relatedPost.slug} href={`/blog/${relatedPost.slug}`}>\n                      <div className=\"p-4 border rounded-lg hover:border-orange-300 hover:bg-orange-50/50 transition-all cursor-pointer group\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <span className=\"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded\">\n                            {relatedPost.category}\n                          </span>\n                          <span className=\"text-xs text-slate-400\">{relatedPost.readTime}</span>\n                        </div>\n                        <h4 className=\"font-semibold text-slate-900 group-hover:text-orange-600 transition-colors\">\n                          {relatedPost.title}\n                        </h4>\n                        <p className=\"text-sm text-slate-600 mt-1 line-clamp-2\">{relatedPost.excerpt}</p>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n                <div className=\"mt-6 text-center\">\n                  <Link href=\"/blog\">\n                    <Button variant=\"outline\" data-testid=\"view-all-posts\">\n                      View All Articles <ArrowRight className=\"h-4 w-4 ml-2\" />\n                    </Button>\n                  </Link>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </article>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":8432,"size_tokens":null},"client/src/pages/blog.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, Calendar, Clock, User } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface BlogPost {\n  slug: string;\n  title: string;\n  excerpt: string;\n  author: string;\n  date: string;\n  readTime: string;\n  category: string;\n  metaTitle: string;\n  metaDescription: string;\n  content: string[];\n}\n\nexport const blogPosts: Record<string, BlogPost> = {\n  \"how-to-write-bathroom-remodel-proposal\": {\n    slug: \"how-to-write-bathroom-remodel-proposal\",\n    title: \"How to Write a Bathroom Remodel Proposal That Wins Jobs\",\n    excerpt: \"Learn the essential elements every bathroom remodeling proposal needs to close more deals and set proper client expectations.\",\n    author: \"ScopeGen Team\",\n    date: \"December 5, 2025\",\n    readTime: \"6 min read\",\n    category: \"Proposal Writing\",\n    metaTitle: \"How to Write a Bathroom Remodel Proposal | Complete Guide\",\n    metaDescription: \"Step-by-step guide to writing professional bathroom remodeling proposals. Includes scope of work examples, pricing tips, and templates.\",\n    content: [\n      \"A well-written bathroom remodel proposal is the difference between winning the job and losing to a competitor. Your proposal isn't just a price quoteâ€”it's your first impression of how professional and organized your company is.\",\n      \"## What Every Bathroom Remodel Proposal Needs\",\n      \"### 1. Clear Project Scope\",\n      \"Start with a detailed description of the work. Don't assume the homeowner knows what's included. List everything: demolition, plumbing, electrical, tile work, fixtures, and finishing touches. Be specific about what IS and ISN'T included.\",\n      \"### 2. Material Specifications\",\n      \"Include the exact products you plan to useâ€”brand names, model numbers, colors, and sizes. This prevents disputes later and shows you've done your homework. For example: 'American Standard Champion 4 toilet in white' is better than 'new toilet.'\",\n      \"### 3. Itemized Pricing\",\n      \"Break down costs so homeowners understand where their money goes. Include labor, materials, permits, and any allowances for fixtures they'll select. Transparency builds trust.\",\n      \"### 4. Timeline and Milestones\",\n      \"Set realistic expectations. A typical bathroom remodel takes 2-3 weeks. List key milestones: demolition, rough-in, tile installation, fixture installation, and final walkthrough.\",\n      \"### 5. Payment Terms\",\n      \"Clearly state your payment schedule. Most contractors use: 30% deposit, 30% at rough-in, 30% at tile completion, 10% at final walkthrough. Include accepted payment methods.\",\n      \"### 6. Warranty Information\",\n      \"Stand behind your work. Specify what you warrant (workmanship, materials) and for how long. This reduces client anxiety and shows confidence in your quality.\",\n      \"### 7. Terms and Conditions\",\n      \"Protect yourself and set expectations. Include change order process, work hours, client responsibilities (clear access, decisions by deadline), and cancellation policy.\",\n      \"## Common Mistakes to Avoid\",\n      \"- **Being too vague**: 'New tile in shower' doesn't tell them enough. Specify type, size, pattern, and grout color.\",\n      \"- **Forgetting exclusions**: Be clear about what you DON'T include (moving furniture, mold remediation if found, etc.)\",\n      \"- **No photos or visuals**: Include before photos and inspiration images when possible.\",\n      \"- **Rushing the estimate**: Take time to measure accurately and price correctly. Underbidding leads to problems.\",\n      \"## Speed Up Your Proposal Process\",\n      \"Writing detailed proposals takes timeâ€”often 1-2 hours per job. That's time you could spend on billable work or with family.\",\n      \"ScopeGen was built specifically to solve this problem. Our bathroom remodeling templates include all the professional language and scope details you need. Just enter the project specifics, and you'll have a polished proposal in minutes, not hours.\",\n      \"## Ready to Create Better Proposals?\",\n      \"Try ScopeGen free and see how easy professional proposals can be.\"\n    ]\n  },\n  \"contractor-pricing-guide-2025\": {\n    slug: \"contractor-pricing-guide-2025\",\n    title: \"Contractor Pricing Guide 2025: How to Price Your Services\",\n    excerpt: \"Learn how to price your contracting services competitively while maintaining healthy profit margins in 2025.\",\n    author: \"ScopeGen Team\",\n    date: \"December 3, 2025\",\n    readTime: \"8 min read\",\n    category: \"Business Tips\",\n    metaTitle: \"Contractor Pricing Guide 2025 | How to Price Your Services\",\n    metaDescription: \"Complete 2025 guide to pricing contractor services. Learn markup strategies, hourly rates, and how to compete while staying profitable.\",\n    content: [\n      \"Pricing your contracting services correctly is one of the most critical decisions you'll make. Price too high and you lose bids. Price too low and you're working for nothingâ€”or worse, losing money.\",\n      \"## Understanding Your Costs\",\n      \"Before setting any prices, you need to know exactly what it costs you to run your business. This includes:\",\n      \"### Direct Costs\",\n      \"- **Materials**: Everything that goes into the project\",\n      \"- **Labor**: Your hourly rate and any subcontractors or employees\",\n      \"- **Equipment**: Rentals or depreciation on owned equipment\",\n      \"- **Permits and fees**: Building permits, dump fees, etc.\",\n      \"### Overhead Costs\",\n      \"- **Insurance**: Liability, workers comp, vehicle\",\n      \"- **Vehicle expenses**: Fuel, maintenance, payments\",\n      \"- **Tools and equipment**: Replacement and maintenance\",\n      \"- **Office expenses**: Phone, software, accounting\",\n      \"- **Marketing**: Website, ads, business cards\",\n      \"- **Your salary**: Don't forget to pay yourself!\",\n      \"## The Markup Formula\",\n      \"A common mistake is confusing markup with margin. Here's the difference:\",\n      \"- **Markup**: Percentage added to cost (Cost Ã— 1.5 = 50% markup)\",\n      \"- **Margin**: Percentage of final price that's profit (50% markup = 33% margin)\",\n      \"Most successful contractors use a 1.5x to 2x markup on materials and charge $50-150/hour for labor depending on trade and location.\",\n      \"## Pricing by Trade (2025 Averages)\",\n      \"### Bathroom Remodeling\",\n      \"- Basic update: $5,000-15,000\",\n      \"- Mid-range remodel: $15,000-30,000\",\n      \"- High-end remodel: $30,000-75,000+\",\n      \"### Kitchen Remodeling\",\n      \"- Cabinet refacing: $4,000-10,000\",\n      \"- Mid-range remodel: $25,000-50,000\",\n      \"- High-end remodel: $50,000-150,000+\",\n      \"### Roofing\",\n      \"- Asphalt shingle (per square): $350-600\",\n      \"- Metal roofing (per square): $700-1,200\",\n      \"- Flat roof (per square): $400-800\",\n      \"### Painting\",\n      \"- Interior (per sq ft): $2-6\",\n      \"- Exterior (per sq ft): $1.50-4\",\n      \"- Cabinet painting: $3,000-8,000\",\n      \"## Competing on Value, Not Price\",\n      \"The contractors who thrive aren't the cheapestâ€”they're the ones who communicate the most value. Your proposal should clearly show:\",\n      \"- Exactly what's included (detailed scope of work)\",\n      \"- Quality of materials you use\",\n      \"- Your experience and warranty\",\n      \"- Why you're worth more than the lowball bid\",\n      \"## Present Professional Proposals\",\n      \"A polished, detailed proposal justifies higher prices. When a homeowner compares your comprehensive ScopeGen proposal to a handwritten estimate from your competitor, you've already won the trust battle.\",\n      \"Try ScopeGen free to see how professional proposals help you win more jobs at better prices.\"\n    ]\n  },\n  \"scope-of-work-template-examples\": {\n    slug: \"scope-of-work-template-examples\",\n    title: \"Scope of Work Template Examples for Contractors\",\n    excerpt: \"Free scope of work templates and examples for bathroom, kitchen, roofing, painting, and other contractor trades.\",\n    author: \"ScopeGen Team\",\n    date: \"December 1, 2025\",\n    readTime: \"10 min read\",\n    category: \"Templates\",\n    metaTitle: \"Scope of Work Template Examples | Free Contractor Templates\",\n    metaDescription: \"Free scope of work templates for contractors. Examples for bathroom remodeling, kitchen renovation, roofing, painting, and more trades.\",\n    content: [\n      \"A good scope of work (SOW) protects both you and your client. It clearly defines what work will be done, what materials will be used, and what's excluded. Here are examples for common contractor trades.\",\n      \"## Bathroom Remodeling Scope of Work Example\",\n      \"**Project: Full Bathroom Remodel**\",\n      \"### Demolition\",\n      \"- Remove existing vanity, toilet, and bathtub/shower\",\n      \"- Remove existing flooring and wall tile\",\n      \"- Dispose of all debris at licensed facility\",\n      \"### Rough-In Work\",\n      \"- Install new water supply lines as needed\",\n      \"- Install new drain lines for tub and vanity\",\n      \"- Rough-in electrical for vanity lights, fan, and GFCI outlet\",\n      \"### Finish Work\",\n      \"- Install cement board on shower walls\",\n      \"- Tile shower walls with client-selected tile\",\n      \"- Install shower pan and glass enclosure\",\n      \"- Install new vanity and countertop\",\n      \"- Install toilet and faucets\",\n      \"- Paint walls with two coats\",\n      \"### Exclusions\",\n      \"- Mold remediation if discovered\",\n      \"- Structural repairs\",\n      \"- Work outside bathroom footprint\",\n      \"---\",\n      \"## Roofing Scope of Work Example\",\n      \"**Project: Full Roof Replacement**\",\n      \"### Preparation\",\n      \"- Set up ground tarps and protect landscaping\",\n      \"- Install temporary gutter guards\",\n      \"### Tear-Off\",\n      \"- Remove existing shingles and underlayment\",\n      \"- Inspect decking and replace damaged sections (up to 2 sheets included)\",\n      \"- Dispose of all materials at licensed facility\",\n      \"### Installation\",\n      \"- Install synthetic underlayment on entire roof\",\n      \"- Install drip edge on eaves and rakes\",\n      \"- Install GAF Timberline HDZ shingles (color: Charcoal)\",\n      \"- Install step flashing at all wall intersections\",\n      \"- Install new pipe boots on all plumbing vents\",\n      \"- Install ridge cap shingles at all ridges\",\n      \"### Cleanup\",\n      \"- Magnetic sweep of property for nails\",\n      \"- Remove all debris and materials\",\n      \"---\",\n      \"## Painting Scope of Work Example\",\n      \"**Project: Interior Painting - Whole House**\",\n      \"### Preparation\",\n      \"- Move furniture to center of rooms and cover\",\n      \"- Fill nail holes and minor drywall cracks\",\n      \"- Sand rough areas\",\n      \"- Tape off trim, windows, and fixtures\",\n      \"### Painting\",\n      \"- Apply one coat primer to new drywall areas\",\n      \"- Apply two coats Sherwin-Williams SuperPaint (color per room schedule)\",\n      \"- Paint all ceilings with flat white\",\n      \"- Paint all trim with semi-gloss white\",\n      \"### Cleanup\",\n      \"- Remove all tape and plastic\",\n      \"- Return furniture to original positions\",\n      \"- Touch up as needed\",\n      \"---\",\n      \"## Generate Professional Scopes Instantly\",\n      \"Writing detailed scopes of work takes time. ScopeGen has pre-built templates for 9 contractor trades with all the professional language you need. Enter your project details and get a complete scope in minutes.\",\n      \"Try ScopeGen free and never write a scope from scratch again.\"\n    ]\n  },\n  \"win-more-contractor-bids\": {\n    slug: \"win-more-contractor-bids\",\n    title: \"5 Ways to Win More Contractor Bids (Without Lowering Your Price)\",\n    excerpt: \"Learn proven strategies to win more contracting jobs without sacrificing your profit margins.\",\n    author: \"ScopeGen Team\",\n    date: \"November 28, 2025\",\n    readTime: \"5 min read\",\n    category: \"Business Tips\",\n    metaTitle: \"How to Win More Contractor Bids | 5 Proven Strategies\",\n    metaDescription: \"Win more contracting jobs without cutting prices. Learn 5 proven strategies successful contractors use to beat the competition.\",\n    content: [\n      \"Every contractor knows the frustration: you spend hours creating an estimate, only to lose the job to someone cheaper. But here's the truthâ€”price isn't always why you lost.\",\n      \"## 1. Respond Faster Than Anyone Else\",\n      \"The first contractor to send a detailed proposal often wins. Homeowners are eager to move forward, and waiting days for quotes cools their enthusiasm. Aim to send proposals within 24 hours of the initial visit.\",\n      \"## 2. Look More Professional\",\n      \"A handwritten estimate on a piece of paper loses to a polished, typed proposal every time. Your proposal represents your company. If it looks thrown together, clients wonder if your work will be the same.\",\n      \"Include your logo, contact information, and consistent formatting. Use clear headings and easy-to-read fonts.\",\n      \"## 3. Be Specific About What's Included\",\n      \"Vague estimates scare homeowners. They wonder what you're hiding or what will cost extra later. Instead, list everything in detail:\",\n      \"- Exact materials and brands\",\n      \"- Every step of the process\",\n      \"- What IS and ISN'T included\",\n      \"- Timeline expectations\",\n      \"When clients can see exactly what they're paying for, higher prices feel justified.\",\n      \"## 4. Address Their Concerns Before They Ask\",\n      \"Smart proposals answer questions before clients have to ask:\",\n      \"- How will you protect their home? (drop cloths, dust containment)\",\n      \"- What's your warranty?\",\n      \"- What happens if you find unexpected problems?\",\n      \"- How do they pay and when?\",\n      \"This builds trust and shows experience.\",\n      \"## 5. Follow Up\",\n      \"Many contractors send a proposal and wait. Following up (politely) shows you want the job and reminds clients to make a decision. A simple call or email 2-3 days after sending the proposal can make the difference.\",\n      \"## Make Professional Proposals Easy\",\n      \"The common thread in all these tips? Your proposal matters more than you think. That's why we built ScopeGenâ€”to help contractors create professional, detailed proposals in minutes instead of hours.\",\n      \"Try ScopeGen free and see how winning proposals can be your competitive advantage.\"\n    ]\n  },\n  \"bathroom-remodeling-proposal\": {\n    slug: \"bathroom-remodeling-proposal\",\n    title: \"How to Write a Bathroom Remodeling Proposal in 10 Minutes\",\n    excerpt: \"Learn how to create a professional bathroom remodeling proposal quickly with our step-by-step guide and ready-to-use scope of work template.\",\n    author: \"ScopeGen Team\",\n    date: \"December 10, 2025\",\n    readTime: \"8 min read\",\n    category: \"Proposal Writing\",\n    metaTitle: \"How to Write a Bathroom Remodeling Proposal in 10 Minutes | ScopeGen\",\n    metaDescription: \"Step-by-step guide to writing a bathroom remodeling proposal. Includes sample scope of work, pricing tips, and a template you can use today.\",\n    content: [\n      \"Writing a bathroom remodeling proposal doesn't have to take hours. With the right structure and a clear scope of work, you can create professional proposals in just 10 minutes. This guide shows you exactly how.\",\n      \"## Why Proposals Matter for Bathroom Remodelers\",\n      \"Your proposal is often the deciding factor between winning and losing a job. Homeowners typically get 3-5 quotes for bathroom remodeling projects, and the contractor with the most professional, detailed proposal winsâ€”even if they're not the cheapest.\",\n      \"A well-written bathroom remodeling proposal:\",\n      \"- Builds trust before you even start the work\",\n      \"- Sets clear expectations to avoid disputes later\",\n      \"- Protects you legally with documented scope and terms\",\n      \"- Justifies your pricing with detailed breakdowns\",\n      \"- Shows homeowners exactly what they're paying for\",\n      \"Studies show that contractors who provide detailed proposals have a 40% higher close rate than those who provide simple quotes. Your proposal is your first demonstration of professionalism.\",\n      \"## What to Include in Every Bathroom Proposal\",\n      \"Every bathroom remodeling proposal needs these essential sections:\",\n      \"### Project Overview\",\n      \"Start with a brief description of the project. Summarize what the homeowner wants and what you'll deliver. This shows you listened during the consultation.\",\n      \"### Detailed Scope of Work\",\n      \"This is the heart of your proposal. List every task you'll perform, from demolition to final cleanup. Be specificâ€”vague scopes lead to disputes.\",\n      \"### Materials and Specifications\",\n      \"List every product you'll install with brand names, model numbers, and colors. This prevents the 'that's not what I expected' conversation later.\",\n      \"### Timeline and Milestones\",\n      \"Give homeowners a realistic timeline with key milestones: demolition, rough-in, tile work, fixture installation, and final walkthrough.\",\n      \"### Pricing Breakdown\",\n      \"Break down costs into categories: labor, materials, permits, and contingency. Transparency builds trust and justifies your price.\",\n      \"### Payment Schedule\",\n      \"Specify when payments are due: typically 30% deposit, 30% at rough-in, 30% at tile completion, and 10% at final walkthrough.\",\n      \"### Terms and Conditions\",\n      \"Include change order process, work hours, warranty information, and cancellation policy.\",\n      \"## Step-by-Step Guide to Writing Your Proposal\",\n      \"### Step 1: Start with the Consultation Notes (2 minutes)\",\n      \"Review your notes from the site visit. Note the bathroom size, current condition, and exactly what the homeowner wants. This becomes your project overview.\",\n      \"### Step 2: Build Your Scope of Work (4 minutes)\",\n      \"List every task from start to finish. Use action verbs: Remove, Install, Tile, Paint. Include quantities and specifications.\",\n      \"### Step 3: Add Materials List (2 minutes)\",\n      \"List each product with brand, model, color, and quantity. If the homeowner will select items, list allowances instead.\",\n      \"### Step 4: Calculate Pricing (1 minute)\",\n      \"Add up material costs, labor hours, permits, and your markup. Break it down by category.\",\n      \"### Step 5: Final Review (1 minute)\",\n      \"Check for completeness. Make sure exclusions are clear. Verify all numbers add up.\",\n      \"## Sample Bathroom Scope of Work\",\n      \"Use this template as a starting point for your bathroom remodeling proposals:\",\n      \"**Project: Full Bathroom Remodel (5x8 master bathroom)**\",\n      \"### Phase 1: Demolition\",\n      \"- Remove existing vanity, toilet, and tub/shower surround\",\n      \"- Remove existing floor tile down to subfloor\",\n      \"- Remove existing wall tile in tub/shower area\",\n      \"- Disconnect and cap existing plumbing fixtures\",\n      \"- Dispose of all demolition debris at licensed facility\",\n      \"### Phase 2: Rough Plumbing & Electrical\",\n      \"- Install new PEX water supply lines to shower valve location\",\n      \"- Install new ABS drain for shower (2-inch)\",\n      \"- Relocate water supply for vanity (if needed)\",\n      \"- Install new vent fan wiring and bathroom circuit\",\n      \"- Install GFCI outlets at vanity location\",\n      \"- Install recessed light wiring (quantity: 4)\",\n      \"### Phase 3: Subfloor & Waterproofing\",\n      \"- Install 1/2-inch cement board on floor\",\n      \"- Install cement board on shower walls\",\n      \"- Apply RedGard waterproofing membrane to shower area\",\n      \"- Allow 24-hour cure time\",\n      \"### Phase 4: Tile Installation\",\n      \"- Install porcelain floor tile (12x24, client selection)\",\n      \"- Install ceramic wall tile in shower (subway style, 3x6)\",\n      \"- Install mosaic accent tile on shower floor\",\n      \"- Grout all tile with sanded grout (color: Delorean Gray)\",\n      \"- Seal grout lines\",\n      \"### Phase 5: Fixture Installation\",\n      \"- Install new Kohler toilet (Wellworth, white)\",\n      \"- Install 36-inch vanity with quartz countertop\",\n      \"- Install undermount sink and Delta faucet (Arvo series)\",\n      \"- Install frameless glass shower door (48-inch)\",\n      \"- Install Moen shower valve and trim kit (Genta LX series)\",\n      \"- Install rain showerhead and handheld sprayer\",\n      \"### Phase 6: Finishing\",\n      \"- Install bathroom mirror (36x48 framed)\",\n      \"- Install vanity lighting fixture (3-light bar)\",\n      \"- Install Panasonic exhaust fan (110 CFM)\",\n      \"- Install towel bars and accessories\",\n      \"- Paint walls and ceiling (2 coats, Sherwin-Williams)\",\n      \"- Caulk all edges and transitions\",\n      \"- Final cleanup and walkthrough\",\n      \"### Exclusions\",\n      \"- Mold remediation (if discovered, quoted separately)\",\n      \"- Structural repairs to subfloor or framing\",\n      \"- Replacement of main stack or sewer line\",\n      \"- Work outside the bathroom footprint\",\n      \"- Permits (included in price)\",\n      \"## Common Mistakes to Avoid\",\n      \"Even experienced contractors make these proposal mistakes:\",\n      \"### Being Too Vague\",\n      \"'New tile' isn't enough. Specify the type (porcelain, ceramic), size (12x24), pattern (staggered brick), and grout color. Vague scopes lead to 'I thought that was included' arguments.\",\n      \"### Forgetting Exclusions\",\n      \"Always list what you DON'T include. This protects you when hidden problems appear: mold behind walls, rotted subfloors, outdated plumbing that needs replacement.\",\n      \"### Underpricing to Win the Job\",\n      \"Low prices attract low-quality clients and leave you working for nothing. Price fairly and compete on value, not just cost.\",\n      \"### Skipping the Timeline\",\n      \"Homeowners need to know how long they'll be without a bathroom. Be realisticâ€”a typical full remodel takes 2-3 weeks minimum.\",\n      \"### No Change Order Process\",\n      \"Clearly state that any changes require a written change order with adjusted price and timeline. This prevents scope creep.\",\n      \"### Missing Warranty Information\",\n      \"State exactly what you warranty and for how long. Typically: 1-2 years on workmanship, manufacturer warranty on products.\",\n      \"## Speed Up Your Proposal Process\",\n      \"Writing detailed proposals from scratch takes 1-2 hours per job. That's time you could spend on billable work or with your family.\",\n      \"ScopeGen was built to solve this exact problem. Our bathroom remodeling templates include professional language, complete scope details, and proper formatting. Just enter the project specifics and you'll have a polished proposal ready to send.\",\n      \"## Ready to Create Better Proposals?\",\n      \"Use this template inside ScopeGen with one click. Create professional bathroom remodeling proposals in minutes, not hours.\"\n    ]\n  },\n  \"roofing-proposal-checklist\": {\n    slug: \"roofing-proposal-checklist\",\n    title: \"Roofing Proposal Checklist: What to Include So You Get Paid\",\n    excerpt: \"Complete checklist for roofing proposals that protect your business and ensure you get paid. Includes materials breakdown, warranty terms, and sample scope of work.\",\n    author: \"ScopeGen Team\",\n    date: \"December 9, 2025\",\n    readTime: \"9 min read\",\n    category: \"Proposal Writing\",\n    metaTitle: \"Roofing Proposal Checklist: What to Include So You Get Paid | ScopeGen\",\n    metaDescription: \"Complete roofing proposal checklist with materials breakdown, warranty terms, payment schedule, and sample proposal. Never miss important details again.\",\n    content: [\n      \"A complete roofing proposal protects your business and ensures you get paid. Missing key details can lead to disputes, unpaid invoices, and damaged relationships. This checklist covers everything your roofing proposal needs.\",\n      \"## Essential Sections Every Roofing Proposal Needs\",\n      \"Your roofing proposal is a legal document. It protects both you and the homeowner by clearly defining what's included, what's not, and how payment works.\",\n      \"### 1. Company Information\",\n      \"- Your company name, address, phone, and email\",\n      \"- License number and insurance information\",\n      \"- Your logo for professional branding\",\n      \"### 2. Client Information\",\n      \"- Homeowner name and address\",\n      \"- Property address (if different)\",\n      \"- Contact phone and email\",\n      \"### 3. Project Description\",\n      \"- Roof type (asphalt shingle, metal, flat, tile)\",\n      \"- Total square footage\",\n      \"- Number of layers to remove\",\n      \"- Special features (skylights, chimneys, dormers)\",\n      \"### 4. Detailed Scope of Work\",\n      \"- Every step from setup to final cleanup\",\n      \"- Quantities and measurements\",\n      \"- Specific materials to be used\",\n      \"### 5. Materials Breakdown\",\n      \"- Shingles/roofing material (brand, color, warranty)\",\n      \"- Underlayment type\",\n      \"- Flashing materials\",\n      \"- Ventilation components\",\n      \"- Drip edge specifications\",\n      \"### 6. Pricing\",\n      \"- Itemized costs (labor, materials, permits)\",\n      \"- Total project cost\",\n      \"- Any potential additional costs\",\n      \"### 7. Timeline\",\n      \"- Start date\",\n      \"- Estimated completion\",\n      \"- Weather contingency language\",\n      \"### 8. Payment Terms\",\n      \"- Deposit amount and due date\",\n      \"- Progress payments (if any)\",\n      \"- Final payment timing\",\n      \"- Accepted payment methods\",\n      \"### 9. Warranty Information\",\n      \"- Workmanship warranty (your guarantee)\",\n      \"- Manufacturer warranty details\",\n      \"- What voids the warranty\",\n      \"### 10. Terms and Conditions\",\n      \"- Change order process\",\n      \"- Cancellation policy\",\n      \"- Damage limitations\",\n      \"- Dispute resolution\",\n      \"## Materials Breakdown: What to Specify\",\n      \"Vague material descriptions lead to disputes. Be specific about every component:\",\n      \"### Shingles\",\n      \"- Brand: GAF, Owens Corning, CertainTeed, etc.\",\n      \"- Product line: GAF Timberline HDZ, OC Duration, etc.\",\n      \"- Color: Use manufacturer color names\",\n      \"- Warranty level: 25-year, 30-year, Lifetime\",\n      \"Example: 'GAF Timberline HDZ Architectural Shingles, color: Charcoal, Lifetime Limited Warranty'\",\n      \"### Underlayment\",\n      \"- Type: Synthetic or felt\",\n      \"- Weight/quality: 15lb, 30lb, or premium synthetic\",\n      \"- Ice and water shield locations\",\n      \"Example: 'GAF FeltBuster Synthetic Underlayment on entire roof surface, GAF WeatherWatch Ice & Water Shield in valleys and at eaves (6 feet up from edge)'\",\n      \"### Flashing\",\n      \"- Material: Aluminum, galvanized steel, copper\",\n      \"- Locations: Valleys, walls, chimneys, vents\",\n      \"Example: 'Aluminum step flashing at all wall intersections, new aluminum drip edge on all eaves and rakes'\",\n      \"### Ventilation\",\n      \"- Ridge vent type and linear feet\",\n      \"- Soffit vent requirements\",\n      \"- Any power vents or static vents\",\n      \"Example: 'Install 35 linear feet GAF Cobra SnowCountry Ridge Vent, ensure adequate soffit ventilation for proper airflow'\",\n      \"## Warranty Terms: Protect Yourself and Your Customer\",\n      \"Warranties are critical for roofing projects. Be clear about what's covered:\",\n      \"### Your Workmanship Warranty\",\n      \"State exactly what you guarantee and for how long:\",\n      \"- 'ABC Roofing warrants all workmanship for a period of 5 years from the date of substantial completion'\",\n      \"- 'This warranty covers defects in installation, including improper nailing, flashing, and sealing'\",\n      \"- 'This warranty does not cover damage caused by storms, falling objects, or owner modifications'\",\n      \"### Manufacturer Warranty\",\n      \"Explain the shingle warranty clearly:\",\n      \"- 'GAF Timberline HDZ shingles include a Lifetime Limited Warranty from GAF'\",\n      \"- 'Full warranty details available at manufacturer's website'\",\n      \"- 'Warranty requires proper installation by GAF Certified Contractor'\",\n      \"### What Voids Warranties\",\n      \"List activities that void coverage:\",\n      \"- Walking on roof unnecessarily\",\n      \"- Installing satellite dishes without proper techniques\",\n      \"- Pressure washing shingles\",\n      \"- Failing to maintain gutters and ventilation\",\n      \"## Payment Schedule: Ensure You Get Paid\",\n      \"The payment schedule protects your cash flow and reduces risk. Here's a typical structure for roofing projects:\",\n      \"### Option 1: Standard Three-Payment Schedule\",\n      \"- 33% deposit upon signing contract\",\n      \"- 33% at material delivery\",\n      \"- 34% upon completion and final inspection\",\n      \"### Option 2: Insurance Claim Jobs\",\n      \"- Homeowner deposit (deductible amount) upon signing\",\n      \"- Remaining balance due upon completion (paid by insurance)\",\n      \"- Supplements invoiced separately when approved\",\n      \"### Option 3: Large Commercial Projects\",\n      \"- 25% deposit\",\n      \"- 25% at 50% completion\",\n      \"- 25% at 90% completion\",\n      \"- 25% at final inspection and punch list completion\",\n      \"### Payment Terms to Include\",\n      \"- 'Payment due within 7 days of invoice date'\",\n      \"- 'Late payments subject to 1.5% monthly interest'\",\n      \"- 'Work may be suspended for overdue payments'\",\n      \"- 'Accepted methods: Check, credit card, bank transfer'\",\n      \"## Sample Roofing Proposal Scope of Work\",\n      \"Use this as a template for your roofing proposals:\",\n      \"**Project: Complete Roof Replacement**\",\n      \"**Property: 2,400 sq ft single-story home**\",\n      \"### Preparation and Protection\",\n      \"- Place tarps to protect landscaping, driveway, and pool area\",\n      \"- Set up dump trailer and portable toilet for crew\",\n      \"- Install magnetic ground covers to catch nails\",\n      \"- Protect all AC units and outdoor equipment\",\n      \"### Tear-Off\",\n      \"- Remove existing asphalt shingles (2 layers)\",\n      \"- Remove existing underlayment down to decking\",\n      \"- Inspect all decking for damage or rot\",\n      \"- Replace damaged plywood decking (up to 2 sheets included, additional sheets $85 each)\",\n      \"- Remove and dispose of all debris at licensed facility\",\n      \"### Flashing and Edge Metal\",\n      \"- Install new aluminum drip edge on all eaves (white)\",\n      \"- Install new aluminum drip edge on all rakes (white)\",\n      \"- Install aluminum step flashing at all wall intersections\",\n      \"- Install new pipe boots on all plumbing vents (8 total)\",\n      \"- Flash around skylight with new flashing kit\",\n      \"- Install chimney flashing with aluminum step and counter flashing\",\n      \"### Underlayment and Ice Shield\",\n      \"- Install GAF FeltBuster synthetic underlayment on entire roof\",\n      \"- Install GAF WeatherWatch ice and water shield at all eaves (6 ft minimum)\",\n      \"- Install ice and water shield in all valleys\",\n      \"- Install ice and water shield around skylights and chimney\",\n      \"### Shingle Installation\",\n      \"- Install GAF Timberline HDZ shingles (Color: Charcoal)\",\n      \"- Install shingles per GAF specifications with 6 nails per shingle\",\n      \"- Install GAF TimberTex hip and ridge cap shingles\",\n      \"- Install GAF Cobra SnowCountry ridge vent (40 linear feet)\",\n      \"- Install GAF starter strip at all eaves and rakes\",\n      \"### Cleanup and Final Inspection\",\n      \"- Magnetic sweep entire property (minimum 3 passes)\",\n      \"- Remove all debris and materials from property\",\n      \"- Final roof inspection for proper installation\",\n      \"- Provide homeowner with warranty documentation\",\n      \"- Register warranty with GAF\",\n      \"### Exclusions\",\n      \"- Gutter replacement or repair (can quote separately)\",\n      \"- Soffit or fascia repairs (can quote separately)\",\n      \"- Interior repairs from prior leaks\",\n      \"- Tree trimming (recommend 10 ft clearance)\",\n      \"- Additional decking beyond 2 sheets (charged at $85/sheet)\",\n      \"**Total Investment: $12,500**\",\n      \"**Includes:** All labor, materials, permits, debris removal, and GAF Lifetime Limited Warranty\",\n      \"## Create Professional Roofing Proposals in 60 Seconds\",\n      \"Stop writing roofing proposals from scratch. ScopeGen has ready-to-use roofing templates with professional language, complete scope details, and proper legal terms.\",\n      \"Just enter your project measurements, select the shingle type and color, and you'll have a complete proposal ready to present to your customer.\",\n      \"Create a professional roofing proposal in 60 seconds with ScopeGen.\"\n    ]\n  },\n  \"kitchen-remodel-scope-of-work\": {\n    slug: \"kitchen-remodel-scope-of-work\",\n    title: \"Kitchen Remodel Scope of Work: Simple Template for Contractors\",\n    excerpt: \"Free kitchen remodel scope of work template for contractors. Includes cabinet specifications, appliance allowances, and a complete sample you can use today.\",\n    author: \"ScopeGen Team\",\n    date: \"December 8, 2025\",\n    readTime: \"10 min read\",\n    category: \"Templates\",\n    metaTitle: \"Kitchen Remodel Scope of Work: Simple Template for Contractors | ScopeGen\",\n    metaDescription: \"Free kitchen remodel scope of work template with cabinet specs, appliance allowances, and sample scope. Perfect for contractors who want professional proposals.\",\n    content: [\n      \"A detailed kitchen remodel scope of work protects you from disputes and ensures everyone knows exactly what's included. This guide includes everything you need to write professional kitchen scopes, plus a complete template you can use today.\",\n      \"## Understanding Scope of Work for Kitchen Remodels\",\n      \"The scope of work (SOW) is the backbone of your kitchen remodeling proposal. It defines every task you'll perform, every material you'll install, and every item that's excluded from your price.\",\n      \"### Why a Detailed Scope Matters\",\n      \"Kitchen remodels are complex projects with many moving parts. Without a detailed scope:\",\n      \"- Homeowners assume things are included that aren't\",\n      \"- You end up doing work you didn't price for\",\n      \"- Disputes arise about what was agreed upon\",\n      \"- Final payment gets held up over misunderstandings\",\n      \"A comprehensive kitchen scope of work:\",\n      \"- Documents every aspect of the project in writing\",\n      \"- Sets clear expectations from day one\",\n      \"- Provides a reference point for change orders\",\n      \"- Protects you legally if disputes arise\",\n      \"### Components of a Kitchen Scope\",\n      \"Every kitchen remodel scope should include these sections:\",\n      \"- Demolition and preparation\",\n      \"- Rough plumbing and electrical\",\n      \"- Cabinet installation\",\n      \"- Countertop installation\",\n      \"- Appliance installation\",\n      \"- Backsplash and finishes\",\n      \"- Final details and cleanup\",\n      \"- Clear exclusions\",\n      \"## Kitchen-Specific Items to Include\",\n      \"Kitchen remodels have unique requirements that other projects don't. Make sure your scope addresses these kitchen-specific items:\",\n      \"### Electrical Requirements\",\n      \"Modern kitchens need significant electrical work:\",\n      \"- Dedicated 20-amp circuits for small appliances\",\n      \"- 50-amp circuit for electric range\",\n      \"- 20-amp circuit for dishwasher\",\n      \"- 20-amp circuit for garbage disposal\",\n      \"- Under-cabinet lighting circuits\",\n      \"- Pendant light locations\",\n      \"- GFCI outlet placement (required within 6 feet of sink)\",\n      \"### Plumbing Considerations\",\n      \"- Water supply lines for sink and dishwasher\",\n      \"- Drain connections and venting\",\n      \"- Gas line for range (if applicable)\",\n      \"- Ice maker water line (if applicable)\",\n      \"- Pot filler installation (if requested)\",\n      \"- Garbage disposal connection\",\n      \"### Ventilation\",\n      \"- Range hood venting (ducted vs. recirculating)\",\n      \"- Duct run location and length\",\n      \"- Exterior vent cap installation\",\n      \"- CFM requirements based on range size\",\n      \"## Cabinet Specifications: Get It Right\",\n      \"Cabinets are typically the largest expense in a kitchen remodel. Your scope must be specific about cabinet details:\",\n      \"### Cabinet Type\",\n      \"Specify the construction quality level:\",\n      \"- Stock cabinets: Pre-made standard sizes, limited options\",\n      \"- Semi-custom cabinets: Standard boxes with custom options\",\n      \"- Custom cabinets: Built to exact specifications\",\n      \"### Material and Construction\",\n      \"- Box material: Plywood vs. particle board\",\n      \"- Face frame vs. frameless (European) style\",\n      \"- Door style: Shaker, raised panel, flat panel, etc.\",\n      \"- Door material: Solid wood, MDF, thermofoil\",\n      \"- Finish type: Paint, stain, or natural\",\n      \"### Hardware\",\n      \"- Drawer slides: Soft-close, full extension\",\n      \"- Hinges: Concealed, soft-close\",\n      \"- Pulls and knobs: Style, size, finish\",\n      \"- Lazy susans, pull-out organizers, etc.\",\n      \"### Specific Cabinet List\",\n      \"Include a complete cabinet schedule:\",\n      \"- Base cabinets: Quantity, size, location\",\n      \"- Wall cabinets: Quantity, size, height\",\n      \"- Specialty cabinets: Corner, pantry, appliance\",\n      \"- Fillers and trim pieces\",\n      \"Example: 'Install (4) 36-inch base cabinets, (2) 24-inch base cabinets, (1) 36-inch sink base, (8) 30-inch wall cabinets, (2) 42-inch wall cabinets, crown molding on all wall cabinets'\",\n      \"## Appliance Allowances: Avoid Surprises\",\n      \"Appliances can make or break a kitchen remodel budget. Handle them clearly in your scope:\",\n      \"### Option 1: Allowance System\",\n      \"Set a budget allowance for appliances the homeowner will select:\",\n      \"- 'Appliance allowance: $8,000'\",\n      \"- 'Includes: Range, refrigerator, dishwasher, microwave'\",\n      \"- 'Homeowner selects appliances within allowance'\",\n      \"- 'Costs above allowance are additional'\",\n      \"### Option 2: Specified Appliances\",\n      \"List exact appliances if already selected:\",\n      \"- GE Profile 30-inch gas range (Model PGB960)\",\n      \"- Samsung 27 cu ft French door refrigerator (Model RF27T5201SR)\",\n      \"- Bosch 500 series dishwasher (Model SHPM65Z55N)\",\n      \"### Option 3: Installation Only\",\n      \"If the homeowner supplies appliances:\",\n      \"- 'Install homeowner-provided appliances'\",\n      \"- 'Appliances must be on-site before installation date'\",\n      \"- 'Contractor not responsible for appliance defects'\",\n      \"- 'Additional charge for appliance delivery/returns if not on-site'\",\n      \"### What Appliance Installation Includes\",\n      \"Be specific about installation scope:\",\n      \"- Uncrating and positioning\",\n      \"- Connecting water, gas, and electrical\",\n      \"- Testing for proper operation\",\n      \"- Removing packaging materials\",\n      \"- NOT included: Extended warranties, owner orientation\",\n      \"## Sample Kitchen Scope of Work Template\",\n      \"Use this comprehensive template for your kitchen remodeling proposals:\",\n      \"**Project: Complete Kitchen Remodel**\",\n      \"**Size: 12x15 (180 sq ft) U-shaped kitchen**\",\n      \"### Phase 1: Pre-Construction\",\n      \"- Obtain all required building permits\",\n      \"- Order cabinets and countertops (lead time: 4-6 weeks)\",\n      \"- Finalize all material selections with homeowner\",\n      \"- Schedule subcontractors (plumber, electrician)\",\n      \"### Phase 2: Demolition\",\n      \"- Protect adjacent rooms with plastic sheeting and floor covering\",\n      \"- Remove existing cabinets, countertops, and backsplash\",\n      \"- Remove existing flooring (vinyl sheet)\",\n      \"- Disconnect and remove existing appliances\",\n      \"- Remove existing sink and faucet\",\n      \"- Remove existing lighting fixtures\",\n      \"- Dispose of all debris at licensed facility\",\n      \"### Phase 3: Rough-In Work\",\n      \"- Relocate water supply lines for new sink location\",\n      \"- Install new gas line for range (10 feet)\",\n      \"- Install dedicated electrical circuits:\",\n      \"- (2) 20-amp small appliance circuits\",\n      \"- (1) 50-amp range circuit\",\n      \"- (1) 20-amp dishwasher circuit\",\n      \"- (1) 20-amp disposal circuit\",\n      \"- (1) 15-amp refrigerator circuit\",\n      \"- Install electrical boxes for under-cabinet and pendant lighting\",\n      \"- Run ductwork for range hood (6-inch duct, 15 feet to exterior)\",\n      \"- Install exterior vent cap\",\n      \"- Repair drywall as needed after rough-in\",\n      \"### Phase 4: Flooring\",\n      \"- Install 1/4-inch plywood underlayment\",\n      \"- Install luxury vinyl plank flooring (Shaw Classico, color: Molo)\",\n      \"- Install shoe molding at perimeter\",\n      \"- Flooring under cabinets: Yes (full coverage)\",\n      \"### Phase 5: Cabinet Installation\",\n      \"- Install KraftMaid wall cabinets (14 total per cabinet schedule)\",\n      \"- Install KraftMaid base cabinets (10 total per cabinet schedule)\",\n      \"- Install 42-inch tall pantry cabinet\",\n      \"- Level and secure all cabinets\",\n      \"- Install cabinet crown molding\",\n      \"- Install all cabinet hardware (Amerock pulls, satin nickel)\",\n      \"- Adjust doors and drawers for proper alignment\",\n      \"### Phase 6: Countertops\",\n      \"- Template countertops after cabinets installed\",\n      \"- Fabricate and install quartz countertops (Caesarstone Calacatta Nuvo)\",\n      \"- Include 4-inch backsplash piece behind range\",\n      \"- Cut sink opening (undermount)\",\n      \"- Polish and seal all edges\",\n      \"- Total surface area: Approximately 45 square feet\",\n      \"### Phase 7: Backsplash\",\n      \"- Install ceramic subway tile backsplash (3x6, white)\",\n      \"- Install from countertop to bottom of wall cabinets\",\n      \"- Include outlet covers to match\",\n      \"- Grout with unsanded grout (color: white)\",\n      \"- Seal grout lines\",\n      \"### Phase 8: Appliance Installation\",\n      \"- Install gas range and connect gas line\",\n      \"- Install range hood and connect to ductwork\",\n      \"- Install refrigerator and connect water line\",\n      \"- Install dishwasher and connect water/drain/electric\",\n      \"- Install garbage disposal and air switch\",\n      \"- Install built-in microwave\",\n      \"- Test all appliances for proper operation\",\n      \"### Phase 9: Plumbing Fixtures\",\n      \"- Install undermount sink (Kohler Riverby, white)\",\n      \"- Install kitchen faucet (Moen Arbor, spot resist stainless)\",\n      \"- Install soap dispenser\",\n      \"- Connect dishwasher drain and supply\",\n      \"- Test for leaks\",\n      \"### Phase 10: Electrical Fixtures\",\n      \"- Install under-cabinet LED lighting (4 fixtures)\",\n      \"- Install pendant lights over island (3 fixtures)\",\n      \"- Install recessed lights (6 fixtures)\",\n      \"- Install dimmer switches for main lighting\",\n      \"- Install new GFCI outlets at countertop locations (6 outlets)\",\n      \"### Phase 11: Final Details\",\n      \"- Paint walls with two coats (Sherwin-Williams, color TBD)\",\n      \"- Touch up all paint and caulk\",\n      \"- Install outlet and switch covers\",\n      \"- Final adjustment of all cabinet doors and drawers\",\n      \"- Clean all surfaces and appliances\",\n      \"- Final walkthrough with homeowner\",\n      \"- Obtain final inspection approval\",\n      \"### Exclusions\",\n      \"- Structural modifications (wall removal, load-bearing changes)\",\n      \"- Refinishing hardwood floors in adjacent rooms\",\n      \"- Painting rooms beyond kitchen\",\n      \"- Moving gas meter or main electrical panel\",\n      \"- Asbestos or lead paint remediation (if discovered)\",\n      \"- Window or door replacement\",\n      \"- HVAC modifications\",\n      \"### Allowances Included\",\n      \"- Appliance allowance: $6,000\",\n      \"- Lighting fixture allowance: $1,200\",\n      \"- Cabinet hardware allowance: $400\",\n      \"- Faucet and sink allowance: $800\",\n      \"Selections above allowances will be invoiced at cost plus 15%.\",\n      \"**Total Project Investment: $65,000**\",\n      \"**Timeline: 6-8 weeks from permit approval**\",\n      \"## Generate Your Kitchen Proposal Automatically\",\n      \"Stop spending hours writing kitchen remodel proposals. ScopeGen has comprehensive kitchen templates with all the professional language, detailed scope sections, and proper legal terms.\",\n      \"Just enter your project detailsâ€”cabinet count, countertop material, appliancesâ€”and get a complete, professional proposal ready to present to your client.\",\n      \"Generate your kitchen proposal automatically with ScopeGen.\"\n    ]\n  },\n  \"bathroom-proposal-without-copy-paste\": {\n    slug: \"bathroom-proposal-without-copy-paste\",\n    title: \"How to Write a Bathroom Remodeling Proposal (Without Copy-Paste)\",\n    excerpt: \"Stop copying and pasting from old proposals. Learn how to create custom bathroom remodeling proposals that win jobs and protect your profit.\",\n    author: \"ScopeGen Team\",\n    date: \"December 11, 2025\",\n    readTime: \"6 min read\",\n    category: \"Proposal Writing\",\n    metaTitle: \"How to Write a Bathroom Remodeling Proposal Without Copy-Paste | ScopeGen\",\n    metaDescription: \"Learn how to write custom contractor proposals for bathroom remodels without copying from old documents. Generate professional proposals in 60 seconds.\",\n    content: [\n      \"We've all done itâ€”copied last month's bathroom proposal, changed the name and address, and hoped we didn't miss anything. But copy-paste proposals are risky. Old pricing, wrong materials, and outdated language can cost you the job or eat your profit.\",\n      \"## The Copy-Paste Problem\",\n      \"Every bathroom remodel is different. When you copy from an old contractor proposal, you're gambling that:\",\n      \"- Material prices haven't changed (spoiler: they always do)\",\n      \"- The scope matches the new project (it rarely does)\",\n      \"- You didn't leave the old client's name somewhere embarrassing\",\n      \"- The exclusions still make sense for this job\",\n      \"One wrong number can cost you thousands. One missed exclusion can turn a profitable job into a nightmare.\",\n      \"## A Better Way to Write Contractor Proposals\",\n      \"Instead of copying old proposals, you need a system that:\",\n      \"- Generates fresh scope of work for each project\",\n      \"- Uses current material pricing\",\n      \"- Includes the right exclusions automatically\",\n      \"- Looks professional every time\",\n      \"### Start with a Template, Not an Old Proposal\",\n      \"A good contractor proposal template is different from an old proposal. Templates give you the structure and professional language, but you fill in project-specific details fresh each time.\",\n      \"Your bathroom remodeling proposal template should include:\",\n      \"- **Scope sections**: Demolition, rough-in, tile, fixtures, finishes\",\n      \"- **Standard exclusions**: Mold, structural issues, work outside footprint\",\n      \"- **Payment terms**: Industry-standard milestone payments\",\n      \"- **Warranty language**: What you guarantee and for how long\",\n      \"### Customize the Details, Not the Structure\",\n      \"Once you have a solid template, you only need to customize:\",\n      \"- Client name and address\",\n      \"- Specific fixtures and finishes\",\n      \"- Square footage and quantities\",\n      \"- Project-specific exclusions\",\n      \"- Current pricing\",\n      \"This takes minutes, not hoursâ€”and you never accidentally leave 'Mr. Johnson' in a proposal for Mrs. Smith.\",\n      \"## What Every Bathroom Contractor Proposal Needs\",\n      \"Whether you use a template or build from scratch, every bathroom remodeling proposal needs these elements:\",\n      \"### Detailed Scope of Work\",\n      \"List every task with specific details. 'Install new tile' isn't enough. Say 'Install 12x24 porcelain tile on shower walls in running bond pattern with Mapei Keracolor U grout (color: Silver).'\",\n      \"### Material Specifications\",\n      \"Name brands, model numbers, colors, and quantities. This prevents 'I thought it was going to be...' conversations later.\",\n      \"### Clear Exclusions\",\n      \"What you DON'T include is as important as what you do. Always exclude mold remediation, structural repairs, and work outside the bathroom footprint.\",\n      \"### Payment Schedule\",\n      \"Break payments into milestones: deposit, rough-in, tile completion, final walkthrough. This protects your cash flow and reduces risk.\",\n      \"### Warranty Terms\",\n      \"State exactly what you guarantee. Typically 1-2 years on workmanship, with manufacturer warranties on fixtures and materials.\",\n      \"## The 60-Second Contractor Proposal\",\n      \"You don't have to choose between copy-paste and writing from scratch. Modern contractor proposal software lets you generate custom proposals in about a minute.\",\n      \"With [ScopeGen](/), you:\",\n      \"- Select the project type (full remodel, tub-to-shower, etc.)\",\n      \"- Enter client info and project details\",\n      \"- Choose fixtures and finish levels\",\n      \"- Get a complete, professional proposal instantly\",\n      \"No copying. No pasting. No embarrassing mistakes.\",\n      \"## Ready to Stop Copy-Pasting?\",\n      \"Your contractor proposals deserve better than Frankenstein documents stitched together from old jobs. Generate your next proposal in 60 seconds with [ScopeGen](/).\"\n    ]\n  },\n  \"roofing-proposal-checklist-storm-jobs\": {\n    slug: \"roofing-proposal-checklist-storm-jobs\",\n    title: \"Roofing Proposal Checklist for Storm Damage Jobs\",\n    excerpt: \"Complete checklist for storm damage roofing proposals. Includes insurance documentation, supplement language, and how to protect your payment.\",\n    author: \"ScopeGen Team\",\n    date: \"December 11, 2025\",\n    readTime: \"7 min read\",\n    category: \"Proposal Writing\",\n    metaTitle: \"Roofing Proposal Checklist for Storm Damage Jobs | ScopeGen\",\n    metaDescription: \"Complete checklist for storm damage roofing proposals. Learn what to include for insurance claims, supplement documentation, and payment protection.\",\n    content: [\n      \"Storm damage roofing jobs are different from regular replacements. Insurance is involved, timelines are compressed, and documentation matters more than ever. This contractor proposal checklist covers everything you need for storm jobs.\",\n      \"## Why Storm Jobs Need Special Proposals\",\n      \"A standard roofing contractor proposal won't cut it for storm damage work. You're not just selling to the homeownerâ€”you're documenting for the insurance company too.\",\n      \"Storm proposals need to:\",\n      \"- Match the insurance adjuster's line items\",\n      \"- Include supplement language for hidden damage\",\n      \"- Document existing conditions before work begins\",\n      \"- Protect your payment when insurance drags their feet\",\n      \"## The Storm Damage Contractor Proposal Checklist\",\n      \"### Section 1: Documentation\",\n      \"- Photos of all visible damage (before repair)\",\n      \"- Insurance claim number\",\n      \"- Adjuster name and contact info\",\n      \"- Date of loss (storm date)\",\n      \"- Copy of insurance estimate attached\",\n      \"### Section 2: Scope of Work\",\n      \"Your scope should mirror the insurance estimate categories:\",\n      \"- **Tear-off**: Number of layers, squares, disposal\",\n      \"- **Decking**: Replacement allowance and per-sheet pricing\",\n      \"- **Drip edge**: Linear feet, material type\",\n      \"- **Underlayment**: Synthetic or felt, ice and water locations\",\n      \"- **Shingles**: Brand, style, color, warranty level\",\n      \"- **Flashing**: Step, counter, pipe boots, valleys\",\n      \"- **Ridge**: Venting, cap shingles, linear feet\",\n      \"- **Cleanup**: Magnetic sweep, debris removal, dump fees\",\n      \"### Section 3: Insurance-Specific Language\",\n      \"Include these critical clauses:\",\n      \"**Supplement Clause**: 'If additional damage is discovered during tear-off that was not visible during initial inspection, Contractor will document and submit a supplement claim to insurance. Homeowner agrees to sign supplement authorization within 48 hours of submission.'\",\n      \"**Code Upgrade Clause**: 'If local building codes require upgrades beyond what insurance covers, Contractor will notify Homeowner of additional costs before proceeding.'\",\n      \"**Payment Assignment**: 'Homeowner hereby assigns all insurance benefits for roofing work to Contractor to the extent of the contract amount.'\",\n      \"### Section 4: Payment Terms\",\n      \"Storm jobs need special payment structure:\",\n      \"- **Deductible due at signing**: Homeowner's deductible paid upfront\",\n      \"- **Insurance proceeds**: Paid directly to contractor or upon receipt\",\n      \"- **Supplement payments**: Due within 7 days of insurance payment\",\n      \"- **Depreciation recovery**: Due upon receipt from insurance\",\n      \"Never start work without the deductible in hand.\",\n      \"### Section 5: Timeline Considerations\",\n      \"Storm season creates urgency, but protect yourself:\",\n      \"- **Material availability**: Note that storm demand may affect material delivery times\",\n      \"- **Permit timing**: Some municipalities are backlogged after major storms\",\n      \"- **Crew scheduling**: First-come-first-served based on signed contracts and deposits\",\n      \"### Section 6: Hidden Damage Protocol\",\n      \"Spell out exactly what happens when you find more damage:\",\n      \"1. Stop work and document with photos\",\n      \"2. Notify homeowner within 24 hours\",\n      \"3. Submit supplement to insurance\",\n      \"4. Wait for approval before proceeding (or get homeowner authorization to proceed at their risk)\",\n      \"5. Additional work invoiced separately\",\n      \"## Sample Storm Damage Scope Items\",\n      \"Here's how to write line items that match insurance estimates:\",\n      \"- 'Remove existing roofing - 24 squares (2 layers) - $XX per square'\",\n      \"- 'Dispose of roofing debris - 24 squares - $XX per square'\",\n      \"- 'Replace damaged decking - up to 2 sheets included, additional at $85/sheet'\",\n      \"- 'Install GAF Timberline HDZ - 24 squares - $XX per square'\",\n      \"- 'Install synthetic underlayment - 24 squares - $XX per square'\",\n      \"- 'Install ice and water shield at eaves - 72 LF - $XX per LF'\",\n      \"- 'Replace drip edge - 180 LF - $XX per LF'\",\n      \"- 'Replace pipe jacks - 6 each - $XX each'\",\n      \"Using unit pricing makes supplements easier to document and approve.\",\n      \"## Protect Your Payment\",\n      \"Storm jobs have payment risks that regular jobs don't:\",\n      \"- Insurance companies delay payment\",\n      \"- Homeowners spend their insurance check on other things\",\n      \"- Depreciation recoverable gets 'lost'\",\n      \"Protect yourself with clear contractor proposal language:\",\n      \"- 'Final payment due within 5 business days of insurance payment receipt'\",\n      \"- 'Homeowner agrees to forward all insurance payments within 48 hours of receipt'\",\n      \"- 'Contractor may file lien if payment not received within 30 days of project completion'\",\n      \"## Generate Storm-Ready Contractor Proposals Fast\",\n      \"Storm season moves fast. You don't have time to write proposals from scratch while leads are calling. [ScopeGen](/) generates professional roofing contractor proposals with all the insurance language, supplement clauses, and documentation you need.\",\n      \"Generate your next proposal in 60 seconds with [ScopeGen](/).\"\n    ]\n  },\n  \"why-homeowners-dont-understand-proposals\": {\n    slug: \"why-homeowners-dont-understand-proposals\",\n    title: \"Why Homeowners Don't Understand Your Proposal (and How to Fix It)\",\n    excerpt: \"Your proposal makes perfect sense to you. But homeowners see jargon, confusion, and reasons to keep shopping. Here's how to write proposals they actually understand.\",\n    author: \"ScopeGen Team\",\n    date: \"December 11, 2025\",\n    readTime: \"5 min read\",\n    category: \"Business Tips\",\n    metaTitle: \"Why Homeowners Don't Understand Your Proposal | ScopeGen\",\n    metaDescription: \"Learn why homeowners get confused by contractor proposals and how to write clear proposals that win jobs. Simple fixes that increase your close rate.\",\n    content: [\n      \"You send a detailed contractor proposal. Radio silence. Or worse: 'We're going to get a few more bids.' The problem isn't your priceâ€”it's that homeowners don't understand what they're buying.\",\n      \"## The Curse of Knowledge\",\n      \"You've been in the trades for years. Terms like 'rough-in,' 'backer board,' and 'trim out' are second nature. But to a homeowner, your contractor proposal might as well be written in another language.\",\n      \"When homeowners don't understand your proposal, they:\",\n      \"- Focus only on the bottom-line price\",\n      \"- Can't see why you cost more than the other guy\",\n      \"- Delay making a decision (death for your sales process)\",\n      \"- Default to whoever seems 'simplest'\",\n      \"## Common Proposal Mistakes That Confuse Homeowners\",\n      \"### Mistake 1: Too Much Jargon\",\n      \"**Instead of**: 'Install 1/2\\\" HardieBacker on shower walls with thinset'\",\n      \"**Write**: 'Install waterproof cement board behind your shower tile (this prevents water damage and mold)'\",\n      \"Add a brief 'why' after technical items. Homeowners don't know why cement board mattersâ€”but 'prevents mold' makes sense instantly.\",\n      \"### Mistake 2: Giant Walls of Text\",\n      \"Your contractor proposal isn't a novel. Break up long paragraphs into:\",\n      \"- Bullet points for scope items\",\n      \"- Headers for each section\",\n      \"- White space so it doesn't feel overwhelming\",\n      \"Homeowners scan proposals. Make the important stuff easy to find.\",\n      \"### Mistake 3: Hiding the Price\",\n      \"Don't bury your price on page 4. Homeowners are looking for the number. If they can't find it easily, they get frustrated.\",\n      \"Put your total investment prominently displayed. Break down the costs clearly so they see where the money goes.\",\n      \"### Mistake 4: No Visual Hierarchy\",\n      \"A contractor proposal that's all the same font size and style is hard to navigate. Use:\",\n      \"- **Bold headers** for main sections\",\n      \"- Larger font for section titles\",\n      \"- Consistent formatting throughout\",\n      \"Your proposal should have a clear visual flow: Project overview â†’ Scope â†’ Materials â†’ Pricing â†’ Terms.\",\n      \"### Mistake 5: Missing the 'What's In It For Me'\",\n      \"Homeowners don't care about your processâ€”they care about their outcome. Connect your work to their benefits:\",\n      \"- 'New exhaust fan' â†’ 'New exhaust fan (eliminates mirror fog and prevents mold)'\",\n      \"- 'GFCI outlets' â†’ 'Safety outlets that prevent electrical shock in wet areas'\",\n      \"- '2-coat paint system' â†’ 'Premium 2-coat finish that lasts 10+ years'\",\n      \"## Quick Fixes for Clearer Contractor Proposals\",\n      \"### Fix 1: Add a Project Summary\",\n      \"Start with a 2-3 sentence overview: 'This proposal covers a complete bathroom remodel including new tile shower, vanity, toilet, and flooring. Work will take approximately 10 business days. Your total investment is $18,500.'\",\n      \"Now they know exactly what they're getting before reading details.\",\n      \"### Fix 2: Group Work by Phase\",\n      \"Instead of a random list of tasks, organize by logical phases:\",\n      \"- **Week 1**: Demolition and rough plumbing\",\n      \"- **Week 2**: Tile and fixture installation\",\n      \"- **Week 3**: Finishing touches and cleanup\",\n      \"This helps homeowners visualize the process.\",\n      \"### Fix 3: Include a 'What's Not Included' Section\",\n      \"Being clear about exclusions actually builds trust. It shows you've thought through the project completely and aren't hiding surprise charges.\",\n      \"### Fix 4: End with Clear Next Steps\",\n      \"Don't leave homeowners wondering what to do. End with: 'To move forward, simply sign below and return with your deposit. We'll contact you within 48 hours to schedule your start date.'\",\n      \"## The Contractor Proposal That Wins\",\n      \"The best contractor proposals aren't the longest or most technical. They're the clearest. Homeowners choose contractors they understand and trust.\",\n      \"When your proposal is easy to read, explains the value, and shows clear next steps, you'll close more jobsâ€”often at higher prices than your competitors.\",\n      \"## Make Every Proposal Crystal Clear\",\n      \"[ScopeGen](/) generates contractor proposals designed for homeowners, not other contractors. Clear language, logical organization, and professional formatting that builds trust.\",\n      \"Generate your next proposal in 60 seconds with [ScopeGen](/).\"\n    ]\n  },\n  \"starting-home-services-business\": {\n    slug: \"starting-home-services-business\",\n    title: \"Starting a Home Services Business: Challenges and Pitfalls to Avoid\",\n    excerpt: \"Thinking about starting your own contracting or home services business? Learn the real challenges most new contractors face and how to avoid common mistakes.\",\n    author: \"ScopeGen Team\",\n    date: \"December 12, 2025\",\n    readTime: \"8 min read\",\n    category: \"Business Tips\",\n    metaTitle: \"Starting a Home Services Business: Challenges & Pitfalls | ScopeGen\",\n    metaDescription: \"Essential guide for starting a home services or contracting business. Learn common pitfalls, licensing requirements, and how to set yourself up for success.\",\n    content: [\n      \"Starting a home services business sounds simple: you're good at your trade, so why not work for yourself? But the reality hits hard. Most new contracting businesses fail within the first two yearsâ€”not because the owners lack skills, but because they underestimate the business side.\",\n      \"## The Dream vs. Reality\",\n      \"The dream: Be your own boss. Set your own hours. Keep all the profit.\",\n      \"The reality: You're now the salesperson, bookkeeper, scheduler, customer service rep, and tradespersonâ€”all in one. And that 'profit' disappears fast when you forget to account for taxes, insurance, and slow seasons.\",\n      \"Understanding these challenges upfront gives you a massive advantage over contractors who learn the hard way.\",\n      \"## Challenge 1: Underpricing Your Work\",\n      \"This is the #1 killer of new home services businesses. You price jobs the way you did as an employeeâ€”hourly rate times hours workedâ€”and wonder why you're broke.\",\n      \"### What You're Forgetting\",\n      \"- **Taxes**: Self-employment tax is 15.3% on top of income tax\",\n      \"- **Insurance**: General liability, vehicle, tools, workers comp\",\n      \"- **Unbillable time**: Estimates, travel, admin, callbacks\",\n      \"- **Materials markup**: You should mark up materials 20-50%\",\n      \"- **Slow seasons**: You need reserves for when the phone stops ringing\",\n      \"- **Retirement**: Nobody's matching your 401k anymore\",\n      \"### The Fix\",\n      \"Calculate your true hourly costâ€”including all overheadâ€”then add your profit margin. Most successful contractors charge 2-3x what they'd earn as an employee. Use a contractor proposal that clearly shows the value you're delivering.\",\n      \"## Challenge 2: No Systems for Estimates and Proposals\",\n      \"In the beginning, you scribble prices on the back of a business card. It works... until it doesn't.\",\n      \"### The Problems\",\n      \"- You forget what you quoted and lose money\",\n      \"- Homeowners compare your napkin to a competitor's professional contractor proposal\",\n      \"- You can't remember what was included when disputes arise\",\n      \"- You waste hours rewriting the same scope of work\",\n      \"### The Fix\",\n      \"Create systems from day one. Use contractor proposal software to generate professional estimates quickly. Every job should have a written scope of work, even small ones. This protects you legally and makes you look established.\",\n      \"## Challenge 3: Licensing and Insurance Gaps\",\n      \"Many new contractors start working before they're properly licensed and insured. This is a ticking time bomb.\",\n      \"### What You Need\",\n      \"- **Business license**: Required in most jurisdictions\",\n      \"- **Contractor license**: Required for most trades over certain dollar amounts\",\n      \"- **General liability insurance**: Protects you if you damage a client's property\",\n      \"- **Workers compensation**: Required if you have employees in most states\",\n      \"- **Vehicle insurance**: Commercial coverage for work vehicles\",\n      \"- **Bonding**: Required for some trades and some states\",\n      \"### The Consequences of Skipping\",\n      \"- Fines and penalties if caught working unlicensed\",\n      \"- No legal recourse if a client doesn't pay\",\n      \"- Personal liability for any damages or injuries\",\n      \"- Inability to pull permits (which educated homeowners notice)\",\n      \"Get licensed and insured before you take your first job. The cost is worth the protection and credibility.\",\n      \"## Challenge 4: Feast or Famine Cash Flow\",\n      \"New contractors often go from 'more work than I can handle' to 'where did everyone go?' overnight. Without cash reserves, one slow month can sink your business.\",\n      \"### Why This Happens\",\n      \"- You stop marketing when you're busy\",\n      \"- Seasonal fluctuations (especially in roofing, HVAC, landscaping)\",\n      \"- Economic downturns hit home services first\",\n      \"- Large projects end, and the pipeline is empty\",\n      \"### The Fix\",\n      \"- Keep marketing even when busyâ€”leads take time to convert\",\n      \"- Save 3-6 months of expenses before leaving your job\",\n      \"- Diversify services if possible (maintenance contracts, smaller jobs)\",\n      \"- Get deposits upfront to fund materials and labor\",\n      \"## Challenge 5: Trying to Do Everything Yourself\",\n      \"You started this business for freedom, but now you're working 70-hour weeks handling every task yourself.\",\n      \"### The Trap\",\n      \"- You're the best at your trade, so you do all the work\",\n      \"- You can't afford help, so you do your own bookkeeping\",\n      \"- You don't trust anyone, so you handle every call\",\n      \"### The Fix\",\n      \"Start delegating or automating early:\",\n      \"- Use accounting software (QuickBooks, Wave) instead of spreadsheets\",\n      \"- Use contractor proposal software instead of writing everything from scratch\",\n      \"- Hire a part-time helper before you're drowning\",\n      \"- Consider a virtual assistant for scheduling and follow-ups\",\n      \"Your time has a value. If you can earn $75/hour doing your trade, don't spend hours on $15/hour tasks.\",\n      \"## Challenge 6: Not Getting Paid\",\n      \"You did the work, but the check never comes. Without proper contracts and payment terms, you have limited options.\",\n      \"### Common Payment Problems\",\n      \"- No written agreement, so it's your word against theirs\",\n      \"- No deposit, so you're funding their project\",\n      \"- Final payment 'pending' indefinitely\",\n      \"- Disputes over what was included in the price\",\n      \"### The Fix\",\n      \"Every job needs a written contractor proposal that includes:\",\n      \"- Detailed scope of work\",\n      \"- Clear payment schedule with deposits\",\n      \"- What happens if payment is late\",\n      \"- Your right to file a mechanic's lien\",\n      \"Never start work without a signed agreement and deposit.\",\n      \"## Challenge 7: No Reputation Yet\",\n      \"Established contractors have reviews, referrals, and a track record. You're starting from zero.\",\n      \"### Building Credibility Fast\",\n      \"- Ask every satisfied customer for a Google review\",\n      \"- Take before/after photos of every job\",\n      \"- Create a simple website with your work and contact info\",\n      \"- Present professional contractor proposals (this alone sets you apart)\",\n      \"- Join local business groups and trade associations\",\n      \"- Consider small jobs for friends at cost to build your portfolio\",\n      \"Your first 20 jobs are about building reputation as much as making money.\",\n      \"## The Path Forward\",\n      \"Starting a home services business is challenging, but thousands of contractors do it successfully every year. The ones who make it:\",\n      \"- Price their work properly from day one\",\n      \"- Use systems and software to stay organized\",\n      \"- Get licensed, insured, and bonded\",\n      \"- Maintain cash reserves for slow periods\",\n      \"- Present professional contractor proposals that win trust\",\n      \"- Build their reputation intentionally\",\n      \"## Tools That Help You Look Established\",\n      \"One of the fastest ways to compete with established contractors is to look as professional as they do. [ScopeGen](/) helps new contractors create polished contractor proposals that rival companies ten times their size.\",\n      \"Generate your next proposal in 60 seconds with [ScopeGen](/).\"\n    ]\n  },\n  \"electrician-pricing-strategies\": {\n    slug: \"electrician-pricing-strategies\",\n    title: \"Electrician Pricing Strategies: How to Price Your Services Profitably\",\n    excerpt: \"Master electrician pricing with proven strategies for service calls, panel upgrades, and new construction. Stop leaving money on the table.\",\n    author: \"ScopeGen Team\",\n    date: \"December 12, 2025\",\n    readTime: \"9 min read\",\n    category: \"Pricing\",\n    metaTitle: \"Electrician Pricing Strategies: How to Price Electrical Work | ScopeGen\",\n    metaDescription: \"Complete guide to electrician pricing strategies. Learn how to price service calls, panel upgrades, rewires, and new construction work profitably.\",\n    content: [\n      \"Pricing electrical work is part science, part art. Charge too little and you're working for free. Charge too much and the phone stops ringing. This guide covers proven pricing strategies that help electricians stay profitable while winning jobs.\",\n      \"## The Electrician's Pricing Dilemma\",\n      \"Electrical work is invisible to most homeowners. They see the light switch work, not the hours of wire pulling, code compliance, and safety testing behind it. This makes pricing trickyâ€”you're selling expertise and safety, not just 'a new outlet.'\",\n      \"Your contractor proposal needs to communicate value, not just list prices.\",\n      \"## Understanding Your True Costs\",\n      \"Before setting any prices, you need to know exactly what it costs you to operate. Most electricians drastically underestimate their overhead.\",\n      \"### Direct Costs (Per Job)\",\n      \"- **Materials**: Wire, boxes, breakers, fixtures, connectors\",\n      \"- **Permits**: Electrical permits for major work\",\n      \"- **Labor**: Your time or employee wages\",\n      \"- **Vehicle**: Fuel and mileage for the job\",\n      \"### Overhead Costs (Monthly)\",\n      \"- **Insurance**: General liability ($1,500-3,000/year), vehicle, tools\",\n      \"- **Licensing**: State license fees, continuing education\",\n      \"- **Vehicle**: Payment, insurance, maintenance\",\n      \"- **Tools**: Replacement and calibration\",\n      \"- **Software**: Accounting, scheduling, contractor proposal software\",\n      \"- **Phone/Internet**: Business lines\",\n      \"- **Marketing**: Website, ads, business cards\",\n      \"- **Taxes**: Self-employment (15.3%) plus income tax\",\n      \"Add up your monthly overhead and divide by billable hours. This is your 'cost to exist' per hour before you've made any profit.\",\n      \"## Pricing Method 1: Hourly Rate\",\n      \"Charging by the hour is simple but risky. It punishes efficiencyâ€”the faster you work, the less you earn.\",\n      \"### How to Calculate Your Hourly Rate\",\n      \"1. Determine your target annual income (e.g., $80,000)\",\n      \"2. Add annual overhead costs (e.g., $30,000)\",\n      \"3. Total needed: $110,000\",\n      \"4. Divide by billable hours (1,500-1,800 per year is realistic)\",\n      \"5. $110,000 Ã· 1,600 = $69/hour minimum\",\n      \"6. Add profit margin (20-30%): $85-90/hour\",\n      \"### When Hourly Works\",\n      \"- Troubleshooting and diagnostics\",\n      \"- Time-and-materials service calls\",\n      \"- When you genuinely can't estimate scope\",\n      \"### When Hourly Fails\",\n      \"- Jobs you can complete quickly (you lose money)\",\n      \"- When homeowners fixate on 'hours worked'\",\n      \"- Larger projects where flat-rate is expected\",\n      \"## Pricing Method 2: Flat Rate / Project Pricing\",\n      \"Flat-rate pricing quotes a single price for a defined scope of work. You make more money when you work efficiently.\",\n      \"### How to Build Flat Rates\",\n      \"For common jobs, track your actual time and materials over several installations:\",\n      \"- **Outlet installation**: Average 45 minutes + $15 materials = $185-225\",\n      \"- **Ceiling fan install (existing box)**: 1 hour + $0-50 materials = $150-200\",\n      \"- **Panel upgrade (100A to 200A)**: 6-8 hours + $800-1,200 materials = $2,500-4,500\",\n      \"Build a price book for your most common services. Your contractor proposal can then quote consistent prices quickly.\",\n      \"### Advantages of Flat Rate\",\n      \"- Rewards efficiency\",\n      \"- Homeowners prefer knowing the price upfront\",\n      \"- Easier to quote and close jobs\",\n      \"- Builds a systematic, scalable business\",\n      \"## Pricing by Job Type\",\n      \"### Service Calls and Troubleshooting\",\n      \"Most electricians charge a service call fee ($75-150) that covers showing up and basic diagnosis. This fee typically applies to the first hour or converts to labor if you do the work.\",\n      \"**Pricing approach:**\",\n      \"- Service call fee: $85-125\",\n      \"- Hourly rate for additional time: $85-125/hour\",\n      \"- Or flat-rate the repair once diagnosed\",\n      \"### Outlet and Switch Work\",\n      \"Simple outlet and switch work is often priced flat-rate:\",\n      \"- **New outlet (existing circuit)**: $175-275\",\n      \"- **New outlet (new circuit)**: $350-500\",\n      \"- **GFCI outlet**: $150-250\",\n      \"- **Dimmer switch**: $100-175\",\n      \"- **Smart switch**: $125-200 + device cost\",\n      \"### Panel Upgrades\",\n      \"Panel upgrades vary significantly based on scope:\",\n      \"- **100A to 200A upgrade**: $2,000-4,500\",\n      \"- **Panel replacement (same amperage)**: $1,500-2,500\",\n      \"- **Subpanel installation**: $800-2,000\",\n      \"- **Meter/panel combo replacement**: $2,500-5,000\",\n      \"Always include permit costs in your contractor proposalâ€”educated homeowners expect permitted work.\",\n      \"### Whole-House Rewire\",\n      \"Rewiring is typically priced per square foot or by the circuit:\",\n      \"- **Per square foot**: $8-15 (varies by access and complexity)\",\n      \"- **Per circuit**: $200-350 (including home run)\",\n      \"- **Typical 2,000 sq ft home**: $12,000-25,000\",\n      \"### EV Charger Installation\",\n      \"EV chargers are a growing market with predictable pricing:\",\n      \"- **Level 2 charger install (existing capacity)**: $400-800\",\n      \"- **Level 2 with new circuit (panel has space)**: $800-1,500\",\n      \"- **Level 2 requiring panel upgrade**: $3,000-5,000\",\n      \"### New Construction\",\n      \"New construction is typically priced per square foot:\",\n      \"- **Basic spec home**: $4-6 per sq ft\",\n      \"- **Custom home**: $6-10 per sq ft\",\n      \"- **High-end/smart home**: $10-15+ per sq ft\",\n      \"For new construction, your contractor proposal should detail exactly what's included: number of circuits, outlet count, fixture allowances, and smart home rough-ins.\",\n      \"## Markup on Materials\",\n      \"Many electricians forget to mark up materials. You're providing procurement, delivery, and warranty backup. Standard markup is 20-50% on materials.\",\n      \"**Example:**\",\n      \"- 200A panel cost: $400\",\n      \"- Your price: $500-600\",\n      \"- Breakers at cost: $15 each\",\n      \"- Your price: $20-25 each\",\n      \"This isn't gougingâ€”it's covering your time picking up materials, warranty handling, and inventory management.\",\n      \"## Presenting Your Prices\",\n      \"How you present prices matters as much as the prices themselves. A professional contractor proposal builds confidence that justifies your rates.\",\n      \"### What Your Proposal Should Include\",\n      \"- **Scope of work**: Every task in detail\",\n      \"- **Materials list**: What you're installing (brand, quality)\",\n      \"- **Code compliance**: Note that work meets current electrical code\",\n      \"- **Permit status**: Whether permit is included\",\n      \"- **Warranty**: Your workmanship guarantee\",\n      \"- **Timeline**: When you'll complete the work\",\n      \"### Avoid Price-Only Quotes\",\n      \"'Panel upgrade: $3,500' tells homeowners nothing. They'll compare it to a $2,800 quote that excludes permits and uses inferior materials.\",\n      \"Instead, detail what they're getting: 'Install new 200-amp Siemens panel with 40-space/40-circuit capacity, including new meter socket, grounding system upgrade, whole-house surge protection, and all permits and inspections.'\",\n      \"## Handling Price Objections\",\n      \"When homeowners push back on price, don't immediately discount. Instead:\",\n      \"1. **Understand the objection**: Is it truly budget, or lack of perceived value?\",\n      \"2. **Reinforce value**: Licensed, insured, permitted, warranty, code-compliant\",\n      \"3. **Offer options**: Maybe they don't need the whole-house surge protector today\",\n      \"4. **Stand firm on fair pricing**: Lowball bids attract lowball clients\",\n      \"Remember: the cheapest electrician in town isn't the most successful one. The most professional, reliable one is.\",\n      \"## Build Your Price Book with ScopeGen\",\n      \"[ScopeGen](/) helps electricians create professional contractor proposals with consistent pricing. Enter your rates once, and generate detailed proposals in about a minute. No more scribbling prices on invoices.\",\n      \"Generate your next proposal in 60 seconds with [ScopeGen](/).\"\n    ]\n  }\n};\n\nexport const blogSlugs = Object.keys(blogPosts);\n\nexport default function BlogIndex() {\n  useEffect(() => {\n    document.title = \"Contractor Blog | Proposal Tips & Business Advice | ScopeGen\";\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    if (metaDesc) {\n      metaDesc.setAttribute(\"content\", \"Free resources for contractors: proposal writing tips, pricing guides, scope of work templates, and business advice to help you win more jobs.\");\n    }\n  }, []);\n\n  const posts = Object.values(blogPosts).sort((a, b) => \n    new Date(b.date).getTime() - new Date(a.date).getTime()\n  );\n\n  return (\n    <Layout>\n      <section className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white py-16\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <h1 className=\"text-4xl md:text-5xl font-display font-bold mb-4\" data-testid=\"blog-title\">\n              Contractor Resources\n            </h1>\n            <p className=\"text-xl text-slate-300\">\n              Proposal tips, pricing guides, and business advice to help you win more jobs.\n            </p>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"space-y-8\">\n              {posts.map((post) => (\n                <article key={post.slug} className=\"border-b border-slate-200 pb-8\" data-testid={`blog-post-${post.slug}`}>\n                  <Link href={`/blog/${post.slug}`}>\n                    <div className=\"group cursor-pointer\">\n                      <div className=\"flex items-center gap-4 text-sm text-slate-500 mb-3\">\n                        <span className=\"bg-orange-100 text-orange-700 px-3 py-1 rounded-full\">\n                          {post.category}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <Calendar className=\"h-4 w-4\" />\n                          {post.date}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <Clock className=\"h-4 w-4\" />\n                          {post.readTime}\n                        </span>\n                      </div>\n                      <h2 className=\"text-2xl font-bold text-slate-900 group-hover:text-orange-600 transition-colors mb-3\">\n                        {post.title}\n                      </h2>\n                      <p className=\"text-slate-600 mb-4\">{post.excerpt}</p>\n                      <span className=\"inline-flex items-center text-orange-600 font-medium group-hover:gap-2 transition-all\">\n                        Read more <ArrowRight className=\"h-4 w-4 ml-1\" />\n                      </span>\n                    </div>\n                  </Link>\n                </article>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-16 bg-slate-50\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <h2 className=\"text-3xl font-display font-bold mb-4\">Ready to Create Better Proposals?</h2>\n            <p className=\"text-lg text-slate-600 mb-8\">\n              Stop writing proposals from scratch. Use our trade-specific templates to create professional proposals in minutes.\n            </p>\n            <Link href=\"/app\">\n              <Button size=\"lg\" className=\"bg-orange-500 hover:bg-orange-600 text-white gap-2\" data-testid=\"blog-cta\">\n                Try ScopeGen Free <ArrowRight className=\"h-5 w-5\" />\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":81304,"size_tokens":null},"client/public/sw.js":{"content":"const CACHE_NAME = 'scopegen-v1';\nconst STATIC_ASSETS = [\n  '/',\n  '/dashboard',\n  '/favicon.png',\n  '/icon-192.png',\n  '/icon-512.png',\n  '/manifest.json'\n];\n\nconst FONT_CACHE_NAME = 'scopegen-fonts-v1';\nconst FONT_URLS = [\n  'https://fonts.googleapis.com',\n  'https://fonts.gstatic.com'\n];\n\nself.addEventListener('install', (event) => {\n  event.waitUntil(\n    caches.open(CACHE_NAME).then((cache) => {\n      return cache.addAll(STATIC_ASSETS);\n    })\n  );\n  self.skipWaiting();\n});\n\nself.addEventListener('activate', (event) => {\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      return Promise.all(\n        cacheNames\n          .filter((name) => name !== CACHE_NAME && name !== FONT_CACHE_NAME)\n          .map((name) => caches.delete(name))\n      );\n    })\n  );\n  self.clients.claim();\n});\n\nself.addEventListener('fetch', (event) => {\n  const { request } = event;\n  const url = new URL(request.url);\n\n  if (url.pathname.startsWith('/api/')) {\n    return;\n  }\n\n  if (FONT_URLS.some((fontUrl) => request.url.startsWith(fontUrl))) {\n    event.respondWith(\n      caches.open(FONT_CACHE_NAME).then((cache) => {\n        return cache.match(request).then((cachedResponse) => {\n          if (cachedResponse) {\n            return cachedResponse;\n          }\n          return fetch(request).then((response) => {\n            if (response.ok) {\n              cache.put(request, response.clone());\n            }\n            return response;\n          });\n        });\n      })\n    );\n    return;\n  }\n\n  if (request.destination === 'document') {\n    event.respondWith(\n      fetch(request)\n        .then((response) => {\n          const responseClone = response.clone();\n          caches.open(CACHE_NAME).then((cache) => {\n            cache.put(request, responseClone);\n          });\n          return response;\n        })\n        .catch(() => {\n          return caches.match(request).then((cachedResponse) => {\n            return cachedResponse || caches.match('/');\n          });\n        })\n    );\n    return;\n  }\n\n  if (\n    request.destination === 'script' ||\n    request.destination === 'style' ||\n    request.destination === 'image' ||\n    request.destination === 'font'\n  ) {\n    event.respondWith(\n      caches.match(request).then((cachedResponse) => {\n        if (cachedResponse) {\n          fetch(request).then((response) => {\n            if (response.ok) {\n              caches.open(CACHE_NAME).then((cache) => {\n                cache.put(request, response);\n              });\n            }\n          });\n          return cachedResponse;\n        }\n        return fetch(request).then((response) => {\n          if (response.ok) {\n            const responseClone = response.clone();\n            caches.open(CACHE_NAME).then((cache) => {\n              cache.put(request, responseClone);\n            });\n          }\n          return response;\n        });\n      })\n    );\n    return;\n  }\n});\n","path":null,"size_bytes":2898,"size_tokens":null},"client/src/pages/compare-houzz.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, Check, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function CompareHouzz() {\n  useEffect(() => {\n    document.title = \"ScopeGen vs Houzz Pro: Which Proposal Software is Right for You?\";\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    if (metaDesc) {\n      metaDesc.setAttribute(\"content\", \"Compare ScopeGen vs Houzz Pro for contractor proposals. See the differences in pricing, features, and find out which tool is best for your business.\");\n    }\n  }, []);\n\n  return (\n    <Layout>\n      <article className=\"bg-white\">\n        <section className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white py-16 md:py-20\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-4xl mx-auto text-center\">\n              <h1 className=\"text-4xl md:text-5xl font-display font-bold mb-6\" data-testid=\"h1-compare-houzz\">\n                ScopeGen vs Houzz Pro: Which Proposal Software is Right for You?\n              </h1>\n              <p className=\"text-xl text-slate-300 mb-8\" data-testid=\"text-intro-houzz\">\n                Both ScopeGen and Houzz Pro help contractors create proposals, but they serve different markets and purposes. ScopeGen is a fast, focused proposal generator for all contractor trades, while Houzz Pro is a design and project management platform built around the Houzz ecosystem. Let's compare.\n              </p>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-16\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-8 text-center\" data-testid=\"h2-quick-comparison-houzz\">\n                Quick Comparison Table\n              </h2>\n              <div className=\"overflow-x-auto mb-16\">\n                <table className=\"w-full border-collapse bg-white rounded-xl border border-slate-200\" data-testid=\"table-comparison-houzz\">\n                  <thead className=\"bg-slate-100\">\n                    <tr>\n                      <th className=\"text-left py-4 px-6 font-semibold text-slate-900 border-b\">Feature</th>\n                      <th className=\"text-center py-4 px-6 font-semibold text-orange-600 border-b\">ScopeGen</th>\n                      <th className=\"text-center py-4 px-6 font-semibold text-slate-600 border-b\">Houzz Pro</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Starting Price</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">Free tier available</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">$149/month</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Proposal Generation</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">60 seconds</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Manual</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Pre-built Templates</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">17+ trades</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Limited</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">E-signatures</td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Best For</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">Small contractors</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Interior designers & remodelers</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">3D Design Tools</td>\n                      <td className=\"py-4 px-6 text-center\"><X className=\"h-5 w-5 text-slate-300 mx-auto\" /></td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                    </tr>\n                    <tr>\n                      <td className=\"py-4 px-6 text-slate-700\">Lead Generation</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Not included</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Paid extra</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n\n              <div className=\"prose prose-lg max-w-none\">\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-what-is-scopegen\">\n                  What is ScopeGen?\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  ScopeGen is a proposal generator built specifically for contractors who need professional proposals fast. With pre-built scope templates for 17+ trades including roofing, HVAC, plumbing, electrical, remodeling, and more, you can create a complete proposal in about 60 seconds. There's no complex setup, no training required, and a free tier available to get started immediately.\n                </p>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-what-is-houzz\">\n                  What is Houzz Pro?\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  Houzz Pro is a design and project management platform primarily for interior designers and remodelers. Starting at $149/month, it includes 3D design tools, mood boards, lead generation through the Houzz marketplace, and proposal features. It's deeply integrated with the Houzz ecosystem, which is great if you want leads from Houzz but requires commitment to their platform.\n                </p>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-key-differences-houzz\">\n                  Key Differences\n                </h2>\n                <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Pricing</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen offers a free tier with affordable paid plans. Houzz Pro starts at $149/month, plus additional costs for premium lead generation.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Ease of Use</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen is ready to use in 5 minutes. Houzz Pro requires learning their design tools and understanding the Houzz ecosystem.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Target Audience</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen works for any contractor trade. Houzz Pro is specifically designed for interior designers and renovation professionals.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Feature Focus</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen focuses on fast, professional proposals. Houzz Pro combines design visualization with lead generation and project management.\n                    </p>\n                  </div>\n                </div>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-when-scopegen-houzz\">\n                  When to Choose ScopeGen\n                </h2>\n                <ul className=\"space-y-3 mb-8\">\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You're a small contractor or solo operator\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You want proposals done in under a minute\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You focus on remodeling, roofing, HVAC, plumbing, electrical, or similar trades\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You don't want to pay for features you don't need\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You generate your own leads and don't need the Houzz marketplace\n                  </li>\n                </ul>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-when-houzz\">\n                  When to Choose Houzz Pro\n                </h2>\n                <ul className=\"space-y-3 mb-8\">\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You're an interior designer or high-end remodeler\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You need 3D design visualization and mood boards for clients\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You want to generate leads through the Houzz marketplace\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    Your business model relies on showcasing design portfolios\n                  </li>\n                </ul>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-bottom-line-houzz\">\n                  The Bottom Line\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  If you're a contractor who needs fast, professional proposals without being tied to a specific ecosystem, ScopeGen is the smart choice. You'll get industry-leading proposal generation without paying for 3D design tools or marketplace leads you may not need. Try ScopeGen free and see for yourself.\n                </p>\n              </div>\n\n              <div className=\"text-center py-8\">\n                <Link href=\"/app\">\n                  <Button size=\"lg\" className=\"bg-orange-500 hover:bg-orange-600 text-white gap-2\" data-testid=\"button-cta-houzz\">\n                    Create Your First Proposal Free <ArrowRight className=\"h-5 w-5\" />\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </section>\n      </article>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":12483,"size_tokens":null},"client/src/pages/calculator.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { \n  Calculator, Loader2, Sparkles, Bath, ChefHat, Home as HomeIcon, \n  Paintbrush, Plug, Wrench, Thermometer, TreePine, ArrowRight, \n  Share2, Copy, Check, Twitter, Facebook, Linkedin, Code, \n  DollarSign, Clock, Hammer, Building2, Layers, Grid3X3, \n  Fence, CircleDot, Palette, MapPin\n} from \"lucide-react\";\nimport { regionalMultipliers } from \"@/lib/regional-pricing\";\n\nconst calculatorTrades = [\n  {\n    id: \"bathroom\",\n    name: \"Bathroom Remodel\",\n    icon: Bath,\n    materialsRatio: 0.45,\n    laborRatio: 0.55,\n    jobTypes: [\n      { id: \"tub-to-shower\", name: \"Tub-to-Shower Conversion\", low: 8500, high: 12000, days: [5, 8] },\n      { id: \"full-gut\", name: \"Full Bathroom Remodel\", low: 18000, high: 28000, days: [10, 21] },\n      { id: \"half-bath\", name: \"Half Bath / Powder Room\", low: 6500, high: 9500, days: [4, 7] },\n      { id: \"vanity-refresh\", name: \"Vanity & Faucet Replacement\", low: 1800, high: 3500, days: [1, 2] },\n      { id: \"ada-accessible\", name: \"ADA Accessibility Upgrade\", low: 12000, high: 22000, days: [7, 14] },\n      { id: \"tile-only\", name: \"Tile Replacement\", low: 3500, high: 7000, days: [3, 5] },\n    ]\n  },\n  {\n    id: \"kitchen\",\n    name: \"Kitchen Remodel\",\n    icon: ChefHat,\n    materialsRatio: 0.50,\n    laborRatio: 0.50,\n    jobTypes: [\n      { id: \"full-kitchen\", name: \"Full Kitchen Remodel\", low: 45000, high: 85000, days: [30, 60] },\n      { id: \"cabinet-refresh\", name: \"Cabinet & Countertop Refresh\", low: 8500, high: 15000, days: [7, 14] },\n      { id: \"appliance-upgrade\", name: \"Appliance Package Install\", low: 2500, high: 5000, days: [1, 2] },\n      { id: \"backsplash\", name: \"Backsplash Installation\", low: 1500, high: 4000, days: [2, 4] },\n      { id: \"cabinet-refacing\", name: \"Cabinet Refacing\", low: 5000, high: 12000, days: [5, 10] },\n      { id: \"island-addition\", name: \"Kitchen Island Addition\", low: 8000, high: 20000, days: [5, 10] },\n    ]\n  },\n  {\n    id: \"roofing\",\n    name: \"Roofing\",\n    icon: HomeIcon,\n    materialsRatio: 0.40,\n    laborRatio: 0.60,\n    jobTypes: [\n      { id: \"full-roof\", name: \"Full Roof Replacement\", low: 12000, high: 25000, days: [3, 7] },\n      { id: \"roof-repair\", name: \"Roof Repair\", low: 500, high: 2500, days: [1, 2] },\n      { id: \"gutter-install\", name: \"Gutter Install/Replace\", low: 1200, high: 3000, days: [1, 2] },\n      { id: \"metal-roof\", name: \"Metal Roof Installation\", low: 18000, high: 45000, days: [5, 10] },\n      { id: \"flat-roof\", name: \"Flat Roof / TPO / EPDM\", low: 8000, high: 18000, days: [3, 5] },\n      { id: \"skylight\", name: \"Skylight Installation\", low: 1500, high: 4000, days: [1, 2] },\n    ]\n  },\n  {\n    id: \"painting\",\n    name: \"Painting\",\n    icon: Paintbrush,\n    materialsRatio: 0.25,\n    laborRatio: 0.75,\n    jobTypes: [\n      { id: \"single-room\", name: \"Single Room (Interior)\", low: 450, high: 850, days: [1, 2] },\n      { id: \"whole-house\", name: \"Whole House Interior\", low: 3500, high: 8000, days: [5, 10] },\n      { id: \"exterior\", name: \"Exterior House Painting\", low: 4000, high: 12000, days: [5, 10] },\n      { id: \"cabinet-painting\", name: \"Cabinet Painting\", low: 2500, high: 6000, days: [5, 10] },\n      { id: \"deck-staining\", name: \"Deck Staining\", low: 800, high: 2500, days: [2, 3] },\n      { id: \"trim-only\", name: \"Trim & Door Painting\", low: 1000, high: 3000, days: [2, 4] },\n    ]\n  },\n  {\n    id: \"electrical\",\n    name: \"Electrical\",\n    icon: Plug,\n    materialsRatio: 0.35,\n    laborRatio: 0.65,\n    jobTypes: [\n      { id: \"panel-upgrade\", name: \"Panel Upgrade\", low: 2500, high: 4500, days: [1, 2] },\n      { id: \"ev-charger\", name: \"EV Charger Installation\", low: 800, high: 2000, days: [1, 1] },\n      { id: \"rewiring\", name: \"Whole House Rewiring\", low: 8000, high: 15000, days: [5, 10] },\n      { id: \"outlet-install\", name: \"Outlet Installation\", low: 150, high: 400, days: [1, 1] },\n      { id: \"lighting-upgrade\", name: \"Recessed Lighting Package\", low: 1200, high: 3500, days: [1, 2] },\n      { id: \"ceiling-fan\", name: \"Ceiling Fan Installation\", low: 200, high: 500, days: [1, 1] },\n    ]\n  },\n  {\n    id: \"plumbing\",\n    name: \"Plumbing\",\n    icon: Wrench,\n    materialsRatio: 0.30,\n    laborRatio: 0.70,\n    jobTypes: [\n      { id: \"water-heater\", name: \"Water Heater Replacement\", low: 1800, high: 3500, days: [1, 1] },\n      { id: \"repipe\", name: \"Whole House Repipe\", low: 8000, high: 15000, days: [3, 5] },\n      { id: \"drain-cleaning\", name: \"Drain Cleaning\", low: 150, high: 500, days: [1, 1] },\n      { id: \"sewer-line\", name: \"Sewer Line Repair/Replace\", low: 3000, high: 8000, days: [2, 4] },\n      { id: \"fixture-install\", name: \"Fixture Installation\", low: 200, high: 600, days: [1, 1] },\n      { id: \"tankless\", name: \"Tankless Water Heater\", low: 3000, high: 5500, days: [1, 2] },\n    ]\n  },\n  {\n    id: \"hvac\",\n    name: \"HVAC\",\n    icon: Thermometer,\n    materialsRatio: 0.55,\n    laborRatio: 0.45,\n    jobTypes: [\n      { id: \"ac-install\", name: \"AC Unit Installation\", low: 4500, high: 12000, days: [1, 3] },\n      { id: \"furnace\", name: \"Furnace Replacement\", low: 3500, high: 8000, days: [1, 2] },\n      { id: \"maintenance\", name: \"Maintenance / Tune-Up\", low: 99, high: 299, days: [1, 1] },\n      { id: \"ductwork\", name: \"Ductwork Replacement\", low: 3000, high: 8000, days: [2, 4] },\n      { id: \"mini-split\", name: \"Mini-Split Installation\", low: 3000, high: 7000, days: [1, 2] },\n      { id: \"heat-pump\", name: \"Heat Pump Installation\", low: 5000, high: 12000, days: [1, 3] },\n    ]\n  },\n  {\n    id: \"landscaping\",\n    name: \"Landscaping\",\n    icon: TreePine,\n    materialsRatio: 0.45,\n    laborRatio: 0.55,\n    jobTypes: [\n      { id: \"lawn-install\", name: \"Lawn Installation\", low: 2000, high: 6000, days: [2, 5] },\n      { id: \"patio\", name: \"Patio / Walkway\", low: 4000, high: 15000, days: [3, 7] },\n      { id: \"tree-work\", name: \"Tree Removal / Trimming\", low: 400, high: 3500, days: [1, 2] },\n      { id: \"irrigation\", name: \"Irrigation System\", low: 2500, high: 6000, days: [2, 4] },\n      { id: \"retaining-wall\", name: \"Retaining Wall\", low: 3000, high: 10000, days: [3, 7] },\n      { id: \"outdoor-lighting\", name: \"Outdoor Lighting\", low: 1500, high: 5000, days: [1, 3] },\n    ]\n  },\n  {\n    id: \"flooring\",\n    name: \"Flooring\",\n    icon: Layers,\n    materialsRatio: 0.50,\n    laborRatio: 0.50,\n    jobTypes: [\n      { id: \"hardwood\", name: \"Hardwood Installation\", low: 4000, high: 12000, days: [3, 7] },\n      { id: \"lvp\", name: \"LVP / Vinyl Plank\", low: 2500, high: 6000, days: [2, 4] },\n      { id: \"tile-floor\", name: \"Tile Flooring\", low: 3500, high: 10000, days: [3, 7] },\n      { id: \"carpet\", name: \"Carpet Installation\", low: 1500, high: 5000, days: [1, 3] },\n      { id: \"refinish\", name: \"Hardwood Refinishing\", low: 2000, high: 5000, days: [3, 5] },\n      { id: \"subfloor\", name: \"Subfloor Repair\", low: 1000, high: 4000, days: [2, 4] },\n    ]\n  },\n  {\n    id: \"siding\",\n    name: \"Siding\",\n    icon: Building2,\n    materialsRatio: 0.45,\n    laborRatio: 0.55,\n    jobTypes: [\n      { id: \"vinyl-siding\", name: \"Vinyl Siding Installation\", low: 8000, high: 18000, days: [5, 10] },\n      { id: \"fiber-cement\", name: \"Fiber Cement Siding\", low: 15000, high: 35000, days: [7, 14] },\n      { id: \"siding-repair\", name: \"Siding Repair\", low: 500, high: 2500, days: [1, 2] },\n      { id: \"wood-siding\", name: \"Wood Siding\", low: 12000, high: 28000, days: [7, 14] },\n      { id: \"stone-veneer\", name: \"Stone Veneer\", low: 8000, high: 20000, days: [5, 10] },\n    ]\n  },\n  {\n    id: \"drywall\",\n    name: \"Drywall\",\n    icon: Grid3X3,\n    materialsRatio: 0.30,\n    laborRatio: 0.70,\n    jobTypes: [\n      { id: \"full-room\", name: \"Full Room Drywall\", low: 1500, high: 4000, days: [3, 5] },\n      { id: \"patch-repair\", name: \"Patch & Repair\", low: 200, high: 800, days: [1, 1] },\n      { id: \"basement-finish\", name: \"Basement Finishing\", low: 5000, high: 15000, days: [7, 14] },\n      { id: \"ceiling-repair\", name: \"Ceiling Repair\", low: 300, high: 1200, days: [1, 2] },\n      { id: \"texture\", name: \"Texture Application\", low: 500, high: 2000, days: [1, 3] },\n    ]\n  },\n  {\n    id: \"windows\",\n    name: \"Window Installation\",\n    icon: Grid3X3,\n    materialsRatio: 0.60,\n    laborRatio: 0.40,\n    jobTypes: [\n      { id: \"single-window\", name: \"Single Window Replacement\", low: 400, high: 1200, days: [1, 1] },\n      { id: \"whole-house\", name: \"Whole House Windows\", low: 8000, high: 25000, days: [3, 7] },\n      { id: \"bay-window\", name: \"Bay Window Installation\", low: 2000, high: 5000, days: [1, 2] },\n      { id: \"sliding-door\", name: \"Sliding Door Install\", low: 1500, high: 4000, days: [1, 2] },\n      { id: \"storm-windows\", name: \"Storm Windows\", low: 200, high: 600, days: [1, 1] },\n    ]\n  },\n  {\n    id: \"deck\",\n    name: \"Deck Building\",\n    icon: Hammer,\n    materialsRatio: 0.45,\n    laborRatio: 0.55,\n    jobTypes: [\n      { id: \"wood-deck\", name: \"Wood Deck Construction\", low: 8000, high: 20000, days: [5, 10] },\n      { id: \"composite\", name: \"Composite Deck\", low: 15000, high: 35000, days: [5, 12] },\n      { id: \"deck-repair\", name: \"Deck Repair\", low: 500, high: 3000, days: [1, 3] },\n      { id: \"railing\", name: \"Railing Installation\", low: 1000, high: 5000, days: [1, 3] },\n      { id: \"pergola\", name: \"Pergola / Cover\", low: 3000, high: 10000, days: [3, 7] },\n    ]\n  },\n  {\n    id: \"fence\",\n    name: \"Fence Installation\",\n    icon: Fence,\n    materialsRatio: 0.50,\n    laborRatio: 0.50,\n    jobTypes: [\n      { id: \"wood-fence\", name: \"Wood Privacy Fence\", low: 2500, high: 8000, days: [2, 5] },\n      { id: \"chain-link\", name: \"Chain Link Fence\", low: 1500, high: 4000, days: [1, 3] },\n      { id: \"vinyl-fence\", name: \"Vinyl Fence\", low: 3500, high: 10000, days: [2, 5] },\n      { id: \"iron-fence\", name: \"Iron / Aluminum Fence\", low: 4000, high: 12000, days: [2, 5] },\n      { id: \"fence-repair\", name: \"Fence Repair\", low: 200, high: 1000, days: [1, 1] },\n    ]\n  },\n  {\n    id: \"concrete\",\n    name: \"Concrete\",\n    icon: CircleDot,\n    materialsRatio: 0.40,\n    laborRatio: 0.60,\n    jobTypes: [\n      { id: \"driveway\", name: \"Driveway Replacement\", low: 5000, high: 15000, days: [3, 7] },\n      { id: \"sidewalk\", name: \"Sidewalk / Path\", low: 1500, high: 5000, days: [2, 4] },\n      { id: \"patio-slab\", name: \"Patio Slab\", low: 2500, high: 8000, days: [2, 5] },\n      { id: \"foundation-repair\", name: \"Foundation Repair\", low: 5000, high: 20000, days: [3, 10] },\n      { id: \"stamped\", name: \"Stamped Concrete\", low: 4000, high: 12000, days: [3, 7] },\n    ]\n  },\n  {\n    id: \"tile\",\n    name: \"Tile Installation\",\n    icon: Grid3X3,\n    materialsRatio: 0.45,\n    laborRatio: 0.55,\n    jobTypes: [\n      { id: \"floor-tile\", name: \"Floor Tile Installation\", low: 2500, high: 8000, days: [3, 7] },\n      { id: \"shower-tile\", name: \"Shower Tile\", low: 3000, high: 8000, days: [4, 8] },\n      { id: \"backsplash-tile\", name: \"Backsplash Tile\", low: 1000, high: 3500, days: [1, 3] },\n      { id: \"fireplace-tile\", name: \"Fireplace Tile Surround\", low: 800, high: 3000, days: [1, 3] },\n      { id: \"outdoor-tile\", name: \"Outdoor / Patio Tile\", low: 3000, high: 10000, days: [3, 7] },\n    ]\n  },\n  {\n    id: \"cabinets\",\n    name: \"Cabinet Installation\",\n    icon: Palette,\n    materialsRatio: 0.60,\n    laborRatio: 0.40,\n    jobTypes: [\n      { id: \"kitchen-cabinets\", name: \"Kitchen Cabinets (Stock)\", low: 5000, high: 12000, days: [3, 5] },\n      { id: \"custom-cabinets\", name: \"Custom Cabinets\", low: 15000, high: 40000, days: [7, 14] },\n      { id: \"bathroom-vanity\", name: \"Bathroom Vanity Install\", low: 800, high: 2500, days: [1, 2] },\n      { id: \"garage-cabinets\", name: \"Garage Cabinets\", low: 2000, high: 6000, days: [1, 3] },\n      { id: \"cabinet-hardware\", name: \"Cabinet Hardware Update\", low: 200, high: 800, days: [1, 1] },\n    ]\n  },\n];\n\nconst sizeMultipliers = {\n  small: { label: \"Small\", multiplier: 0.75, description: \"Basic/compact scope\", sqftRange: \"Under 100 sq ft\" },\n  medium: { label: \"Medium\", multiplier: 1.0, description: \"Standard scope\", sqftRange: \"100-200 sq ft\" },\n  large: { label: \"Large\", multiplier: 1.4, description: \"Premium/extensive scope\", sqftRange: \"200-400 sq ft\" },\n  custom: { label: \"Custom\", multiplier: 1.0, description: \"Based on your input\", sqftRange: \"Custom sq ft\" },\n};\n\nconst faqs = [\n  {\n    question: \"How accurate are these contractor price estimates?\",\n    answer: \"Our estimates are based on national industry data and regional cost adjustments. They provide a solid ballpark range, but actual quotes from local contractors may vary based on specific project requirements, material choices, and labor rates in your area. Always get 2-3 professional quotes for your project.\"\n  },\n  {\n    question: \"What's included in the labor vs. materials breakdown?\",\n    answer: \"Materials include all physical supplies needed for the job (fixtures, tiles, lumber, paint, etc.). Labor covers the cost of skilled tradespeople including installation, prep work, and cleanup. Some projects are more labor-intensive (like painting), while others have higher material costs (like window replacement).\"\n  },\n  {\n    question: \"Why do prices vary so much by location?\",\n    answer: \"Labor costs, material availability, permit requirements, and cost of living all vary significantly by region. For example, projects in California or New York typically cost 20-35% more than the national average, while states like Mississippi or Arkansas may be 15-20% lower.\"\n  },\n  {\n    question: \"How do I get an exact quote for my project?\",\n    answer: \"Use our calculator for a ballpark estimate, then click 'Get a Professional Proposal' to create a detailed scope of work. You can share this with local contractors to get accurate, apples-to-apples quotes based on your specific requirements.\"\n  },\n  {\n    question: \"Can I embed this calculator on my website?\",\n    answer: \"Yes! We encourage bloggers, home improvement sites, and contractor websites to embed this calculator. Use the embed code provided below the calculator. It's free to use and helps homeowners get quick estimates.\"\n  },\n];\n\nconst popularProjects = [\n  { name: \"Bathroom Remodeling\", slug: \"bathroom-remodeling-proposal\", range: \"$1,800 - $28,000\" },\n  { name: \"Kitchen Remodeling\", slug: \"kitchen-remodeling-proposal\", range: \"$8,000 - $85,000\" },\n  { name: \"Roofing\", slug: \"roofing-proposal\", range: \"$3,500 - $45,000\" },\n  { name: \"Painting\", slug: \"painting-proposal\", range: \"$450 - $15,000\" },\n  { name: \"HVAC\", slug: \"hvac-proposal\", range: \"$99 - $12,000\" },\n  { name: \"Electrical\", slug: \"electrical-proposal\", range: \"$150 - $15,000\" },\n  { name: \"Plumbing\", slug: \"plumbing-proposal\", range: \"$150 - $15,000\" },\n  { name: \"Flooring\", slug: \"flooring-proposal\", range: \"$1,500 - $12,000\" },\n  { name: \"Landscaping\", slug: \"landscaping-proposal\", range: \"$400 - $15,000\" },\n];\n\nexport default function CalculatorPage() {\n  const [selectedTrade, setSelectedTrade] = useState<string>(\"\");\n  const [selectedJobType, setSelectedJobType] = useState<string>(\"\");\n  const [selectedSize, setSelectedSize] = useState<string>(\"\");\n  const [customSqFt, setCustomSqFt] = useState<string>(\"\");\n  const [zipCode, setZipCode] = useState<string>(\"\");\n  const [isCalculating, setIsCalculating] = useState(false);\n  const [showPrice, setShowPrice] = useState(false);\n  const [animatedLow, setAnimatedLow] = useState(0);\n  const [animatedHigh, setAnimatedHigh] = useState(0);\n  const [materialsLow, setMaterialsLow] = useState(0);\n  const [materialsHigh, setMaterialsHigh] = useState(0);\n  const [laborLow, setLaborLow] = useState(0);\n  const [laborHigh, setLaborHigh] = useState(0);\n  const [timeline, setTimeline] = useState<[number, number]>([0, 0]);\n  const [copied, setCopied] = useState(false);\n  const [embedCopied, setEmbedCopied] = useState(false);\n  const [regionalMultiplier, setRegionalMultiplier] = useState(1.0);\n  const [detectedRegion, setDetectedRegion] = useState<string | null>(null);\n\n  const trade = calculatorTrades.find(t => t.id === selectedTrade);\n  const jobType = trade?.jobTypes.find(j => j.id === selectedJobType);\n  const size = sizeMultipliers[selectedSize as keyof typeof sizeMultipliers];\n\n  const canCalculate = selectedTrade && selectedJobType && selectedSize && (selectedSize !== \"custom\" || customSqFt);\n\n  useEffect(() => {\n    if (zipCode.length >= 5) {\n      const stateMatch = regionalMultipliers.find(r => {\n        if (zipCode.startsWith(\"9\")) return r.abbrev === \"CA\";\n        if (zipCode.startsWith(\"100\") || zipCode.startsWith(\"112\")) return r.abbrev === \"NY\";\n        if (zipCode.startsWith(\"77\") || zipCode.startsWith(\"75\")) return r.abbrev === \"TX\";\n        if (zipCode.startsWith(\"33\") || zipCode.startsWith(\"32\")) return r.abbrev === \"FL\";\n        if (zipCode.startsWith(\"60\")) return r.abbrev === \"IL\";\n        if (zipCode.startsWith(\"19\") || zipCode.startsWith(\"18\")) return r.abbrev === \"PA\";\n        if (zipCode.startsWith(\"85\") || zipCode.startsWith(\"86\")) return r.abbrev === \"AZ\";\n        if (zipCode.startsWith(\"30\") || zipCode.startsWith(\"31\")) return r.abbrev === \"GA\";\n        if (zipCode.startsWith(\"98\") || zipCode.startsWith(\"99\")) return r.abbrev === \"WA\";\n        if (zipCode.startsWith(\"02\") || zipCode.startsWith(\"01\")) return r.abbrev === \"MA\";\n        if (zipCode.startsWith(\"80\") || zipCode.startsWith(\"81\")) return r.abbrev === \"CO\";\n        if (zipCode.startsWith(\"27\") || zipCode.startsWith(\"28\")) return r.abbrev === \"NC\";\n        return null;\n      });\n      if (stateMatch) {\n        setRegionalMultiplier(stateMatch.multiplier);\n        setDetectedRegion(stateMatch.state);\n      } else {\n        setRegionalMultiplier(1.0);\n        setDetectedRegion(null);\n      }\n    } else {\n      setRegionalMultiplier(1.0);\n      setDetectedRegion(null);\n    }\n  }, [zipCode]);\n\n  useEffect(() => {\n    if (canCalculate && jobType && size && trade) {\n      setIsCalculating(true);\n      setShowPrice(false);\n\n      let sizeMultiplier = size.multiplier;\n      if (selectedSize === \"custom\" && customSqFt) {\n        const sqft = parseInt(customSqFt);\n        if (sqft < 100) sizeMultiplier = 0.75;\n        else if (sqft <= 200) sizeMultiplier = 1.0;\n        else if (sqft <= 400) sizeMultiplier = 1.4;\n        else sizeMultiplier = 1.4 + ((sqft - 400) / 400) * 0.4;\n      }\n\n      const finalMultiplier = sizeMultiplier * regionalMultiplier;\n      const targetLow = Math.round(jobType.low * finalMultiplier);\n      const targetHigh = Math.round(jobType.high * finalMultiplier);\n      const matLow = Math.round(targetLow * trade.materialsRatio);\n      const matHigh = Math.round(targetHigh * trade.materialsRatio);\n      const labLow = Math.round(targetLow * trade.laborRatio);\n      const labHigh = Math.round(targetHigh * trade.laborRatio);\n\n      setTimeout(() => {\n        setIsCalculating(false);\n        setShowPrice(true);\n        setTimeline(jobType.days as [number, number]);\n\n        let frame = 0;\n        const totalFrames = 20;\n        const interval = setInterval(() => {\n          frame++;\n          const progress = frame / totalFrames;\n          const easeOut = 1 - Math.pow(1 - progress, 3);\n          setAnimatedLow(Math.round(targetLow * easeOut));\n          setAnimatedHigh(Math.round(targetHigh * easeOut));\n          setMaterialsLow(Math.round(matLow * easeOut));\n          setMaterialsHigh(Math.round(matHigh * easeOut));\n          setLaborLow(Math.round(labLow * easeOut));\n          setLaborHigh(Math.round(labHigh * easeOut));\n          if (frame >= totalFrames) clearInterval(interval);\n        }, 30);\n      }, 600);\n    } else {\n      setShowPrice(false);\n    }\n  }, [selectedTrade, selectedJobType, selectedSize, customSqFt, regionalMultiplier]);\n\n  const handleTradeChange = (value: string) => {\n    setSelectedTrade(value);\n    setSelectedJobType(\"\");\n  };\n\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const copyShareLink = () => {\n    const url = `${window.location.origin}/calculator?trade=${selectedTrade}&job=${selectedJobType}&size=${selectedSize}`;\n    navigator.clipboard.writeText(url);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const copyEmbedCode = () => {\n    const code = `<iframe src=\"https://scopegenerator.com/calculator\" width=\"100%\" height=\"700\" style=\"border:none;border-radius:12px;\" title=\"Free Contractor Price Calculator\"></iframe>`;\n    navigator.clipboard.writeText(code);\n    setEmbedCopied(true);\n    setTimeout(() => setEmbedCopied(false), 2000);\n  };\n\n  const shareOnTwitter = () => {\n    const text = `Just got an estimate for my ${trade?.name} project: ${formatPrice(animatedLow)} - ${formatPrice(animatedHigh)}. Free calculator:`;\n    const url = `${window.location.origin}/calculator`;\n    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');\n  };\n\n  const shareOnFacebook = () => {\n    const url = `${window.location.origin}/calculator`;\n    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');\n  };\n\n  const shareOnLinkedIn = () => {\n    const url = `${window.location.origin}/calculator`;\n    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');\n  };\n\n  const TradeIcon = trade?.icon || Calculator;\n\n  return (\n    <Layout>\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50\">\n        <section className=\"bg-slate-900 text-white py-12 sm:py-16\">\n          <div className=\"container mx-auto px-4 text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <div className=\"w-16 h-16 bg-secondary rounded-2xl flex items-center justify-center\">\n                <Calculator className=\"w-8 h-8 text-slate-900\" />\n              </div>\n            </div>\n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-heading font-bold mb-4\" data-testid=\"heading-calculator-title\">\n              Free Contractor Price Calculator\n            </h1>\n            <p className=\"text-lg sm:text-xl text-slate-300 max-w-2xl mx-auto\" data-testid=\"text-calculator-subtitle\">\n              Get instant cost estimates for any remodeling or construction project. No signup required.\n            </p>\n          </div>\n        </section>\n\n        <section className=\"py-8 sm:py-12\">\n          <div className=\"container mx-auto px-4 max-w-4xl\">\n            <div className=\"bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden\">\n              <div className=\"bg-gradient-to-r from-primary via-primary/90 to-primary p-4 sm:p-6 flex items-center gap-3\">\n                <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\n                  <Calculator className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <h2 className=\"text-white font-bold text-xl\">Instant Price Estimate</h2>\n                  <p className=\"text-white/70 text-sm\">Select your project details below</p>\n                </div>\n              </div>\n\n              <div className=\"p-6 sm:p-8 space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">1. What type of project?</label>\n                  <select\n                    data-testid=\"select-trade\"\n                    value={selectedTrade}\n                    onChange={(e) => handleTradeChange(e.target.value)}\n                    className=\"w-full h-12 px-4 rounded-xl border-2 border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-primary focus:border-primary transition-all text-base\"\n                  >\n                    <option value=\"\">Select a trade...</option>\n                    {calculatorTrades.map((t) => (\n                      <option key={t.id} value={t.id}>{t.name}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">2. Job type</label>\n                  <select\n                    data-testid=\"select-job-type\"\n                    value={selectedJobType}\n                    onChange={(e) => setSelectedJobType(e.target.value)}\n                    disabled={!selectedTrade}\n                    className=\"w-full h-12 px-4 rounded-xl border-2 border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-primary focus:border-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed text-base\"\n                  >\n                    <option value=\"\">Select job type...</option>\n                    {trade?.jobTypes.map((job) => (\n                      <option key={job.id} value={job.id}>{job.name}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">3. Project size</label>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n                    {Object.entries(sizeMultipliers).map(([key, value]) => (\n                      <button\n                        key={key}\n                        data-testid={`button-size-${key}`}\n                        onClick={() => setSelectedSize(key)}\n                        disabled={!selectedJobType}\n                        className={`py-3 px-4 rounded-xl border-2 transition-all text-center disabled:opacity-50 disabled:cursor-not-allowed ${\n                          selectedSize === key\n                            ? \"border-primary bg-primary/10 text-slate-900 font-bold\"\n                            : \"border-slate-200 hover:border-slate-300 text-slate-600\"\n                        }`}\n                      >\n                        <div className=\"font-semibold\">{value.label}</div>\n                        <div className=\"text-xs text-slate-500\">{value.sqftRange}</div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {selectedSize === \"custom\" && (\n                  <div className=\"animate-in slide-in-from-top duration-300\">\n                    <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Custom square footage</label>\n                    <div className=\"relative\">\n                      <input\n                        type=\"number\"\n                        data-testid=\"input-custom-sqft\"\n                        value={customSqFt}\n                        onChange={(e) => setCustomSqFt(e.target.value)}\n                        placeholder=\"Enter square feet\"\n                        className=\"w-full h-12 px-4 pr-16 rounded-xl border-2 border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-primary focus:border-primary transition-all\"\n                      />\n                      <span className=\"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm\">sq ft</span>\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                    <MapPin className=\"w-4 h-4 inline mr-1\" />\n                    Your ZIP code (optional - for regional pricing)\n                  </label>\n                  <div className=\"relative\">\n                    <input\n                      type=\"text\"\n                      data-testid=\"input-zip-code\"\n                      value={zipCode}\n                      onChange={(e) => setZipCode(e.target.value.replace(/\\D/g, '').slice(0, 5))}\n                      placeholder=\"e.g., 90210\"\n                      maxLength={5}\n                      className=\"w-full h-12 px-4 rounded-xl border-2 border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-primary focus:border-primary transition-all\"\n                    />\n                    {detectedRegion && (\n                      <span className=\"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-green-600 font-medium\">\n                        {detectedRegion} ({regionalMultiplier > 1 ? '+' : ''}{Math.round((regionalMultiplier - 1) * 100)}%)\n                      </span>\n                    )}\n                  </div>\n                </div>\n\n                <div className={`mt-6 p-6 rounded-2xl transition-all duration-500 ${\n                  showPrice \n                    ? \"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200\" \n                    : isCalculating\n                      ? \"bg-slate-50 border-2 border-slate-200\"\n                      : \"bg-slate-50 border-2 border-dashed border-slate-300\"\n                }`}>\n                  {isCalculating ? (\n                    <div className=\"flex items-center justify-center gap-3 py-4\">\n                      <Loader2 className=\"w-6 h-6 text-primary animate-spin\" />\n                      <span className=\"text-slate-600 font-medium text-lg\">Calculating estimate...</span>\n                    </div>\n                  ) : showPrice ? (\n                    <div className=\"animate-in fade-in zoom-in duration-500\">\n                      <div className=\"text-center mb-6\">\n                        <div className=\"flex items-center justify-center gap-2 mb-2\">\n                          <Sparkles className=\"w-5 h-5 text-secondary\" />\n                          <span className=\"text-sm font-semibold text-green-700 uppercase tracking-wide\">Estimated Price Range</span>\n                          <Sparkles className=\"w-5 h-5 text-secondary\" />\n                        </div>\n                        <div className=\"text-4xl sm:text-5xl font-heading font-bold text-slate-900\" data-testid=\"text-price-range\">\n                          {formatPrice(animatedLow)} â€“ {formatPrice(animatedHigh)}\n                        </div>\n                        {detectedRegion && (\n                          <p className=\"text-sm text-slate-500 mt-1\">Adjusted for {detectedRegion} pricing</p>\n                        )}\n                      </div>\n\n                      <div className=\"grid grid-cols-3 gap-4 pt-4 border-t border-green-200\">\n                        <div className=\"text-center\" data-testid=\"breakdown-materials\">\n                          <div className=\"flex items-center justify-center gap-1 text-slate-500 text-sm mb-1\">\n                            <DollarSign className=\"w-4 h-4\" />\n                            Materials\n                          </div>\n                          <div className=\"font-bold text-slate-900\">\n                            {formatPrice(materialsLow)} - {formatPrice(materialsHigh)}\n                          </div>\n                        </div>\n                        <div className=\"text-center\" data-testid=\"breakdown-labor\">\n                          <div className=\"flex items-center justify-center gap-1 text-slate-500 text-sm mb-1\">\n                            <Hammer className=\"w-4 h-4\" />\n                            Labor\n                          </div>\n                          <div className=\"font-bold text-slate-900\">\n                            {formatPrice(laborLow)} - {formatPrice(laborHigh)}\n                          </div>\n                        </div>\n                        <div className=\"text-center\" data-testid=\"breakdown-timeline\">\n                          <div className=\"flex items-center justify-center gap-1 text-slate-500 text-sm mb-1\">\n                            <Clock className=\"w-4 h-4\" />\n                            Timeline\n                          </div>\n                          <div className=\"font-bold text-slate-900\">\n                            {timeline[0]} - {timeline[1]} days\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex flex-col sm:flex-row gap-3 mt-6\">\n                        <Link\n                          href=\"/app\"\n                          data-testid=\"button-get-proposal\"\n                          className=\"flex-1 flex items-center justify-center gap-2 h-12 px-6 rounded-xl bg-primary text-white font-bold hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl\"\n                        >\n                          Get a Professional Proposal\n                          <ArrowRight className=\"w-5 h-5\" />\n                        </Link>\n                        <button\n                          onClick={copyShareLink}\n                          data-testid=\"button-share-estimate\"\n                          className=\"flex items-center justify-center gap-2 h-12 px-6 rounded-xl border-2 border-slate-200 text-slate-700 font-medium hover:bg-slate-50 transition-all\"\n                        >\n                          {copied ? <Check className=\"w-5 h-5 text-green-600\" /> : <Copy className=\"w-5 h-5\" />}\n                          {copied ? \"Link Copied!\" : \"Share This Estimate\"}\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-6\">\n                      <div className=\"flex items-center justify-center gap-3 text-slate-400\">\n                        <TradeIcon className=\"w-8 h-8\" />\n                        <span className=\"text-lg\">Select options above to see your estimate</span>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {showPrice && (\n              <div className=\"mt-8 bg-white rounded-xl shadow-lg border border-slate-200 p-6 sm:p-8 animate-in slide-in-from-bottom duration-500\">\n                <h3 className=\"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2\">\n                  <Share2 className=\"w-5 h-5 text-primary\" />\n                  Share This Calculator\n                </h3>\n                \n                <div className=\"flex flex-wrap gap-3 mb-6\">\n                  <button\n                    onClick={shareOnTwitter}\n                    data-testid=\"button-share-twitter\"\n                    className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#1DA1F2] text-white font-medium hover:bg-[#1a8cd8] transition-colors\"\n                  >\n                    <Twitter className=\"w-4 h-4\" />\n                    Twitter\n                  </button>\n                  <button\n                    onClick={shareOnFacebook}\n                    data-testid=\"button-share-facebook\"\n                    className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#4267B2] text-white font-medium hover:bg-[#375695] transition-colors\"\n                  >\n                    <Facebook className=\"w-4 h-4\" />\n                    Facebook\n                  </button>\n                  <button\n                    onClick={shareOnLinkedIn}\n                    data-testid=\"button-share-linkedin\"\n                    className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#0A66C2] text-white font-medium hover:bg-[#084d94] transition-colors\"\n                  >\n                    <Linkedin className=\"w-4 h-4\" />\n                    LinkedIn\n                  </button>\n                </div>\n\n                <div className=\"border-t border-slate-200 pt-6\">\n                  <h4 className=\"font-semibold text-slate-900 mb-2 flex items-center gap-2\">\n                    <Code className=\"w-4 h-4\" />\n                    Embed This Calculator\n                  </h4>\n                  <p className=\"text-sm text-slate-600 mb-3\">\n                    Bloggers: Feel free to embed this calculator on your site!\n                  </p>\n                  <div className=\"relative\">\n                    <pre className=\"bg-slate-100 rounded-lg p-4 text-sm text-slate-700 overflow-x-auto\">\n                      {`<iframe src=\"https://scopegenerator.com/calculator\" width=\"100%\" height=\"700\" style=\"border:none;border-radius:12px;\" title=\"Free Contractor Price Calculator\"></iframe>`}\n                    </pre>\n                    <button\n                      onClick={copyEmbedCode}\n                      data-testid=\"button-copy-embed\"\n                      className=\"absolute top-2 right-2 flex items-center gap-1 px-3 py-1.5 rounded-md bg-white border border-slate-200 text-sm font-medium hover:bg-slate-50 transition-colors\"\n                    >\n                      {embedCopied ? <Check className=\"w-4 h-4 text-green-600\" /> : <Copy className=\"w-4 h-4\" />}\n                      {embedCopied ? \"Copied!\" : \"Copy\"}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </section>\n\n        <section className=\"py-12 sm:py-16 bg-white\">\n          <div className=\"container mx-auto px-4 max-w-4xl\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-6\" data-testid=\"heading-methodology\">\n              How We Calculate Contractor Prices\n            </h2>\n            <div className=\"prose prose-slate max-w-none\">\n              <p className=\"text-slate-600 text-lg leading-relaxed mb-4\">\n                Our contractor price calculator uses a combination of industry data, regional cost indices, and real-world project data to provide accurate estimates. Here's how it works:\n              </p>\n              <div className=\"grid sm:grid-cols-3 gap-6 my-8\">\n                <div className=\"bg-slate-50 rounded-xl p-5\">\n                  <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center mb-3\">\n                    <DollarSign className=\"w-5 h-5 text-primary\" />\n                  </div>\n                  <h3 className=\"font-bold text-slate-900 mb-2\">National Baseline</h3>\n                  <p className=\"text-slate-600 text-sm\">We start with national average costs from industry databases including RSMeans and HomeAdvisor data.</p>\n                </div>\n                <div className=\"bg-slate-50 rounded-xl p-5\">\n                  <div className=\"w-10 h-10 bg-secondary/10 rounded-lg flex items-center justify-center mb-3\">\n                    <MapPin className=\"w-5 h-5 text-secondary\" />\n                  </div>\n                  <h3 className=\"font-bold text-slate-900 mb-2\">Regional Adjustments</h3>\n                  <p className=\"text-slate-600 text-sm\">We adjust prices based on local labor rates, material costs, and cost of living differences across all 50 states.</p>\n                </div>\n                <div className=\"bg-slate-50 rounded-xl p-5\">\n                  <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mb-3\">\n                    <Hammer className=\"w-5 h-5 text-green-600\" />\n                  </div>\n                  <h3 className=\"font-bold text-slate-900 mb-2\">Project Scope</h3>\n                  <p className=\"text-slate-600 text-sm\">We factor in project size, complexity, and typical material/labor splits for each trade type.</p>\n                </div>\n              </div>\n              <p className=\"text-slate-500 text-sm\">\n                Note: These estimates are intended as a starting point for budgeting. Actual project costs can vary based on material selections, site conditions, permit requirements, and contractor availability. We always recommend getting 2-3 quotes from licensed local contractors.\n              </p>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-12 sm:py-16 bg-slate-50\">\n          <div className=\"container mx-auto px-4 max-w-4xl\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-6\" data-testid=\"heading-popular-projects\">\n              Popular Project Estimates\n            </h2>\n            <div className=\"grid sm:grid-cols-3 gap-4\">\n              {popularProjects.map((project) => (\n                <Link\n                  key={project.slug}\n                  href={`/${project.slug}`}\n                  data-testid={`link-project-${project.slug}`}\n                  className=\"bg-white rounded-xl p-5 shadow-sm border border-slate-200 hover:shadow-md hover:border-primary/30 transition-all group\"\n                >\n                  <h3 className=\"font-bold text-slate-900 group-hover:text-primary transition-colors\">{project.name}</h3>\n                  <p className=\"text-slate-500 text-sm mt-1\">{project.range}</p>\n                  <div className=\"flex items-center gap-1 text-primary text-sm mt-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    Learn more <ArrowRight className=\"w-4 h-4\" />\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-12 sm:py-16 bg-white\">\n          <div className=\"container mx-auto px-4 max-w-4xl\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-8\" data-testid=\"heading-faqs\">\n              Frequently Asked Questions\n            </h2>\n            <div className=\"space-y-4\">\n              {faqs.map((faq, index) => (\n                <details\n                  key={index}\n                  className=\"bg-slate-50 rounded-xl border border-slate-200 overflow-hidden group\"\n                  data-testid={`faq-${index}`}\n                >\n                  <summary className=\"px-6 py-4 cursor-pointer font-semibold text-slate-900 hover:bg-slate-100 transition-colors list-none flex items-center justify-between\">\n                    {faq.question}\n                    <span className=\"text-slate-400 group-open:rotate-180 transition-transform\">â–¼</span>\n                  </summary>\n                  <div className=\"px-6 pb-4 text-slate-600\">\n                    {faq.answer}\n                  </div>\n                </details>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-12 sm:py-16 bg-primary\">\n          <div className=\"container mx-auto px-4 text-center\">\n            <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-white mb-4\">\n              Want to create professional proposals?\n            </h2>\n            <p className=\"text-white/80 text-lg mb-6 max-w-xl mx-auto\">\n              Turn this estimate into a detailed, client-ready proposal in minutes. Free to try, no credit card required.\n            </p>\n            <Link\n              href=\"/app\"\n              data-testid=\"button-footer-cta\"\n              className=\"inline-flex items-center justify-center h-14 px-8 rounded-xl bg-white text-primary font-bold text-lg hover:bg-slate-100 transition-all shadow-lg hover:shadow-xl hover:scale-105\"\n            >\n              Try ScopeGen Free\n              <ArrowRight className=\"ml-2 w-5 h-5\" />\n            </Link>\n          </div>\n        </section>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":43028,"size_tokens":null},"client/src/pages/cost-lookup.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calculator, DollarSign, Search, MapPin, AlertCircle } from \"lucide-react\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\n\ndeclare global {\n  interface Window {\n    onebuild?: {\n      init: (config: { key: string }) => void;\n      open: (options?: { uoms?: string[] }) => void;\n      on: (event: string, callback: (data: unknown) => void) => void;\n    };\n    ONEBUILD_KEY?: string;\n  }\n}\n\nexport default function CostLookupPage() {\n  const [widgetReady, setWidgetReady] = useState(false);\n  const [widgetError, setWidgetError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    document.title = \"Cost Lookup | Real-Time Material & Labor Pricing | ScopeGen\";\n    \n    fetch(\"/api/onebuild-key\")\n      .then(res => res.json())\n      .then(data => {\n        console.log(\"1build key fetched:\", data.key ? \"yes\" : \"no\");\n        if (data.key) {\n          const checkWidget = () => {\n            if (window.onebuild) {\n              console.log(\"1build widget found, initializing...\");\n              try {\n                window.onebuild.init({ key: data.key });\n                \n                window.onebuild.on(\"error\", (error: unknown) => {\n                  console.error(\"1build widget error:\", error);\n                  setWidgetError(`Widget error: ${JSON.stringify(error)}`);\n                });\n                \n                setWidgetReady(true);\n                setIsLoading(false);\n                console.log(\"1build widget initialized\");\n              } catch (err) {\n                console.error(\"1build init error:\", err);\n                setWidgetError(`Initialization failed: ${err}`);\n                setIsLoading(false);\n              }\n            } else {\n              console.log(\"Waiting for 1build widget...\");\n              setTimeout(checkWidget, 100);\n            }\n          };\n          checkWidget();\n        } else {\n          setWidgetError(\"API key not configured\");\n          setIsLoading(false);\n        }\n      })\n      .catch(err => {\n        console.error(\"1build error:\", err);\n        setWidgetError(`Failed to load: ${err.message}`);\n        setIsLoading(false);\n      });\n  }, []);\n\n  const openWidget = () => {\n    console.log(\"Opening 1build widget...\");\n    if (window.onebuild) {\n      try {\n        window.onebuild.open({ uoms: [] });\n        \n        setTimeout(() => {\n          const widgetModal = document.querySelector('[data-1build-modal]') || \n                              document.querySelector('.onebuild-modal') ||\n                              document.querySelector('iframe[src*=\"1build\"]');\n          \n          const anyModal = document.querySelector('[role=\"dialog\"]');\n          if (!anyModal && !widgetModal) {\n            console.log(\"No modal detected after 2s - widget may have failed\");\n          }\n        }, 2000);\n      } catch (err) {\n        console.error(\"Failed to open widget:\", err);\n        setWidgetError(`Failed to open: ${err}`);\n      }\n    } else {\n      console.error(\"1build widget not available\");\n      setWidgetError(\"Widget not loaded. Please refresh the page.\");\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white py-16\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <div className=\"inline-flex items-center gap-2 bg-secondary/20 text-secondary px-4 py-2 rounded-full text-sm font-medium mb-6\">\n            <Calculator className=\"h-4 w-4\" />\n            Powered by 1build\n          </div>\n          <h1 className=\"text-4xl md:text-5xl font-display font-bold mb-4\">\n            Real-Time Cost Lookup\n          </h1>\n          <p className=\"text-xl text-slate-300 max-w-2xl mx-auto\">\n            Search live pricing for materials, labor, and equipment across 3,000+ US counties\n          </p>\n        </div>\n      </div>\n\n      <div className=\"py-16 bg-white\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"grid md:grid-cols-3 gap-6 mb-12\">\n              <div className=\"text-center p-6 bg-slate-50 rounded-xl\">\n                <div className=\"bg-primary/10 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <DollarSign className=\"h-6 w-6 text-primary\" />\n                </div>\n                <h3 className=\"font-bold text-lg mb-2\">Live Pricing</h3>\n                <p className=\"text-slate-600 text-sm\">68 million data points updated daily from suppliers</p>\n              </div>\n              <div className=\"text-center p-6 bg-slate-50 rounded-xl\">\n                <div className=\"bg-primary/10 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <MapPin className=\"h-6 w-6 text-primary\" />\n                </div>\n                <h3 className=\"font-bold text-lg mb-2\">Local Rates</h3>\n                <p className=\"text-slate-600 text-sm\">Pricing specific to your county and region</p>\n              </div>\n              <div className=\"text-center p-6 bg-slate-50 rounded-xl\">\n                <div className=\"bg-primary/10 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Search className=\"h-6 w-6 text-primary\" />\n                </div>\n                <h3 className=\"font-bold text-lg mb-2\">All Trades</h3>\n                <p className=\"text-slate-600 text-sm\">Materials, labor & equipment for every CSI division</p>\n              </div>\n            </div>\n\n            <div className=\"bg-gradient-to-br from-primary to-primary/80 rounded-2xl p-8 md:p-12 text-white text-center\">\n              <h2 className=\"text-2xl md:text-3xl font-bold mb-4\">\n                Try the Cost Lookup Widget\n              </h2>\n              <p className=\"text-primary-foreground/80 mb-8 max-w-lg mx-auto\">\n                Search for any construction material, labor rate, or equipment rental. Get real-time pricing for your area.\n              </p>\n              \n              {widgetError && (\n                <Alert variant=\"destructive\" className=\"mb-6 bg-red-900/50 border-red-500 text-left\">\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertTitle>Widget Configuration Issue</AlertTitle>\n                  <AlertDescription>\n                    The cost lookup feature requires configuration. Please ensure the 1build API key has the correct domain configured as a referrer.\n                    <br />\n                    <span className=\"text-xs opacity-75 mt-2 block\">Technical: {widgetError}</span>\n                  </AlertDescription>\n                </Alert>\n              )}\n              \n              {isLoading ? (\n                <div className=\"text-primary-foreground/60\">\n                  Loading widget...\n                </div>\n              ) : widgetReady && !widgetError ? (\n                <Button \n                  size=\"lg\" \n                  className=\"bg-secondary text-slate-900 hover:bg-secondary/90 text-lg px-8 py-6\"\n                  onClick={openWidget}\n                  data-testid=\"open-cost-lookup\"\n                >\n                  <Search className=\"h-5 w-5 mr-2\" />\n                  Open Cost Lookup\n                </Button>\n              ) : !widgetError ? (\n                <div className=\"text-primary-foreground/60\">\n                  Widget unavailable\n                </div>\n              ) : null}\n            </div>\n\n            <div className=\"mt-12 text-center\">\n              <h3 className=\"text-lg font-semibold text-slate-900 mb-4\">Example Searches</h3>\n              <div className=\"flex flex-wrap justify-center gap-2\">\n                {[\"2x4 lumber\", \"drywall\", \"plumber hourly\", \"electrician labor\", \"concrete\", \"roofing shingles\", \"toilet installation\", \"paint gallon\"].map((term) => (\n                  <button\n                    key={term}\n                    onClick={() => {\n                      if (widgetReady) openWidget();\n                    }}\n                    className=\"px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-full text-sm text-slate-700 transition-colors\"\n                  >\n                    {term}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":8495,"size_tokens":null},"client/src/pages/privacy.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\n\nexport default function PrivacyPolicy() {\n  useEffect(() => {\n    document.title = \"Privacy Policy | ScopeGen\";\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    if (metaDesc) {\n      metaDesc.setAttribute(\"content\", \"ScopeGen privacy policy. Learn how we collect, use, and protect your personal information.\");\n    }\n  }, []);\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen\">\n        <div className=\"max-w-4xl mx-auto px-4 py-16\">\n          <h1 className=\"text-3xl md:text-4xl font-heading font-bold text-slate-900 mb-8\">\n            Privacy Policy\n          </h1>\n          <p className=\"text-slate-600 mb-8\">Last updated: December 12, 2025</p>\n\n          <div className=\"prose prose-slate max-w-none\">\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">1. Introduction</h2>\n              <p className=\"text-slate-700 mb-4\">\n                Lead Ledger LLC, operating as ScopeGen (\"we,\" \"our,\" or \"us\"), is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our contractor proposal software and website at scopegenerator.com (the \"Service\").\n              </p>\n              <p className=\"text-slate-700\">\n                By using the Service, you agree to the collection and use of information in accordance with this policy.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">2. Information We Collect</h2>\n              \n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Personal Information</h3>\n              <p className=\"text-slate-700 mb-4\">When you use ScopeGen, we may collect:</p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li>Name and email address (when you create an account)</li>\n                <li>Business name and contact information</li>\n                <li>Payment information (processed securely through Stripe)</li>\n                <li>Proposal data you create (client names, project details, pricing)</li>\n              </ul>\n\n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Automatically Collected Information</h3>\n              <p className=\"text-slate-700 mb-4\">We automatically collect certain information when you visit our website:</p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li>IP address and browser type</li>\n                <li>Device information and operating system</li>\n                <li>Pages visited and time spent on pages</li>\n                <li>Referring website addresses</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">3. How We Use Your Information</h2>\n              <p className=\"text-slate-700 mb-4\">We use the information we collect to:</p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li>Provide, maintain, and improve the Service</li>\n                <li>Process transactions and send related information</li>\n                <li>Send you technical notices, updates, and support messages</li>\n                <li>Respond to your comments, questions, and customer service requests</li>\n                <li>Monitor and analyze usage patterns and trends</li>\n                <li>Detect, prevent, and address technical issues or fraud</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">4. Analytics and Tracking</h2>\n              <p className=\"text-slate-700 mb-4\">We use the following third-party analytics services:</p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li><strong>Google Analytics:</strong> To understand how visitors interact with our website. Google Analytics uses cookies to collect anonymous traffic data.</li>\n                <li><strong>Microsoft Clarity:</strong> To analyze user behavior through heatmaps and session recordings. Clarity helps us improve user experience.</li>\n              </ul>\n              <p className=\"text-slate-700\">\n                You can opt out of Google Analytics by installing the Google Analytics Opt-out Browser Add-on.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">5. Data Sharing and Disclosure</h2>\n              <p className=\"text-slate-700 mb-4\">We do not sell your personal information. We may share your information with:</p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li><strong>Service Providers:</strong> Third-party companies that help us operate our business (payment processing, hosting, analytics)</li>\n                <li><strong>Legal Requirements:</strong> When required by law or to protect our rights</li>\n                <li><strong>Business Transfers:</strong> In connection with a merger, acquisition, or sale of assets</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">6. Data Security</h2>\n              <p className=\"text-slate-700 mb-4\">\n                We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the Internet is 100% secure.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">7. Data Retention</h2>\n              <p className=\"text-slate-700 mb-4\">\n                We retain your personal information for as long as your account is active or as needed to provide you services. We will retain and use your information as necessary to comply with legal obligations, resolve disputes, and enforce our agreements.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">8. Your Rights</h2>\n              <p className=\"text-slate-700 mb-4\">Depending on your location, you may have the right to:</p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li>Access the personal information we hold about you</li>\n                <li>Request correction of inaccurate data</li>\n                <li>Request deletion of your data</li>\n                <li>Object to processing of your data</li>\n                <li>Request data portability</li>\n              </ul>\n              <p className=\"text-slate-700\">\n                To exercise these rights, please contact us at support@scopegenerator.com.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">9. Children's Privacy</h2>\n              <p className=\"text-slate-700\">\n                Our Service is not intended for individuals under the age of 18. We do not knowingly collect personal information from children under 18.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">10. Changes to This Policy</h2>\n              <p className=\"text-slate-700\">\n                We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the \"Last updated\" date.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">11. Contact Us</h2>\n              <p className=\"text-slate-700\">\n                If you have any questions about this Privacy Policy, please contact us at support@scopegenerator.com.\n              </p>\n            </section>\n          </div>\n\n          <div className=\"mt-12 pt-8 border-t border-slate-200\">\n            <Link href=\"/\" className=\"text-primary hover:underline\">\n              â† Back to Home\n            </Link>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":8727,"size_tokens":null},"client/src/pages/terms.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\n\nexport default function TermsOfService() {\n  useEffect(() => {\n    document.title = \"Terms of Service | ScopeGen\";\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    if (metaDesc) {\n      metaDesc.setAttribute(\"content\", \"ScopeGen terms of service. Read our terms and conditions for using our contractor proposal software.\");\n    }\n  }, []);\n\n  return (\n    <Layout>\n      <div className=\"bg-slate-50 min-h-screen\">\n        <div className=\"max-w-4xl mx-auto px-4 py-16\">\n          <h1 className=\"text-3xl md:text-4xl font-heading font-bold text-slate-900 mb-8\">\n            Terms of Service\n          </h1>\n          <p className=\"text-slate-600 mb-8\">Last updated: December 12, 2025</p>\n\n          <div className=\"prose prose-slate max-w-none\">\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">1. Acceptance of Terms</h2>\n              <p className=\"text-slate-700 mb-4\">\n                By accessing or using ScopeGen, a service operated by Lead Ledger LLC (\"the Service\"), you agree to be bound by these Terms of Service (\"Terms\"). If you do not agree to these Terms, you may not use the Service.\n              </p>\n              <p className=\"text-slate-700\">\n                We reserve the right to modify these Terms at any time. Continued use of the Service after changes constitutes acceptance of the modified Terms.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">2. Description of Service</h2>\n              <p className=\"text-slate-700 mb-4\">\n                ScopeGen is a contractor proposal software that helps contractors create professional proposals and scopes of work. The Service includes:\n              </p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li>Proposal generation tools</li>\n                <li>Scope of work templates</li>\n                <li>PDF download capabilities</li>\n                <li>Client management features</li>\n                <li>E-signature functionality (for paid plans)</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">3. Account Registration</h2>\n              <p className=\"text-slate-700 mb-4\">\n                To use certain features of the Service, you must create an account. You agree to:\n              </p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li>Provide accurate and complete information</li>\n                <li>Maintain the security of your account credentials</li>\n                <li>Notify us immediately of any unauthorized access</li>\n                <li>Accept responsibility for all activities under your account</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">4. Subscription and Payment</h2>\n              \n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Pricing</h3>\n              <p className=\"text-slate-700 mb-4\">\n                ScopeGen offers both free and paid subscription plans. Pricing is displayed on our website and may be updated from time to time.\n              </p>\n\n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Billing</h3>\n              <p className=\"text-slate-700 mb-4\">\n                Paid subscriptions are billed in advance on a monthly or annual basis. All payments are processed securely through Stripe.\n              </p>\n\n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Refunds</h3>\n              <p className=\"text-slate-700 mb-4\">\n                We offer refunds on a case-by-case basis. Please contact support@scopegenerator.com within 14 days of purchase to request a refund.\n              </p>\n\n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Cancellation</h3>\n              <p className=\"text-slate-700\">\n                You may cancel your subscription at any time. Cancellation takes effect at the end of your current billing period.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">5. Acceptable Use</h2>\n              <p className=\"text-slate-700 mb-4\">You agree not to:</p>\n              <ul className=\"list-disc pl-6 text-slate-700 mb-4 space-y-2\">\n                <li>Use the Service for any unlawful purpose</li>\n                <li>Attempt to gain unauthorized access to any part of the Service</li>\n                <li>Interfere with or disrupt the Service</li>\n                <li>Upload malicious code or content</li>\n                <li>Resell or redistribute the Service without authorization</li>\n                <li>Use the Service to send spam or fraudulent communications</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">6. Intellectual Property</h2>\n              \n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Our Content</h3>\n              <p className=\"text-slate-700 mb-4\">\n                The Service, including its design, features, and content, is owned by ScopeGen and protected by copyright, trademark, and other intellectual property laws.\n              </p>\n\n              <h3 className=\"text-xl font-bold text-slate-800 mb-3\">Your Content</h3>\n              <p className=\"text-slate-700\">\n                You retain ownership of the proposals and content you create using the Service. By using the Service, you grant us a limited license to store, display, and process your content as necessary to provide the Service.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">7. Disclaimer of Warranties</h2>\n              <p className=\"text-slate-700 mb-4\">\n                THE SERVICE IS PROVIDED \"AS IS\" AND \"AS AVAILABLE\" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.\n              </p>\n              <p className=\"text-slate-700\">\n                We do not warrant that the Service will be uninterrupted, error-free, or secure. We are not responsible for the accuracy of proposals you create using the Service.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">8. Limitation of Liability</h2>\n              <p className=\"text-slate-700 mb-4\">\n                TO THE MAXIMUM EXTENT PERMITTED BY LAW, SCOPEGEN SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING BUT NOT LIMITED TO LOSS OF PROFITS, DATA, OR BUSINESS OPPORTUNITIES.\n              </p>\n              <p className=\"text-slate-700\">\n                Our total liability for any claim arising from or relating to the Service shall not exceed the amount you paid us in the twelve (12) months preceding the claim.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">9. Indemnification</h2>\n              <p className=\"text-slate-700\">\n                You agree to indemnify and hold harmless ScopeGen, its officers, directors, employees, and agents from any claims, damages, losses, or expenses arising from your use of the Service or violation of these Terms.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">10. Termination</h2>\n              <p className=\"text-slate-700\">\n                We may terminate or suspend your account and access to the Service at any time, with or without cause, with or without notice. Upon termination, your right to use the Service will immediately cease.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">11. Governing Law</h2>\n              <p className=\"text-slate-700\">\n                These Terms shall be governed by and construed in accordance with the laws of the United States, without regard to conflict of law principles.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-heading font-bold text-slate-900 mb-4\">12. Contact Information</h2>\n              <p className=\"text-slate-700\">\n                For questions about these Terms, please contact us at support@scopegenerator.com.\n              </p>\n            </section>\n          </div>\n\n          <div className=\"mt-12 pt-8 border-t border-slate-200\">\n            <Link href=\"/\" className=\"text-primary hover:underline\">\n              â† Back to Home\n            </Link>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":9476,"size_tokens":null},"client/src/pages/compare-buildertrend.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, Check, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function CompareBuildertrend() {\n  useEffect(() => {\n    document.title = \"ScopeGen vs Buildertrend: Which Proposal Software is Right for You?\";\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    if (metaDesc) {\n      metaDesc.setAttribute(\"content\", \"Compare ScopeGen vs Buildertrend for contractor proposals. See the differences in pricing, features, and find out which tool is best for your business.\");\n    }\n  }, []);\n\n  return (\n    <Layout>\n      <article className=\"bg-white\">\n        <section className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white py-16 md:py-20\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-4xl mx-auto text-center\">\n              <h1 className=\"text-4xl md:text-5xl font-display font-bold mb-6\" data-testid=\"h1-compare-buildertrend\">\n                ScopeGen vs Buildertrend: Which Proposal Software is Right for You?\n              </h1>\n              <p className=\"text-xl text-slate-300 mb-8\" data-testid=\"text-intro-buildertrend\">\n                Both ScopeGen and Buildertrend help contractors create proposals, but they serve very different needs. ScopeGen is a fast, focused proposal generator for small contractors, while Buildertrend is a comprehensive construction management platform designed for larger companies. Let's break down the key differences.\n              </p>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-16\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-8 text-center\" data-testid=\"h2-quick-comparison-buildertrend\">\n                Quick Comparison Table\n              </h2>\n              <div className=\"overflow-x-auto mb-16\">\n                <table className=\"w-full border-collapse bg-white rounded-xl border border-slate-200\" data-testid=\"table-comparison-buildertrend\">\n                  <thead className=\"bg-slate-100\">\n                    <tr>\n                      <th className=\"text-left py-4 px-6 font-semibold text-slate-900 border-b\">Feature</th>\n                      <th className=\"text-center py-4 px-6 font-semibold text-orange-600 border-b\">ScopeGen</th>\n                      <th className=\"text-center py-4 px-6 font-semibold text-slate-600 border-b\">Buildertrend</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Starting Price</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">Free tier available</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">$499/month</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Proposal Generation</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">60 seconds</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Manual</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Pre-built Templates</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">17+ trades</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Limited</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">E-signatures</td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Best For</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">Small contractors</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Large construction companies</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Setup Time</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">5 minutes</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Days to weeks</td>\n                    </tr>\n                    <tr>\n                      <td className=\"py-4 px-6 text-slate-700\">Learning Curve</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">Minimal</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Steep</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n\n              <div className=\"prose prose-lg max-w-none\">\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-what-is-scopegen\">\n                  What is ScopeGen?\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  ScopeGen is a proposal generator built specifically for contractors who need professional proposals fast. With pre-built scope templates for 17+ trades including roofing, HVAC, plumbing, electrical, remodeling, and more, you can create a complete proposal in about 60 seconds. There's no complex setup, no training required, and a free tier available to get started immediately.\n                </p>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-what-is-buildertrend\">\n                  What is Buildertrend?\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  Buildertrend is a comprehensive construction management platform designed for larger construction companies. It includes project management, scheduling, financials, client communication, and proposal tools all in one system. Starting at $499/month after a trial period, it's built for companies that need enterprise-level features and are willing to invest time in setup and training.\n                </p>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-key-differences-buildertrend\">\n                  Key Differences\n                </h2>\n                <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Pricing</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen offers a free tier with paid plans starting much lower. Buildertrend starts at $499/month, which can be cost-prohibitive for smaller operations.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Ease of Use</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen is ready to use in minutes with no training. Buildertrend requires significant setup time and has a steep learning curve.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Target Audience</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen is perfect for solo operators and small teams. Buildertrend targets larger construction companies with multiple crews.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Feature Focus</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen focuses exclusively on creating winning proposals. Buildertrend is a full project management suite where proposals are just one feature.\n                    </p>\n                  </div>\n                </div>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-when-scopegen-buildertrend\">\n                  When to Choose ScopeGen\n                </h2>\n                <ul className=\"space-y-3 mb-8\">\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You're a small contractor or solo operator\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You want proposals done in under a minute\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You focus on remodeling, roofing, HVAC, plumbing, electrical, or similar trades\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You don't want to pay for features you don't need\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You need to get started today without weeks of setup\n                  </li>\n                </ul>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-when-buildertrend\">\n                  When to Choose Buildertrend\n                </h2>\n                <ul className=\"space-y-3 mb-8\">\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You run a larger construction company with multiple crews\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You need comprehensive project management, scheduling, and financials\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    Your budget allows for $499+/month software investment\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You have time for extensive setup and team training\n                  </li>\n                </ul>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-bottom-line-buildertrend\">\n                  The Bottom Line\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  If you're a small to medium contractor who just wants to create professional proposals quickly and affordably, ScopeGen is the clear choice. You'll be up and running in minutes instead of weeks, and you won't pay for project management features you don't need. Try ScopeGen free and see for yourself.\n                </p>\n              </div>\n\n              <div className=\"text-center py-8\">\n                <Link href=\"/app\">\n                  <Button size=\"lg\" className=\"bg-orange-500 hover:bg-orange-600 text-white gap-2\" data-testid=\"button-cta-buildertrend\">\n                    Create Your First Proposal Free <ArrowRight className=\"h-5 w-5\" />\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </section>\n      </article>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":12597,"size_tokens":null},"client/src/pages/seo-template.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, CheckCircle2, Clock, FileText, Download, Shield, AlertTriangle } from \"lucide-react\";\n\ninterface TemplateData {\n  slug: string;\n  title: string;\n  metaDescription: string;\n  h1: string;\n  painIntro: string;\n  exampleScope: string[];\n  checklist: string[];\n  estimateRange: string;\n  timeframe: string;\n}\n\nconst templateData: Record<string, TemplateData> = {\n  \"bathroom-remodel-proposal-template\": {\n    slug: \"bathroom\",\n    title: \"Bathroom Remodel Proposal Template | Free Scope of Work Generator | ScopeGen\",\n    metaDescription: \"Free bathroom remodel proposal template with scope of work, pricing, and timeline. Generate professional bathroom renovation estimates in 60 seconds.\",\n    h1: \"Bathroom Remodel Proposal Template\",\n    painIntro: \"Writing a bathroom remodel proposal from scratch takes hours. You need to list every demolition task, fixture, tile selection, plumbing update, and finish detailâ€”then price it accurately so you don't lose money. Most contractors either underbid (losing profit) or overbid (losing the job). A professional template solves both problems.\",\n    exampleScope: [\n      \"Demolish and remove existing tub, vanity, toilet, and flooring\",\n      \"Rough-in plumbing for new shower valve and drain location\",\n      \"Install cement board backer on shower walls\",\n      \"Tile shower walls with 12x24 porcelain tile in running bond pattern\",\n      \"Install acrylic shower pan with linear drain\",\n      \"Set new 36\\\" vanity with quartz countertop and undermount sink\",\n      \"Install new elongated toilet (Kohler or equivalent)\",\n      \"Install LVP flooring throughout bathroom\",\n      \"Paint walls and ceiling with moisture-resistant paint\",\n      \"Install new light fixtures, exhaust fan, and GFCI outlets\"\n    ],\n    checklist: [\n      \"Client name and job site address\",\n      \"Detailed scope of work with materials specified\",\n      \"Itemized pricing (labor + materials)\",\n      \"Project timeline with start and completion dates\",\n      \"Payment schedule (deposit, progress, final)\",\n      \"Warranty terms (typically 1-2 years on workmanship)\",\n      \"Exclusions list (what's NOT included)\",\n      \"Permit requirements noted\",\n      \"Change order policy\",\n      \"Signature lines for contractor and homeowner\"\n    ],\n    estimateRange: \"$8,500 - $28,000\",\n    timeframe: \"5-10 business days\"\n  },\n  \"roofing-proposal-template\": {\n    slug: \"roofing\",\n    title: \"Roofing Proposal Template | Free Estimate Generator for Roofers | ScopeGen\",\n    metaDescription: \"Free roofing proposal template with tear-off, materials, and warranty details. Generate professional roofing estimates and quotes in 60 seconds.\",\n    h1: \"Roofing Proposal Template\",\n    painIntro: \"A roofing proposal needs to cover tear-off, decking inspection, underlayment, shingle specs, flashing, ventilation, and cleanupâ€”plus warranty details that protect you legally. Miss one item and you're eating the cost. Homeowners compare multiple bids, so your proposal also needs to look professional and build trust fast.\",\n    exampleScope: [\n      \"Remove existing shingles, underlayment, and flashing down to decking\",\n      \"Inspect roof decking; replace damaged sections as needed (up to 2 sheets included)\",\n      \"Install synthetic underlayment over entire roof surface\",\n      \"Install ice and water shield in valleys and at eaves (first 3 feet)\",\n      \"Install new drip edge at eaves and rakes\",\n      \"Install GAF Timberline HDZ architectural shingles (30-year warranty)\",\n      \"Flash all penetrations: vents, pipes, skylights\",\n      \"Install new ridge cap shingles\",\n      \"Replace existing roof vents with new matching vents\",\n      \"Complete cleanup with magnetic nail sweep; haul away all debris\"\n    ],\n    checklist: [\n      \"Property address and roof measurements (squares)\",\n      \"Shingle brand, style, and color selection\",\n      \"Underlayment and ice barrier specifications\",\n      \"Decking repair allowance and overage pricing\",\n      \"Flashing and ventilation details\",\n      \"Manufacturer warranty terms\",\n      \"Workmanship warranty (separate from materials)\",\n      \"Permit and inspection requirements\",\n      \"Payment terms and schedule\",\n      \"Start date and estimated completion\"\n    ],\n    estimateRange: \"$8,000 - $25,000\",\n    timeframe: \"2-5 business days\"\n  },\n  \"hvac-proposal-template\": {\n    slug: \"hvac\",\n    title: \"HVAC Proposal Template | Free AC & Furnace Estimate Generator | ScopeGen\",\n    metaDescription: \"Free HVAC proposal template for AC installation, furnace replacement, and system upgrades. Generate professional HVAC estimates in 60 seconds.\",\n    h1: \"HVAC Proposal Template\",\n    painIntro: \"HVAC proposals are technicalâ€”you need equipment specs, SEER ratings, tonnage calculations, ductwork details, and warranty info. Homeowners rarely understand the difference between a $4,000 and $12,000 system, so your proposal needs to explain value clearly. A good template makes you look like the expert you are.\",\n    exampleScope: [\n      \"Remove and dispose of existing AC condenser and evaporator coil\",\n      \"Install new 3-ton, 16 SEER Carrier AC condenser unit\",\n      \"Install matching evaporator coil in existing plenum\",\n      \"Replace refrigerant line set with new insulated lines\",\n      \"Install new condensate drain line with safety float switch\",\n      \"Install new programmable thermostat (Honeywell or equivalent)\",\n      \"Verify proper airflow and refrigerant charge\",\n      \"Test system operation in cooling and heating modes\",\n      \"Register equipment warranty with manufacturer\",\n      \"Clean up work area and haul away old equipment\"\n    ],\n    checklist: [\n      \"Existing system assessment and issues\",\n      \"New equipment brand, model, and specifications\",\n      \"SEER rating and efficiency details\",\n      \"Tonnage and sizing calculations\",\n      \"Ductwork modifications (if any)\",\n      \"Thermostat type and features\",\n      \"Electrical requirements\",\n      \"Manufacturer warranty details\",\n      \"Labor warranty terms\",\n      \"Rebate eligibility (utility/manufacturer)\"\n    ],\n    estimateRange: \"$4,500 - $15,000\",\n    timeframe: \"1-2 business days\"\n  },\n  \"plumbing-scope-of-work\": {\n    slug: \"plumbing\",\n    title: \"Plumbing Scope of Work Template | Free Plumber Proposal Generator | ScopeGen\",\n    metaDescription: \"Free plumbing scope of work template for water heaters, repipes, and fixture installations. Generate professional plumbing proposals in 60 seconds.\",\n    h1: \"Plumbing Scope of Work Template\",\n    painIntro: \"Plumbing proposals need precisionâ€”pipe materials, fixture brands, valve locations, permit requirements, and warranty terms. A vague scope leads to disputes when the homeowner expects something you didn't quote. Protect your profit and reputation with a detailed scope of work that leaves nothing to interpretation.\",\n    exampleScope: [\n      \"Disconnect and remove existing 40-gallon gas water heater\",\n      \"Install new 50-gallon Rheem gas water heater with expansion tank\",\n      \"Replace water supply lines with new braided stainless connectors\",\n      \"Install new gas flex line with proper shut-off valve\",\n      \"Upgrade T&P relief valve discharge to code-compliant termination\",\n      \"Install seismic strapping per local code requirements\",\n      \"Test all connections for leaks; verify proper operation\",\n      \"Set thermostat to 120Â°F and verify hot water at fixtures\",\n      \"Dispose of old water heater at appropriate facility\",\n      \"Obtain permit and schedule required inspection\"\n    ],\n    checklist: [\n      \"Job site address and access notes\",\n      \"Existing plumbing condition and issues\",\n      \"Fixture or equipment brand and model\",\n      \"Pipe material specifications (PEX, copper, etc.)\",\n      \"Permit requirements and inspection\",\n      \"Shut-off valve locations\",\n      \"Code compliance notes\",\n      \"Warranty terms (parts and labor)\",\n      \"Payment schedule\",\n      \"Emergency contact information\"\n    ],\n    estimateRange: \"$1,200 - $15,000\",\n    timeframe: \"1-3 business days\"\n  }\n};\n\ninterface SEOTemplatePageProps {\n  templateSlug: string;\n}\n\nexport default function SEOTemplatePage({ templateSlug }: SEOTemplatePageProps) {\n  const data = templateData[templateSlug];\n\n  useEffect(() => {\n    if (data) {\n      document.title = data.title;\n      const metaDesc = document.querySelector('meta[name=\"description\"]');\n      if (metaDesc) {\n        metaDesc.setAttribute(\"content\", data.metaDescription);\n      }\n    }\n  }, [data]);\n\n  if (!data) {\n    return (\n      <Layout>\n        <div className=\"container mx-auto px-4 py-20 text-center\">\n          <h1 className=\"text-2xl font-bold\">Template not found</h1>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <article className=\"bg-white\">\n        <header className=\"bg-primary text-white py-16 sm:py-24\">\n          <div className=\"max-w-[90vw] xl:max-w-[80vw] mx-auto px-4 sm:px-8\">\n            <div className=\"max-w-4xl\">\n              <div className=\"flex items-center gap-2 text-secondary text-sm font-medium mb-4\">\n                <FileText className=\"w-4 h-4\" />\n                <span>FREE TEMPLATE</span>\n              </div>\n              <h1 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-heading font-bold mb-6\">\n                {data.h1}\n              </h1>\n              <p className=\"text-xl sm:text-2xl text-primary-foreground/80 mb-8 leading-relaxed\">\n                Generate this proposal in 60 seconds with ScopeGen. No more copy-pasting from Word docs.\n              </p>\n              <div className=\"flex flex-wrap gap-4\">\n                <Link \n                  href=\"/app\"\n                  className=\"inline-flex items-center justify-center h-14 px-8 rounded-md bg-secondary text-slate-900 font-bold text-lg hover:bg-white transition-all\"\n                  data-testid=\"button-generate-now\"\n                >\n                  Generate This Proposal\n                  <ArrowRight className=\"ml-2 w-5 h-5\" />\n                </Link>\n                <a \n                  href=\"#example\"\n                  className=\"inline-flex items-center justify-center h-14 px-8 rounded-md border border-white/30 text-white font-medium hover:bg-white/10 transition-all\"\n                >\n                  See Example Scope\n                </a>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        <section className=\"py-16 sm:py-20 border-b border-slate-100\">\n          <div className=\"max-w-[90vw] xl:max-w-[80vw] mx-auto px-4 sm:px-8\">\n            <div className=\"max-w-4xl\">\n              <div className=\"flex items-start gap-4 mb-8\">\n                <div className=\"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0\">\n                  <AlertTriangle className=\"w-6 h-6 text-amber-600\" />\n                </div>\n                <div>\n                  <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-4\">\n                    The Problem with DIY Proposals\n                  </h2>\n                  <p className=\"text-lg text-slate-600 leading-relaxed\">\n                    {data.painIntro}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <section id=\"example\" className=\"py-16 sm:py-20 bg-slate-50\">\n          <div className=\"max-w-[90vw] xl:max-w-[80vw] mx-auto px-4 sm:px-8\">\n            <div className=\"max-w-4xl\">\n              <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-2\">\n                Example Scope of Work\n              </h2>\n              <p className=\"text-slate-600 mb-8\">\n                Here's what a professional {data.h1.toLowerCase().replace(' template', '')} looks like:\n              </p>\n              \n              <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden\">\n                <div className=\"bg-primary p-4 text-white\">\n                  <div className=\"text-sm font-medium text-primary-foreground/70\">SCOPE OF WORK</div>\n                  <div className=\"font-bold\">{data.h1.replace(' Template', '')}</div>\n                </div>\n                <div className=\"p-6 sm:p-8\">\n                  <ul className=\"space-y-3\">\n                    {data.exampleScope.map((item, i) => (\n                      <li key={i} className=\"flex items-start gap-3\">\n                        <CheckCircle2 className=\"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                        <span className=\"text-slate-700\">{item}</span>\n                      </li>\n                    ))}\n                  </ul>\n                  \n                  <div className=\"mt-8 pt-6 border-t border-slate-200 grid sm:grid-cols-2 gap-4\">\n                    <div>\n                      <div className=\"text-sm text-slate-500 mb-1\">Typical Price Range</div>\n                      <div className=\"text-2xl font-bold text-slate-900\">{data.estimateRange}</div>\n                    </div>\n                    <div>\n                      <div className=\"text-sm text-slate-500 mb-1\">Typical Timeline</div>\n                      <div className=\"text-2xl font-bold text-slate-900\">{data.timeframe}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-8 text-center\">\n                <Link \n                  href=\"/app\"\n                  className=\"inline-flex items-center justify-center h-12 px-6 rounded-md bg-secondary text-slate-900 font-bold hover:bg-secondary/90 transition-all\"\n                  data-testid=\"button-generate-scope\"\n                >\n                  Generate This Scope in 60 Seconds\n                  <ArrowRight className=\"ml-2 w-5 h-5\" />\n                </Link>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-16 sm:py-20\">\n          <div className=\"max-w-[90vw] xl:max-w-[80vw] mx-auto px-4 sm:px-8\">\n            <div className=\"max-w-4xl\">\n              <h2 className=\"text-2xl sm:text-3xl font-heading font-bold text-slate-900 mb-2\">\n                Proposal Checklist\n              </h2>\n              <p className=\"text-slate-600 mb-8\">\n                Every professional proposal should include these elements:\n              </p>\n              \n              <div className=\"grid sm:grid-cols-2 gap-4\">\n                {data.checklist.map((item, i) => (\n                  <div key={i} className=\"flex items-start gap-3 p-4 bg-slate-50 rounded-lg\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center flex-shrink-0 text-sm font-bold\">\n                      {i + 1}\n                    </div>\n                    <span className=\"text-slate-700\">{item}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-16 sm:py-20 bg-primary text-white\">\n          <div className=\"max-w-[90vw] xl:max-w-[80vw] mx-auto px-4 sm:px-8 text-center\">\n            <h2 className=\"text-2xl sm:text-3xl md:text-4xl font-heading font-bold mb-4\">\n              Stop Writing Proposals From Scratch\n            </h2>\n            <p className=\"text-xl text-primary-foreground/80 mb-8 max-w-2xl mx-auto\">\n              ScopeGen generates this entire proposalâ€”scope, pricing, timeline, and warrantyâ€”in about 60 seconds. Built specifically for contractors.\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-6 mb-10\">\n              <div className=\"flex items-center gap-2 text-primary-foreground/70\">\n                <Clock className=\"w-5 h-5 text-secondary\" />\n                <span>60-Second Proposals</span>\n              </div>\n              <div className=\"flex items-center gap-2 text-primary-foreground/70\">\n                <Download className=\"w-5 h-5 text-secondary\" />\n                <span>PDF Download</span>\n              </div>\n              <div className=\"flex items-center gap-2 text-primary-foreground/70\">\n                <Shield className=\"w-5 h-5 text-secondary\" />\n                <span>E-Signature Included</span>\n              </div>\n            </div>\n            <Link \n              href=\"/app\"\n              className=\"inline-flex items-center justify-center h-14 lg:h-16 px-10 lg:px-14 rounded-md bg-secondary text-slate-900 font-bold text-lg lg:text-xl hover:bg-white transition-all\"\n              data-testid=\"button-generate-cta\"\n            >\n              Generate This Proposal Free\n              <ArrowRight className=\"ml-2 w-5 h-5 lg:w-6 lg:h-6\" />\n            </Link>\n            <p className=\"mt-4 text-primary-foreground/60 text-sm\">Free preview â€¢ No credit card required</p>\n          </div>\n        </section>\n      </article>\n    </Layout>\n  );\n}\n\nexport const templateSlugs = Object.keys(templateData);\n","path":null,"size_bytes":17025,"size_tokens":null},"client/src/pages/compare-jobber.tsx":{"content":"import { useEffect } from \"react\";\nimport Layout from \"@/components/layout\";\nimport { Link } from \"wouter\";\nimport { ArrowRight, Check, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function CompareJobber() {\n  useEffect(() => {\n    document.title = \"ScopeGen vs Jobber: Which Proposal Software is Right for You?\";\n    const metaDesc = document.querySelector('meta[name=\"description\"]');\n    if (metaDesc) {\n      metaDesc.setAttribute(\"content\", \"Compare ScopeGen vs Jobber for contractor proposals. See the differences in pricing, features, and find out which tool is best for your business.\");\n    }\n  }, []);\n\n  return (\n    <Layout>\n      <article className=\"bg-white\">\n        <section className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white py-16 md:py-20\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-4xl mx-auto text-center\">\n              <h1 className=\"text-4xl md:text-5xl font-display font-bold mb-6\" data-testid=\"h1-compare-jobber\">\n                ScopeGen vs Jobber: Which Proposal Software is Right for You?\n              </h1>\n              <p className=\"text-xl text-slate-300 mb-8\" data-testid=\"text-intro-jobber\">\n                Both ScopeGen and Jobber help home service professionals run their business, but they take different approaches. ScopeGen is a fast, focused proposal generator, while Jobber is a field service management platform with scheduling, invoicing, and CRM features. Here's how they compare.\n              </p>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-16\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-8 text-center\" data-testid=\"h2-quick-comparison-jobber\">\n                Quick Comparison Table\n              </h2>\n              <div className=\"overflow-x-auto mb-16\">\n                <table className=\"w-full border-collapse bg-white rounded-xl border border-slate-200\" data-testid=\"table-comparison-jobber\">\n                  <thead className=\"bg-slate-100\">\n                    <tr>\n                      <th className=\"text-left py-4 px-6 font-semibold text-slate-900 border-b\">Feature</th>\n                      <th className=\"text-center py-4 px-6 font-semibold text-orange-600 border-b\">ScopeGen</th>\n                      <th className=\"text-center py-4 px-6 font-semibold text-slate-600 border-b\">Jobber</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Starting Price</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">Free tier available</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">$49/month</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Proposal Generation</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">60 seconds</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Manual</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Pre-built Templates</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">17+ trades</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Limited</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">E-signatures</td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Best For</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">Small contractors</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Home service businesses</td>\n                    </tr>\n                    <tr className=\"border-b border-slate-100\">\n                      <td className=\"py-4 px-6 text-slate-700\">Setup Time</td>\n                      <td className=\"py-4 px-6 text-center text-orange-600 font-medium\">5 minutes</td>\n                      <td className=\"py-4 px-6 text-center text-slate-600\">Hours</td>\n                    </tr>\n                    <tr>\n                      <td className=\"py-4 px-6 text-slate-700\">Scheduling & Dispatch</td>\n                      <td className=\"py-4 px-6 text-center\"><X className=\"h-5 w-5 text-slate-300 mx-auto\" /></td>\n                      <td className=\"py-4 px-6 text-center\"><Check className=\"h-5 w-5 text-green-500 mx-auto\" /></td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n\n              <div className=\"prose prose-lg max-w-none\">\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-what-is-scopegen\">\n                  What is ScopeGen?\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  ScopeGen is a proposal generator built specifically for contractors who need professional proposals fast. With pre-built scope templates for 17+ trades including roofing, HVAC, plumbing, electrical, remodeling, and more, you can create a complete proposal in about 60 seconds. There's no complex setup, no training required, and a free tier available to get started immediately.\n                </p>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-what-is-jobber\">\n                  What is Jobber?\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  Jobber is a field service management platform designed for home service businesses like cleaning companies, lawn care, HVAC technicians, and similar trades. Starting at $49/month, it includes scheduling, dispatching, invoicing, CRM, and quote creation. It's a comprehensive platform that goes well beyond just proposals, offering tools to manage your entire operation.\n                </p>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-key-differences-jobber\">\n                  Key Differences\n                </h2>\n                <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Pricing</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen offers a free tier to get started. Jobber starts at $49/month with higher tiers for additional features, which can add up quickly.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Ease of Use</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen is ready to use in minutes. Jobber requires more setup time to configure scheduling, client management, and other features.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Target Audience</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen serves all contractor trades focused on proposals. Jobber is optimized for recurring service businesses that need scheduling.\n                    </p>\n                  </div>\n                  <div className=\"bg-slate-50 p-6 rounded-lg\">\n                    <h3 className=\"font-bold text-slate-900 mb-2\">Feature Focus</h3>\n                    <p className=\"text-slate-600 text-sm\">\n                      ScopeGen focuses on creating detailed, professional proposals quickly. Jobber is a full business management suite with proposals as one feature.\n                    </p>\n                  </div>\n                </div>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-when-scopegen-jobber\">\n                  When to Choose ScopeGen\n                </h2>\n                <ul className=\"space-y-3 mb-8\">\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You're a small contractor or solo operator\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You want proposals done in under a minute\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You focus on remodeling, roofing, HVAC, plumbing, electrical, or similar trades\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You don't want to pay for features you don't need\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-1\" />\n                    You already have scheduling/invoicing tools you're happy with\n                  </li>\n                </ul>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-when-jobber\">\n                  When to Choose Jobber\n                </h2>\n                <ul className=\"space-y-3 mb-8\">\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You run a recurring service business (cleaning, lawn care, maintenance)\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You need integrated scheduling, dispatching, and route optimization\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You want a CRM to manage client relationships and history\n                  </li>\n                  <li className=\"flex items-start gap-3 text-slate-600\">\n                    <Check className=\"h-5 w-5 text-blue-500 flex-shrink-0 mt-1\" />\n                    You need built-in invoicing and payment processing\n                  </li>\n                </ul>\n\n                <h2 className=\"text-3xl font-display font-bold text-slate-900 mb-4\" data-testid=\"h2-bottom-line-jobber\">\n                  The Bottom Line\n                </h2>\n                <p className=\"text-slate-600 mb-8\">\n                  If your main goal is creating professional, detailed proposals quickly, ScopeGen is the better choice. You'll save time and money by not paying for scheduling and CRM features you may not need. If you need a complete field service management system, Jobber might be worth the investmentâ€”but for proposals alone, try ScopeGen free and see for yourself.\n                </p>\n              </div>\n\n              <div className=\"text-center py-8\">\n                <Link href=\"/app\">\n                  <Button size=\"lg\" className=\"bg-orange-500 hover:bg-orange-600 text-white gap-2\" data-testid=\"button-cta-jobber\">\n                    Create Your First Proposal Free <ArrowRight className=\"h-5 w-5\" />\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </section>\n      </article>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":12558,"size_tokens":null},"client/src/hooks/use-cost-data.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\ninterface CostSource {\n  id: string;\n  name: string;\n  description?: string;\n  unitCost: number;\n  unit: string;\n  laborRateUsdCents?: number;\n  materialRateUsdCents?: number;\n  dataLocation?: {\n    state: string;\n    county: string;\n  };\n  sourceType?: string;\n}\n\ninterface CostSearchResult {\n  sources: CostSource[];\n  totalCount?: number;\n}\n\ninterface MaterialCost {\n  cost: number;\n  unit: string;\n  location: string;\n}\n\ninterface LaborRate {\n  hourlyRate: number;\n  location: string;\n}\n\ninterface TradePricing {\n  materials: Array<{ name: string; cost: number; unit: string }>;\n  labor: Array<{ name: string; hourlyRate: number }>;\n}\n\ninterface CostServiceStatus {\n  available: boolean;\n  message: string;\n}\n\ninterface CostUsage {\n  used: number;\n  remaining: number; // -1 means unlimited for Pro users\n  limit: number;\n  isPro: boolean;\n  hasAccess: boolean;\n}\n\nexport function useCostServiceStatus() {\n  return useQuery<CostServiceStatus>({\n    queryKey: [\"cost-service-status\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/costs/status\");\n      if (!response.ok) {\n        throw new Error(\"Failed to check cost service status\");\n      }\n      return response.json();\n    },\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\nexport function useCostUsage() {\n  return useQuery<CostUsage>({\n    queryKey: [\"cost-usage\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/costs/usage\", {\n        credentials: \"include\"\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch usage\");\n      }\n      return response.json();\n    },\n    staleTime: 30 * 1000, // Refresh every 30 seconds\n  });\n}\n\nexport function useCostSearch(term: string, zipcode: string, type?: string) {\n  return useQuery<CostSearchResult>({\n    queryKey: [\"cost-search\", term, zipcode, type],\n    queryFn: async () => {\n      const params = new URLSearchParams({ term, zipcode });\n      if (type) params.append(\"type\", type);\n      \n      const response = await fetch(`/api/costs/search?${params}`);\n      if (!response.ok) {\n        if (response.status === 503) {\n          throw new Error(\"Cost data service not configured\");\n        }\n        throw new Error(\"Failed to search costs\");\n      }\n      return response.json();\n    },\n    enabled: !!term && !!zipcode && term.length >= 2,\n    staleTime: 10 * 60 * 1000,\n  });\n}\n\nexport function useMaterialCost(name: string, zipcode: string) {\n  return useQuery<MaterialCost>({\n    queryKey: [\"material-cost\", name, zipcode],\n    queryFn: async () => {\n      const params = new URLSearchParams({ name, zipcode });\n      const response = await fetch(`/api/costs/material?${params}`);\n      if (!response.ok) {\n        if (response.status === 404) {\n          throw new Error(\"Material not found\");\n        }\n        throw new Error(\"Failed to fetch material cost\");\n      }\n      return response.json();\n    },\n    enabled: !!name && !!zipcode,\n    staleTime: 10 * 60 * 1000,\n    retry: false,\n  });\n}\n\nexport function useLaborRate(type: string, zipcode: string) {\n  return useQuery<LaborRate>({\n    queryKey: [\"labor-rate\", type, zipcode],\n    queryFn: async () => {\n      const params = new URLSearchParams({ type, zipcode });\n      const response = await fetch(`/api/costs/labor?${params}`);\n      if (!response.ok) {\n        if (response.status === 404) {\n          throw new Error(\"Labor rate not found\");\n        }\n        throw new Error(\"Failed to fetch labor rate\");\n      }\n      return response.json();\n    },\n    enabled: !!type && !!zipcode,\n    staleTime: 10 * 60 * 1000,\n    retry: false,\n  });\n}\n\nexport class LimitReachedError extends Error {\n  limitReached = true;\n  used: number;\n  limit: number;\n  \n  constructor(used: number, limit: number) {\n    super(\"Free lookup limit reached\");\n    this.used = used;\n    this.limit = limit;\n  }\n}\n\nexport function useTradePricing(trade: string, zipcode: string) {\n  return useQuery<TradePricing>({\n    queryKey: [\"trade-pricing\", trade, zipcode],\n    queryFn: async () => {\n      const params = new URLSearchParams({ trade, zipcode });\n      const response = await fetch(`/api/costs/trade?${params}`, {\n        credentials: \"include\"\n      });\n      if (!response.ok) {\n        if (response.status === 403) {\n          const data = await response.json();\n          if (data.limitReached) {\n            throw new LimitReachedError(data.used, data.limit);\n          }\n        }\n        throw new Error(\"Failed to fetch trade pricing\");\n      }\n      return response.json();\n    },\n    enabled: !!trade && !!zipcode,\n    staleTime: 10 * 60 * 1000,\n    retry: false,\n  });\n}\n\nexport async function fetchTradePricing(trade: string, zipcode: string): Promise<TradePricing | null> {\n  try {\n    const params = new URLSearchParams({ trade, zipcode });\n    const response = await fetch(`/api/costs/trade?${params}`);\n    if (!response.ok) {\n      return null;\n    }\n    return response.json();\n  } catch {\n    return null;\n  }\n}\n","path":null,"size_bytes":5002,"size_tokens":null},"server/services/onebuild.ts":{"content":"import fetch from \"node-fetch\";\n\nconst ONEBUILD_API_URL = \"https://gateway-external.1build.com/\";\n\ninterface OneBuildLocation {\n  state: string;\n  county: string;\n}\n\ninterface OneBuildSource {\n  id: string;\n  name: string;\n  description?: string;\n  unitCost: number;\n  unit: string;\n  laborRateUsdCents?: number;\n  materialRateUsdCents?: number;\n  calculatedUnitRateUsdCents?: number;\n  state?: string;\n  county?: string;\n  sourceType?: string;\n}\n\ninterface OneBuildSearchResult {\n  sources: OneBuildSource[];\n  totalCount?: number;\n}\n\ninterface OneBuildCategoryItem {\n  id: string;\n  name: string;\n  hasChildren: boolean;\n  children?: OneBuildCategoryItem[];\n}\n\nconst ZIP_TO_LOCATION: Record<string, { state: string; county: string }> = {\n  \"77001\": { state: \"Texas\", county: \"Harris County\" },\n  \"77002\": { state: \"Texas\", county: \"Harris County\" },\n  \"90001\": { state: \"California\", county: \"Los Angeles County\" },\n  \"90210\": { state: \"California\", county: \"Los Angeles County\" },\n  \"10001\": { state: \"New York\", county: \"New York County\" },\n  \"60601\": { state: \"Illinois\", county: \"Cook County\" },\n  \"33101\": { state: \"Florida\", county: \"Miami-Dade County\" },\n  \"85001\": { state: \"Arizona\", county: \"Maricopa County\" },\n  \"98101\": { state: \"Washington\", county: \"King County\" },\n  \"30301\": { state: \"Georgia\", county: \"Fulton County\" },\n  \"02101\": { state: \"Massachusetts\", county: \"Suffolk County\" },\n  \"80201\": { state: \"Colorado\", county: \"Denver County\" },\n};\n\nfunction getLocationFromZip(zipcode: string): OneBuildLocation {\n  const zip3 = zipcode.substring(0, 3);\n  \n  if (ZIP_TO_LOCATION[zipcode]) {\n    return ZIP_TO_LOCATION[zipcode];\n  }\n  \n  const stateByZip3: Record<string, { state: string; county: string }> = {\n    \"770\": { state: \"Texas\", county: \"Harris County\" },\n    \"771\": { state: \"Texas\", county: \"Harris County\" },\n    \"750\": { state: \"Texas\", county: \"Dallas County\" },\n    \"751\": { state: \"Texas\", county: \"Dallas County\" },\n    \"900\": { state: \"California\", county: \"Los Angeles County\" },\n    \"901\": { state: \"California\", county: \"Los Angeles County\" },\n    \"902\": { state: \"California\", county: \"Los Angeles County\" },\n    \"941\": { state: \"California\", county: \"San Francisco County\" },\n    \"100\": { state: \"New York\", county: \"New York County\" },\n    \"101\": { state: \"New York\", county: \"New York County\" },\n    \"606\": { state: \"Illinois\", county: \"Cook County\" },\n    \"331\": { state: \"Florida\", county: \"Miami-Dade County\" },\n    \"850\": { state: \"Arizona\", county: \"Maricopa County\" },\n    \"981\": { state: \"Washington\", county: \"King County\" },\n    \"303\": { state: \"Georgia\", county: \"Fulton County\" },\n    \"021\": { state: \"Massachusetts\", county: \"Suffolk County\" },\n    \"802\": { state: \"Colorado\", county: \"Denver County\" },\n  };\n  \n  if (stateByZip3[zip3]) {\n    return stateByZip3[zip3];\n  }\n  \n  return { state: \"Texas\", county: \"Harris County\" };\n}\n\nexport class OneBuildService {\n  private apiKey: string;\n\n  constructor() {\n    const key = process.env.ONEBUILD_EXTERNAL_KEY;\n    if (!key) {\n      console.warn(\"ONEBUILD_EXTERNAL_KEY not configured - 1build API will not be available\");\n    }\n    this.apiKey = key || \"\";\n  }\n\n  isConfigured(): boolean {\n    return !!this.apiKey && this.apiKey.length > 10;\n  }\n\n  private async query<T>(queryString: string, variables?: Record<string, unknown>): Promise<T> {\n    if (!this.isConfigured()) {\n      throw new Error(\"1build external API key not configured\");\n    }\n\n    const response = await fetch(ONEBUILD_API_URL, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"1build-api-key\": this.apiKey,\n      },\n      body: JSON.stringify({\n        query: queryString,\n        variables,\n      }),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(\"1build API error response:\", errorText);\n      throw new Error(`1build API error: ${response.status} ${response.statusText}`);\n    }\n\n    const result = await response.json() as { data?: T; errors?: { message: string }[] };\n    \n    if (result.errors && result.errors.length > 0) {\n      throw new Error(`1build GraphQL error: ${result.errors[0].message}`);\n    }\n\n    return result.data as T;\n  }\n\n  async searchSources(\n    searchTerm: string,\n    zipcode: string,\n    sourceType?: \"MATERIAL\" | \"LABOR\" | \"EQUIPMENT\" | \"ASSEMBLY\",\n    limit: number = 20\n  ): Promise<OneBuildSearchResult> {\n    const location = getLocationFromZip(zipcode);\n    \n    const query = `\n      query SearchSources($input: SourceSearchInput!) {\n        sources(input: $input) {\n          nodes {\n            id\n            name\n            description\n            calculatedUnitRateUsdCents\n            laborRateUsdCents\n            materialRateUsdCents\n            uom\n            state\n            county\n            sourceType\n          }\n          totalCount\n        }\n      }\n    `;\n\n    const input: Record<string, unknown> = {\n      searchTerm,\n      state: location.state,\n      county: location.county,\n      page: { limit },\n    };\n\n    if (sourceType) {\n      input.sourceType = sourceType;\n    }\n\n    const result = await this.query<{\n      sources: {\n        nodes: Array<{\n          id: string;\n          name: string;\n          description?: string;\n          calculatedUnitRateUsdCents?: number;\n          laborRateUsdCents?: number;\n          materialRateUsdCents?: number;\n          uom?: string;\n          state?: string;\n          county?: string;\n          sourceType?: string;\n        }>;\n        totalCount: number;\n      };\n    }>(query, { input });\n\n    return {\n      sources: result.sources.nodes.map(node => ({\n        id: node.id,\n        name: node.name,\n        description: node.description,\n        unitCost: (node.calculatedUnitRateUsdCents || 0) / 100,\n        unit: node.uom || \"each\",\n        laborRateUsdCents: node.laborRateUsdCents,\n        materialRateUsdCents: node.materialRateUsdCents,\n        calculatedUnitRateUsdCents: node.calculatedUnitRateUsdCents,\n        state: node.state,\n        county: node.county,\n        sourceType: node.sourceType,\n      })),\n      totalCount: result.sources.totalCount,\n    };\n  }\n\n  async getMaterialCost(\n    materialName: string,\n    zipcode: string\n  ): Promise<{ cost: number; unit: string; location: string } | null> {\n    try {\n      const result = await this.searchSources(materialName, zipcode, \"MATERIAL\", 1);\n      \n      if (result.sources.length > 0) {\n        const source = result.sources[0];\n        return {\n          cost: source.unitCost,\n          unit: source.unit,\n          location: source.county && source.state\n            ? `${source.county}, ${source.state}`\n            : zipcode,\n        };\n      }\n      return null;\n    } catch (error) {\n      console.error(\"Error fetching material cost:\", error);\n      return null;\n    }\n  }\n\n  async getLaborRate(\n    laborType: string,\n    zipcode: string\n  ): Promise<{ hourlyRate: number; location: string } | null> {\n    try {\n      const result = await this.searchSources(laborType, zipcode, \"LABOR\", 1);\n      \n      if (result.sources.length > 0) {\n        const source = result.sources[0];\n        return {\n          hourlyRate: source.unitCost,\n          location: source.county && source.state\n            ? `${source.county}, ${source.state}`\n            : zipcode,\n        };\n      }\n      return null;\n    } catch (error) {\n      console.error(\"Error fetching labor rate:\", error);\n      return null;\n    }\n  }\n\n  async getCategories(searchTerm?: string): Promise<OneBuildCategoryItem[]> {\n    const query = `\n      query GetCategories($searchTerm: String) {\n        categoryTreeItems(searchTerm: $searchTerm) {\n          id\n          name\n          hasChildren\n          children {\n            id\n            name\n            hasChildren\n          }\n        }\n      }\n    `;\n\n    const result = await this.query<{\n      categoryTreeItems: OneBuildCategoryItem[];\n    }>(query, { searchTerm });\n\n    return result.categoryTreeItems;\n  }\n\n  async getTradePricing(trade: string, zipcode: string): Promise<{\n    materials: Array<{ name: string; cost: number; unit: string }>;\n    labor: Array<{ name: string; hourlyRate: number }>;\n  }> {\n    const tradeSearchTerms: Record<string, { materials: string[]; labor: string[] }> = {\n      bathroom: {\n        materials: [\"toilet\", \"vanity\", \"tile\", \"shower\", \"faucet\", \"mirror\"],\n        labor: [\"plumber\", \"tile installer\", \"electrician\"],\n      },\n      kitchen: {\n        materials: [\"cabinet\", \"countertop\", \"sink\", \"faucet\", \"backsplash tile\"],\n        labor: [\"cabinet installer\", \"plumber\", \"electrician\", \"tile installer\"],\n      },\n      roofing: {\n        materials: [\"asphalt shingles\", \"roofing felt\", \"flashing\", \"ridge cap\", \"nails\"],\n        labor: [\"roofer\"],\n      },\n      plumbing: {\n        materials: [\"pvc pipe\", \"copper pipe\", \"fittings\", \"water heater\", \"faucet\"],\n        labor: [\"plumber\", \"plumber journeyman\"],\n      },\n      electrical: {\n        materials: [\"wire\", \"outlet\", \"switch\", \"breaker\", \"junction box\"],\n        labor: [\"electrician\", \"electrician journeyman\"],\n      },\n      hvac: {\n        materials: [\"ductwork\", \"thermostat\", \"filter\", \"refrigerant\"],\n        labor: [\"hvac technician\"],\n      },\n      painting: {\n        materials: [\"paint gallon\", \"primer\", \"caulk\", \"tape\"],\n        labor: [\"painter\"],\n      },\n      flooring: {\n        materials: [\"hardwood flooring\", \"laminate\", \"vinyl plank\", \"underlayment\"],\n        labor: [\"flooring installer\"],\n      },\n      drywall: {\n        materials: [\"drywall sheet\", \"joint compound\", \"drywall tape\", \"corner bead\"],\n        labor: [\"drywall installer\", \"drywall finisher\"],\n      },\n    };\n\n    const searchTerms = tradeSearchTerms[trade.toLowerCase()] || {\n      materials: [trade],\n      labor: [`${trade} labor`],\n    };\n\n    const materialPromises = searchTerms.materials.map(term =>\n      this.getMaterialCost(term, zipcode)\n    );\n\n    const laborPromises = searchTerms.labor.map(term =>\n      this.getLaborRate(term, zipcode)\n    );\n\n    const [materialResults, laborResults] = await Promise.all([\n      Promise.all(materialPromises),\n      Promise.all(laborPromises),\n    ]);\n\n    return {\n      materials: searchTerms.materials\n        .map((name, i) => {\n          const result = materialResults[i];\n          return result ? { name, cost: result.cost, unit: result.unit } : null;\n        })\n        .filter((m): m is { name: string; cost: number; unit: string } => m !== null),\n      labor: searchTerms.labor\n        .map((name, i) => {\n          const result = laborResults[i];\n          return result ? { name, hourlyRate: result.hourlyRate } : null;\n        })\n        .filter((l): l is { name: string; hourlyRate: number } => l !== null),\n    };\n  }\n}\n\nexport const oneBuildService = new OneBuildService();\n","path":null,"size_bytes":10830,"size_tokens":null},"client/src/components/cost-insights.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useCostServiceStatus, useTradePricing } from \"@/hooks/use-cost-data\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Loader2, TrendingUp, DollarSign, Hammer, AlertCircle } from \"lucide-react\";\n\ninterface CostInsightsProps {\n  tradeId: string;\n  address: string;\n}\n\nfunction extractZipCode(address: string): string | null {\n  const zipMatch = address.match(/\\b(\\d{5})(?:-\\d{4})?\\b/);\n  return zipMatch ? zipMatch[1] : null;\n}\n\nfunction formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(amount);\n}\n\nexport function CostInsights({ tradeId, address }: CostInsightsProps) {\n  const zipcode = extractZipCode(address);\n  const { data: status } = useCostServiceStatus();\n  const { data: pricing, isLoading, error } = useTradePricing(\n    tradeId || \"\",\n    zipcode || \"\"\n  );\n\n  if (!status?.available) {\n    return null;\n  }\n\n  if (!tradeId || !zipcode) {\n    return null;\n  }\n\n  if (isLoading) {\n    return (\n      <Card className=\"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200\">\n        <CardContent className=\"pt-4 flex items-center justify-center gap-2 text-blue-600\">\n          <Loader2 className=\"w-4 h-4 animate-spin\" />\n          <span className=\"text-sm\">Loading market pricing for {zipcode}...</span>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error || !pricing) {\n    return null;\n  }\n\n  const hasMaterials = pricing.materials && pricing.materials.length > 0;\n  const hasLabor = pricing.labor && pricing.labor.length > 0;\n\n  if (!hasMaterials && !hasLabor) {\n    return null;\n  }\n\n  const tradeNames: Record<string, string> = {\n    bathroom: \"Bathroom Remodel\",\n    kitchen: \"Kitchen Remodel\",\n    roofing: \"Roofing\",\n    plumbing: \"Plumbing\",\n    electrical: \"Electrical\",\n    hvac: \"HVAC\",\n    painting: \"Painting\",\n    flooring: \"Flooring\",\n    drywall: \"Drywall\",\n  };\n\n  return (\n    <Card className=\"bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-200\" data-testid=\"cost-insights-card\">\n      <CardHeader className=\"pb-2\">\n        <CardTitle className=\"text-base flex items-center gap-2 text-emerald-800\">\n          <TrendingUp className=\"w-4 h-4\" />\n          Market Pricing Insights\n          <Badge variant=\"secondary\" className=\"bg-emerald-100 text-emerald-700 text-xs\">\n            ZIP {zipcode}\n          </Badge>\n        </CardTitle>\n        <p className=\"text-xs text-emerald-600\">\n          Real-time {tradeNames[tradeId] || tradeId} costs for your area\n        </p>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {hasMaterials && (\n          <div>\n            <div className=\"flex items-center gap-1.5 mb-2\">\n              <DollarSign className=\"w-3.5 h-3.5 text-emerald-600\" />\n              <span className=\"text-xs font-semibold text-emerald-700 uppercase tracking-wide\">\n                Material Costs\n              </span>\n            </div>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {pricing.materials.slice(0, 6).map((item, idx) => (\n                <div \n                  key={idx} \n                  className=\"bg-white/70 rounded-md p-2 border border-emerald-100\"\n                  data-testid={`material-cost-${idx}`}\n                >\n                  <div className=\"text-xs text-slate-600 truncate\" title={item.name}>\n                    {item.name}\n                  </div>\n                  <div className=\"text-sm font-bold text-emerald-700\">\n                    {formatCurrency(item.cost)}/{item.unit}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {hasLabor && (\n          <div>\n            <div className=\"flex items-center gap-1.5 mb-2\">\n              <Hammer className=\"w-3.5 h-3.5 text-emerald-600\" />\n              <span className=\"text-xs font-semibold text-emerald-700 uppercase tracking-wide\">\n                Labor Rates\n              </span>\n            </div>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {pricing.labor.slice(0, 4).map((item, idx) => (\n                <div \n                  key={idx} \n                  className=\"bg-white/70 rounded-md p-2 border border-emerald-100\"\n                  data-testid={`labor-rate-${idx}`}\n                >\n                  <div className=\"text-xs text-slate-600 truncate\" title={item.name}>\n                    {item.name}\n                  </div>\n                  <div className=\"text-sm font-bold text-emerald-700\">\n                    {formatCurrency(item.hourlyRate)}/hr\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <p className=\"text-[10px] text-emerald-600/70 pt-1 border-t border-emerald-100\">\n          Powered by 1build â€¢ Updated pricing for 3,000+ US counties\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":5082,"size_tokens":null},"client/src/components/market-pricing-widget.tsx":{"content":"import { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { useCostServiceStatus, useTradePricing } from \"@/hooks/use-cost-data\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, TrendingUp, DollarSign, Hammer, MapPin, ArrowRight } from \"lucide-react\";\n\nconst trades = [\n  { id: \"bathroom\", label: \"Bathroom Remodel\" },\n  { id: \"kitchen\", label: \"Kitchen Remodel\" },\n  { id: \"roofing\", label: \"Roofing\" },\n  { id: \"plumbing\", label: \"Plumbing\" },\n  { id: \"electrical\", label: \"Electrical\" },\n  { id: \"hvac\", label: \"HVAC\" },\n  { id: \"painting\", label: \"Painting\" },\n  { id: \"flooring\", label: \"Flooring\" },\n  { id: \"drywall\", label: \"Drywall\" },\n];\n\nfunction formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(amount);\n}\n\nexport function MarketPricingWidget() {\n  const [selectedTrade, setSelectedTrade] = useState(\"\");\n  const [zipcode, setZipcode] = useState(\"\");\n  \n  const { data: status } = useCostServiceStatus();\n  const isValidZip = /^\\d{5}$/.test(zipcode);\n  \n  const { data: pricing, isLoading, error } = useTradePricing(\n    selectedTrade,\n    isValidZip ? zipcode : \"\"\n  );\n\n  if (!status?.available) {\n    return null;\n  }\n\n  const hasMaterials = pricing?.materials && pricing.materials.length > 0;\n  const hasLabor = pricing?.labor && pricing.labor.length > 0;\n  const hasResults = hasMaterials || hasLabor;\n\n  return (\n    <Card className=\"border-none shadow-sm bg-gradient-to-br from-emerald-50/50 to-teal-50/50\" data-testid=\"market-pricing-widget\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-base font-bold text-slate-800 flex items-center gap-2\">\n            <TrendingUp className=\"w-4 h-4 text-emerald-600\" />\n            Market Pricing Insights\n          </CardTitle>\n          <Badge variant=\"secondary\" className=\"bg-emerald-100 text-emerald-700 text-[10px]\">\n            Live Data\n          </Badge>\n        </div>\n        <p className=\"text-xs text-slate-500\">\n          Check real-time material & labor costs for any trade\n        </p>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"grid grid-cols-2 gap-3\">\n          <div>\n            <label className=\"text-xs font-medium text-slate-600 mb-1 block\">Trade</label>\n            <Select value={selectedTrade} onValueChange={setSelectedTrade}>\n              <SelectTrigger className=\"h-9 text-sm bg-white\" data-testid=\"widget-select-trade\">\n                <SelectValue placeholder=\"Select trade\" />\n              </SelectTrigger>\n              <SelectContent>\n                {trades.map((trade) => (\n                  <SelectItem key={trade.id} value={trade.id}>\n                    {trade.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          <div>\n            <label className=\"text-xs font-medium text-slate-600 mb-1 block\">ZIP Code</label>\n            <div className=\"relative\">\n              <MapPin className=\"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400\" />\n              <Input\n                placeholder=\"e.g. 77001\"\n                value={zipcode}\n                onChange={(e) => setZipcode(e.target.value.replace(/\\D/g, '').slice(0, 5))}\n                className=\"h-9 pl-8 text-sm bg-white\"\n                data-testid=\"widget-input-zipcode\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {isLoading && selectedTrade && isValidZip && (\n          <div className=\"flex items-center justify-center gap-2 py-4 text-emerald-600\">\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n            <span className=\"text-sm\">Loading pricing data...</span>\n          </div>\n        )}\n\n        {!isLoading && selectedTrade && isValidZip && hasResults && (\n          <div className=\"space-y-3 animate-in fade-in slide-in-from-bottom-2\">\n            {hasMaterials && (\n              <div className=\"bg-white/80 rounded-lg p-3 border border-emerald-100\">\n                <div className=\"flex items-center gap-1.5 mb-2\">\n                  <DollarSign className=\"w-3.5 h-3.5 text-emerald-600\" />\n                  <span className=\"text-xs font-semibold text-emerald-700 uppercase tracking-wide\">\n                    Top Materials\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {pricing.materials.slice(0, 4).map((item, idx) => (\n                    <div \n                      key={idx} \n                      className=\"text-xs\"\n                      data-testid={`widget-material-${idx}`}\n                    >\n                      <div className=\"text-slate-500 truncate\" title={item.name}>\n                        {item.name}\n                      </div>\n                      <div className=\"font-bold text-slate-800\">\n                        {formatCurrency(item.cost)}/{item.unit}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {hasLabor && (\n              <div className=\"bg-white/80 rounded-lg p-3 border border-emerald-100\">\n                <div className=\"flex items-center gap-1.5 mb-2\">\n                  <Hammer className=\"w-3.5 h-3.5 text-emerald-600\" />\n                  <span className=\"text-xs font-semibold text-emerald-700 uppercase tracking-wide\">\n                    Labor Rates\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {pricing.labor.slice(0, 4).map((item, idx) => (\n                    <div \n                      key={idx} \n                      className=\"text-xs\"\n                      data-testid={`widget-labor-${idx}`}\n                    >\n                      <div className=\"text-slate-500 truncate\" title={item.name}>\n                        {item.name}\n                      </div>\n                      <div className=\"font-bold text-slate-800\">\n                        {formatCurrency(item.hourlyRate)}/hr\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <Link href=\"/app\" className=\"w-full\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"w-full gap-2 text-emerald-700 border-emerald-200 hover:bg-emerald-50\"\n                data-testid=\"widget-create-proposal\"\n              >\n                Create Proposal with These Prices\n                <ArrowRight className=\"w-3.5 h-3.5\" />\n              </Button>\n            </Link>\n          </div>\n        )}\n\n        {!isLoading && selectedTrade && isValidZip && !hasResults && !error && (\n          <div className=\"text-center py-3 text-slate-400 text-sm\">\n            No pricing data available for this location\n          </div>\n        )}\n\n        {!selectedTrade && !zipcode && (\n          <div className=\"text-center py-2 text-slate-400 text-xs\">\n            Select a trade and enter ZIP to see pricing\n          </div>\n        )}\n\n        <p className=\"text-[10px] text-slate-400 text-center\">\n          Powered by 1build â€¢ 3,000+ US counties\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":7704,"size_tokens":null},"client/src/pages/market-pricing.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport Layout from \"@/components/layout\";\nimport { useCostServiceStatus, useTradePricing, useCostUsage, LimitReachedError } from \"@/hooks/use-cost-data\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { Loader2, TrendingUp, DollarSign, Hammer, MapPin, ArrowRight, Database, Sparkles, Lock, Crown, AlertTriangle } from \"lucide-react\";\n\nconst trades = [\n  { id: \"bathroom\", label: \"Bathroom Remodel\" },\n  { id: \"kitchen\", label: \"Kitchen Remodel\" },\n  { id: \"roofing\", label: \"Roofing\" },\n  { id: \"plumbing\", label: \"Plumbing\" },\n  { id: \"electrical\", label: \"Electrical\" },\n  { id: \"hvac\", label: \"HVAC\" },\n  { id: \"painting\", label: \"Painting\" },\n  { id: \"flooring\", label: \"Flooring\" },\n  { id: \"drywall\", label: \"Drywall\" },\n];\n\nfunction formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(amount);\n}\n\nexport default function MarketPricing() {\n  const [selectedTrade, setSelectedTrade] = useState(\"\");\n  const [zipcode, setZipcode] = useState(\"\");\n  \n  // Fetch user data to check subscription\n  const { data: user, isLoading: userLoading } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/auth/user\");\n      if (!res.ok) return null;\n      return res.json();\n    },\n    retry: false,\n  });\n  \n  const { data: status, isLoading: statusLoading } = useCostServiceStatus();\n  const { data: usage, refetch: refetchUsage } = useCostUsage();\n  const isValidZip = /^\\d{5}$/.test(zipcode);\n  \n  // Pro/Crew users have unlimited access, free users get 3 trial lookups\n  const hasSubscription = user?.subscriptionPlan === 'pro' || user?.subscriptionPlan === 'crew';\n  const hasRemainingLookups = hasSubscription || (usage?.remaining ?? 0) > 0;\n  \n  const { data: pricing, isLoading, error } = useTradePricing(\n    hasRemainingLookups ? selectedTrade : \"\",\n    hasRemainingLookups && isValidZip ? zipcode : \"\"\n  );\n\n  const hasMaterials = pricing?.materials && pricing.materials.length > 0;\n  const hasLabor = pricing?.labor && pricing.labor.length > 0;\n  const hasResults = hasMaterials || hasLabor;\n  \n  // Check if limit was reached\n  const limitReached = error instanceof LimitReachedError || (usage && !hasSubscription && usage.remaining <= 0);\n\n  // Refetch usage when we get results (a lookup was used)\n  useEffect(() => {\n    if (hasResults && !hasSubscription) {\n      refetchUsage();\n    }\n  }, [hasResults, hasSubscription, refetchUsage]);\n\n  const selectedTradeName = trades.find(t => t.id === selectedTrade)?.label || \"\";\n\n  return (\n    <Layout>\n      <div className=\"bg-gradient-to-br from-slate-50 to-emerald-50/30 min-h-screen\">\n        <div className=\"container mx-auto px-4 py-8 md:py-12\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-8\">\n              <div className=\"inline-flex items-center gap-2 bg-emerald-100 text-emerald-700 px-4 py-2 rounded-full text-sm font-medium mb-4\">\n                <Database className=\"w-4 h-4\" />\n                Powered by 1build\n              </div>\n              <h1 className=\"text-3xl md:text-4xl font-heading font-bold text-slate-900 mb-3\">\n                Market Pricing Insights\n              </h1>\n              <p className=\"text-lg text-slate-600 max-w-2xl mx-auto\">\n                Look up real-time material costs and labor rates for any trade in your area. \n                Data covers 3,000+ US counties.\n              </p>\n              \n              {hasSubscription ? (\n                <div className=\"mt-4 inline-flex items-center gap-2 bg-emerald-50 border border-emerald-200 text-emerald-700 px-4 py-2 rounded-full text-sm font-medium\" data-testid=\"pro-badge\">\n                  <Crown className=\"w-4 h-4\" />\n                  Unlimited lookups with {user?.subscriptionPlan === 'crew' ? 'Crew' : 'Pro'}\n                </div>\n              ) : usage && (\n                <div className=\"mt-4 inline-flex items-center gap-2 bg-amber-50 border border-amber-200 text-amber-800 px-4 py-2 rounded-full text-sm font-medium\" data-testid=\"usage-indicator\">\n                  <Sparkles className=\"w-4 h-4\" />\n                  {usage.remaining > 0 ? (\n                    <>Free trial: <strong>{usage.remaining} of {usage.limit}</strong> lookups remaining</>\n                  ) : (\n                    <>Free trial complete - upgrade for unlimited access</>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {(statusLoading || userLoading) ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-emerald-600\" />\n              </div>\n            ) : !status?.available ? (\n              <Card className=\"border-red-200 bg-red-50\">\n                <CardContent className=\"py-8 text-center\">\n                  <p className=\"text-red-700\">Market pricing data is currently unavailable. Please try again later.</p>\n                </CardContent>\n              </Card>\n            ) : !user ? (\n              <Card className=\"shadow-lg border-0 overflow-hidden\" data-testid=\"login-card\">\n                <CardHeader className=\"bg-gradient-to-r from-emerald-600 to-teal-600 text-white\">\n                  <CardTitle className=\"flex items-center gap-2 text-lg\">\n                    <Sparkles className=\"w-5 h-5\" />\n                    Try Market Pricing Free\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-8 text-center\">\n                  <TrendingUp className=\"w-16 h-16 mx-auto mb-4 text-emerald-500\" />\n                  <h3 className=\"text-xl font-bold text-slate-900 mb-2\">Get 3 Free Lookups</h3>\n                  <p className=\"text-slate-600 mb-6 max-w-md mx-auto\">\n                    Sign in to access real-time material costs and labor rates for your area. Try it free with 3 lookups.\n                  </p>\n                  <a href=\"/api/login\">\n                    <Button className=\"gap-2 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700\" data-testid=\"button-login\">\n                      <ArrowRight className=\"w-4 h-4\" />\n                      Sign In to Start Free Trial\n                    </Button>\n                  </a>\n                  <p className=\"text-sm text-slate-500 mt-4\">\n                    No credit card required for free trial\n                  </p>\n                </CardContent>\n              </Card>\n            ) : limitReached ? (\n              <Card className=\"shadow-lg border-0 overflow-hidden\" data-testid=\"upgrade-card\">\n                <CardHeader className=\"bg-gradient-to-r from-amber-500 to-orange-500 text-white\">\n                  <CardTitle className=\"flex items-center gap-2 text-lg\">\n                    <Lock className=\"w-5 h-5\" />\n                    Free Trial Complete\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-8 text-center\">\n                  <Crown className=\"w-16 h-16 mx-auto mb-4 text-amber-500\" />\n                  <h3 className=\"text-xl font-bold text-slate-900 mb-2\">You've Used All 3 Free Lookups</h3>\n                  <p className=\"text-slate-600 mb-6 max-w-md mx-auto\">\n                    Love the market pricing data? Upgrade to Pro for unlimited lookups and get real-time material costs and labor rates for every quote.\n                  </p>\n                  <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                    <Link href=\"/settings\">\n                      <Button className=\"gap-2 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600\" data-testid=\"button-upgrade\">\n                        <Crown className=\"w-4 h-4\" />\n                        Upgrade to Pro - $29/mo\n                      </Button>\n                    </Link>\n                  </div>\n                  <p className=\"text-sm text-slate-500 mt-4\">\n                    Pro: Unlimited market pricing + 15 proposals/month\n                  </p>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"space-y-6\">\n                <Card className=\"shadow-lg border-0\" data-testid=\"market-pricing-card\">\n                  <CardHeader className=\"bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-t-lg\">\n                    <CardTitle className=\"flex items-center gap-2 text-lg\">\n                      <TrendingUp className=\"w-5 h-5\" />\n                      Price Lookup\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"p-6\">\n                    <div className=\"grid md:grid-cols-2 gap-4 mb-6\">\n                      <div>\n                        <label className=\"text-sm font-medium text-slate-700 mb-2 block\">\n                          Select Trade\n                        </label>\n                        <Select value={selectedTrade} onValueChange={setSelectedTrade}>\n                          <SelectTrigger className=\"h-12 text-base\" data-testid=\"select-trade\">\n                            <SelectValue placeholder=\"Choose a trade category\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {trades.map((trade) => (\n                              <SelectItem key={trade.id} value={trade.id}>\n                                {trade.label}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      <div>\n                        <label className=\"text-sm font-medium text-slate-700 mb-2 block\">\n                          ZIP Code\n                        </label>\n                        <div className=\"relative\">\n                          <MapPin className=\"absolute left-3 top-3.5 h-5 w-5 text-slate-400\" />\n                          <Input\n                            placeholder=\"Enter 5-digit ZIP code\"\n                            value={zipcode}\n                            onChange={(e) => setZipcode(e.target.value.replace(/\\D/g, '').slice(0, 5))}\n                            className=\"h-12 pl-10 text-base\"\n                            data-testid=\"input-zipcode\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    {!selectedTrade && !zipcode && (\n                      <div className=\"text-center py-8 text-slate-400 border-2 border-dashed border-slate-200 rounded-lg\">\n                        <Sparkles className=\"w-8 h-8 mx-auto mb-2 text-slate-300\" />\n                        <p>Select a trade and enter your ZIP code to see local pricing</p>\n                      </div>\n                    )}\n\n                    {selectedTrade && !isValidZip && zipcode.length > 0 && (\n                      <div className=\"text-center py-4 text-amber-600 bg-amber-50 rounded-lg\">\n                        Please enter a valid 5-digit ZIP code\n                      </div>\n                    )}\n\n                    {isLoading && selectedTrade && isValidZip && (\n                      <div className=\"flex items-center justify-center gap-3 py-12\">\n                        <Loader2 className=\"w-6 h-6 animate-spin text-emerald-600\" />\n                        <span className=\"text-slate-600\">Loading {selectedTradeName} pricing for {zipcode}...</span>\n                      </div>\n                    )}\n\n                    {!isLoading && selectedTrade && isValidZip && hasResults && (\n                      <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4\">\n                        <div className=\"flex items-center gap-2 mb-4\">\n                          <Badge className=\"bg-emerald-100 text-emerald-700 hover:bg-emerald-100\">\n                            {selectedTradeName}\n                          </Badge>\n                          <Badge variant=\"outline\" className=\"border-emerald-200 text-emerald-700\">\n                            ZIP {zipcode}\n                          </Badge>\n                        </div>\n\n                        {hasMaterials && (\n                          <div>\n                            <h3 className=\"flex items-center gap-2 text-lg font-semibold text-slate-800 mb-4\">\n                              <DollarSign className=\"w-5 h-5 text-emerald-600\" />\n                              Material Costs\n                            </h3>\n                            <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                              {pricing.materials.map((item, idx) => (\n                                <div \n                                  key={idx} \n                                  className=\"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\n                                  data-testid={`material-${idx}`}\n                                >\n                                  <div className=\"text-sm text-slate-500 mb-1 capitalize\">\n                                    {item.name}\n                                  </div>\n                                  <div className=\"text-xl font-bold text-slate-900\">\n                                    {formatCurrency(item.cost)}\n                                    <span className=\"text-sm font-normal text-slate-500\">/{item.unit}</span>\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        {hasLabor && (\n                          <div>\n                            <h3 className=\"flex items-center gap-2 text-lg font-semibold text-slate-800 mb-4\">\n                              <Hammer className=\"w-5 h-5 text-emerald-600\" />\n                              Labor Rates\n                            </h3>\n                            <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                              {pricing.labor.map((item, idx) => (\n                                <div \n                                  key={idx} \n                                  className=\"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\n                                  data-testid={`labor-${idx}`}\n                                >\n                                  <div className=\"text-sm text-slate-500 mb-1 capitalize\">\n                                    {item.name}\n                                  </div>\n                                  <div className=\"text-xl font-bold text-slate-900\">\n                                    {formatCurrency(item.hourlyRate)}\n                                    <span className=\"text-sm font-normal text-slate-500\">/hr</span>\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        <div className=\"pt-4 border-t border-slate-200\">\n                          <Link href=\"/app\">\n                            <Button className=\"w-full md:w-auto gap-2 bg-emerald-600 hover:bg-emerald-700\" data-testid=\"button-create-proposal\">\n                              Create Proposal with These Prices\n                              <ArrowRight className=\"w-4 h-4\" />\n                            </Button>\n                          </Link>\n                        </div>\n                      </div>\n                    )}\n\n                    {!isLoading && selectedTrade && isValidZip && !hasResults && !error && (\n                      <div className=\"text-center py-8 text-slate-400 bg-slate-50 rounded-lg\">\n                        <p>No pricing data available for {selectedTradeName} in ZIP {zipcode}</p>\n                        <p className=\"text-sm mt-2\">Try a different ZIP code or trade</p>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                <div className=\"text-center text-sm text-slate-500\">\n                  <p>Pricing data provided by 1build.com - updated regularly across 3,000+ US counties</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n","path":null,"size_bytes":16974,"size_tokens":null}},"version":2}